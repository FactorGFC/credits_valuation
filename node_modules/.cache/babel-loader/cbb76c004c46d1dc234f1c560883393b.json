{"ast":null,"code":"function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport swal from 'sweetalert';\nimport $ from 'jquery';\nimport I18n from 'i18n-js';\nimport 'bootstrap';\nimport 'select2'; // from 'select2';\n\nimport 'javascripts/i18n/translations';\nimport { toastr } from './notifications';\nI18n.locale = window.I18n.locale;\ndocument.addEventListener(\"turbolinks:before-cache\", function () {\n  $('[data-toggle=\"m-tooltip\"]').tooltip('hide');\n  $('.selectpicker').selectpicker('destroy');\n});\n$(document).on('turbolinks:load', function () {\n  // $('.select2-tag').select2({\n  //     placeholder: 'Agregar tags...',\n  //     tokenSeparators: [',', '\\\\n'],\n  //     width: '100%',\n  //     tags: true,\n  //     selectOnBlur: true,\n  //     selectOnClose: false,\n  //     closeOnSelect: true,\n  //     ajax: {\n  //         url: '/business/search_tags',\n  //         dataType: 'json',\n  //         data: function (term, page) {\n  //             return term;\n  //         },\n  //         processResults: function (data, page) {\n  //             return {\n  //                 results: data.map(function (e, i) {\n  //                     return {id: e, text: e}\n  //                 })\n  //             }\n  //         }\n  //     }\n  // });\n  $('.loading-screen').hide();\n  $('.dir').click(function (e) {\n    e.stopPropagation();\n    $(this).children().slideToggle();\n  });\n  $('li').on('click', function () {\n    $(this).siblings().removeClass('active');\n    $(this).addClass('active');\n  }); // Custom search field for table content\n\n  $('.search-field').on('change', function () {\n    var $this = $(this);\n    $this.toggleClass('expand-input', $this.val() ? true : false);\n  });\n  $('[data-toggle=\"tooltip\"]').tooltip(); // Sweet Alert modal for delete elements\n\n  $('.btn-destroy').click(function (event) {\n    var element, resource, resourceId, resourceMsg, row, url, authenticityToken;\n    element = $(this);\n    row = element.closest('tr');\n    resource = element.data('resource');\n    resourceId = element.data('resource-id');\n    resourceMsg = element.data('resource-message');\n    url = \"/\".concat(resource, \"/\").concat(resourceId);\n    authenticityToken = $('[name=\"csrf-token\"]')[0] && $('[name=\"csrf-token\"]')[0].content;\n    swal(resourceMsg, {\n      buttons: {\n        cancel: I18n.t('messages.cancel'),\n        confirm: {\n          text: I18n.t('messages.delete'),\n          closeModal: true\n        }\n      }\n    }).then(function (isConfirm) {\n      if (!isConfirm) {\n        return;\n      }\n\n      $.ajax({\n        url: url,\n        data: {\n          authenticity_token: authenticityToken\n        },\n        type: 'DELETE',\n        dataType: 'json',\n        success: function success(data) {\n          swal({\n            title: I18n.t('messages.done'),\n            text: I18n.t('messages.deleted'),\n            type: 'success',\n            confirmButtonText: I18n.t('messages.ok')\n          });\n          $(row).remove();\n        },\n        error: function error(_error) {\n          var message = I18n.t('messages.try_again');\n\n          if (_error.responseJSON && _error.responseJSON.message) {\n            message = _error.responseJSON.message;\n          }\n\n          swal(I18n.t('messages.error'), message, 'error');\n        }\n      });\n    });\n  }); // bootstrap-select initializer\n\n  $('.selectpicker, .per-page-selectpicker').selectpicker(); // select2 initializer\n\n  $('.select2-multiple').select2({\n    placeholder: \"Productos\",\n    multiple: true,\n    theme: \"classic\" //dropdownParent: $('#m_modal_2')\n    //theme: 'bootstrap4',\n    //closeOnSelect: false,\n\n  });\n  $('.select2').select2({\n    placeholder: \"Selecciona periodos\",\n    multiple: true,\n    theme: \"classic\",\n    tags: true\n  }); // Submit for elements per page on tables\n\n  $('.per-page-pagination').on('change', function () {\n    $(this).closest('form').submit();\n  }); // Simulate click for file_field on edit user\n\n  $('.hover-image').on('click', function () {\n    $('.update-picture').click();\n  }); // Replace profile picture on edit user\n\n  $('.update-picture').on('change', function () {\n    readURL(this);\n  });\n  $('.price').blur(function () {\n    var sum = 0;\n    document.getElementById(\"totalId\").value = 0;\n    $('.price').each(function () {\n      sum += Number($(this).val());\n    });\n    document.getElementById(\"totalId\").value = sum;\n  }); // console.log(document.getElementById(\"idStepOne\"));\n  // console.log(document.getElementById(\"idStepOne\").value);\n\n  $('#idFile').bind(\"change\", function () {});\n\n  function fileEntrante() {\n    var fileInput = document.getElementById(\"idFileEntrante\");\n\n    try {\n      if (fileInput.files[0].size > 2000000) {\n        swal({\n          title: \"Archivo demasiado grande\",\n          text: \"El archivo debe pesar menos de 2mb\",\n          icon: 'warning',\n          button: I18n.t('messages.ok')\n        });\n        document.getElementById(\"idFileEntrante\").value = null;\n      }\n    } catch (e) {}\n  }\n\n  ; // $('#idFileEnlace').on(\"change\", fileEnlace);\n\n  window.validate_files = function () {\n    var idFile = document.getElementById(\"idFile\").value;\n    var constancyFile = document.getElementById(\"constancyFile\").value;\n    var financialStatementsOneFile = document.getElementById(\"financialStatementsOneFile\").value;\n    var financialStatementsTwoFile = document.getElementById(\"financialStatementsTwoFile\").value;\n    var financialStatementsParcialFile = document.getElementById(\"financialStatementsParcialFile\").value;\n\n    if (idFile && constancyFile && financialStatementsOneFile && financialStatementsTwoFile && financialStatementsParcialFile) {\n      $('#filesBtn').attr('class', 'btn btn-primary col-xl-12');\n    }\n  };\n\n  if (document.getElementById(\"idStepOne\")) {\n    var stepOne = document.getElementById(\"idStepOne\").value;\n    var stepTwo = document.getElementById(\"idStepTwo\").value;\n    var stepThree = document.getElementById(\"idStepThree\").value;\n    var stepFour = document.getElementById(\"idStepFour\").value;\n    var stepFive = document.getElementById(\"idStepFive\").value;\n    var stepSix = document.getElementById(\"idStepSix\").value;\n  }\n\n  if (!stepOne) {\n    $('#step-0').show();\n    $(\"#buttonCero\").hide();\n  }\n\n  if (stepOne && !stepTwo) {\n    $('#step-1').show();\n    $(\"#buttonOne\").hide();\n  }\n\n  if (stepTwo && !stepThree) {\n    $('#step-2').show();\n    $(\"#buttonTwo\").hide();\n  }\n\n  if (stepThree && !stepFour) {\n    $('#step-3').show();\n    $(\"#buttonThree\").hide();\n  }\n\n  if (stepFour && !stepFive) {\n    $('#step-4').show();\n    $(\"#buttonFour\").hide();\n  }\n\n  if (stepFive && !stepSix) {\n    $('#step-5').show();\n    $(\"#buttonFive\").hide();\n  }\n\n  if (stepSix) {\n    $('#step-6').show();\n    $('#filesBtn').attr('class', 'btn btn-primary col-xl-12 btn-section-disabled');\n  }\n\n  window.prevPageNew = function (prev, current) {\n    $(\"#step-\" + current).hide();\n    $(\"#step-\" + prev).show();\n  };\n\n  window.nextPageNew = function (next, current) {\n    $(\"#step-\" + current).hide();\n    $(\"#step-\" + next).show();\n  };\n\n  window.prevPage = function (prev, current) {\n    document.getElementById(\"page-\" + prev).style.display = \"block\";\n    document.getElementById(\"page-\" + current).style.display = \"none\";\n    document.getElementById(\"step\" + current).style.opacity = 0.5;\n    $(\"#step\" + prev).removeClass('completed').addClass('active');\n    $(\"#ind\" + prev).removeClass('active');\n    $(\"#step\" + current).removeClass('completed').removeClass('active');\n    $(\"#step\" + prev + \" > .step-icon\").html(prev);\n    $(\"#stepDesc\" + current).addClass('inactive');\n  };\n\n  window.nextPage = function (next, current) {\n    document.getElementById(\"page-\" + next).style.display = \"block\";\n    document.getElementById(\"page-\" + current).style.display = \"none\";\n    document.getElementById(\"step\" + next).style.opacity = 1;\n    $(\"#step\" + next).addClass('active');\n    $(\"#stepDesc\" + next).removeClass('inactive');\n    $(\"#step\" + current).addClass('completed').removeClass('active');\n    $(\"#ind\" + current).addClass('active');\n    $(\"#step\" + current + \" > .step-icon\").html(\"<i class='fa fa-check' aria-hidden='true'></i>\");\n  };\n\n  $('input.focusable-input').focus(function () {\n    $(this).parent().parent().addClass('highlightedRowColumn');\n    var colIdx = $(this).closest(\"td\").index();\n    $(\"td:nth-child(\" + (colIdx + 1) + \")\").addClass('highlightedRowColumn');\n  });\n  $('input.focusable-input').blur(function () {\n    $(this).parent().parent().removeClass('highlightedRowColumn');\n    var colIdx = $(this).closest(\"td\").index();\n    $(\"td:nth-child(\" + (colIdx + 1) + \")\").removeClass('highlightedRowColumn');\n  });\n  $(document).ready(function () {\n    $(\"td\").filter(function (index) {\n      return $(this).html() == \"0\";\n    }).parent().addClass(\"zero\");\n  });\n  $(\"td:contains('1')\").parent().addClass(\"one\");\n\n  window.hide_show_table = function (col_name) {\n    var checkbox_val = document.getElementById(col_name).value;\n\n    if (checkbox_val == \"hide\") {\n      var all_col = document.getElementsByClassName(col_name);\n\n      for (var i = 0; i < all_col.length; i++) {\n        all_col[i].style.display = \"none\";\n      }\n\n      document.getElementById(col_name + \"_head\").style.display = \"none\";\n      document.getElementById(col_name).value = \"show\";\n    } else {\n      var all_col = document.getElementsByClassName(col_name);\n\n      for (var i = 0; i < all_col.length; i++) {\n        all_col[i].style.display = \"table-cell\";\n      }\n\n      document.getElementById(col_name + \"_head\").style.display = \"table-cell\";\n      document.getElementById(col_name).value = \"hide\";\n    }\n  }; // CHANGE SELECTOR FOR CALENDAR IN CALENDAR_PERIOD //\n\n\n  loadSelectPeriod($('#calendar_period').val());\n  $('#calendar_period').on('change', function () {\n    var period_type = $('#calendar_period').val();\n    var array = [];\n\n    if (period_type === 'mensual') {\n      array.push('<option value=\"enero\">Enero</option>');\n      array.push('<option value=\"febrero\">Febrero</option>');\n      array.push('<option value=\"marzo\">Marzo</option>');\n      array.push('<option value=\"abril\">Abril</option>');\n      array.push('<option value=\"mayo\">Mayo</option>');\n      array.push('<option value=\"junio\">Junio</option>');\n      array.push('<option value=\"julio\">Julio</option>');\n      array.push('<option value=\"agosto\">Agosto</option>');\n      array.push('<option value=\"septiembre\">Septiembre</option>');\n      array.push('<option value=\"octubre\">Octubre</option>');\n      array.push('<option value=\"noviembre\">Noviembre</option>');\n      array.push('<option value=\"diciembre\">Diciembre</option>');\n    } else if (period_type === 'trimestral') {\n      array.push('<option value=\"1_trimestre\">1 Trimestre</option>');\n      array.push('<option value=\"2_trimestre\">2 Trimestre</option>');\n      array.push('<option value=\"3_trimestre\">3 Trimestre</option>');\n      array.push('<option value=\"4_trimestre\">4 Trimestre</option>');\n    }\n\n    $('#period_selector').empty().append(array.join(''));\n  });\n});\n\nvar readURL = function readURL(input) {\n  if (input.files[0]) {\n    var reader = new FileReader();\n    var ext = getFileExtension(input.files[0].name);\n    var validImageTypes = ['gif', 'jpeg', 'png', 'jpg'];\n\n    if (validImageTypes.includes(ext)) {\n      reader.readAsDataURL(input.files[0]);\n    }\n  }\n\n  reader.onload = function (e) {\n    $('.profile-picture').attr('src', e.target.result);\n    $('.profile-picture').attr('style', 'object-fit:cover; width:130px; height:130px;');\n  };\n};\n\nvar getFileExtension = function getFileExtension(filename) {\n  return filename.split('.').pop();\n};\n\nvar cascadeSelects = function cascadeSelects(source, destination, url) {\n  var ajaxRequest = function ajaxRequest(resource, edit) {\n    if (resource !== '') {\n      $.get(url, {\n        resource: resource\n      }, function (data) {\n        destination.empty();\n\n        if (data.length > 0) {\n          var _iterator = _createForOfIteratorHelper(data),\n              _step;\n\n          try {\n            for (_iterator.s(); !(_step = _iterator.n()).done;) {\n              var action = _step.value;\n              destination.append($('<option>', {\n                value: action[0],\n                text: action[1]\n              }));\n            }\n          } catch (err) {\n            _iterator.e(err);\n          } finally {\n            _iterator.f();\n          }\n\n          edit && destination.val(destination.data('value'));\n        } else {\n          destination.append($('<option>', {\n            value: '',\n            text: I18n.t('helpers.select.no_options')\n          }));\n        }\n\n        $('.selectpicker').selectpicker('refresh');\n      }).fail(function () {\n        toastr.warning(I18n.t('messages.try_again'));\n      });\n    }\n  };\n\n  ajaxRequest(source.val(), true);\n  source.on('change', function (e) {\n    var resource = $(e.target).val();\n    ajaxRequest(resource, false);\n  });\n};\n\nvar loadSelectPeriod = function loadSelectPeriod(period_type) {\n  var array = [];\n\n  if (period_type === 'mensual') {\n    array.push('<option value=\"enero\">Enero</option>');\n    array.push('<option value=\"febrero\">Febrero</option>');\n    array.push('<option value=\"marzo\">Marzo</option>');\n    array.push('<option value=\"abril\">Abril</option>');\n    array.push('<option value=\"mayo\">Mayo</option>');\n    array.push('<option value=\"junio\">Junio</option>');\n    array.push('<option value=\"julio\">Julio</option>');\n    array.push('<option value=\"agosto\">Agosto</option>');\n    array.push('<option value=\"septiembre\">Septiembre</option>');\n    array.push('<option value=\"octubre\">Octubre</option>');\n    array.push('<option value=\"noviembre\">Noviembre</option>');\n    array.push('<option value=\"diciembre\">Diciembre</option>');\n  } else if (period_type === 'trimestral') {\n    array.push('<option value=\"1_trimestre\">1 Trimestre</option>');\n    array.push('<option value=\"2_trimestre\">2 Trimestre</option>');\n    array.push('<option value=\"3_trimestre\">3 Trimestre</option>');\n    array.push('<option value=\"4_trimestre\">4 Trimestre</option>');\n  }\n\n  $('#period_selector').empty().append(array.join(''));\n};\n\nexport { cascadeSelects };","map":{"version":3,"sources":["/Users/vponce/Desarrollos/credits_factor_global/app/javascript/packs/general.js"],"names":["swal","$","I18n","toastr","locale","window","document","addEventListener","tooltip","selectpicker","on","hide","click","e","stopPropagation","children","slideToggle","siblings","removeClass","addClass","$this","toggleClass","val","event","element","resource","resourceId","resourceMsg","row","url","authenticityToken","closest","data","content","buttons","cancel","t","confirm","text","closeModal","then","isConfirm","ajax","authenticity_token","type","dataType","success","title","confirmButtonText","remove","error","message","responseJSON","select2","placeholder","multiple","theme","tags","submit","readURL","blur","sum","getElementById","value","each","Number","bind","fileEntrante","fileInput","files","size","icon","button","validate_files","idFile","constancyFile","financialStatementsOneFile","financialStatementsTwoFile","financialStatementsParcialFile","attr","stepOne","stepTwo","stepThree","stepFour","stepFive","stepSix","show","prevPageNew","prev","current","nextPageNew","next","prevPage","style","display","opacity","html","nextPage","focus","parent","colIdx","index","ready","filter","hide_show_table","col_name","checkbox_val","all_col","getElementsByClassName","i","length","loadSelectPeriod","period_type","array","push","empty","append","join","input","reader","FileReader","ext","getFileExtension","name","validImageTypes","includes","readAsDataURL","onload","target","result","filename","split","pop","cascadeSelects","source","destination","ajaxRequest","edit","get","action","fail","warning"],"mappings":"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","sourcesContent":["import swal from 'sweetalert';\nimport $ from 'jquery';\nimport I18n from 'i18n-js';\nimport 'bootstrap';\nimport 'select2';// from 'select2';\nimport 'javascripts/i18n/translations';\nimport {toastr} from './notifications';\n\nI18n.locale = window.I18n.locale;\n\ndocument.addEventListener(\"turbolinks:before-cache\", function () {\n    $('[data-toggle=\"m-tooltip\"]').tooltip('hide');\n    $('.selectpicker').selectpicker('destroy');\n});\n\n$(document).on('turbolinks:load', function () {\n\n    // $('.select2-tag').select2({\n    //     placeholder: 'Agregar tags...',\n    //     tokenSeparators: [',', '\\\\n'],\n    //     width: '100%',\n    //     tags: true,\n    //     selectOnBlur: true,\n    //     selectOnClose: false,\n    //     closeOnSelect: true,\n    //     ajax: {\n    //         url: '/business/search_tags',\n    //         dataType: 'json',\n    //         data: function (term, page) {\n    //             return term;\n    //         },\n    //         processResults: function (data, page) {\n    //             return {\n    //                 results: data.map(function (e, i) {\n    //                     return {id: e, text: e}\n    //                 })\n    //             }\n    //         }\n    //     }\n    // });\n\n    $('.loading-screen').hide();\n\n    $('.dir').click(function (e) {\n        e.stopPropagation();\n        $(this).children().slideToggle();\n    });\n\n    $('li').on('click', function () {\n        $(this).siblings().removeClass('active');\n        $(this).addClass('active');\n    });\n\n    // Custom search field for table content\n    $('.search-field').on('change', function () {\n        let $this = $(this);\n        $this.toggleClass('expand-input', $this.val() ? true : false);\n    });\n\n    $('[data-toggle=\"tooltip\"]').tooltip();\n\n    // Sweet Alert modal for delete elements\n    $('.btn-destroy').click(function (event) {\n        let element, resource, resourceId, resourceMsg, row, url, authenticityToken;\n        element = $(this);\n        row = element.closest('tr');\n        resource = element.data('resource');\n        resourceId = element.data('resource-id');\n        resourceMsg = element.data('resource-message');\n        url = `/${resource}/${resourceId}`;\n        authenticityToken = $('[name=\"csrf-token\"]')[0] && $('[name=\"csrf-token\"]')[0].content;\n        swal(resourceMsg, {\n            buttons: {\n                cancel: I18n.t('messages.cancel'),\n                confirm: {\n                    text: I18n.t('messages.delete'),\n                    closeModal: true\n                }\n            }\n        }).then(function (isConfirm) {\n            if (!isConfirm) {\n                return;\n            }\n            $.ajax({\n                url: url,\n                data: {authenticity_token: authenticityToken},\n                type: 'DELETE',\n                dataType: 'json',\n                success: function (data) {\n                    swal({\n                        title: I18n.t('messages.done'),\n                        text: I18n.t('messages.deleted'),\n                        type: 'success',\n                        confirmButtonText: I18n.t('messages.ok')\n                    });\n                    $(row).remove();\n                },\n                error: function (error) {\n                    let message = I18n.t('messages.try_again');\n                    if (error.responseJSON && error.responseJSON.message) {\n                        message = error.responseJSON.message;\n                    }\n                    swal(I18n.t('messages.error'), message, 'error');\n                }\n            });\n        });\n    });\n\n    // bootstrap-select initializer\n    $('.selectpicker, .per-page-selectpicker').selectpicker();\n\n    // select2 initializer\n    $('.select2-multiple').select2({\n        placeholder: \"Productos\",\n        multiple: true,\n        theme: \"classic\"\n        //dropdownParent: $('#m_modal_2')\n        //theme: 'bootstrap4',\n        //closeOnSelect: false,\n    });\n\n    $('.select2').select2({\n        placeholder: \"Selecciona periodos\",\n        multiple: true,\n        theme: \"classic\",\n        tags: true\n    });\n\n    // Submit for elements per page on tables\n    $('.per-page-pagination').on('change', function () {\n        $(this).closest('form').submit();\n    });\n\n    // Simulate click for file_field on edit user\n    $('.hover-image').on('click', function () {\n        $('.update-picture').click();\n    });\n\n    // Replace profile picture on edit user\n    $('.update-picture').on('change', function () {\n        readURL(this);\n    });\n\n    $('.price').blur(function () {\n        var sum = 0;\n        document.getElementById(\"totalId\").value = 0;\n\n        $('.price').each(function () {\n            sum += Number($(this).val());\n        });\n\n        document.getElementById(\"totalId\").value = sum;\n\n    });\n\n    // console.log(document.getElementById(\"idStepOne\"));\n    // console.log(document.getElementById(\"idStepOne\").value);\n\n    $('#idFile').bind(\"change\", function() {\n    });\n\n    function fileEntrante() {\n\n\n        var fileInput = document.getElementById(\"idFileEntrante\");\n\n        try {\n            if (fileInput.files[0].size > 2000000) {\n                swal({\n                    title: \"Archivo demasiado grande\",\n                    text: \"El archivo debe pesar menos de 2mb\",\n                    icon: 'warning',\n                    button: I18n.t('messages.ok')\n                });\n                document.getElementById(\"idFileEntrante\").value = null;\n\n            }\n        } catch (e) {\n\n        }\n    };\n\n    // $('#idFileEnlace').on(\"change\", fileEnlace);\n\n\n    window.validate_files = function(){\n        var idFile = document.getElementById(\"idFile\").value;\n        var constancyFile = document.getElementById(\"constancyFile\").value;\n        var financialStatementsOneFile = document.getElementById(\"financialStatementsOneFile\").value;\n        var financialStatementsTwoFile = document.getElementById(\"financialStatementsTwoFile\").value;\n        var financialStatementsParcialFile = document.getElementById(\"financialStatementsParcialFile\").value;\n\n        if(idFile && constancyFile && financialStatementsOneFile && financialStatementsTwoFile\n            && financialStatementsParcialFile){\n            $('#filesBtn').attr('class', 'btn btn-primary col-xl-12');\n        }\n\n\n\n    };\n\n    if(document.getElementById(\"idStepOne\")){\n        var stepOne = document.getElementById(\"idStepOne\").value;\n        var stepTwo = document.getElementById(\"idStepTwo\").value;\n        var stepThree = document.getElementById(\"idStepThree\").value;\n        var stepFour = document.getElementById(\"idStepFour\").value;\n        var stepFive = document.getElementById(\"idStepFive\").value;\n        var stepSix = document.getElementById(\"idStepSix\").value;\n\n    }\n\n\n\n    if (!stepOne) {\n        $('#step-0').show();\n        $(\"#buttonCero\").hide();\n    }\n\n    if (stepOne && !stepTwo) {\n        $('#step-1').show();\n        $(\"#buttonOne\").hide();\n    }\n\n    if (stepTwo && !stepThree) {\n        $('#step-2').show();\n        $(\"#buttonTwo\").hide();\n    }\n\n    if (stepThree && !stepFour) {\n        $('#step-3').show();\n        $(\"#buttonThree\").hide();\n    }\n\n    if (stepFour && !stepFive) {\n        $('#step-4').show();\n        $(\"#buttonFour\").hide();\n    }\n\n    if (stepFive && !stepSix) {\n        $('#step-5').show();\n        $(\"#buttonFive\").hide();\n    }\n\n    if (stepSix) {\n        $('#step-6').show();\n        $('#filesBtn').attr('class', 'btn btn-primary col-xl-12 btn-section-disabled');\n    }\n\n\n    window.prevPageNew = function (prev, current) {\n        $(\"#step-\" + current).hide();\n        $(\"#step-\" + prev).show();\n    };\n\n    window.nextPageNew = function (next, current) {\n        $(\"#step-\" + current).hide();\n        $(\"#step-\" + next).show();\n    };\n\n\n    window.prevPage = function (prev, current) {\n        document.getElementById(\"page-\" + prev).style.display = \"block\";\n        document.getElementById(\"page-\" + current).style.display = \"none\";\n        document.getElementById(\"step\" + current).style.opacity = 0.5;\n\n        $(\"#step\" + prev).removeClass('completed').addClass('active');\n        $(\"#ind\" + prev).removeClass('active');\n\n        $(\"#step\" + current).removeClass('completed').removeClass('active');\n        $(\"#step\" + prev + \" > .step-icon\").html(prev);\n\n\n        $(\"#stepDesc\" + current).addClass('inactive');\n    }\n\n    window.nextPage = function (next, current) {\n        document.getElementById(\"page-\" + next).style.display = \"block\";\n        document.getElementById(\"page-\" + current).style.display = \"none\";\n        document.getElementById(\"step\" + next).style.opacity = 1;\n\n        $(\"#step\" + next).addClass('active');\n\n        $(\"#stepDesc\" + next).removeClass('inactive');\n        $(\"#step\" + current).addClass('completed').removeClass('active');\n        $(\"#ind\" + current).addClass('active');\n        $(\"#step\" + current + \" > .step-icon\").html(\"<i class='fa fa-check' aria-hidden='true'></i>\");\n    }\n\n    $('input.focusable-input').focus(function() {\n        $(this).parent().parent().addClass('highlightedRowColumn');\n        var colIdx = $(this).closest(\"td\").index();\n        $(\"td:nth-child(\" + (colIdx +1) + \")\").addClass('highlightedRowColumn');\n    });\n\n    $('input.focusable-input').blur(function() {\n        $(this).parent().parent().removeClass('highlightedRowColumn');\n        var colIdx = $(this).closest(\"td\").index();\n        $(\"td:nth-child(\" + (colIdx +1) + \")\").removeClass('highlightedRowColumn');\n    });\n\n\n    $(document).ready(function(){\n        $(\"td\").filter(function(index) {\n            return $(this).html() == \"0\";\n        }).parent().addClass(\"zero\");\n    });\n    $(\"td:contains('1')\").parent().addClass(\"one\");\n\n    window.hide_show_table = function (col_name){\n        var checkbox_val=document.getElementById(col_name).value;\n        if(checkbox_val==\"hide\")\n        {\n            var all_col=document.getElementsByClassName(col_name);\n            for(var i=0;i<all_col.length;i++)\n            {\n                all_col[i].style.display=\"none\";\n            }\n            document.getElementById(col_name+\"_head\").style.display=\"none\";\n            document.getElementById(col_name).value=\"show\";\n        }\n\n        else\n        {\n            var all_col=document.getElementsByClassName(col_name);\n            for(var i=0;i<all_col.length;i++)\n            {\n                all_col[i].style.display=\"table-cell\";\n            }\n            document.getElementById(col_name+\"_head\").style.display=\"table-cell\";\n            document.getElementById(col_name).value=\"hide\";\n        }\n    };\n\n\n    // CHANGE SELECTOR FOR CALENDAR IN CALENDAR_PERIOD //\n    loadSelectPeriod($('#calendar_period').val());\n    $('#calendar_period').on('change', function(){\n        var period_type = $('#calendar_period').val();\n        var array = [];\n\n        if(period_type === 'mensual'){\n            array.push('<option value=\"enero\">Enero</option>');\n            array.push('<option value=\"febrero\">Febrero</option>');\n            array.push('<option value=\"marzo\">Marzo</option>');\n            array.push('<option value=\"abril\">Abril</option>');\n            array.push('<option value=\"mayo\">Mayo</option>');\n            array.push('<option value=\"junio\">Junio</option>');\n            array.push('<option value=\"julio\">Julio</option>');\n            array.push('<option value=\"agosto\">Agosto</option>');\n            array.push('<option value=\"septiembre\">Septiembre</option>');\n            array.push('<option value=\"octubre\">Octubre</option>');\n            array.push('<option value=\"noviembre\">Noviembre</option>');\n            array.push('<option value=\"diciembre\">Diciembre</option>');\n        }else if(period_type === 'trimestral'){\n            array.push('<option value=\"1_trimestre\">1 Trimestre</option>');\n            array.push('<option value=\"2_trimestre\">2 Trimestre</option>');\n            array.push('<option value=\"3_trimestre\">3 Trimestre</option>');\n            array.push('<option value=\"4_trimestre\">4 Trimestre</option>');\n        }\n\n        $('#period_selector').empty().append(array.join(''));\n    });\n});\n\nlet readURL = (input) => {\n    if (input.files[0]) {\n        var reader = new FileReader();\n        let ext = getFileExtension(input.files[0].name);\n        let validImageTypes = ['gif', 'jpeg', 'png', 'jpg'];\n        if (validImageTypes.includes(ext)) {\n            reader.readAsDataURL(input.files[0]);\n        }\n    }\n\n    reader.onload = function (e) {\n        $('.profile-picture').attr('src', e.target.result);\n        $('.profile-picture').attr('style', 'object-fit:cover; width:130px; height:130px;');\n    }\n};\n\nlet getFileExtension = (filename) => {\n    return filename.split('.').pop();\n};\n\nlet cascadeSelects = (source, destination, url) => {\n    let ajaxRequest = (resource, edit) => {\n        if (resource !== '') {\n            $.get(url, {resource: resource}, function (data) {\n                destination.empty();\n                if (data.length > 0) {\n                    for (let action of data) {\n                        destination.append($('<option>', {value: action[0], text: action[1]}));\n                    }\n                    edit && destination.val(destination.data('value'));\n                } else {\n                    destination.append($('<option>', {value: '', text: I18n.t('helpers.select.no_options')}));\n                }\n                $('.selectpicker').selectpicker('refresh');\n            })\n                .fail(function () {\n                    toastr.warning(I18n.t('messages.try_again'));\n                });\n        }\n    };\n\n    ajaxRequest(source.val(), true);\n\n    source.on('change', function (e) {\n        let resource = $(e.target).val();\n        ajaxRequest(resource, false);\n    });\n};\n\nlet loadSelectPeriod = (period_type) => {\n    var array = [];\n\n    if(period_type === 'mensual'){\n        array.push('<option value=\"enero\">Enero</option>');\n        array.push('<option value=\"febrero\">Febrero</option>');\n        array.push('<option value=\"marzo\">Marzo</option>');\n        array.push('<option value=\"abril\">Abril</option>');\n        array.push('<option value=\"mayo\">Mayo</option>');\n        array.push('<option value=\"junio\">Junio</option>');\n        array.push('<option value=\"julio\">Julio</option>');\n        array.push('<option value=\"agosto\">Agosto</option>');\n        array.push('<option value=\"septiembre\">Septiembre</option>');\n        array.push('<option value=\"octubre\">Octubre</option>');\n        array.push('<option value=\"noviembre\">Noviembre</option>');\n        array.push('<option value=\"diciembre\">Diciembre</option>');\n    }else if(period_type === 'trimestral'){\n        array.push('<option value=\"1_trimestre\">1 Trimestre</option>');\n        array.push('<option value=\"2_trimestre\">2 Trimestre</option>');\n        array.push('<option value=\"3_trimestre\">3 Trimestre</option>');\n        array.push('<option value=\"4_trimestre\">4 Trimestre</option>');\n    }\n\n    $('#period_selector').empty().append(array.join(''));\n};\n\nexport {cascadeSelects};\n"]},"metadata":{},"sourceType":"module"}