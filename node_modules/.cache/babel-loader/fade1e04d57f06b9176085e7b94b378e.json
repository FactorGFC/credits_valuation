{"ast":null,"code":"import $ from 'jquery';\nimport jQuery from 'jquery';\nimport 'popper.js';\nimport 'bootstrap';\nimport PerfectScrollbar from 'javascripts/perfect-scrollbar';\nimport Cookies from 'javascripts/js.cookie';\n/**\n * @class mUtil  Metronic base utilize class that privides helper functions\n */\n//== Polyfill\n// matches polyfill\n\n/*\nthis.Element && function(ElementPrototype) {\n    ElementPrototype.matches = ElementPrototype.matches ||\n        ElementPrototype.matchesSelector ||\n        ElementPrototype.webkitMatchesSelector ||\n        ElementPrototype.msMatchesSelector ||\n        function(selector) {\n            var node = this,\n                nodes = (node.parentNode || node.document).querySelectorAll(selector),\n                i = -1;\n            while (nodes[++i] && nodes[i] != node);\n            return !!nodes[i];\n        }\n}(Element.prototype);\n\n// closest polyfill\nthis.Element && function(ElementPrototype) {\n    ElementPrototype.closest = ElementPrototype.closest ||\n        function(selector) {\n            var el = this;\n            while (el.matches && !el.matches(selector)) el = el.parentNode;\n            return el.matches ? el : null;\n        }\n}(Element.prototype);\n\n\n// matches polyfill\nthis.Element && function(ElementPrototype) {\n    ElementPrototype.matches = ElementPrototype.matches ||\n        ElementPrototype.matchesSelector ||\n        ElementPrototype.webkitMatchesSelector ||\n        ElementPrototype.msMatchesSelector ||\n        function(selector) {\n            var node = this,\n                nodes = (node.parentNode || node.document).querySelectorAll(selector),\n                i = -1;\n            while (nodes[++i] && nodes[i] != node);\n            return !!nodes[i];\n        }\n}(Element.prototype);\n*/\n//\n// requestAnimationFrame polyfill by Erik MÃ¶ller.\n//  With fixes from Paul Irish and Tino Zijdel\n//\n//  http://paulirish.com/2011/requestanimationframe-for-smart-animating/\n//  http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating\n//\n//  MIT license\n//\n\n(function () {\n  var lastTime = 0;\n  var vendors = ['webkit', 'moz'];\n\n  for (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n    window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\n    window.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame'] || window[vendors[x] + 'CancelRequestAnimationFrame'];\n  }\n\n  if (!window.requestAnimationFrame) window.requestAnimationFrame = function (callback) {\n    var currTime = new Date().getTime();\n    var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n    var id = window.setTimeout(function () {\n      callback(currTime + timeToCall);\n    }, timeToCall);\n    lastTime = currTime + timeToCall;\n    return id;\n  };\n  if (!window.cancelAnimationFrame) window.cancelAnimationFrame = function (id) {\n    clearTimeout(id);\n  };\n})(); // Source: https://github.com/jserz/js_piece/blob/master/DOM/ParentNode/prepend()/prepend().md\n\n\n(function (arr) {\n  arr.forEach(function (item) {\n    if (item.hasOwnProperty('prepend')) {\n      return;\n    }\n\n    Object.defineProperty(item, 'prepend', {\n      configurable: true,\n      enumerable: true,\n      writable: true,\n      value: function prepend() {\n        var argArr = Array.prototype.slice.call(arguments),\n            docFrag = document.createDocumentFragment();\n        argArr.forEach(function (argItem) {\n          var isNode = argItem instanceof Node;\n          docFrag.appendChild(isNode ? argItem : document.createTextNode(String(argItem)));\n        });\n        this.insertBefore(docFrag, this.firstChild);\n      }\n    });\n  });\n})([Element.prototype, Document.prototype, DocumentFragment.prototype]); //== Global variables\n\n\nwindow.mUtilElementDataStore = {};\nwindow.mUtilElementDataStoreID = 0;\nwindow.mUtilDelegatedEventHandlers = {};\n\nvar mUtil = function () {\n  var resizeHandlers = [];\n  /** @type {object} breakpoints The device width breakpoints **/\n\n  var breakpoints = {\n    sm: 544,\n    // Small screen / phone\n    md: 768,\n    // Medium screen / tablet\n    lg: 1024,\n    // Large screen / desktop\n    xl: 1200 // Extra large screen / wide desktop\n\n  };\n  /**\n   * Handle window resize event with some\n   * delay to attach event handlers upon resize complete\n   */\n\n  var _windowResizeHandler = function _windowResizeHandler() {\n    var _runResizeHandlers = function _runResizeHandlers() {\n      // reinitialize other subscribed elements\n      for (var i = 0; i < resizeHandlers.length; i++) {\n        var each = resizeHandlers[i];\n        each.call();\n      }\n    };\n\n    var timeout = false; // holder for timeout id\n\n    var delay = 250; // delay after event is \"complete\" to run callback\n\n    window.addEventListener('resize', function () {\n      clearTimeout(timeout);\n      timeout = setTimeout(function () {\n        _runResizeHandlers();\n      }, delay); // wait 50ms until window resize finishes.\n    });\n  };\n\n  return {\n    /**\n     * Class main initializer.\n     * @param {object} options.\n     * @returns null\n     */\n    //main function to initiate the theme\n    init: function init(options) {\n      if (options && options.breakpoints) {\n        breakpoints = options.breakpoints;\n      }\n\n      _windowResizeHandler();\n    },\n\n    /**\n     * Adds window resize event handler.\n     * @param {function} callback function.\n     */\n    addResizeHandler: function addResizeHandler(callback) {\n      resizeHandlers.push(callback);\n    },\n\n    /**\n     * Removes window resize event handler.\n     * @param {function} callback function.\n     */\n    removeResizeHandler: function removeResizeHandler(callback) {\n      for (var i = 0; i < resizeHandlers.length; i++) {\n        if (callback === resizeHandlers[i]) {\n          delete resizeHandlers[i];\n        }\n      }\n    },\n\n    /**\n     * Trigger window resize handlers.\n     */\n    runResizeHandlers: function runResizeHandlers() {\n      _runResizeHandlers();\n    },\n    resize: function resize() {\n      if (typeof Event === 'function') {\n        // modern browsers\n        window.dispatchEvent(new Event('resize'));\n      } else {\n        // for IE and other old browsers\n        // causes deprecation warning on modern browsers\n        var evt = window.document.createEvent('UIEvents');\n        evt.initUIEvent('resize', true, false, window, 0);\n        window.dispatchEvent(evt);\n      }\n    },\n\n    /**\n     * Get GET parameter value from URL.\n     * @param {string} paramName Parameter name.\n     * @returns {string}\n     */\n    getURLParam: function getURLParam(paramName) {\n      var searchString = window.location.search.substring(1),\n          i,\n          val,\n          params = searchString.split(\"&\");\n\n      for (i = 0; i < params.length; i++) {\n        val = params[i].split(\"=\");\n\n        if (val[0] == paramName) {\n          return unescape(val[1]);\n        }\n      }\n\n      return null;\n    },\n\n    /**\n     * Checks whether current device is mobile touch.\n     * @returns {boolean}\n     */\n    isMobileDevice: function isMobileDevice() {\n      return this.getViewPort().width < this.getBreakpoint('lg') ? true : false;\n    },\n\n    /**\n     * Checks whether current device is desktop.\n     * @returns {boolean}\n     */\n    isDesktopDevice: function isDesktopDevice() {\n      return mUtil.isMobileDevice() ? false : true;\n    },\n\n    /**\n     * Gets browser window viewport size. Ref:\n     * http://andylangton.co.uk/articles/javascript/get-viewport-size-javascript/\n     * @returns {object}\n     */\n    getViewPort: function getViewPort() {\n      var e = window,\n          a = 'inner';\n\n      if (!('innerWidth' in window)) {\n        a = 'client';\n        e = document.documentElement || document.body;\n      }\n\n      return {\n        width: e[a + 'Width'],\n        height: e[a + 'Height']\n      };\n    },\n\n    /**\n     * Checks whether given device mode is currently activated.\n     * @param {string} mode Responsive mode name(e.g: desktop,\n     *     desktop-and-tablet, tablet, tablet-and-mobile, mobile)\n     * @returns {boolean}\n     */\n    isInResponsiveRange: function isInResponsiveRange(mode) {\n      var breakpoint = this.getViewPort().width;\n\n      if (mode == 'general') {\n        return true;\n      } else if (mode == 'desktop' && breakpoint >= this.getBreakpoint('lg') + 1) {\n        return true;\n      } else if (mode == 'tablet' && breakpoint >= this.getBreakpoint('md') + 1 && breakpoint < this.getBreakpoint('lg')) {\n        return true;\n      } else if (mode == 'mobile' && breakpoint <= this.getBreakpoint('md')) {\n        return true;\n      } else if (mode == 'desktop-and-tablet' && breakpoint >= this.getBreakpoint('md') + 1) {\n        return true;\n      } else if (mode == 'tablet-and-mobile' && breakpoint <= this.getBreakpoint('lg')) {\n        return true;\n      } else if (mode == 'minimal-desktop-and-below' && breakpoint <= this.getBreakpoint('xl')) {\n        return true;\n      }\n\n      return false;\n    },\n\n    /**\n     * Generates unique ID for give prefix.\n     * @param {string} prefix Prefix for generated ID\n     * @returns {boolean}\n     */\n    getUniqueID: function getUniqueID(prefix) {\n      return prefix + Math.floor(Math.random() * new Date().getTime());\n    },\n\n    /**\n     * Gets window width for give breakpoint mode.\n     * @param {string} mode Responsive mode name(e.g: xl, lg, md, sm)\n     * @returns {number}\n     */\n    getBreakpoint: function getBreakpoint(mode) {\n      return breakpoints[mode];\n    },\n\n    /**\n     * Checks whether object has property matchs given key path.\n     * @param {object} obj Object contains values paired with given key path\n     * @param {string} keys Keys path seperated with dots\n     * @returns {object}\n     */\n    isset: function isset(obj, keys) {\n      var stone;\n      keys = keys || '';\n\n      if (keys.indexOf('[') !== -1) {\n        throw new Error('Unsupported object path notation.');\n      }\n\n      keys = keys.split('.');\n\n      do {\n        if (obj === undefined) {\n          return false;\n        }\n\n        stone = keys.shift();\n\n        if (!obj.hasOwnProperty(stone)) {\n          return false;\n        }\n\n        obj = obj[stone];\n      } while (keys.length);\n\n      return true;\n    },\n\n    /**\n     * Gets highest z-index of the given element parents\n     * @param {object} el jQuery element object\n     * @returns {number}\n     */\n    getHighestZindex: function getHighestZindex(el) {\n      var elem = mUtil.get(el),\n          position,\n          value;\n\n      while (elem && elem !== document) {\n        // Ignore z-index if position is set to a value where z-index is ignored by the browser\n        // This makes behavior of this function consistent across browsers\n        // WebKit always returns auto if the element is positioned\n        position = mUtil.css(elem, 'position');\n\n        if (position === \"absolute\" || position === \"relative\" || position === \"fixed\") {\n          // IE returns 0 when zIndex is not specified\n          // other browsers return a string\n          // we ignore the case of nested elements with an explicit value of 0\n          // <div style=\"z-index: -10;\"><div style=\"z-index: 0;\"></div></div>\n          value = parseInt(mUtil.css(elem, 'z-index'));\n\n          if (!isNaN(value) && value !== 0) {\n            return value;\n          }\n        }\n\n        elem = elem.parentNode;\n      }\n\n      return null;\n    },\n\n    /**\n     * Checks whether the element has any parent with fixed positionfreg\n     * @param {object} el jQuery element object\n     * @returns {boolean}\n     */\n    hasFixedPositionedParent: function hasFixedPositionedParent(el) {\n      while (el && el !== document) {\n        position = mUtil.css(el, 'position');\n\n        if (position === \"fixed\") {\n          return true;\n        }\n\n        el = el.parentNode;\n      }\n\n      return false;\n    },\n\n    /**\n     * Simulates delay\n     */\n    sleep: function sleep(milliseconds) {\n      var start = new Date().getTime();\n\n      for (var i = 0; i < 1e7; i++) {\n        if (new Date().getTime() - start > milliseconds) {\n          break;\n        }\n      }\n    },\n\n    /**\n     * Gets randomly generated integer value within given min and max range\n     * @param {number} min Range start value\n     * @param {number} min Range end value\n     * @returns {number}\n     */\n    getRandomInt: function getRandomInt(min, max) {\n      return Math.floor(Math.random() * (max - min + 1)) + min;\n    },\n\n    /**\n     * Checks whether Angular library is included\n     * @returns {boolean}\n     */\n    isAngularVersion: function isAngularVersion() {\n      return window.Zone !== undefined ? true : false;\n    },\n    //== jQuery Workarounds\n    //== Deep extend:  $.extend(true, {}, objA, objB);\n    deepExtend: function deepExtend(out) {\n      out = out || {};\n\n      for (var i = 1; i < arguments.length; i++) {\n        var obj = arguments[i];\n        if (!obj) continue;\n\n        for (var key in obj) {\n          if (obj.hasOwnProperty(key)) {\n            if (typeof obj[key] === 'object') out[key] = mUtil.deepExtend(out[key], obj[key]);else out[key] = obj[key];\n          }\n        }\n      }\n\n      return out;\n    },\n    //== extend:  $.extend({}, objA, objB);\n    extend: function extend(out) {\n      out = out || {};\n\n      for (var i = 1; i < arguments.length; i++) {\n        if (!arguments[i]) continue;\n\n        for (var key in arguments[i]) {\n          if (arguments[i].hasOwnProperty(key)) out[key] = arguments[i][key];\n        }\n      }\n\n      return out;\n    },\n    get: function get(query) {\n      var el;\n\n      if (query === document) {\n        return document;\n      }\n\n      if (!!(query && query.nodeType === 1)) {\n        return query;\n      }\n\n      if (el = document.getElementById(query)) {\n        return el;\n      } else if (el = document.getElementsByTagName(query)) {\n        return el[0];\n      } else if (el = document.getElementsByClassName(query)) {\n        return el[0];\n      } else {\n        return null;\n      }\n    },\n    getByClass: function getByClass(query) {\n      var el;\n\n      if (el = document.getElementsByClassName(query)) {\n        return el[0];\n      } else {\n        return null;\n      }\n    },\n\n    /**\n     * Checks whether the element has given classes\n     * @param {object} el jQuery element object\n     * @param {string} Classes string\n     * @returns {boolean}\n     */\n    hasClasses: function hasClasses(el, classes) {\n      if (!el) {\n        return;\n      }\n\n      var classesArr = classes.split(\" \");\n\n      for (var i = 0; i < classesArr.length; i++) {\n        if (mUtil.hasClass(el, mUtil.trim(classesArr[i])) == false) {\n          return false;\n        }\n      }\n\n      return true;\n    },\n    hasClass: function hasClass(el, className) {\n      if (!el) {\n        return;\n      }\n\n      return el.classList ? el.classList.contains(className) : new RegExp('\\\\b' + className + '\\\\b').test(el.className);\n    },\n    addClass: function addClass(el, className) {\n      if (!el || typeof className === 'undefined') {\n        return;\n      }\n\n      var classNames = className.split(' ');\n\n      if (el.classList) {\n        for (var i = 0; i < classNames.length; i++) {\n          if (classNames[i] && classNames[i].length > 0) {\n            el.classList.add(mUtil.trim(classNames[i]));\n          }\n        }\n      } else if (!mUtil.hasClass(el, className)) {\n        for (var i = 0; i < classNames.length; i++) {\n          el.className += ' ' + mUtil.trim(classNames[i]);\n        }\n      }\n    },\n    removeClass: function removeClass(el, className) {\n      if (!el || typeof className === 'undefined') {\n        return;\n      }\n\n      var classNames = className.split(' ');\n\n      if (el.classList) {\n        for (var i = 0; i < classNames.length; i++) {\n          el.classList.remove(mUtil.trim(classNames[i]));\n        }\n      } else if (mUtil.hasClass(el, className)) {\n        for (var i = 0; i < classNames.length; i++) {\n          el.className = el.className.replace(new RegExp('\\\\b' + mUtil.trim(classNames[i]) + '\\\\b', 'g'), '');\n        }\n      }\n    },\n    triggerCustomEvent: function triggerCustomEvent(el, eventName, data) {\n      if (window.CustomEvent) {\n        var event = new CustomEvent(eventName, {\n          detail: data\n        });\n      } else {\n        var event = document.createEvent('CustomEvent');\n        event.initCustomEvent(eventName, true, true, data);\n      }\n\n      el.dispatchEvent(event);\n    },\n    trim: function trim(string) {\n      return string.trim();\n    },\n    eventTriggered: function eventTriggered(e) {\n      if (e.currentTarget.dataset.triggered) {\n        return true;\n      } else {\n        e.currentTarget.dataset.triggered = true;\n        return false;\n      }\n    },\n    remove: function remove(el) {\n      if (el && el.parentNode) {\n        el.parentNode.removeChild(el);\n      }\n    },\n    find: function find(parent, query) {\n      parent = mUtil.get(parent);\n\n      if (parent) {\n        return parent.querySelector(query);\n      }\n    },\n    findAll: function findAll(parent, query) {\n      parent = mUtil.get(parent);\n\n      if (parent) {\n        return parent.querySelectorAll(query);\n      }\n    },\n    insertAfter: function insertAfter(el, referenceNode) {\n      return referenceNode.parentNode.insertBefore(el, referenceNode.nextSibling);\n    },\n    parents: function parents(el, query) {\n      function collectionHas(a, b) {\n        //helper function (see below)\n        for (var i = 0, len = a.length; i < len; i++) {\n          if (a[i] == b) return true;\n        }\n\n        return false;\n      }\n\n      function findParentBySelector(el, selector) {\n        var all = document.querySelectorAll(selector);\n        var cur = el.parentNode;\n\n        while (cur && !collectionHas(all, cur)) {\n          //keep going up until you find a match\n          cur = cur.parentNode; //go up\n        }\n\n        return cur; //will return null if not found\n      }\n\n      return findParentBySelector(el, query);\n    },\n    children: function children(el, selector, log) {\n      if (!el || !el.childNodes) {\n        return;\n      }\n\n      var result = [],\n          i = 0,\n          l = el.childNodes.length;\n\n      for (var i; i < l; ++i) {\n        if (el.childNodes[i].nodeType == 1 && mUtil.matches(el.childNodes[i], selector, log)) {\n          result.push(el.childNodes[i]);\n        }\n      }\n\n      return result;\n    },\n    child: function child(el, selector, log) {\n      var children = mUtil.children(el, selector, log);\n      return children ? children[0] : null;\n    },\n    matches: function matches(el, selector, log) {\n      var p = Element.prototype;\n\n      var f = p.matches || p.webkitMatchesSelector || p.mozMatchesSelector || p.msMatchesSelector || function (s) {\n        return [].indexOf.call(document.querySelectorAll(s), this) !== -1;\n      };\n\n      if (el && el.tagName) {\n        return f.call(el, selector);\n      } else {\n        return false;\n      }\n    },\n    data: function data(element) {\n      element = mUtil.get(element);\n      return {\n        set: function set(name, data) {\n          if (element.customDataTag === undefined) {\n            mUtilElementDataStoreID++;\n            element.customDataTag = mUtilElementDataStoreID;\n          }\n\n          if (mUtilElementDataStore[element.customDataTag] === undefined) {\n            mUtilElementDataStore[element.customDataTag] = {};\n          }\n\n          mUtilElementDataStore[element.customDataTag][name] = data;\n        },\n        get: function get(name) {\n          return this.has(name) ? mUtilElementDataStore[element.customDataTag][name] : null;\n        },\n        has: function has(name) {\n          return mUtilElementDataStore[element.customDataTag] && mUtilElementDataStore[element.customDataTag][name] ? true : false;\n        },\n        remove: function remove(name) {\n          if (this.has(name)) {\n            delete mUtilElementDataStore[element.customDataTag][name];\n          }\n        }\n      };\n    },\n    outerWidth: function outerWidth(el, margin) {\n      var width;\n\n      if (margin === true) {\n        var width = parseFloat(el.offsetWidth);\n        width += parseFloat(mUtil.css(el, 'margin-left')) + parseFloat(mUtil.css(el, 'margin-right'));\n        return parseFloat(width);\n      } else {\n        var width = parseFloat(el.offsetWidth);\n        return width;\n      }\n    },\n    offset: function offset(elem) {\n      var rect, win;\n      elem = mUtil.get(elem);\n\n      if (!elem) {\n        return;\n      } // Return zeros for disconnected and hidden (display: none) elements (gh-2310)\n      // Support: IE <=11 only\n      // Running getBoundingClientRect on a\n      // disconnected node in IE throws an error\n\n\n      if (!elem.getClientRects().length) {\n        return {\n          top: 0,\n          left: 0\n        };\n      } // Get document-relative position by adding viewport scroll to viewport-relative gBCR\n\n\n      rect = elem.getBoundingClientRect();\n      win = elem.ownerDocument.defaultView;\n      return {\n        top: rect.top + win.pageYOffset,\n        left: rect.left + win.pageXOffset\n      };\n    },\n    height: function height(el) {\n      return mUtil.css(el, 'height');\n    },\n    visible: function visible(el) {\n      return !(el.offsetWidth === 0 && el.offsetHeight === 0);\n    },\n    attr: function attr(el, name, value) {\n      el = mUtil.get(el);\n\n      if (el == undefined) {\n        return;\n      }\n\n      if (value !== undefined) {\n        el.setAttribute(name, value);\n      } else {\n        return el.getAttribute(name);\n      }\n    },\n    hasAttr: function hasAttr(el, name) {\n      el = mUtil.get(el);\n\n      if (el == undefined) {\n        return;\n      }\n\n      return el.getAttribute(name) ? true : false;\n    },\n    removeAttr: function removeAttr(el, name) {\n      el = mUtil.get(el);\n\n      if (el == undefined) {\n        return;\n      }\n\n      el.removeAttribute(name);\n    },\n    animate: function animate(from, to, duration, update, easing, done) {\n      /**\n       * TinyAnimate.easings\n       *  Adapted from jQuery Easing\n       */\n      var easings = {};\n      var easing;\n\n      easings.linear = function (t, b, c, d) {\n        return c * t / d + b;\n      };\n\n      easing = easings.linear; // Early bail out if called incorrectly\n\n      if (typeof from !== 'number' || typeof to !== 'number' || typeof duration !== 'number' || typeof update !== 'function') {\n        return;\n      } // Create mock done() function if necessary\n\n\n      if (typeof done !== 'function') {\n        done = function done() {};\n      } // Pick implementation (requestAnimationFrame | setTimeout)\n\n\n      var rAF = window.requestAnimationFrame || function (callback) {\n        window.setTimeout(callback, 1000 / 50);\n      }; // Animation loop\n\n\n      var canceled = false;\n      var change = to - from;\n\n      function loop(timestamp) {\n        var time = (timestamp || +new Date()) - start;\n\n        if (time >= 0) {\n          update(easing(time, from, change, duration));\n        }\n\n        if (time >= 0 && time >= duration) {\n          update(to);\n          done();\n        } else {\n          rAF(loop);\n        }\n      }\n\n      update(from); // Start animation loop\n\n      var start = window.performance && window.performance.now ? window.performance.now() : +new Date();\n      rAF(loop);\n    },\n    actualCss: function actualCss(el, prop, cache) {\n      if (el instanceof HTMLElement === false) {\n        return;\n      }\n\n      if (!el.getAttribute('m-hidden-' + prop) || cache === false) {\n        var value; // the element is hidden so:\n        // making the el block so we can meassure its height but still be hidden\n\n        el.style.cssText = 'position: absolute; visibility: hidden; display: block;';\n\n        if (prop == 'width') {\n          value = el.offsetWidth;\n        } else if (prop == 'height') {\n          value = el.offsetHeight;\n        }\n\n        el.style.cssText = ''; // store it in cache\n\n        el.setAttribute('m-hidden-' + prop, value);\n        return parseFloat(value);\n      } else {\n        // store it in cache\n        return parseFloat(el.getAttribute('m-hidden-' + prop));\n      }\n    },\n    actualHeight: function actualHeight(el, cache) {\n      return mUtil.actualCss(el, 'height', cache);\n    },\n    actualWidth: function actualWidth(el, cache) {\n      return mUtil.actualCss(el, 'width', cache);\n    },\n    getScroll: function getScroll(element, method) {\n      // The passed in `method` value should be 'Top' or 'Left'\n      method = 'scroll' + method;\n      return element == window || element == document ? self[method == 'scrollTop' ? 'pageYOffset' : 'pageXOffset'] || browserSupportsBoxModel && document.documentElement[method] || document.body[method] : element[method];\n    },\n    css: function css(el, styleProp, value) {\n      el = mUtil.get(el);\n\n      if (!el) {\n        return;\n      }\n\n      if (value !== undefined) {\n        el.style[styleProp] = value;\n      } else {\n        var value,\n            defaultView = (el.ownerDocument || document).defaultView; // W3C standard way:\n\n        if (defaultView && defaultView.getComputedStyle) {\n          // sanitize property name to css notation\n          // (hyphen separated words eg. font-Size)\n          styleProp = styleProp.replace(/([A-Z])/g, \"-$1\").toLowerCase();\n          return defaultView.getComputedStyle(el, null).getPropertyValue(styleProp);\n        } else if (el.currentStyle) {\n          // IE\n          // sanitize property name to camelCase\n          styleProp = styleProp.replace(/\\-(\\w)/g, function (str, letter) {\n            return letter.toUpperCase();\n          });\n          value = el.currentStyle[styleProp]; // convert other units to pixels on IE\n\n          if (/^\\d+(em|pt|%|ex)?$/i.test(value)) {\n            return function (value) {\n              var oldLeft = el.style.left,\n                  oldRsLeft = el.runtimeStyle.left;\n              el.runtimeStyle.left = el.currentStyle.left;\n              el.style.left = value || 0;\n              value = el.style.pixelLeft + \"px\";\n              el.style.left = oldLeft;\n              el.runtimeStyle.left = oldRsLeft;\n              return value;\n            }(value);\n          }\n\n          return value;\n        }\n      }\n    },\n    slide: function slide(el, dir, speed, callback, recalcMaxHeight) {\n      if (!el || dir == 'up' && mUtil.visible(el) === false || dir == 'down' && mUtil.visible(el) === true) {\n        return;\n      }\n\n      speed = speed ? speed : 600;\n      var calcHeight = mUtil.actualHeight(el);\n      var calcPaddingTop = false;\n      var calcPaddingBottom = false;\n\n      if (mUtil.css(el, 'padding-top') && mUtil.data(el).has('slide-padding-top') !== true) {\n        mUtil.data(el).set('slide-padding-top', mUtil.css(el, 'padding-top'));\n      }\n\n      if (mUtil.css(el, 'padding-bottom') && mUtil.data(el).has('slide-padding-bottom') !== true) {\n        mUtil.data(el).set('slide-padding-bottom', mUtil.css(el, 'padding-bottom'));\n      }\n\n      if (mUtil.data(el).has('slide-padding-top')) {\n        calcPaddingTop = parseInt(mUtil.data(el).get('slide-padding-top'));\n      }\n\n      if (mUtil.data(el).has('slide-padding-bottom')) {\n        calcPaddingBottom = parseInt(mUtil.data(el).get('slide-padding-bottom'));\n      }\n\n      if (dir == 'up') {\n        // up\n        el.style.cssText = 'display: block; overflow: hidden;';\n\n        if (calcPaddingTop) {\n          mUtil.animate(0, calcPaddingTop, speed, function (value) {\n            el.style.paddingTop = calcPaddingTop - value + 'px';\n          }, 'linear');\n        }\n\n        if (calcPaddingBottom) {\n          mUtil.animate(0, calcPaddingBottom, speed, function (value) {\n            el.style.paddingBottom = calcPaddingBottom - value + 'px';\n          }, 'linear');\n        }\n\n        mUtil.animate(0, calcHeight, speed, function (value) {\n          el.style.height = calcHeight - value + 'px';\n        }, 'linear', function () {\n          callback();\n          el.style.height = '';\n          el.style.display = 'none';\n        });\n      } else if (dir == 'down') {\n        // down\n        el.style.cssText = 'display: block; overflow: hidden;';\n\n        if (calcPaddingTop) {\n          mUtil.animate(0, calcPaddingTop, speed, function (value) {\n            el.style.paddingTop = value + 'px';\n          }, 'linear', function () {\n            el.style.paddingTop = '';\n          });\n        }\n\n        if (calcPaddingBottom) {\n          mUtil.animate(0, calcPaddingBottom, speed, function (value) {\n            el.style.paddingBottom = value + 'px';\n          }, 'linear', function () {\n            el.style.paddingBottom = '';\n          });\n        }\n\n        mUtil.animate(0, calcHeight, speed, function (value) {\n          el.style.height = value + 'px';\n        }, 'linear', function () {\n          callback();\n          el.style.height = '';\n          el.style.display = '';\n          el.style.overflow = '';\n        });\n      }\n    },\n    slideUp: function slideUp(el, speed, callback) {\n      mUtil.slide(el, 'up', speed, callback);\n    },\n    slideDown: function slideDown(el, speed, callback) {\n      mUtil.slide(el, 'down', speed, callback);\n    },\n    show: function show(el, display) {\n      el.style.display = display ? display : 'block';\n    },\n    hide: function hide(el) {\n      el.style.display = 'none';\n    },\n    addEvent: function addEvent(el, type, handler, one) {\n      el = mUtil.get(el);\n\n      if (typeof el !== 'undefined') {\n        el.addEventListener(type, handler);\n      }\n    },\n    removeEvent: function removeEvent(el, type, handler) {\n      el = mUtil.get(el);\n      el.removeEventListener(type, handler);\n    },\n    on: function on(element, selector, event, handler) {\n      if (!selector) {\n        return;\n      }\n\n      var eventId = mUtil.getUniqueID('event');\n\n      mUtilDelegatedEventHandlers[eventId] = function (e) {\n        var targets = element.querySelectorAll(selector);\n        var target = e.target;\n\n        while (target && target !== element) {\n          for (var i = 0, j = targets.length; i < j; i++) {\n            if (target === targets[i]) {\n              handler.call(target, e);\n            }\n          }\n\n          target = target.parentNode;\n        }\n      };\n\n      mUtil.addEvent(element, event, mUtilDelegatedEventHandlers[eventId]);\n      return eventId;\n    },\n    off: function off(element, event, eventId) {\n      if (!element || !mUtilDelegatedEventHandlers[eventId]) {\n        return;\n      }\n\n      mUtil.removeEvent(element, event, mUtilDelegatedEventHandlers[eventId]);\n      delete mUtilDelegatedEventHandlers[eventId];\n    },\n    one: function onetime(el, type, callback) {\n      el = mUtil.get(el);\n      el.addEventListener(type, function (e) {\n        // remove event\n        e.target.removeEventListener(e.type, arguments.callee); // call handler\n\n        return callback(e);\n      });\n    },\n    hash: function hash(str) {\n      var hash = 0,\n          i,\n          chr;\n      if (str.length === 0) return hash;\n\n      for (i = 0; i < str.length; i++) {\n        chr = str.charCodeAt(i);\n        hash = (hash << 5) - hash + chr;\n        hash |= 0; // Convert to 32bit integer\n      }\n\n      return hash;\n    },\n    animateClass: function animateClass(el, animationName, callback) {\n      var animationEnd = 'webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend';\n      mUtil.addClass(el, 'animated ' + animationName);\n      mUtil.one(el, animationEnd, function () {\n        mUtil.removeClass(el, 'animated ' + animationName);\n      });\n\n      if (callback) {\n        mUtil.one(el.animationEnd, callback);\n      }\n    },\n    animateDelay: function animateDelay(el, value) {\n      var vendors = ['webkit-', 'moz-', 'ms-', 'o-', ''];\n\n      for (var i = 0; i < vendors.length; i++) {\n        mUtil.css(el, vendors[i] + 'animation-delay', value);\n      }\n    },\n    animateDuration: function animateDuration(el, value) {\n      var vendors = ['webkit-', 'moz-', 'ms-', 'o-', ''];\n\n      for (var i = 0; i < vendors.length; i++) {\n        mUtil.css(el, vendors[i] + 'animation-duration', value);\n      }\n    },\n    scrollTo: function scrollTo(target, offset, duration) {\n      var duration = duration ? duration : 500;\n      var target = mUtil.get(target);\n      var targetPos = target ? mUtil.offset(target).top : 0;\n      var scrollPos = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;\n      var from, to;\n\n      if (targetPos > scrollPos) {\n        from = targetPos;\n        to = scrollPos;\n      } else {\n        from = scrollPos;\n        to = targetPos;\n      }\n\n      if (offset) {\n        to += offset;\n      }\n\n      mUtil.animate(from, to, duration, function (value) {\n        document.documentElement.scrollTop = value;\n        document.body.parentNode.scrollTop = value;\n        document.body.scrollTop = value;\n      }); //, easing, done\n    },\n    scrollTop: function scrollTop(offset, duration) {\n      mUtil.scrollTo(null, offset, duration);\n    },\n    isArray: function isArray(obj) {\n      return obj && Array.isArray(obj);\n    },\n    ready: function ready(callback) {\n      if (document.attachEvent ? document.readyState === \"complete\" : document.readyState !== \"loading\") {\n        callback();\n      } else {\n        document.addEventListener('DOMContentLoaded', callback);\n      }\n    },\n    isEmpty: function isEmpty(obj) {\n      for (var prop in obj) {\n        if (obj.hasOwnProperty(prop)) {\n          return false;\n        }\n      }\n\n      return true;\n    },\n    numberString: function numberString(nStr) {\n      nStr += '';\n      var x = nStr.split('.');\n      var x1 = x[0];\n      var x2 = x.length > 1 ? '.' + x[1] : '';\n      var rgx = /(\\d+)(\\d{3})/;\n\n      while (rgx.test(x1)) {\n        x1 = x1.replace(rgx, '$1' + ',' + '$2');\n      }\n\n      return x1 + x2;\n    },\n    detectIE: function detectIE() {\n      var ua = window.navigator.userAgent; // Test values; Uncomment to check result â¦\n      // IE 10\n      // ua = 'Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; Trident/6.0)';\n      // IE 11\n      // ua = 'Mozilla/5.0 (Windows NT 6.3; Trident/7.0; rv:11.0) like Gecko';\n      // Edge 12 (Spartan)\n      // ua = 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.71 Safari/537.36 Edge/12.0';\n      // Edge 13\n      // ua = 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2486.0 Safari/537.36 Edge/13.10586';\n\n      var msie = ua.indexOf('MSIE ');\n\n      if (msie > 0) {\n        // IE 10 or older => return version number\n        return parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);\n      }\n\n      var trident = ua.indexOf('Trident/');\n\n      if (trident > 0) {\n        // IE 11 => return version number\n        var rv = ua.indexOf('rv:');\n        return parseInt(ua.substring(rv + 3, ua.indexOf('.', rv)), 10);\n      }\n\n      var edge = ua.indexOf('Edge/');\n\n      if (edge > 0) {\n        // Edge (IE 12+) => return version number\n        return parseInt(ua.substring(edge + 5, ua.indexOf('.', edge)), 10);\n      } // other browser\n\n\n      return false;\n    },\n    isRTL: function isRTL() {\n      return mUtil.attr(mUtil.get('html'), 'direction') == 'rtl';\n    },\n    //== Scroller\n    scrollerInit: function scrollerInit(element, options) {\n      //== Define init function\n      function init() {\n        var ps;\n        var height;\n\n        if (options.height instanceof Function) {\n          height = parseInt(options.height.call());\n        } else {\n          height = parseInt(options.height);\n        } //== Destroy scroll on table and mobile modes\n\n\n        if (options.disableForMobile && mUtil.isInResponsiveRange('tablet-and-mobile')) {\n          if (ps = mUtil.data(element).get('ps')) {\n            if (options.resetHeightOnDestroy) {\n              mUtil.css(element, 'height', 'auto');\n            } else {\n              mUtil.css(element, 'overflow', 'auto');\n\n              if (height > 0) {\n                mUtil.css(element, 'height', height + 'px');\n              }\n            }\n\n            ps.destroy();\n            ps = mUtil.data(element).remove('ps');\n          } else if (height > 0) {\n            mUtil.css(element, 'overflow', 'auto');\n            mUtil.css(element, 'height', height + 'px');\n          }\n\n          return;\n        }\n\n        if (height > 0) {\n          mUtil.css(element, 'height', height + 'px');\n        }\n\n        mUtil.css(element, 'overflow', 'hidden'); //== Init scroll\n\n        if (ps = mUtil.data(element).get('ps')) {\n          ps.update();\n        } else {\n          mUtil.addClass(element, 'm-scroller');\n          ps = new PerfectScrollbar(element, {\n            wheelSpeed: 0.5,\n            swipeEasing: true,\n            wheelPropagation: false,\n            minScrollbarLength: 40,\n            suppressScrollX: mUtil.isRTL() ? false : true\n          });\n          mUtil.data(element).set('ps', ps);\n        }\n      } //== Init\n\n\n      init(); //== Handle window resize\n\n      if (options.handleWindowResize) {\n        mUtil.addResizeHandler(function () {\n          init();\n        });\n      }\n    },\n    scrollerUpdate: function scrollerUpdate(element) {\n      var ps;\n\n      if (ps = mUtil.data(element).get('ps')) {\n        ps.update();\n      }\n    },\n    scrollersUpdate: function scrollersUpdate(parent) {\n      var scrollers = mUtil.findAll(parent, '.ps');\n\n      for (var i = 0, len = scrollers.length; i < len; i++) {\n        mUtil.scrollerUpdate(scrollers[i]);\n      }\n    },\n    scrollerTop: function scrollerTop(element) {\n      var ps;\n\n      if (ps = mUtil.data(element).get('ps')) {\n        element.scrollTop = 0;\n      }\n    },\n    scrollerDestroy: function scrollerDestroy(element) {\n      var ps;\n\n      if (ps = mUtil.data(element).get('ps')) {\n        ps.destroy();\n        ps = mUtil.data(element).remove('ps');\n      }\n    }\n  };\n}(); //== Initialize mUtil class on document ready\n\n\nmUtil.ready(function () {\n  mUtil.init();\n});\n/**\n * @class mApp  Metronic App class\n */\n\nvar mApp = function () {\n  /** @type {object} colors State colors **/\n  var colors = {\n    brand: '#716aca',\n    metal: '#c4c5d6',\n    light: '#ffffff',\n    accent: '#00c5dc',\n    primary: '#5867dd',\n    success: '#34bfa3',\n    info: '#36a3f7',\n    warning: '#ffb822',\n    danger: '#f4516c',\n    focus: '#9816f4'\n  };\n  /**\n   * Initializes bootstrap tooltip\n   */\n\n  var _initTooltip = function initTooltip(el) {\n    var skin = el.data('skin') ? 'm-tooltip--skin-' + el.data('skin') : '';\n    var width = el.data('width') == 'auto' ? 'm-tooltop--auto-width' : '';\n    var triggerValue = el.data('trigger') ? el.data('trigger') : 'hover';\n    var placement = el.data('placement') ? el.data('placement') : 'left';\n    el.tooltip({\n      trigger: triggerValue,\n      template: '<div class=\"m-tooltip ' + skin + ' ' + width + ' tooltip\" role=\"tooltip\">\\\n                <div class=\"arrow\"></div>\\\n                <div class=\"tooltip-inner\"></div>\\\n            </div>'\n    });\n  };\n  /**\n   * Initializes bootstrap tooltips\n   */\n\n\n  var _initTooltips = function initTooltips() {\n    // init bootstrap tooltips\n    $('[data-toggle=\"m-tooltip\"]').each(function () {\n      _initTooltip($(this));\n    });\n  };\n  /**\n   * Initializes bootstrap popover\n   */\n\n\n  var _initPopover = function initPopover(el) {\n    var skin = el.data('skin') ? 'm-popover--skin-' + el.data('skin') : '';\n    var triggerValue = el.data('trigger') ? el.data('trigger') : 'hover';\n    el.popover({\n      trigger: triggerValue,\n      template: '\\\n            <div class=\"m-popover ' + skin + ' popover\" role=\"tooltip\">\\\n                <div class=\"arrow\"></div>\\\n                <h3 class=\"popover-header\"></h3>\\\n                <div class=\"popover-body\"></div>\\\n            </div>'\n    });\n  };\n  /**\n   * Initializes bootstrap popovers\n   */\n\n\n  var _initPopovers = function initPopovers() {\n    // init bootstrap popover\n    $('[data-toggle=\"m-popover\"]').each(function () {\n      _initPopover($(this));\n    });\n  };\n  /**\n   * Initializes bootstrap file input\n   */\n\n\n  var initFileInput = function initFileInput() {\n    // init bootstrap popover\n    $('.custom-file-input').on('change', function () {\n      var fileName = $(this).val();\n      $(this).next('.custom-file-label').addClass(\"selected\").html(fileName);\n    });\n  };\n  /**\n   * Initializes metronic portlet\n   */\n\n\n  var _initPortlet = function initPortlet(el, options) {\n    // init portlet tools\n    var el = $(el);\n    var portlet = new mPortlet(el[0], options);\n  };\n  /**\n   * Initializes metronic portlets\n   */\n\n\n  var _initPortlets = function initPortlets() {\n    // init portlet tools\n    $('[m-portlet=\"true\"]').each(function () {\n      var el = $(this);\n\n      if (el.data('portlet-initialized') !== true) {\n        _initPortlet(el, {});\n\n        el.data('portlet-initialized', true);\n      }\n    });\n  };\n  /**\n   * Initializes scrollable contents\n   */\n\n\n  var initScrollers = function initScrollers() {\n    $('[data-scrollable=\"true\"]').each(function () {\n      var el = $(this);\n      mUtil.scrollerInit(this, {\n        disableForMobile: true,\n        handleWindowResize: true,\n        height: function height() {\n          if (mUtil.isInResponsiveRange('tablet-and-mobile') && el.data('mobile-height')) {\n            return el.data('mobile-height');\n          } else {\n            return el.data('height');\n          }\n        }\n      });\n    });\n  };\n  /**\n   * Initializes bootstrap alerts\n   */\n\n\n  var initAlerts = function initAlerts() {\n    // init bootstrap popover\n    $('body').on('click', '[data-close=alert]', function () {\n      $(this).closest('.alert').hide();\n    });\n  };\n  /**\n   * Initializes Metronic custom tabs\n   */\n\n\n  var _initCustomTabs = function initCustomTabs() {\n    // init bootstrap popover\n    $('[data-tab-target]').each(function () {\n      if ($(this).data('tabs-initialized') == true) {\n        return;\n      }\n\n      $(this).click(function (e) {\n        e.preventDefault();\n        var tab = $(this);\n        var tabs = tab.closest('[data-tabs=\"true\"]');\n        var contents = $(tabs.data('tabs-contents'));\n        var content = $(tab.data('tab-target'));\n        tabs.find('.m-tabs__item.m-tabs__item--active').removeClass('m-tabs__item--active');\n        tab.addClass('m-tabs__item--active');\n        contents.find('.m-tabs-content__item.m-tabs-content__item--active').removeClass('m-tabs-content__item--active');\n        content.addClass('m-tabs-content__item--active');\n      });\n      $(this).data('tabs-initialized', true);\n    });\n  };\n\n  var hideTouchWarning = function hideTouchWarning() {\n    jQuery.event.special.touchstart = {\n      setup: function setup(_, ns, handle) {\n        if (typeof this === 'function') if (ns.includes('noPreventDefault')) {\n          this.addEventListener('touchstart', handle, {\n            passive: false\n          });\n        } else {\n          this.addEventListener('touchstart', handle, {\n            passive: true\n          });\n        }\n      }\n    };\n    jQuery.event.special.touchmove = {\n      setup: function setup(_, ns, handle) {\n        if (typeof this === 'function') if (ns.includes('noPreventDefault')) {\n          this.addEventListener('touchmove', handle, {\n            passive: false\n          });\n        } else {\n          this.addEventListener('touchmove', handle, {\n            passive: true\n          });\n        }\n      }\n    };\n    jQuery.event.special.wheel = {\n      setup: function setup(_, ns, handle) {\n        if (typeof this === 'function') if (ns.includes('noPreventDefault')) {\n          this.addEventListener('wheel', handle, {\n            passive: false\n          });\n        } else {\n          this.addEventListener('wheel', handle, {\n            passive: true\n          });\n        }\n      }\n    };\n  };\n\n  return {\n    /**\n     * Main class initializer\n     */\n    init: function init(options) {\n      if (options && options.colors) {\n        colors = options.colors;\n      }\n\n      mApp.initComponents();\n    },\n\n    /**\n     * Initializes components\n     */\n    initComponents: function initComponents() {\n      hideTouchWarning();\n      initScrollers();\n\n      _initTooltips();\n\n      _initPopovers();\n\n      initAlerts();\n\n      _initPortlets();\n\n      initFileInput();\n\n      _initCustomTabs();\n    },\n\n    /**\n     * Init custom tabs\n     */\n    initCustomTabs: function initCustomTabs() {\n      _initCustomTabs();\n    },\n\n    /**\n     *\n     * @param {object} el jQuery element object\n     */\n    // wrJangoer function to scroll(focus) to an element\n    initTooltips: function initTooltips() {\n      _initTooltips();\n    },\n\n    /**\n     *\n     * @param {object} el jQuery element object\n     */\n    // wrJangoer function to scroll(focus) to an element\n    initTooltip: function initTooltip(el) {\n      _initTooltip(el);\n    },\n\n    /**\n     *\n     * @param {object} el jQuery element object\n     */\n    // wrJangoer function to scroll(focus) to an element\n    initPopovers: function initPopovers() {\n      _initPopovers();\n    },\n\n    /**\n     *\n     * @param {object} el jQuery element object\n     */\n    // wrJangoer function to scroll(focus) to an element\n    initPopover: function initPopover(el) {\n      _initPopover(el);\n    },\n\n    /**\n     *\n     * @param {object} el jQuery element object\n     */\n    // function to init portlet\n    initPortlet: function initPortlet(el, options) {\n      _initPortlet(el, options);\n    },\n\n    /**\n     *\n     * @param {object} el jQuery element object\n     */\n    // function to init portlets\n    initPortlets: function initPortlets() {\n      _initPortlets();\n    },\n\n    /**\n     * Blocks element with loading indiciator using http://malsup.com/jquery/block/\n     * @param {object} target jQuery element object\n     * @param {object} options\n     */\n    block: function block(target, options) {\n      var el = $(target);\n      options = $.extend(true, {\n        opacity: 0.03,\n        overlayColor: '#000000',\n        state: 'brand',\n        type: 'loader',\n        size: 'lg',\n        centerX: true,\n        centerY: true,\n        message: '',\n        shadow: true,\n        width: 'auto'\n      }, options);\n      var skin;\n      var state;\n      var loading;\n\n      if (options.type == 'spinner') {\n        skin = options.skin ? 'm-spinner--skin-' + options.skin : '';\n        state = options.state ? 'm-spinner--' + options.state : '';\n        loading = '<div class=\"m-spinner ' + skin + ' ' + state + '\"></div';\n      } else {\n        skin = options.skin ? 'm-loader--skin-' + options.skin : '';\n        state = options.state ? 'm-loader--' + options.state : '';\n        size = options.size ? 'm-loader--' + options.size : '';\n        loading = '<div class=\"m-loader ' + skin + ' ' + state + ' ' + size + '\"></div';\n      }\n\n      if (options.message && options.message.length > 0) {\n        var classes = 'm-blockui ' + (options.shadow === false ? 'm-blockui-no-shadow' : '');\n        html = '<div class=\"' + classes + '\"><span>' + options.message + '</span><span>' + loading + '</span></div>';\n        var el = document.createElement('div');\n        mUtil.get('body').prepend(el);\n        mUtil.addClass(el, classes);\n        el.innerHTML = '<span>' + options.message + '</span><span>' + loading + '</span>';\n        options.width = mUtil.actualWidth(el) + 10;\n        mUtil.remove(el);\n\n        if (target == 'body') {\n          html = '<div class=\"' + classes + '\" style=\"margin-left:-' + options.width / 2 + 'px;\"><span>' + options.message + '</span><span>' + loading + '</span></div>';\n        }\n      } else {\n        html = loading;\n      }\n\n      var params = {\n        message: html,\n        centerY: options.centerY,\n        centerX: options.centerX,\n        css: {\n          top: '30%',\n          left: '50%',\n          border: '0',\n          padding: '0',\n          backgroundColor: 'none',\n          width: options.width\n        },\n        overlayCSS: {\n          backgroundColor: options.overlayColor,\n          opacity: options.opacity,\n          cursor: 'wait',\n          zIndex: '10'\n        },\n        onUnblock: function onUnblock() {\n          if (el && el[0]) {\n            mUtil.css(el[0], 'position', '');\n            mUtil.css(el[0], 'zoom', '');\n          }\n        }\n      };\n\n      if (target == 'body') {\n        params.css.top = '50%';\n        $.blockUI(params);\n      } else {\n        var el = $(target);\n        el.block(params);\n      }\n    },\n\n    /**\n     * Un-blocks the blocked element\n     * @param {object} target jQuery element object\n     */\n    unblock: function unblock(target) {\n      if (target && target != 'body') {\n        $(target).unblock();\n      } else {\n        $.unblockUI();\n      }\n    },\n\n    /**\n     * Blocks the page body element with loading indicator\n     * @param {object} options\n     */\n    blockPage: function blockPage(options) {\n      return mApp.block('body', options);\n    },\n\n    /**\n     * Un-blocks the blocked page body element\n     */\n    unblockPage: function unblockPage() {\n      return mApp.unblock('body');\n    },\n\n    /**\n     * Enable loader progress for button and other elements\n     * @param {object} target jQuery element object\n     * @param {object} options\n     */\n    progress: function progress(target, options) {\n      var skin = options && options.skin ? options.skin : 'light';\n      var alignment = options && options.alignment ? options.alignment : 'right';\n      var size = options && options.size ? 'm-spinner--' + options.size : '';\n      var classes = 'm-loader ' + 'm-loader--' + skin + ' m-loader--' + alignment + ' m-loader--' + size;\n      mApp.unprogress(target);\n      $(target).addClass(classes);\n      $(target).data('progress-classes', classes);\n    },\n\n    /**\n     * Disable loader progress for button and other elements\n     * @param {object} target jQuery element object\n     */\n    unprogress: function unprogress(target) {\n      $(target).removeClass($(target).data('progress-classes'));\n    },\n\n    /**\n     * Gets state color's hex code by color name\n     * @param {string} name Color name\n     * @returns {string}\n     */\n    getColor: function getColor(name) {\n      return colors[name];\n    }\n  };\n}(); //== Initialize mApp class on document ready\n\n\n$(document).on('turbolinks:load', function () {\n  mApp.init({});\n});\n\n(function ($) {\n  var pluginName = 'mDatatable';\n  var pfx = 'm-';\n  var util = mUtil;\n  var app = mApp;\n  if (typeof util === 'undefined') throw new Error('Util class is required and must be included before ' + pluginName); // plugin setup\n\n  $.fn[pluginName] = function (options) {\n    if ($(this).length === 0) {\n      console.log('No ' + pluginName + ' element exist.');\n      return;\n    } // global variables\n\n\n    var datatable = this; // debug enabled?\n    // 1) state will be cleared on each refresh\n    // 2) enable some logs\n    // 3) etc.\n\n    datatable.debug = false;\n    datatable.API = {\n      record: null,\n      value: null,\n      params: null\n    };\n    var Plugin = {\n      /********************\n       ** PRIVATE METHODS\n       ********************/\n      isInit: false,\n      offset: 110,\n      stateId: 'meta',\n      ajaxParams: {},\n      init: function init(options) {\n        var isHtmlTable = false; // data source option empty is normal table\n\n        if (options.data.source === null) {\n          Plugin.extractTable();\n          isHtmlTable = true;\n        }\n\n        Plugin.setupBaseDOM.call();\n        Plugin.setupDOM(datatable.table);\n        Plugin.spinnerCallback(true); // set custom query from options\n\n        Plugin.setDataSourceQuery(Plugin.getOption('data.source.read.params.query')); // on event after layout had done setup, show datatable\n\n        $(datatable).on(pfx + 'datatable--on-layout-updated', Plugin.afterRender);\n        if (datatable.debug) Plugin.stateRemove(Plugin.stateId); // initialize extensions\n\n        $.each(Plugin.getOption('extensions'), function (extName, extOptions) {\n          if (typeof $.fn[pluginName][extName] === 'function') new $.fn[pluginName][extName](datatable, extOptions);\n        }); // get data\n\n        if (options.data.type === 'remote' || options.data.type === 'local') {\n          if (options.data.saveState === false || options.data.saveState.cookie === false && options.data.saveState.webstorage === false) {\n            Plugin.stateRemove(Plugin.stateId);\n          } // get data for local datatable and local table\n\n\n          if (options.data.type === 'local' && typeof options.data.source === 'object') {\n            datatable.dataSet = datatable.originalDataSet = Plugin.dataMapCallback(options.data.source);\n          }\n\n          Plugin.dataRender();\n        }\n\n        if (!isHtmlTable) {\n          // if not a html table, setup header\n          Plugin.setHeadTitle();\n\n          if (Plugin.getOption('layout.footer')) {\n            Plugin.setHeadTitle(datatable.tableFoot);\n          }\n        } // hide header\n\n\n        if (typeof options.layout.header !== 'undefined' && options.layout.header === false) {\n          $(datatable.table).find('thead').remove();\n        } // hide footer\n\n\n        if (typeof options.layout.footer !== 'undefined' && options.layout.footer === false) {\n          $(datatable.table).find('tfoot').remove();\n        } // for normal and local data type, run layoutUpdate\n\n\n        if (options.data.type === null || options.data.type === 'local') {\n          Plugin.setupCellField.call();\n          Plugin.setupTemplateCell.call(); // setup nested datatable, if option enabled\n\n          Plugin.setupSubDatatable.call(); // setup extra system column properties\n\n          Plugin.setupSystemColumn.call();\n          Plugin.redraw();\n        }\n\n        $(window).resize(Plugin.fullRender);\n        $(datatable).height('');\n        $(Plugin.getOption('search.input')).on('keyup', function (e) {\n          if (Plugin.getOption('search.onEnter') && e.which !== 13) return;\n          Plugin.search($(this).val());\n        });\n        return datatable;\n      },\n\n      /**\n       * Extract static HTML table content into datasource\n       */\n      extractTable: function extractTable() {\n        var columns = [];\n        var headers = $(datatable).find('tr:first-child th').get().map(function (cell, i) {\n          var field = $(cell).data('field');\n\n          if (typeof field === 'undefined') {\n            field = $(cell).text().trim();\n          }\n\n          var column = {\n            field: field,\n            title: field\n          };\n\n          for (var ii in options.columns) {\n            if (options.columns[ii].field === field) {\n              column = $.extend(true, {}, options.columns[ii], column);\n            }\n          }\n\n          columns.push(column);\n          return field;\n        }); // auto create columns config\n\n        options.columns = columns;\n        var rowProp = [];\n        var source = [];\n        $(datatable).find('tr').each(function () {\n          if ($(this).find('td').length) {\n            rowProp.push($(this).prop('attributes'));\n          }\n\n          var td = {};\n          $(this).find('td').each(function (i, cell) {\n            td[headers[i]] = cell.innerHTML.trim();\n          });\n\n          if (!util.isEmpty(td)) {\n            source.push(td);\n          }\n        });\n        options.data.attr.rowProps = rowProp;\n        options.data.source = source;\n      },\n\n      /**\n       * One time layout update on init\n       */\n      layoutUpdate: function layoutUpdate() {\n        // setup nested datatable, if option enabled\n        Plugin.setupSubDatatable.call(); // setup extra system column properties\n\n        Plugin.setupSystemColumn.call(); // setup cell hover event\n\n        Plugin.setupHover.call();\n\n        if (typeof options.detail === 'undefined' // temporary disable lock column in subtable\n        && Plugin.getDepth() === 1) {\n          // lock columns handler\n          Plugin.lockTable.call();\n        }\n\n        Plugin.columnHide.call();\n        Plugin.resetScroll();\n\n        if (!Plugin.isInit) {\n          $(datatable).trigger(pfx + 'datatable--on-init', {\n            table: $(datatable.wrap).attr('id'),\n            options: options\n          });\n          Plugin.isInit = true;\n        }\n\n        $(datatable).trigger(pfx + 'datatable--on-layout-updated', {\n          table: $(datatable.wrap).attr('id')\n        });\n      },\n      lockTable: function lockTable() {\n        // todo; revise lock table responsive\n        var lock = {\n          lockEnabled: false,\n          init: function init() {\n            // check if table should be locked columns\n            lock.lockEnabled = Plugin.lockEnabledColumns();\n\n            if (lock.lockEnabled.left.length === 0 && lock.lockEnabled.right.length === 0) {\n              return;\n            }\n\n            lock.enable();\n          },\n          enable: function enable() {\n            var enableLock = function enableLock(tablePart) {\n              // check if already has lock column\n              if ($(tablePart).find('.' + pfx + 'datatable__lock').length > 0) {\n                Plugin.log('Locked container already exist in: ', tablePart);\n                return;\n              } // check if no rows exists\n\n\n              if ($(tablePart).find('.' + pfx + 'datatable__row').length === 0) {\n                Plugin.log('No row exist in: ', tablePart);\n                return;\n              } // locked div container\n\n\n              var lockLeft = $('<div/>').addClass(pfx + 'datatable__lock ' + pfx + 'datatable__lock--left');\n              var lockScroll = $('<div/>').addClass(pfx + 'datatable__lock ' + pfx + 'datatable__lock--scroll');\n              var lockRight = $('<div/>').addClass(pfx + 'datatable__lock ' + pfx + 'datatable__lock--right');\n              $(tablePart).find('.' + pfx + 'datatable__row').each(function () {\n                var rowLeft = $('<tr/>').addClass(pfx + 'datatable__row').appendTo(lockLeft);\n                var rowScroll = $('<tr/>').addClass(pfx + 'datatable__row').appendTo(lockScroll);\n                var rowRight = $('<tr/>').addClass(pfx + 'datatable__row').appendTo(lockRight);\n                $(this).find('.' + pfx + 'datatable__cell').each(function () {\n                  var locked = $(this).data('locked');\n\n                  if (typeof locked !== 'undefined') {\n                    if (typeof locked.left !== 'undefined' || locked === true) {\n                      // default locked to left\n                      $(this).appendTo(rowLeft);\n                    }\n\n                    if (typeof locked.right !== 'undefined') {\n                      $(this).appendTo(rowRight);\n                    }\n                  } else {\n                    $(this).appendTo(rowScroll);\n                  }\n                }); // remove old row\n\n                $(this).remove();\n              });\n\n              if (lock.lockEnabled.left.length > 0) {\n                $(datatable.wrap).addClass(pfx + 'datatable--lock');\n                $(lockLeft).appendTo(tablePart);\n              }\n\n              if (lock.lockEnabled.left.length > 0 || lock.lockEnabled.right.length > 0) {\n                $(lockScroll).appendTo(tablePart);\n              }\n\n              if (lock.lockEnabled.right.length > 0) {\n                $(datatable.wrap).addClass(pfx + 'datatable--lock');\n                $(lockRight).appendTo(tablePart);\n              }\n            };\n\n            $(datatable.table).find('thead,tbody,tfoot').each(function () {\n              var tablePart = this;\n\n              if ($(this).find('.' + pfx + 'datatable__lock').length === 0) {\n                $(this).ready(function () {\n                  enableLock(tablePart);\n                });\n              }\n            });\n          }\n        };\n        lock.init();\n        return lock;\n      },\n\n      /**\n       * Render everything for resize\n       */\n      fullRender: function fullRender() {\n        if (Plugin.isLocked()) {\n          $(datatable.tableHead).empty();\n          Plugin.setHeadTitle();\n\n          if (Plugin.getOption('layout.footer')) {\n            $(datatable.tableFoot).empty();\n            Plugin.setHeadTitle(datatable.tableFoot);\n          } // todo; full render datatable for specific condition only\n\n\n          Plugin.spinnerCallback(true);\n          $(datatable.wrap).removeClass(pfx + 'datatable--loaded');\n          Plugin.insertData();\n        }\n      },\n      lockEnabledColumns: function lockEnabledColumns() {\n        var screen = $(window).width();\n        var columns = options.columns;\n        var enabled = {\n          left: [],\n          right: []\n        };\n        $.each(columns, function (i, column) {\n          if (typeof column.locked !== 'undefined') {\n            if (typeof column.locked.left !== 'undefined') {\n              if (util.getBreakpoint(column.locked.left) <= screen) {\n                enabled['left'].push(column.locked.left);\n              }\n            }\n\n            if (typeof column.locked.right !== 'undefined') {\n              if (util.getBreakpoint(column.locked.right) <= screen) {\n                enabled['right'].push(column.locked.right);\n              }\n            }\n          }\n        });\n        return enabled;\n      },\n\n      /**\n       * After render event, called by '+pfx+'-datatable--on-layout-updated\n       * @param e\n       * @param args\n       */\n      afterRender: function afterRender(e, args) {\n        if (args.table == $(datatable.wrap).attr('id')) {\n          $(datatable).ready(function () {\n            if (!Plugin.isLocked()) {\n              Plugin.redraw(); // work on non locked columns\n\n              if (Plugin.getOption('rows.autoHide')) {\n                Plugin.autoHide(); // reset row\n\n                $(datatable.table).find('.' + pfx + 'datatable__row').css('height', '');\n              }\n            }\n\n            Plugin.rowEvenOdd.call(); // redraw locked columns table\n\n            if (Plugin.isLocked()) Plugin.redraw();\n            $(datatable.tableBody).css('visibility', '');\n            $(datatable.wrap).addClass(pfx + 'datatable--loaded');\n            Plugin.scrollbar.call(); // Plugin.hoverColumn.call();\n\n            Plugin.spinnerCallback(false);\n            Plugin.sorting.call();\n          });\n        }\n      },\n      hoverTimer: 0,\n      isScrolling: false,\n      setupHover: function setupHover() {\n        $(window).scroll(function (e) {\n          // stop hover when scrolling\n          clearTimeout(Plugin.hoverTimer);\n          Plugin.isScrolling = true;\n        });\n        $(datatable.tableBody).find('.' + pfx + 'datatable__cell').off('mouseenter', 'mouseleave').on('mouseenter', function () {\n          // reset scroll timer to hover class\n          Plugin.hoverTimer = setTimeout(function () {\n            Plugin.isScrolling = false;\n          }, 200);\n          if (Plugin.isScrolling) return; // normal table\n\n          var row = $(this).closest('.' + pfx + 'datatable__row').addClass(pfx + 'datatable__row--hover');\n          var index = $(row).index() + 1; // lock table\n\n          $(row).closest('.' + pfx + 'datatable__lock').parent().find('.' + pfx + 'datatable__row:nth-child(' + index + ')').addClass(pfx + 'datatable__row--hover');\n        }).on('mouseleave', function () {\n          // normal table\n          var row = $(this).closest('.' + pfx + 'datatable__row').removeClass(pfx + 'datatable__row--hover');\n          var index = $(row).index() + 1; // look table\n\n          $(row).closest('.' + pfx + 'datatable__lock').parent().find('.' + pfx + 'datatable__row:nth-child(' + index + ')').removeClass(pfx + 'datatable__row--hover');\n        });\n      },\n\n      /**\n       * Adjust width of locked table containers by resize handler\n       * @returns {number}\n       */\n      adjustLockContainer: function adjustLockContainer() {\n        if (!Plugin.isLocked()) return 0; // refer to head dimension\n\n        var containerWidth = $(datatable.tableHead).width();\n        var lockLeft = $(datatable.tableHead).find('.' + pfx + 'datatable__lock--left').width();\n        var lockRight = $(datatable.tableHead).find('.' + pfx + 'datatable__lock--right').width();\n        if (typeof lockLeft === 'undefined') lockLeft = 0;\n        if (typeof lockRight === 'undefined') lockRight = 0;\n        var lockScroll = Math.floor(containerWidth - lockLeft - lockRight);\n        $(datatable.table).find('.' + pfx + 'datatable__lock--scroll').css('width', lockScroll);\n        return lockScroll;\n      },\n\n      /**\n       * todo; not in use\n       */\n      dragResize: function dragResize() {\n        var pressed = false;\n        var start = undefined;\n        var startX, startWidth;\n        $(datatable.tableHead).find('.' + pfx + 'datatable__cell').mousedown(function (e) {\n          start = $(this);\n          pressed = true;\n          startX = e.pageX;\n          startWidth = $(this).width();\n          $(start).addClass(pfx + 'datatable__cell--resizing');\n        }).mousemove(function (e) {\n          if (pressed) {\n            var i = $(start).index();\n            var tableBody = $(datatable.tableBody);\n            var ifLocked = $(start).closest('.' + pfx + 'datatable__lock');\n\n            if (ifLocked) {\n              var lockedIndex = $(ifLocked).index();\n              tableBody = $(datatable.tableBody).find('.' + pfx + 'datatable__lock').eq(lockedIndex);\n            }\n\n            $(tableBody).find('.' + pfx + 'datatable__row').each(function (tri, tr) {\n              $(tr).find('.' + pfx + 'datatable__cell').eq(i).width(startWidth + (e.pageX - startX)).children().width(startWidth + (e.pageX - startX));\n            });\n            $(start).children().css('width', startWidth + (e.pageX - startX));\n          }\n        }).mouseup(function () {\n          $(start).removeClass(pfx + 'datatable__cell--resizing');\n          pressed = false;\n        });\n        $(document).mouseup(function () {\n          $(start).removeClass(pfx + 'datatable__cell--resizing');\n          pressed = false;\n        });\n      },\n\n      /**\n       * To prepare placeholder for table before content is loading\n       */\n      initHeight: function initHeight() {\n        if (options.layout.height && options.layout.scroll) {\n          var theadHeight = $(datatable.tableHead).find('.' + pfx + 'datatable__row').height();\n          var tfootHeight = $(datatable.tableFoot).find('.' + pfx + 'datatable__row').height();\n          var bodyHeight = options.layout.height;\n\n          if (theadHeight > 0) {\n            bodyHeight -= theadHeight;\n          }\n\n          if (tfootHeight > 0) {\n            bodyHeight -= tfootHeight;\n          }\n\n          $(datatable.tableBody).css('max-height', bodyHeight); // set scrollable area fixed height\n\n          $(datatable.tableBody).find('.' + pfx + 'datatable__lock--scroll').css('height', bodyHeight);\n        }\n      },\n\n      /**\n       * Setup base DOM (table, thead, tbody, tfoot) and create if not exist.\n       */\n      setupBaseDOM: function setupBaseDOM() {\n        // keep original state before datatable initialize\n        datatable.initialDatatable = $(datatable).clone(); // main element\n\n        if ($(datatable).prop('tagName') === 'TABLE') {\n          // if main init element is <table>, wrap with div\n          datatable.table = $(datatable).removeClass(pfx + 'datatable').addClass(pfx + 'datatable__table');\n\n          if ($(datatable.table).parents('.' + pfx + 'datatable').length === 0) {\n            datatable.table.wrap($('<div/>').addClass(pfx + 'datatable').addClass(pfx + 'datatable--' + options.layout.theme));\n            datatable.wrap = $(datatable.table).parent();\n          }\n        } else {\n          // create table\n          datatable.wrap = $(datatable).addClass(pfx + 'datatable').addClass(pfx + 'datatable--' + options.layout.theme);\n          datatable.table = $('<table/>').addClass(pfx + 'datatable__table').appendTo(datatable);\n        }\n\n        if (typeof options.layout[\"class\"] !== 'undefined') {\n          $(datatable.wrap).addClass(options.layout[\"class\"]);\n        }\n\n        $(datatable.table).removeClass(pfx + 'datatable--destroyed').css('display', 'block'); // force disable save state\n\n        if (typeof $(datatable).attr('id') === 'undefined') {\n          Plugin.setOption('data.saveState', false);\n          $(datatable.table).attr('id', util.getUniqueID(pfx + 'datatable--'));\n        } // predefine table height\n\n\n        if (Plugin.getOption('layout.minHeight')) $(datatable.table).css('min-height', Plugin.getOption('layout.minHeight'));\n        if (Plugin.getOption('layout.height')) $(datatable.table).css('max-height', Plugin.getOption('layout.height')); // for normal table load\n\n        if (options.data.type === null) {\n          $(datatable.table).css('width', '').css('display', '');\n        } // create table head element\n\n\n        datatable.tableHead = $(datatable.table).find('thead');\n\n        if ($(datatable.tableHead).length === 0) {\n          datatable.tableHead = $('<thead/>').prependTo(datatable.table);\n        } // create table head element\n\n\n        datatable.tableBody = $(datatable.table).find('tbody');\n\n        if ($(datatable.tableBody).length === 0) {\n          datatable.tableBody = $('<tbody/>').appendTo(datatable.table);\n        }\n\n        if (typeof options.layout.footer !== 'undefined' && options.layout.footer) {\n          // create table foot element\n          datatable.tableFoot = $(datatable.table).find('tfoot');\n\n          if ($(datatable.tableFoot).length === 0) {\n            datatable.tableFoot = $('<tfoot/>').appendTo(datatable.table);\n          }\n        }\n      },\n\n      /**\n       * Set column data before table manipulation.\n       */\n      setupCellField: function setupCellField(tableParts) {\n        if (typeof tableParts === 'undefined') tableParts = $(datatable.table).children();\n        var columns = options.columns;\n        $.each(tableParts, function (part, tablePart) {\n          $(tablePart).find('.' + pfx + 'datatable__row').each(function (tri, tr) {\n            // prepare data\n            $(tr).find('.' + pfx + 'datatable__cell').each(function (tdi, td) {\n              if (typeof columns[tdi] !== 'undefined') {\n                $(td).data(columns[tdi]);\n              }\n            });\n          });\n        });\n      },\n\n      /**\n       * Set column template callback\n       * @param tablePart\n       */\n      setupTemplateCell: function setupTemplateCell(tablePart) {\n        if (typeof tablePart === 'undefined') tablePart = datatable.tableBody;\n        var columns = options.columns;\n        $(tablePart).find('.' + pfx + 'datatable__row').each(function (tri, tr) {\n          // row data object, if any\n          var obj = $(tr).data('obj') || {}; // @deprecated in v5.0.6\n          // obj['getIndex'] = function() {\n          // \treturn tri;\n          // };\n          // @deprecated in v5.0.6\n          // obj['getDatatable'] = function() {\n          // \treturn datatable;\n          // };\n          // @deprecated in v5.0.6\n\n          var rowCallback = Plugin.getOption('rows.callback');\n\n          if (typeof rowCallback === 'function') {\n            rowCallback($(tr), obj, tri);\n          } // before template row callback\n\n\n          var beforeTemplate = Plugin.getOption('rows.beforeTemplate');\n\n          if (typeof beforeTemplate === 'function') {\n            beforeTemplate($(tr), obj, tri);\n          } // if data object is undefined, collect from table\n\n\n          if (typeof obj === 'undefined') {\n            obj = {};\n            $(tr).find('.' + pfx + 'datatable__cell').each(function (tdi, td) {\n              // get column settings by field\n              var column = $.grep(columns, function (n, i) {\n                return $(td).data('field') === n.field;\n              })[0];\n\n              if (typeof column !== 'undefined') {\n                obj[column['field']] = $(td).text();\n              }\n            });\n          }\n\n          $(tr).find('.' + pfx + 'datatable__cell').each(function (tdi, td) {\n            // get column settings by field\n            var column = $.grep(columns, function (n, i) {\n              return $(td).data('field') === n.field;\n            })[0];\n\n            if (typeof column !== 'undefined') {\n              // column template\n              if (typeof column.template !== 'undefined') {\n                var finalValue = ''; // template string\n\n                if (typeof column.template === 'string') {\n                  finalValue = Plugin.dataPlaceholder(column.template, obj);\n                } // template callback function\n\n\n                if (typeof column.template === 'function') {\n                  finalValue = column.template(obj, tri, datatable);\n                }\n\n                var span = document.createElement('span');\n                span.innerHTML = finalValue; // insert to cell, wrap with span\n\n                $(td).html(span); // set span overflow\n\n                if (typeof column.overflow !== 'undefined') {\n                  $(span).css('overflow', column.overflow);\n                  $(span).css('position', 'relative');\n                }\n              }\n            }\n          }); // after template row callback\n\n          var afterTemplate = Plugin.getOption('rows.afterTemplate');\n\n          if (typeof afterTemplate === 'function') {\n            afterTemplate($(tr), obj, tri);\n          }\n        });\n      },\n\n      /**\n       * Setup extra system column properties\n       * Note: selector checkbox, subtable toggle\n       */\n      setupSystemColumn: function setupSystemColumn() {\n        datatable.dataSet = datatable.dataSet || []; // no records available\n\n        if (datatable.dataSet.length === 0) return;\n        var columns = options.columns;\n        $(datatable.tableBody).find('.' + pfx + 'datatable__row').each(function (tri, tr) {\n          $(tr).find('.' + pfx + 'datatable__cell').each(function (tdi, td) {\n            // get column settings by field\n            var column = $.grep(columns, function (n, i) {\n              return $(td).data('field') === n.field;\n            })[0];\n\n            if (typeof column !== 'undefined') {\n              var value = $(td).text(); // enable column selector\n\n              if (typeof column.selector !== 'undefined' && column.selector !== false) {\n                // check if checkbox exist\n                if ($(td).find('.' + pfx + 'checkbox [type=\"checkbox\"]').length > 0) return;\n                $(td).addClass(pfx + 'datatable__cell--check'); // append checkbox\n\n                var chk = $('<label/>').addClass(pfx + 'checkbox ' + pfx + 'checkbox--single').append($('<input/>').attr('type', 'checkbox').attr('value', value).on('click', function () {\n                  if ($(this).is(':checked')) {\n                    // add checkbox active row class\n                    Plugin.setActive(this);\n                  } else {\n                    // add checkbox active row class\n                    Plugin.setInactive(this);\n                  }\n                })).append('&nbsp;<span></span>'); // checkbox selector has outline style\n\n                if (typeof column.selector[\"class\"] !== 'undefined') {\n                  $(chk).addClass(column.selector[\"class\"]);\n                }\n\n                $(td).children().html(chk);\n              } // enable column subtable toggle\n\n\n              if (typeof column.subtable !== 'undefined' && column.subtable) {\n                // check if subtable toggle exist\n                if ($(td).find('.' + pfx + 'datatable__toggle-subtable').length > 0) return; // append subtable toggle\n\n                $(td).children().html($('<a/>').addClass(pfx + 'datatable__toggle-subtable').attr('href', '#').attr('data-value', value).append($('<i/>').addClass(Plugin.getOption('layout.icons.rowDetail.collapse'))));\n              }\n            }\n          });\n        }); // init checkbox for header/footer\n\n        var initCheckbox = function initCheckbox(tr) {\n          // get column settings by field\n          var column = $.grep(columns, function (n, i) {\n            return typeof n.selector !== 'undefined' && n.selector !== false;\n          })[0];\n\n          if (typeof column !== 'undefined') {\n            // enable column selector\n            if (typeof column.selector !== 'undefined' && column.selector !== false) {\n              var td = $(tr).find('[data-field=\"' + column.field + '\"]'); // check if checkbox exist\n\n              if ($(td).find('.' + pfx + 'checkbox [type=\"checkbox\"]').length > 0) return;\n              $(td).addClass(pfx + 'datatable__cell--check'); // append checkbox\n\n              var chk = $('<label/>').addClass(pfx + 'checkbox ' + pfx + 'checkbox--single ' + pfx + 'checkbox--all').append($('<input/>').attr('type', 'checkbox').on('click', function () {\n                if ($(this).is(':checked')) {\n                  Plugin.setActiveAll(true);\n                } else {\n                  Plugin.setActiveAll(false);\n                }\n              })).append('&nbsp;<span></span>'); // checkbox selector has outline style\n\n              if (typeof column.selector[\"class\"] !== 'undefined') {\n                $(chk).addClass(column.selector[\"class\"]);\n              }\n\n              $(td).children().html(chk);\n            }\n          }\n        };\n\n        if (options.layout.header) {\n          initCheckbox($(datatable.tableHead).find('.' + pfx + 'datatable__row').first());\n        }\n\n        if (options.layout.footer) {\n          initCheckbox($(datatable.tableFoot).find('.' + pfx + 'datatable__row').first());\n        }\n      },\n\n      /**\n       * Adjust width to match container size\n       */\n      adjustCellsWidth: function adjustCellsWidth() {\n        // get table width\n        var containerWidth = $(datatable.tableHead).width(); // offset reserved for sort icon\n\n        var sortOffset = 20; // get total number of columns\n\n        var columns = $(datatable.tableHead).find('.' + pfx + 'datatable__row:first-child').find('.' + pfx + 'datatable__cell:visible').length;\n\n        if (columns > 0) {\n          //  remove reserved sort icon width\n          containerWidth = containerWidth - sortOffset * columns;\n          var minWidth = Math.floor(containerWidth / columns); // minimum width\n\n          if (minWidth <= Plugin.offset) {\n            minWidth = Plugin.offset;\n          }\n\n          $(datatable.table).find('.' + pfx + 'datatable__row').find('.' + pfx + 'datatable__cell:visible').each(function (tdi, td) {\n            var width = minWidth;\n            var dataWidth = $(td).data('width');\n\n            if (typeof dataWidth !== 'undefined') {\n              width = dataWidth;\n            }\n\n            $(td).children().css('width', parseInt(width));\n          });\n        }\n\n        return datatable;\n      },\n\n      /**\n       * Adjust height to match container size\n       */\n      adjustCellsHeight: function adjustCellsHeight() {\n        $.each($(datatable.table).children(), function (part, tablePart) {\n          var totalRows = $(tablePart).find('.' + pfx + 'datatable__row').first().parent().find('.' + pfx + 'datatable__row').length;\n\n          for (var i = 1; i <= totalRows; i++) {\n            var rows = $(tablePart).find('.' + pfx + 'datatable__row:nth-child(' + i + ')');\n\n            if ($(rows).length > 0) {\n              var maxHeight = Math.max.apply(null, $(rows).map(function () {\n                return $(this).height();\n              }).get());\n              $(rows).css('height', Math.ceil(parseInt(maxHeight)));\n            }\n          }\n        });\n      },\n\n      /**\n       * Setup table DOM and classes\n       */\n      setupDOM: function setupDOM(table) {\n        // set table classes\n        $(table).find('> thead').addClass(pfx + 'datatable__head');\n        $(table).find('> tbody').addClass(pfx + 'datatable__body');\n        $(table).find('> tfoot').addClass(pfx + 'datatable__foot');\n        $(table).find('tr').addClass(pfx + 'datatable__row');\n        $(table).find('tr > th, tr > td').addClass(pfx + 'datatable__cell');\n        $(table).find('tr > th, tr > td').each(function (i, td) {\n          if ($(td).find('span').length === 0) {\n            $(td).wrapInner($('<span/>').css('width', Plugin.offset));\n          }\n        });\n      },\n\n      /**\n       * Default scrollbar\n       * @returns {{tableLocked: null, init: init, onScrolling: onScrolling}}\n       */\n      scrollbar: function scrollbar() {\n        var scroll = {\n          scrollable: null,\n          tableLocked: null,\n          mcsOptions: {\n            scrollInertia: 0,\n            autoDraggerLength: true,\n            autoHideScrollbar: true,\n            autoExpandScrollbar: false,\n            alwaysShowScrollbar: 0,\n            mouseWheel: {\n              scrollAmount: 120,\n              preventDefault: false\n            },\n            advanced: {\n              updateOnContentResize: true,\n              autoExpandHorizontalScroll: true\n            },\n            theme: 'minimal-dark'\n          },\n          init: function init() {\n            var screen = util.getViewPort().width; // setup scrollable datatable\n\n            if (options.layout.scroll) {\n              // add scrollable datatable class\n              $(datatable.wrap).addClass(pfx + 'datatable--scroll');\n              var scrollable = $(datatable.tableBody).find('.' + pfx + 'datatable__lock--scroll'); // check if scrollable area have rows\n\n              if ($(scrollable).find('.' + pfx + 'datatable__row').length > 0 && $(scrollable).length > 0) {\n                scroll.scrollHead = $(datatable.tableHead).find('> .' + pfx + 'datatable__lock--scroll > .' + pfx + 'datatable__row');\n                scroll.scrollFoot = $(datatable.tableFoot).find('> .' + pfx + 'datatable__lock--scroll > .' + pfx + 'datatable__row');\n                scroll.tableLocked = $(datatable.tableBody).find('.' + pfx + 'datatable__lock:not(.' + pfx + 'datatable__lock--scroll)');\n\n                if (Plugin.getOption('layout.customScrollbar') && util.detectIE() != 10 && screen > util.getBreakpoint('lg')) {\n                  scroll.initCustomScrollbar(scrollable[0]);\n                } else {\n                  scroll.initDefaultScrollbar(scrollable);\n                }\n              } else if ($(datatable.tableBody).find('.' + pfx + 'datatable__row').length > 0) {\n                scroll.scrollHead = $(datatable.tableHead).find('> .' + pfx + 'datatable__row');\n                scroll.scrollFoot = $(datatable.tableFoot).find('> .' + pfx + 'datatable__row');\n\n                if (Plugin.getOption('layout.customScrollbar') && util.detectIE() != 10 && screen > util.getBreakpoint('lg')) {\n                  scroll.initCustomScrollbar(datatable.tableBody);\n                } else {\n                  scroll.initDefaultScrollbar(datatable.tableBody);\n                }\n              }\n            } else {\n              $(datatable.table). // css('height', 'auto').\n              css('overflow-x', 'auto');\n            }\n          },\n          initDefaultScrollbar: function initDefaultScrollbar(scrollable) {\n            $(scrollable).css('overflow', 'auto').off().on('scroll', scroll.onScrolling);\n          },\n          onScrolling: function onScrolling(e) {\n            var left = $(this).scrollLeft();\n            var top = $(this).scrollTop();\n            $(scroll.scrollHead).css('left', -left);\n            $(scroll.scrollFoot).css('left', -left);\n            $(scroll.tableLocked).each(function (i, table) {\n              $(table).css('top', -top);\n            });\n          },\n          initCustomScrollbar: function initCustomScrollbar(scrollable) {\n            scroll.scrollable = scrollable; // create a new instance for table body with scrollbar\n\n            Plugin.initScrollbar(scrollable);\n            $(scrollable).off().on('scroll', scroll.onScrolling);\n          }\n        };\n        scroll.init();\n        return scroll;\n      },\n\n      /**\n       * Init custom scrollbar and reset position\n       * @param element\n       * @param options\n       */\n      initScrollbar: function initScrollbar(element, options) {\n        $(datatable.tableBody).css('overflow', '');\n\n        if (util.hasClass(element, 'ps')) {\n          $(element).data('ps').update();\n        } else {\n          var ps = new PerfectScrollbar(element);\n          $(element).data('ps', ps);\n        }\n      },\n\n      /**\n       * Set column title from options.columns settings\n       */\n      setHeadTitle: function setHeadTitle(tablePart) {\n        if (typeof tablePart === 'undefined') tablePart = datatable.tableHead;\n        tablePart = $(tablePart)[0];\n        var columns = options.columns;\n        var row = tablePart.getElementsByTagName('tr')[0];\n        var ths = tablePart.getElementsByTagName('td');\n\n        if (typeof row === 'undefined') {\n          row = document.createElement('tr');\n          tablePart.appendChild(row);\n        }\n\n        $.each(columns, function (i, column) {\n          var th = ths[i];\n\n          if (typeof th === 'undefined') {\n            th = document.createElement('th');\n            row.appendChild(th);\n          } // set column title\n\n\n          if (typeof column['title'] !== 'undefined') {\n            th.innerHTML = column.title;\n            th.setAttribute('data-field', column.field);\n            util.addClass(th, column[\"class\"]);\n            $(th).data(column);\n          } // set header attr option\n\n\n          if (typeof column.attr !== 'undefined') {\n            $.each(column.attr, function (key, val) {\n              th.setAttribute(key, val);\n            });\n          } // apply text align to thead/tfoot\n\n\n          if (typeof column.textAlign !== 'undefined') {\n            var align = typeof datatable.textAlign[column.textAlign] !== 'undefined' ? datatable.textAlign[column.textAlign] : '';\n            util.addClass(th, align);\n          }\n        });\n        Plugin.setupDOM(tablePart);\n      },\n\n      /**\n       * Initiate to get remote or local data via ajax\n       */\n      dataRender: function dataRender(action) {\n        $(datatable.table).siblings('.' + pfx + 'datatable__pager').removeClass(pfx + 'datatable--paging-loaded');\n\n        var buildMeta = function buildMeta() {\n          datatable.dataSet = datatable.dataSet || [];\n          Plugin.localDataUpdate(); // local pagination meta\n\n          var meta = Plugin.getDataSourceParam('pagination');\n\n          if (meta.perpage === 0) {\n            meta.perpage = options.data.pageSize || 10;\n          }\n\n          meta.total = datatable.dataSet.length;\n          var start = Math.max(meta.perpage * (meta.page - 1), 0);\n          var end = Math.min(start + meta.perpage, meta.total);\n          datatable.dataSet = $(datatable.dataSet).slice(start, end);\n          return meta;\n        };\n\n        var afterGetData = function afterGetData(result) {\n          var localPagingCallback = function localPagingCallback(ctx, meta) {\n            if (!$(ctx.pager).hasClass(pfx + 'datatable--paging-loaded')) {\n              $(ctx.pager).remove();\n              ctx.init(meta);\n            }\n\n            $(ctx.pager).off().on(pfx + 'datatable--on-goto-page', function (e) {\n              $(ctx.pager).remove();\n              ctx.init(meta);\n            });\n            var start = Math.max(meta.perpage * (meta.page - 1), 0);\n            var end = Math.min(start + meta.perpage, meta.total);\n            Plugin.localDataUpdate();\n            datatable.dataSet = $(datatable.dataSet).slice(start, end); // insert data into table content\n\n            Plugin.insertData();\n          };\n\n          $(datatable.wrap).removeClass(pfx + 'datatable--error'); // pagination enabled\n\n          if (options.pagination) {\n            if (options.data.serverPaging && options.data.type !== 'local') {\n              // server pagination\n              var serverMeta = Plugin.getObject('meta', result || null);\n\n              if (serverMeta !== null) {\n                Plugin.paging(serverMeta);\n              } else {\n                // no meta object from server response, fallback to local pagination\n                Plugin.paging(buildMeta(), localPagingCallback);\n              }\n            } else {\n              // local pagination can be used by remote data also\n              Plugin.paging(buildMeta(), localPagingCallback);\n            }\n          } else {\n            // pagination is disabled\n            Plugin.localDataUpdate();\n          } // insert data into table content\n\n\n          Plugin.insertData();\n        }; // get local datasource\n\n\n        if (options.data.type === 'local' // for remote json datasource\n        // || typeof options.data.source.read === 'undefined' && datatable.dataSet !== null\n        // for remote datasource, server sorting is disabled and data already received from remote\n        || options.data.serverSorting === false && action === 'sort' || options.data.serverFiltering === false && action === 'search') {\n          afterGetData();\n          return;\n        } // getting data from remote only\n\n\n        Plugin.getData().done(afterGetData);\n      },\n\n      /**\n       * Process ajax data\n       */\n      insertData: function insertData() {\n        datatable.dataSet = datatable.dataSet || [];\n        var params = Plugin.getDataSourceParam(); // get row attributes\n\n        var pagination = params.pagination;\n        var start = (Math.max(pagination.page, 1) - 1) * pagination.perpage;\n        var end = Math.min(pagination.page, pagination.pages) * pagination.perpage;\n        var rowProps = {};\n\n        if (typeof options.data.attr.rowProps !== 'undefined' && options.data.attr.rowProps.length) {\n          rowProps = options.data.attr.rowProps.slice(start, end);\n        } // todo; fix performance\n\n\n        var tableBody = document.createElement('tbody');\n        tableBody.style.visibility = 'hidden';\n        var colLength = options.columns.length;\n        $.each(datatable.dataSet, function (rowIndex, row) {\n          var tr = document.createElement('tr');\n          tr.setAttribute('data-row', rowIndex); // keep data object to row\n\n          $(tr).data('obj', row);\n\n          if (typeof rowProps[rowIndex] !== 'undefined') {\n            $.each(rowProps[rowIndex], function () {\n              tr.setAttribute(this.name, this.value);\n            });\n          }\n\n          var cellIndex = 0;\n          var tds = [];\n\n          for (var a = 0; a < colLength; a += 1) {\n            var column = options.columns[a];\n            var classes = []; // add sorted class to cells\n\n            if (Plugin.getObject('sort.field', params) === column.field) {\n              classes.push(pfx + 'datatable__cell--sorted');\n            } // apply text align\n\n\n            if (typeof column.textAlign !== 'undefined') {\n              var align = typeof datatable.textAlign[column.textAlign] !== 'undefined' ? datatable.textAlign[column.textAlign] : '';\n              classes.push(align);\n            } // var classAttr = '';\n\n\n            if (typeof column[\"class\"] !== 'undefined') {\n              classes.push(column[\"class\"]);\n            }\n\n            var td = document.createElement('td');\n            util.addClass(td, classes.join(' '));\n            td.setAttribute('data-field', column.field);\n            td.innerHTML = Plugin.getObject(column.field, row);\n            tr.appendChild(td);\n          }\n\n          tableBody.appendChild(tr);\n        }); // display no records message\n\n        if (datatable.dataSet.length === 0) {\n          var errorSpan = document.createElement('span');\n          util.addClass(errorSpan, pfx + 'datatable--error');\n          errorSpan.innerHTML = Plugin.getOption('translate.records.noRecords');\n          tableBody.appendChild(errorSpan);\n          $(datatable.wrap).addClass(pfx + 'datatable--error ' + pfx + 'datatable--loaded');\n          Plugin.spinnerCallback(false);\n        } // replace existing table body\n\n\n        $(datatable.tableBody).replaceWith(tableBody);\n        datatable.tableBody = tableBody; // layout update\n\n        Plugin.setupDOM(datatable.table);\n        Plugin.setupCellField([datatable.tableBody]);\n        Plugin.setupTemplateCell(datatable.tableBody);\n        Plugin.layoutUpdate();\n      },\n      updateTableComponents: function updateTableComponents() {\n        datatable.tableHead = $(datatable.table).children('thead');\n        datatable.tableBody = $(datatable.table).children('tbody');\n        datatable.tableFoot = $(datatable.table).children('tfoot');\n      },\n\n      /**\n       * Call ajax for raw JSON data\n       */\n      getData: function getData() {\n        Plugin.spinnerCallback(true);\n        var ajaxParams = {\n          dataType: 'json',\n          method: 'GET',\n          data: {},\n          timeout: Plugin.getOption('data.source.read.timeout') || 30000\n        };\n\n        if (options.data.type === 'local') {\n          ajaxParams.url = options.data.source;\n        }\n\n        if (options.data.type === 'remote') {\n          ajaxParams.url = Plugin.getOption('data.source.read.url');\n          if (typeof ajaxParams.url !== 'string') ajaxParams.url = Plugin.getOption('data.source.read');\n          if (typeof ajaxParams.url !== 'string') ajaxParams.url = Plugin.getOption('data.source');\n          ajaxParams.headers = Plugin.getOption('data.source.read.headers');\n          ajaxParams.method = Plugin.getOption('data.source.read.method') || 'POST';\n          var data = Plugin.getDataSourceParam(); // remove if server params is not enabled\n\n          if (!Plugin.getOption('data.serverPaging')) {\n            delete data['pagination'];\n          }\n\n          if (!Plugin.getOption('data.serverSorting')) {\n            delete data['sort'];\n          }\n\n          ajaxParams.data = $.extend({}, ajaxParams.data, data, Plugin.getOption('data.source.read.params'));\n        }\n\n        return $.ajax(ajaxParams).done(function (response, textStatus, jqXHR) {\n          datatable.lastResponse = response; // extendible data map callback for custom datasource\n\n          datatable.dataSet = datatable.originalDataSet = Plugin.dataMapCallback(response);\n          Plugin.setAutoColumns();\n          $(datatable).trigger(pfx + 'datatable--on-ajax-done', [datatable.dataSet]);\n        }).fail(function (jqXHR, textStatus, errorThrown) {\n          $(datatable).trigger(pfx + 'datatable--on-ajax-fail', [jqXHR]);\n          $(datatable.tableBody).html($('<span/>').addClass(pfx + 'datatable--error').html(Plugin.getOption('translate.records.noRecords')));\n          $(datatable.wrap).addClass(pfx + 'datatable--error ' + pfx + 'datatable--loaded');\n          Plugin.spinnerCallback(false);\n        }).always(function () {});\n      },\n\n      /**\n       * Pagination object\n       * @param meta if null, local pagination, otherwise remote pagination\n       * @param callback for update data when navigating page\n       */\n      paging: function paging(meta, callback) {\n        var pg = {\n          meta: null,\n          pager: null,\n          paginateEvent: null,\n          pagerLayout: {\n            pagination: null,\n            info: null\n          },\n          callback: null,\n          init: function init(meta) {\n            pg.meta = meta; // parse pagination meta to integer\n\n            pg.meta.page = parseInt(pg.meta.page);\n            pg.meta.pages = parseInt(pg.meta.pages);\n            pg.meta.perpage = parseInt(pg.meta.perpage);\n            pg.meta.total = parseInt(pg.meta.total); // todo; if meta object not exist will cause error\n            // always recount total pages\n\n            pg.meta.pages = Math.max(Math.ceil(pg.meta.total / pg.meta.perpage), 1); // current page must be not over than total pages\n\n            if (pg.meta.page > pg.meta.pages) pg.meta.page = pg.meta.pages; // set unique event name between tables\n\n            pg.paginateEvent = Plugin.getTablePrefix();\n            pg.pager = $(datatable.table).siblings('.' + pfx + 'datatable__pager');\n            if ($(pg.pager).hasClass(pfx + 'datatable--paging-loaded')) return; // if class .'+pfx+'datatable--paging-loaded not exist, recreate pagination\n\n            $(pg.pager).remove(); // if no pages available\n\n            if (pg.meta.pages === 0) return; // update datasource params\n\n            Plugin.setDataSourceParam('pagination', {\n              page: pg.meta.page,\n              pages: pg.meta.pages,\n              perpage: pg.meta.perpage,\n              total: pg.meta.total\n            }); // default callback function, contains remote pagination handler\n\n            pg.callback = pg.serverCallback; // custom callback function\n\n            if (typeof callback === 'function') pg.callback = callback;\n            pg.addPaginateEvent();\n            pg.populate();\n            pg.meta.page = Math.max(pg.meta.page || 1, pg.meta.page);\n            $(datatable).trigger(pg.paginateEvent, pg.meta);\n            pg.pagingBreakpoint.call();\n            $(window).resize(pg.pagingBreakpoint);\n          },\n          serverCallback: function serverCallback(ctx, meta) {\n            Plugin.dataRender();\n          },\n          populate: function populate() {\n            var icons = Plugin.getOption('layout.icons.pagination');\n            var title = Plugin.getOption('translate.toolbar.pagination.items.default'); // pager root element\n\n            pg.pager = $('<div/>').addClass(pfx + 'datatable__pager ' + pfx + 'datatable--paging-loaded clearfix'); // numbering links\n\n            var pagerNumber = $('<ul/>').addClass(pfx + 'datatable__pager-nav');\n            pg.pagerLayout['pagination'] = pagerNumber; // pager first/previous button\n\n            $('<li/>').append($('<a/>').attr('title', title.first).addClass(pfx + 'datatable__pager-link ' + pfx + 'datatable__pager-link--first').append($('<i/>').addClass(icons.first)).on('click', pg.gotoMorePage).attr('data-page', 1)).appendTo(pagerNumber);\n            $('<li/>').append($('<a/>').attr('title', title.prev).addClass(pfx + 'datatable__pager-link ' + pfx + 'datatable__pager-link--prev').append($('<i/>').addClass(icons.prev)).on('click', pg.gotoMorePage)).appendTo(pagerNumber); // more previous pages\n\n            $('<li/>').append($('<a/>').attr('title', title.more).addClass(pfx + 'datatable__pager-link ' + pfx + 'datatable__pager-link--more-prev').html($('<i/>').addClass(icons.more)).on('click', pg.gotoMorePage)).appendTo(pagerNumber);\n            $('<li/>').append($('<input/>').attr('type', 'text').addClass(pfx + 'pager-input form-control').attr('title', title.input).on('keyup', function () {\n              // on keyup update [data-page]\n              $(this).attr('data-page', Math.abs($(this).val()));\n            }).on('keypress', function (e) {\n              // on keypressed enter button\n              if (e.which === 13) pg.gotoMorePage(e);\n            })).appendTo(pagerNumber);\n            var pagesNumber = Plugin.getOption('toolbar.items.pagination.pages.desktop.pagesNumber');\n            var end = Math.ceil(pg.meta.page / pagesNumber) * pagesNumber;\n            var start = end - pagesNumber;\n\n            if (end > pg.meta.pages) {\n              end = pg.meta.pages;\n            }\n\n            for (var x = start; x < end; x++) {\n              var pageNumber = x + 1;\n              $('<li/>').append($('<a/>').addClass(pfx + 'datatable__pager-link ' + pfx + 'datatable__pager-link-number').text(pageNumber).attr('data-page', pageNumber).attr('title', pageNumber).on('click', pg.gotoPage)).appendTo(pagerNumber);\n            } // more next pages\n\n\n            $('<li/>').append($('<a/>').attr('title', title.more).addClass(pfx + 'datatable__pager-link ' + pfx + 'datatable__pager-link--more-next').html($('<i/>').addClass(icons.more)).on('click', pg.gotoMorePage)).appendTo(pagerNumber); // pager next/last button\n\n            $('<li/>').append($('<a/>').attr('title', title.next).addClass(pfx + 'datatable__pager-link ' + pfx + 'datatable__pager-link--next').append($('<i/>').addClass(icons.next)).on('click', pg.gotoMorePage)).appendTo(pagerNumber);\n            $('<li/>').append($('<a/>').attr('title', title.last).addClass(pfx + 'datatable__pager-link ' + pfx + 'datatable__pager-link--last').append($('<i/>').addClass(icons.last)).on('click', pg.gotoMorePage).attr('data-page', pg.meta.pages)).appendTo(pagerNumber); // page info\n\n            if (Plugin.getOption('toolbar.items.info')) {\n              pg.pagerLayout['info'] = $('<div/>').addClass(pfx + 'datatable__pager-info').append($('<span/>').addClass(pfx + 'datatable__pager-detail'));\n            }\n\n            $.each(Plugin.getOption('toolbar.layout'), function (i, layout) {\n              $(pg.pagerLayout[layout]).appendTo(pg.pager);\n            }); // page size select\n\n            var pageSizeSelect = $('<select/>').addClass('selectpicker ' + pfx + 'datatable__pager-size').attr('title', Plugin.getOption('translate.toolbar.pagination.items.default.select')).attr('data-width', '70px').val(pg.meta.perpage).on('change', pg.updatePerpage).prependTo(pg.pagerLayout['info']);\n            var pageSizes = Plugin.getOption('toolbar.items.pagination.pageSizeSelect'); // default value here, to fix override option by user\n\n            if (pageSizes.length == 0) pageSizes = [10, 20, 30, 50, 100];\n            $.each(pageSizes, function (i, size) {\n              var display = size;\n              if (size === -1) display = 'All';\n              $('<option/>').attr('value', size).html(display).appendTo(pageSizeSelect);\n            }); // init selectpicker to dropdown\n\n            $(datatable).ready(function () {\n              $('.selectpicker').selectpicker().siblings('.dropdown-toggle').attr('title', Plugin.getOption('translate.toolbar.pagination.items.default.select'));\n            });\n            pg.paste();\n          },\n          paste: function paste() {\n            // insert pagination based on placement position, top|bottom\n            $.each($.unique(Plugin.getOption('toolbar.placement')), function (i, position) {\n              if (position === 'bottom') {\n                $(pg.pager).clone(true).insertAfter(datatable.table);\n              }\n\n              if (position === 'top') {\n                // pager top need some extra space\n                $(pg.pager).clone(true).addClass(pfx + 'datatable__pager--top').insertBefore(datatable.table);\n              }\n            });\n          },\n          gotoMorePage: function gotoMorePage(e) {\n            e.preventDefault(); // $(this) is a link of .'+pfx+'datatable__pager-link\n\n            if ($(this).attr('disabled') === 'disabled') return false;\n            var page = $(this).attr('data-page'); // event from text input\n\n            if (typeof page === 'undefined') {\n              page = $(e.target).attr('data-page');\n            }\n\n            pg.openPage(parseInt(page));\n            return false;\n          },\n          gotoPage: function gotoPage(e) {\n            e.preventDefault(); // prevent from click same page number\n\n            if ($(this).hasClass(pfx + 'datatable__pager-link--active')) return;\n            pg.openPage(parseInt($(this).data('page')));\n          },\n          openPage: function openPage(page) {\n            // currentPage is 1-based index\n            pg.meta.page = parseInt(page);\n            $(datatable).trigger(pg.paginateEvent, pg.meta);\n            pg.callback(pg, pg.meta); // update page callback function\n\n            $(pg.pager).trigger(pfx + 'datatable--on-goto-page', pg.meta);\n          },\n          updatePerpage: function updatePerpage(e) {\n            e.preventDefault(); // if (Plugin.getOption('layout.height') === null) {\n            // fix white space, when perpage is set from many records to less records\n            // $('html, body').animate({scrollTop: $(datatable).position().top});\n            // }\n\n            pg.pager = $(datatable.table).siblings('.' + pfx + 'datatable__pager').removeClass(pfx + 'datatable--paging-loaded'); // on change select page size\n\n            if (e.originalEvent) {\n              pg.meta.perpage = parseInt($(this).val());\n            }\n\n            $(pg.pager).find('select.' + pfx + 'datatable__pager-size').val(pg.meta.perpage).attr('data-selected', pg.meta.perpage); // update datasource params\n\n            Plugin.setDataSourceParam('pagination', {\n              page: pg.meta.page,\n              pages: pg.meta.pages,\n              perpage: pg.meta.perpage,\n              total: pg.meta.total\n            }); // update page callback function\n\n            $(pg.pager).trigger(pfx + 'datatable--on-update-perpage', pg.meta);\n            $(datatable).trigger(pg.paginateEvent, pg.meta);\n            pg.callback(pg, pg.meta); // update pagination info\n\n            pg.updateInfo.call();\n          },\n          addPaginateEvent: function addPaginateEvent(e) {\n            // pagination event\n            $(datatable).off(pg.paginateEvent).on(pg.paginateEvent, function (e, meta) {\n              Plugin.spinnerCallback(true);\n              pg.pager = $(datatable.table).siblings('.' + pfx + 'datatable__pager');\n              var pagerNumber = $(pg.pager).find('.' + pfx + 'datatable__pager-nav'); // set sync active page class\n\n              $(pagerNumber).find('.' + pfx + 'datatable__pager-link--active').removeClass(pfx + 'datatable__pager-link--active');\n              $(pagerNumber).find('.' + pfx + 'datatable__pager-link-number[data-page=\"' + meta.page + '\"]').addClass(pfx + 'datatable__pager-link--active'); // set next and previous link page number\n\n              $(pagerNumber).find('.' + pfx + 'datatable__pager-link--prev').attr('data-page', Math.max(meta.page - 1, 1));\n              $(pagerNumber).find('.' + pfx + 'datatable__pager-link--next').attr('data-page', Math.min(meta.page + 1, meta.pages)); // current page input value sync\n\n              $(pg.pager).each(function () {\n                $(this).find('.' + pfx + 'pager-input[type=\"text\"]').prop('value', meta.page);\n              });\n              $(pg.pager).find('.' + pfx + 'datatable__pager-nav').show();\n\n              if (meta.pages <= 1) {\n                // hide pager if has 1 page\n                $(pg.pager).find('.' + pfx + 'datatable__pager-nav').hide();\n              } // update datasource params\n\n\n              Plugin.setDataSourceParam('pagination', {\n                page: pg.meta.page,\n                pages: pg.meta.pages,\n                perpage: pg.meta.perpage,\n                total: pg.meta.total\n              });\n              $(pg.pager).find('select.' + pfx + 'datatable__pager-size').val(meta.perpage).attr('data-selected', meta.perpage); // clear active rows\n\n              $(datatable.table).find('.' + pfx + 'checkbox > [type=\"checkbox\"]').prop('checked', false);\n              $(datatable.table).find('.' + pfx + 'datatable__row--active').removeClass(pfx + 'datatable__row--active');\n              pg.updateInfo.call();\n              pg.pagingBreakpoint.call(); // Plugin.resetScroll();\n            });\n          },\n          updateInfo: function updateInfo() {\n            var start = Math.max(pg.meta.perpage * (pg.meta.page - 1) + 1, 1);\n            var end = Math.min(start + pg.meta.perpage - 1, pg.meta.total); // page info update\n\n            $(pg.pager).find('.' + pfx + 'datatable__pager-info').find('.' + pfx + 'datatable__pager-detail').html(Plugin.dataPlaceholder(Plugin.getOption('translate.toolbar.pagination.items.info'), {\n              start: start,\n              end: pg.meta.perpage === -1 ? pg.meta.total : end,\n              pageSize: pg.meta.perpage === -1 || pg.meta.perpage >= pg.meta.total ? pg.meta.total : pg.meta.perpage,\n              total: pg.meta.total\n            }));\n          },\n\n          /**\n           * Update pagination layout breakpoint\n           */\n          pagingBreakpoint: function pagingBreakpoint() {\n            // keep page links reference\n            var pagerNumber = $(datatable.table).siblings('.' + pfx + 'datatable__pager').find('.' + pfx + 'datatable__pager-nav');\n            if ($(pagerNumber).length === 0) return;\n            var currentPage = Plugin.getCurrentPage();\n            var pagerInput = $(pagerNumber).find('.' + pfx + 'pager-input').closest('li'); // reset\n\n            $(pagerNumber).find('li').show(); // pagination update\n\n            $.each(Plugin.getOption('toolbar.items.pagination.pages'), function (mode, option) {\n              if (util.isInResponsiveRange(mode)) {\n                switch (mode) {\n                  case 'desktop':\n                  case 'tablet':\n                    var end = Math.ceil(currentPage / option.pagesNumber) * option.pagesNumber;\n                    var start = end - option.pagesNumber;\n                    $(pagerInput).hide();\n                    pg.meta = Plugin.getDataSourceParam('pagination');\n                    pg.paginationUpdate();\n                    break;\n\n                  case 'mobile':\n                    $(pagerInput).show();\n                    $(pagerNumber).find('.' + pfx + 'datatable__pager-link--more-prev').closest('li').hide();\n                    $(pagerNumber).find('.' + pfx + 'datatable__pager-link--more-next').closest('li').hide();\n                    $(pagerNumber).find('.' + pfx + 'datatable__pager-link-number').closest('li').hide();\n                    break;\n                }\n\n                return false;\n              }\n            });\n          },\n\n          /**\n           * Update pagination number and button display\n           */\n          paginationUpdate: function paginationUpdate() {\n            var pager = $(datatable.table).siblings('.' + pfx + 'datatable__pager').find('.' + pfx + 'datatable__pager-nav'),\n                pagerMorePrev = $(pager).find('.' + pfx + 'datatable__pager-link--more-prev'),\n                pagerMoreNext = $(pager).find('.' + pfx + 'datatable__pager-link--more-next'),\n                pagerFirst = $(pager).find('.' + pfx + 'datatable__pager-link--first'),\n                pagerPrev = $(pager).find('.' + pfx + 'datatable__pager-link--prev'),\n                pagerNext = $(pager).find('.' + pfx + 'datatable__pager-link--next'),\n                pagerLast = $(pager).find('.' + pfx + 'datatable__pager-link--last'); // get visible page\n\n            var pagerNumber = $(pager).find('.' + pfx + 'datatable__pager-link-number'); // get page before of first visible\n\n            var morePrevPage = Math.max($(pagerNumber).first().data('page') - 1, 1);\n            $(pagerMorePrev).each(function (i, prev) {\n              $(prev).attr('data-page', morePrevPage);\n            }); // show/hide <li>\n\n            if (morePrevPage === 1) {\n              $(pagerMorePrev).parent().hide();\n            } else {\n              $(pagerMorePrev).parent().show();\n            } // get page after of last visible\n\n\n            var moreNextPage = Math.min($(pagerNumber).last().data('page') + 1, pg.meta.pages);\n            $(pagerMoreNext).each(function (i, prev) {\n              $(pagerMoreNext).attr('data-page', moreNextPage).show();\n            }); // show/hide <li>\n\n            if (moreNextPage === pg.meta.pages // missing dot fix when last hidden page is one left\n            && moreNextPage === $(pagerNumber).last().data('page')) {\n              $(pagerMoreNext).parent().hide();\n            } else {\n              $(pagerMoreNext).parent().show();\n            } // begin/end of pages\n\n\n            if (pg.meta.page === 1) {\n              $(pagerFirst).attr('disabled', true).addClass(pfx + 'datatable__pager-link--disabled');\n              $(pagerPrev).attr('disabled', true).addClass(pfx + 'datatable__pager-link--disabled');\n            } else {\n              $(pagerFirst).removeAttr('disabled').removeClass(pfx + 'datatable__pager-link--disabled');\n              $(pagerPrev).removeAttr('disabled').removeClass(pfx + 'datatable__pager-link--disabled');\n            }\n\n            if (pg.meta.page === pg.meta.pages) {\n              $(pagerNext).attr('disabled', true).addClass(pfx + 'datatable__pager-link--disabled');\n              $(pagerLast).attr('disabled', true).addClass(pfx + 'datatable__pager-link--disabled');\n            } else {\n              $(pagerNext).removeAttr('disabled').removeClass(pfx + 'datatable__pager-link--disabled');\n              $(pagerLast).removeAttr('disabled').removeClass(pfx + 'datatable__pager-link--disabled');\n            } // display more buttons\n\n\n            var nav = Plugin.getOption('toolbar.items.pagination.navigation');\n            if (!nav.first) $(pagerFirst).remove();\n            if (!nav.prev) $(pagerPrev).remove();\n            if (!nav.next) $(pagerNext).remove();\n            if (!nav.last) $(pagerLast).remove();\n          }\n        };\n        pg.init(meta);\n        return pg;\n      },\n\n      /**\n       * Hide/show table cell defined by\n       * options[columns][i][responsive][visible/hidden]\n       */\n      columnHide: function columnHide() {\n        var screen = util.getViewPort().width; // foreach columns setting\n\n        $.each(options.columns, function (i, column) {\n          if (typeof column.responsive !== 'undefined') {\n            var field = column.field;\n            var tds = $.grep($(datatable.table).find('.' + pfx + 'datatable__cell'), function (n, i) {\n              return field === $(n).data('field');\n            });\n\n            if (util.getBreakpoint(column.responsive.hidden) >= screen) {\n              $(tds).hide();\n            } else {\n              $(tds).show();\n            }\n\n            if (util.getBreakpoint(column.responsive.visible) <= screen) {\n              $(tds).show();\n            } else {\n              $(tds).hide();\n            }\n          }\n        });\n      },\n\n      /**\n       * Setup sub datatable\n       */\n      setupSubDatatable: function setupSubDatatable() {\n        var subTableCallback = Plugin.getOption('detail.content');\n        if (typeof subTableCallback !== 'function') return; // subtable already exist\n\n        if ($(datatable.table).find('.' + pfx + 'datatable__subtable').length > 0) return;\n        $(datatable.wrap).addClass(pfx + 'datatable--subtable');\n        options.columns[0]['subtable'] = true; // toggle on open sub table\n\n        var toggleSubTable = function toggleSubTable(e) {\n          e.preventDefault(); // get parent row of this subtable\n\n          var parentRow = $(this).closest('.' + pfx + 'datatable__row'); // get subtable row for sub table\n\n          var subTableRow = $(parentRow).next('.' + pfx + 'datatable__row-subtable');\n\n          if ($(subTableRow).length === 0) {\n            // prepare DOM for sub table, each <tr> as parent and add <tr> as child table\n            subTableRow = $('<tr/>').addClass(pfx + 'datatable__row-subtable ' + pfx + 'datatable__row-loading').hide().append($('<td/>').addClass(pfx + 'datatable__subtable').attr('colspan', Plugin.getTotalColumns()));\n            $(parentRow).after(subTableRow); // add class to even row\n\n            if ($(parentRow).hasClass(pfx + 'datatable__row--even')) {\n              $(subTableRow).addClass(pfx + 'datatable__row-subtable--even');\n            }\n          }\n\n          $(subTableRow).toggle();\n          var subTable = $(subTableRow).find('.' + pfx + 'datatable__subtable'); // get id from first column of parent row\n\n          var primaryKey = $(this).closest('[data-field]:first-child').find('.' + pfx + 'datatable__toggle-subtable').data('value');\n          var icon = $(this).find('i').removeAttr('class'); // prevent duplicate datatable init\n\n          if ($(parentRow).hasClass(pfx + 'datatable__row--subtable-expanded')) {\n            $(icon).addClass(Plugin.getOption('layout.icons.rowDetail.collapse')); // remove expand class from parent row\n\n            $(parentRow).removeClass(pfx + 'datatable__row--subtable-expanded'); // trigger event on collapse\n\n            $(datatable).trigger(pfx + 'datatable--on-collapse-subtable', [parentRow]);\n          } else {\n            // expand and run callback function\n            $(icon).addClass(Plugin.getOption('layout.icons.rowDetail.expand')); // add expand class to parent row\n\n            $(parentRow).addClass(pfx + 'datatable__row--subtable-expanded'); // trigger event on expand\n\n            $(datatable).trigger(pfx + 'datatable--on-expand-subtable', [parentRow]);\n          } // prevent duplicate datatable init\n\n\n          if ($(subTable).find('.' + pfx + 'datatable').length === 0) {\n            // get data by primary id\n            $.map(datatable.dataSet, function (n, i) {\n              // primary id must be at the first column, otherwise e.data will be undefined\n              if (primaryKey === n[options.columns[0].field]) {\n                e.data = n;\n                return true;\n              }\n\n              return false;\n            }); // deprecated in v5.0.6\n\n            e.detailCell = subTable;\n            e.parentRow = parentRow;\n            e.subTable = subTable; // run callback with event\n\n            subTableCallback(e);\n            $(subTable).children('.' + pfx + 'datatable').on(pfx + 'datatable--on-init', function (e) {\n              $(subTableRow).removeClass(pfx + 'datatable__row-loading');\n            });\n\n            if (Plugin.getOption('data.type') === 'local') {\n              $(subTableRow).removeClass(pfx + 'datatable__row-loading');\n            }\n          }\n        };\n\n        var columns = options.columns;\n        $(datatable.tableBody).find('.' + pfx + 'datatable__row').each(function (tri, tr) {\n          $(tr).find('.' + pfx + 'datatable__cell').each(function (tdi, td) {\n            // get column settings by field\n            var column = $.grep(columns, function (n, i) {\n              return $(td).data('field') === n.field;\n            })[0];\n\n            if (typeof column !== 'undefined') {\n              var value = $(td).text(); // enable column subtable toggle\n\n              if (typeof column.subtable !== 'undefined' && column.subtable) {\n                // check if subtable toggle exist\n                if ($(td).find('.' + pfx + 'datatable__toggle-subtable').length > 0) return; // append subtable toggle\n\n                $(td).html($('<a/>').addClass(pfx + 'datatable__toggle-subtable').attr('href', '#').attr('data-value', value).attr('title', Plugin.getOption('detail.title')).on('click', toggleSubTable).append($('<i/>').css('width', $(td).data('width')).addClass(Plugin.getOption('layout.icons.rowDetail.collapse'))));\n              }\n            }\n          });\n        }); // $(datatable.tableHead).find('.'+pfx+'-datatable__row').first()\n      },\n\n      /**\n       * Datasource mapping callback\n       */\n      dataMapCallback: function dataMapCallback(raw) {\n        // static dataset array\n        var dataSet = raw; // dataset mapping callback\n\n        if (typeof Plugin.getOption('data.source.read.map') === 'function') {\n          return Plugin.getOption('data.source.read.map')(raw);\n        } else {\n          // default data mapping fallback\n          if (typeof raw !== 'undefined' && typeof raw.data !== 'undefined') {\n            dataSet = raw.data;\n          }\n        }\n\n        return dataSet;\n      },\n      isSpinning: false,\n\n      /**\n       * BlockUI spinner callback\n       * @param block\n       */\n      spinnerCallback: function spinnerCallback(block) {\n        if (block) {\n          if (!Plugin.isSpinning) {\n            // get spinner options\n            var spinnerOptions = Plugin.getOption('layout.spinner');\n\n            if (typeof spinnerOptions.message !== 'undefined' && spinnerOptions.message === true) {\n              // use default spinner message from translation\n              spinnerOptions.message = Plugin.getOption('translate.records.processing');\n            }\n\n            Plugin.isSpinning = true;\n\n            if (typeof app !== 'undefined') {\n              app.block(datatable, spinnerOptions);\n            }\n          }\n        } else {\n          Plugin.isSpinning = false;\n\n          if (typeof app !== 'undefined') {\n            app.unblock(datatable);\n          }\n        }\n      },\n\n      /**\n       * Default sort callback function\n       * @param data\n       * @param sort\n       * @param column\n       * @returns {*|Array.<T>|{sort, field}|{asc, desc}}\n       */\n      sortCallback: function sortCallback(data, sort, column) {\n        var type = column['type'] || 'string';\n        var format = column['format'] || '';\n        var field = column['field'];\n        return $(data).sort(function (a, b) {\n          var aField = a[field];\n          var bField = b[field];\n\n          switch (type) {\n            case 'date':\n              if (typeof moment === 'undefined') {\n                throw new Error('Moment.js is required.');\n              }\n\n              var diff = moment(aField, format).diff(moment(bField, format));\n\n              if (sort === 'asc') {\n                return diff > 0 ? 1 : diff < 0 ? -1 : 0;\n              } else {\n                return diff < 0 ? 1 : diff > 0 ? -1 : 0;\n              }\n\n              break;\n\n            case 'number':\n              if (isNaN(parseFloat(aField)) && aField != null) {\n                aField = Number(aField.replace(/[^0-9\\.-]+/g, ''));\n              }\n\n              if (isNaN(parseFloat(bField)) && bField != null) {\n                bField = Number(bField.replace(/[^0-9\\.-]+/g, ''));\n              }\n\n              aField = parseFloat(aField);\n              bField = parseFloat(bField);\n\n              if (sort === 'asc') {\n                return aField > bField ? 1 : aField < bField ? -1 : 0;\n              } else {\n                return aField < bField ? 1 : aField > bField ? -1 : 0;\n              }\n\n              break;\n\n            case 'string':\n            default:\n              if (sort === 'asc') {\n                return aField > bField ? 1 : aField < bField ? -1 : 0;\n              } else {\n                return aField < bField ? 1 : aField > bField ? -1 : 0;\n              }\n\n              break;\n          }\n        });\n      },\n\n      /**\n       * Custom debug log\n       * @param text\n       * @param obj\n       */\n      log: function log(text, obj) {\n        if (typeof obj === 'undefined') obj = '';\n\n        if (datatable.debug) {\n          console.log(text, obj);\n        }\n      },\n\n      /**\n       * Auto hide columnds overflow in row\n       */\n      autoHide: function autoHide() {\n        $(datatable.table).find('.' + pfx + 'datatable__cell').show();\n        $(datatable.tableBody).each(function () {\n          while ($(this)[0].offsetWidth < $(this)[0].scrollWidth) {\n            $(datatable.table).find('.' + pfx + 'datatable__row').each(function (i) {\n              var cell = $(this).find('.' + pfx + 'datatable__cell').not(':hidden').last();\n              $(cell).hide();\n            });\n            Plugin.adjustCellsWidth.call();\n          }\n        });\n\n        var toggleHiddenColumns = function toggleHiddenColumns(e) {\n          e.preventDefault();\n          var row = $(this).closest('.' + pfx + 'datatable__row');\n          var detailRow = $(row).next();\n\n          if (!$(detailRow).hasClass(pfx + 'datatable__row-detail')) {\n            $(this).find('i').removeClass(Plugin.getOption('layout.icons.rowDetail.collapse')).addClass(Plugin.getOption('layout.icons.rowDetail.expand'));\n            var hidden = $(row).find('.' + pfx + 'datatable__cell:hidden').clone().show();\n            detailRow = $('<tr/>').addClass(pfx + 'datatable__row-detail').insertAfter(row);\n            var detailRowTd = $('<td/>').addClass(pfx + 'datatable__detail').attr('colspan', Plugin.getTotalColumns()).appendTo(detailRow);\n            var detailSubTable = $('<table/>');\n            $(hidden).each(function () {\n              var field = $(this).data('field');\n              var column = $.grep(options.columns, function (n, i) {\n                return field === n.field;\n              })[0];\n              $(detailSubTable).append($('<tr class=\"' + pfx + 'datatable__row\"></tr>').append($('<td class=\"' + pfx + 'datatable__cell\"></td>').append($('<span/>').css('width', Plugin.offset).append(column.title))).append(this));\n            });\n            $(detailRowTd).append(detailSubTable);\n          } else {\n            $(this).find('i').removeClass(Plugin.getOption('layout.icons.rowDetail.expand')).addClass(Plugin.getOption('layout.icons.rowDetail.collapse'));\n            $(detailRow).remove();\n          }\n        }; // toggle show hidden columns\n\n\n        $(datatable.tableBody).find('.' + pfx + 'datatable__row').each(function () {\n          $(this).prepend($('<td/>').addClass(pfx + 'datatable__cell ' + pfx + 'datatable__toggle--detail').append($('<a/>').addClass(pfx + 'datatable__toggle-detail').attr('href', '').on('click', toggleHiddenColumns).append($('<i/>').css('width', '21px'). // maintain width for both icons expand and collapse\n          addClass(Plugin.getOption('layout.icons.rowDetail.collapse'))))); // check if subtable toggle exist\n\n          if ($(datatable.tableHead).find('.' + pfx + 'datatable__toggle-detail').length === 0) {\n            $(datatable.tableHead).find('.' + pfx + 'datatable__row').first().prepend('<th class=\"' + pfx + 'datatable__cell ' + pfx + 'datatable__toggle-detail\"><span style=\"width: 21px\"></span></th>');\n            $(datatable.tableFoot).find('.' + pfx + 'datatable__row').first().prepend('<th class=\"' + pfx + 'datatable__cell ' + pfx + 'datatable__toggle-detail\"><span style=\"width: 21px\"></span></th>');\n          } else {\n            $(datatable.tableHead).find('.' + pfx + 'datatable__toggle-detail').find('span').css('width', '21px');\n          }\n        });\n      },\n\n      /**\n       * todo; implement hover column\n       */\n      hoverColumn: function hoverColumn() {\n        $(datatable.tableBody).on('mouseenter', '.' + pfx + 'datatable__cell', function () {\n          var colIdx = $(Plugin.cell(this).nodes()).index();\n          $(Plugin.cells().nodes()).removeClass(pfx + 'datatable__cell--hover');\n          $(Plugin.column(colIdx).nodes()).addClass(pfx + 'datatable__cell--hover');\n        });\n      },\n\n      /**\n       * To enable auto columns features for remote data source\n       */\n      setAutoColumns: function setAutoColumns() {\n        if (Plugin.getOption('data.autoColumns')) {\n          $.each(datatable.dataSet[0], function (k, v) {\n            var found = $.grep(options.columns, function (n, i) {\n              return k === n.field;\n            });\n\n            if (found.length === 0) {\n              options.columns.push({\n                field: k,\n                title: k\n              });\n            }\n          });\n          $(datatable.tableHead).find('.' + pfx + 'datatable__row').remove();\n          Plugin.setHeadTitle();\n\n          if (Plugin.getOption('layout.footer')) {\n            $(datatable.tableFoot).find('.' + pfx + 'datatable__row').remove();\n            Plugin.setHeadTitle(datatable.tableFoot);\n          }\n        }\n      },\n\n      /********************\n       ** HELPERS\n       ********************/\n\n      /**\n       * Check if table is a locked colums table\n       */\n      isLocked: function isLocked() {\n        return util.hasClass(datatable.wrap[0], pfx + 'datatable--lock') || false;\n      },\n\n      /**\n       * Get total extra space of an element for width calculation, including\n       * padding, margin, border\n       * @param element\n       * @returns {number}\n       */\n      getExtraSpace: function getExtraSpace(element) {\n        var padding = parseInt($(element).css('paddingRight')) + parseInt($(element).css('paddingLeft'));\n        var margin = parseInt($(element).css('marginRight')) + parseInt($(element).css('marginLeft'));\n        var border = Math.ceil($(element).css('border-right-width').replace('px', ''));\n        return padding + margin + border;\n      },\n\n      /**\n       * Insert data of array into {{ }} template placeholder\n       * @param template\n       * @param data\n       * @returns {*}\n       */\n      dataPlaceholder: function dataPlaceholder(template, data) {\n        var result = template;\n        $.each(data, function (key, val) {\n          result = result.replace('{{' + key + '}}', val);\n        });\n        return result;\n      },\n\n      /**\n       * Get table unique ID\n       * Note: table unique change each time refreshed\n       * @param suffix\n       * @returns {*}\n       */\n      getTableId: function getTableId(suffix) {\n        if (typeof suffix === 'undefined') suffix = '';\n        var id = $(datatable).attr('id');\n\n        if (typeof id === 'undefined') {\n          id = $(datatable).attr('class').split(' ')[0];\n        }\n\n        return id + suffix;\n      },\n\n      /**\n       * Get table prefix with depth number\n       */\n      getTablePrefix: function getTablePrefix(suffix) {\n        if (typeof suffix !== 'undefined') suffix = '-' + suffix;\n        return Plugin.getTableId() + '-' + Plugin.getDepth() + suffix;\n      },\n\n      /**\n       * Get current table depth of sub table\n       * @returns {number}\n       */\n      getDepth: function getDepth() {\n        var depth = 0;\n        var table = datatable.table;\n\n        do {\n          table = $(table).parents('.' + pfx + 'datatable__table');\n          depth++;\n        } while ($(table).length > 0);\n\n        return depth;\n      },\n\n      /**\n       * Keep state item\n       * @param key\n       * @param value\n       */\n      stateKeep: function stateKeep(key, value) {\n        key = Plugin.getTablePrefix(key);\n        if (Plugin.getOption('data.saveState') === false) return;\n\n        if (Plugin.getOption('data.saveState.webstorage') && localStorage) {\n          localStorage.setItem(key, JSON.stringify(value));\n        }\n\n        if (Plugin.getOption('data.saveState.cookie')) {\n          Cookies.set(key, JSON.stringify(value));\n        }\n      },\n\n      /**\n       * Get state item\n       * @param key\n       * @param defValue\n       */\n      stateGet: function stateGet(key, defValue) {\n        key = Plugin.getTablePrefix(key);\n        if (Plugin.getOption('data.saveState') === false) return;\n        var value = null;\n\n        if (Plugin.getOption('data.saveState.webstorage') && localStorage) {\n          value = localStorage.getItem(key);\n        } else {\n          value = Cookies.get(key);\n        }\n\n        if (typeof value !== 'undefined' && value !== null) {\n          return JSON.parse(value);\n        }\n      },\n\n      /**\n       * Update data in state without clear existing\n       * @param key\n       * @param value\n       */\n      stateUpdate: function stateUpdate(key, value) {\n        var ori = Plugin.stateGet(key);\n        if (typeof ori === 'undefined' || ori === null) ori = {};\n        Plugin.stateKeep(key, $.extend({}, ori, value));\n      },\n\n      /**\n       * Remove state item\n       * @param key\n       */\n      stateRemove: function stateRemove(key) {\n        key = Plugin.getTablePrefix(key);\n\n        if (localStorage) {\n          localStorage.removeItem(key);\n        }\n\n        Cookies.remove(key);\n      },\n\n      /**\n       * Get total columns.\n       */\n      getTotalColumns: function getTotalColumns(tablePart) {\n        if (typeof tablePart === 'undefined') tablePart = datatable.tableBody;\n        return $(tablePart).find('.' + pfx + 'datatable__row').first().find('.' + pfx + 'datatable__cell').length;\n      },\n\n      /**\n       * Get table row. Useful to get row when current table is in lock mode.\n       * Can be used for both lock and normal table mode.\n       * By default, returning result will be in a list of <td>.\n       * @param tablePart\n       * @param row 1-based index\n       * @param tdOnly Optional. Default true\n       * @returns {*}\n       */\n      getOneRow: function getOneRow(tablePart, row, tdOnly) {\n        if (typeof tdOnly === 'undefined') tdOnly = true; // get list of <tr>\n\n        var result = $(tablePart).find('.' + pfx + 'datatable__row:not(.' + pfx + 'datatable__row-detail):nth-child(' + row + ')');\n\n        if (tdOnly) {\n          // get list of <td> or <th>\n          result = result.find('.' + pfx + 'datatable__cell');\n        }\n\n        return result;\n      },\n\n      /**\n       * Check if element has vertical overflow\n       * @param element\n       * @returns {boolean}\n       */\n      hasOverflowY: function hasOverflowY(element) {\n        var children = $(element).find('.' + pfx + 'datatable__row');\n        var maxHeight = 0;\n\n        if (children.length > 0) {\n          $(children).each(function (tdi, td) {\n            maxHeight += Math.floor($(td).innerHeight());\n          });\n          return maxHeight > $(element).innerHeight();\n        }\n\n        return false;\n      },\n\n      /**\n       * Sort table row at HTML level by column index.\n       * todo; Not in use.\n       * @param header Header sort clicked\n       * @param sort asc|desc. Optional. Default asc\n       * @param int Boolean. Optional. Comparison value parse to integer.\n       *     Default false\n       */\n      sortColumn: function sortColumn(header, sort, _int) {\n        if (typeof sort === 'undefined') sort = 'asc'; // desc\n\n        if (typeof _int === 'undefined') _int = false;\n        var column = $(header).index();\n        var rows = $(datatable.tableBody).find('.' + pfx + 'datatable__row');\n        var hIndex = $(header).closest('.' + pfx + 'datatable__lock').index();\n\n        if (hIndex !== -1) {\n          rows = $(datatable.tableBody).find('.' + pfx + 'datatable__lock:nth-child(' + (hIndex + 1) + ')').find('.' + pfx + 'datatable__row');\n        }\n\n        var container = $(rows).parent();\n        $(rows).sort(function (a, b) {\n          var tda = $(a).find('td:nth-child(' + column + ')').text();\n          var tdb = $(b).find('td:nth-child(' + column + ')').text();\n\n          if (_int) {\n            // useful for integer type sorting\n            tda = parseInt(tda);\n            tdb = parseInt(tdb);\n          }\n\n          if (sort === 'asc') {\n            return tda > tdb ? 1 : tda < tdb ? -1 : 0;\n          } else {\n            return tda < tdb ? 1 : tda > tdb ? -1 : 0;\n          }\n        }).appendTo(container);\n      },\n\n      /**\n       * Perform sort remote and local\n       */\n      sorting: function sorting() {\n        var sortObj = {\n          init: function init() {\n            if (options.sortable) {\n              $(datatable.tableHead).find('.' + pfx + 'datatable__cell:not(.' + pfx + 'datatable__cell--check)').addClass(pfx + 'datatable__cell--sort').off('click').on('click', sortObj.sortClick); // first init\n\n              sortObj.setIcon();\n            }\n          },\n          setIcon: function setIcon() {\n            var meta = Plugin.getDataSourceParam('sort');\n            if ($.isEmptyObject(meta)) return; // sort icon beside column header\n\n            var td = $(datatable.tableHead).find('.' + pfx + 'datatable__cell[data-field=\"' + meta.field + '\"]').attr('data-sort', meta.sort);\n            var sorting = $(td).find('span');\n            var icon = $(sorting).find('i');\n            var icons = Plugin.getOption('layout.icons.sort'); // update sort icon; desc & asc\n\n            if ($(icon).length > 0) {\n              $(icon).removeAttr('class').addClass(icons[meta.sort]);\n            } else {\n              $(sorting).append($('<i/>').addClass(icons[meta.sort]));\n            }\n          },\n          sortClick: function sortClick(e) {\n            var meta = Plugin.getDataSourceParam('sort');\n            var field = $(this).data('field');\n            var column = Plugin.getColumnByField(field); // sort is disabled for this column\n\n            if (typeof column.sortable !== 'undefined' && column.sortable === false) return;\n            $(datatable.tableHead).find('.' + pfx + 'datatable__cell > span > i').remove();\n\n            if (options.sortable) {\n              Plugin.spinnerCallback(true);\n              var sort = 'desc';\n\n              if (Plugin.getObject('field', meta) === field) {\n                sort = Plugin.getObject('sort', meta);\n              } // toggle sort\n\n\n              sort = typeof sort === 'undefined' || sort === 'desc' ? 'asc' : 'desc'; // update field and sort params\n\n              meta = {\n                field: field,\n                sort: sort\n              };\n              Plugin.setDataSourceParam('sort', meta);\n              sortObj.setIcon();\n              setTimeout(function () {\n                Plugin.dataRender('sort');\n                $(datatable).trigger(pfx + 'datatable--on-sort', meta);\n              }, 300);\n            }\n          }\n        };\n        sortObj.init();\n      },\n\n      /**\n       * Update JSON data list linked with sort, filter and pagination.\n       * Call this method, before using dataSet variable.\n       * @returns {*|null}\n       */\n      localDataUpdate: function localDataUpdate() {\n        // todo; fix twice execution\n        var params = Plugin.getDataSourceParam();\n\n        if (typeof datatable.originalDataSet === 'undefined') {\n          datatable.originalDataSet = datatable.dataSet;\n        }\n\n        var field = Plugin.getObject('sort.field', params);\n        var sort = Plugin.getObject('sort.sort', params);\n        var column = Plugin.getColumnByField(field);\n\n        if (typeof column !== 'undefined' && Plugin.getOption('data.serverSorting') !== true) {\n          if (typeof column.sortCallback === 'function') {\n            datatable.dataSet = column.sortCallback(datatable.originalDataSet, sort, column);\n          } else {\n            datatable.dataSet = Plugin.sortCallback(datatable.originalDataSet, sort, column);\n          }\n        } else {\n          datatable.dataSet = datatable.originalDataSet;\n        } // if server filter enable, don't pass local filter\n\n\n        if (typeof params.query === 'object' && !Plugin.getOption('data.serverFiltering')) {\n          params.query = params.query || {};\n\n          var nestedSearch = function nestedSearch(obj) {\n            for (var field in obj) {\n              if (!obj.hasOwnProperty(field)) continue;\n\n              if (typeof obj[field] === 'string') {\n                if (obj[field].toLowerCase() == search || obj[field].toLowerCase().indexOf(search) !== -1) {\n                  return true;\n                }\n              } else if (typeof obj[field] === 'number') {\n                if (obj[field] === search) {\n                  return true;\n                }\n              } else if (typeof obj[field] === 'object') {\n                return nestedSearch(obj[field]);\n              }\n            }\n\n            return false;\n          };\n\n          var search = $(Plugin.getOption('search.input')).val();\n\n          if (typeof search !== 'undefined' && search !== '') {\n            search = search.toLowerCase();\n            datatable.dataSet = $.grep(datatable.dataSet, nestedSearch); // remove generalSearch as we don't need this for next columns filter\n\n            delete params.query[Plugin.getGeneralSearchKey()];\n          } // remove empty element from array\n\n\n          $.each(params.query, function (k, v) {\n            if (v === '') {\n              delete params.query[k];\n            }\n          }); // filter array by query\n\n          datatable.dataSet = Plugin.filterArray(datatable.dataSet, params.query); // reset array index\n\n          datatable.dataSet = datatable.dataSet.filter(function () {\n            return true;\n          });\n        }\n\n        return datatable.dataSet;\n      },\n\n      /**\n       * Utility helper to filter array by object pair of {key:value}\n       * @param list\n       * @param args\n       * @param operator\n       * @returns {*}\n       */\n      filterArray: function filterArray(list, args, operator) {\n        if (typeof list !== 'object') {\n          return [];\n        }\n\n        if (typeof operator === 'undefined') operator = 'AND';\n\n        if (typeof args !== 'object') {\n          return list;\n        }\n\n        operator = operator.toUpperCase();\n\n        if ($.inArray(operator, ['AND', 'OR', 'NOT']) === -1) {\n          return [];\n        }\n\n        var count = Object.keys(args).length;\n        var filtered = [];\n        $.each(list, function (key, obj) {\n          var to_match = obj;\n          var matched = 0;\n          $.each(args, function (m_key, m_value) {\n            m_value = m_value instanceof Array ? m_value : [m_value];\n\n            if (to_match.hasOwnProperty(m_key)) {\n              var lhs = to_match[m_key].toString().toLowerCase();\n              m_value.forEach(function (item, index) {\n                if (item.toString().toLowerCase() == lhs || lhs.indexOf(item.toString().toLowerCase()) !== -1) {\n                  matched++;\n                }\n              });\n            }\n          });\n\n          if ('AND' == operator && matched == count || 'OR' == operator && matched > 0 || 'NOT' == operator && 0 == matched) {\n            filtered[key] = obj;\n          }\n        });\n        list = filtered;\n        return list;\n      },\n\n      /**\n       * Reset lock column scroll to 0 when resize\n       */\n      resetScroll: function resetScroll() {\n        if (typeof options.detail === 'undefined' && Plugin.getDepth() === 1) {\n          $(datatable.table).find('.' + pfx + 'datatable__row').css('left', 0);\n          $(datatable.table).find('.' + pfx + 'datatable__lock').css('top', 0);\n          $(datatable.tableBody).scrollTop(0);\n        }\n      },\n\n      /**\n       * Get column options by field\n       * @param field\n       * @returns {boolean}\n       */\n      getColumnByField: function getColumnByField(field) {\n        if (typeof field === 'undefined') return;\n        var result;\n        $.each(options.columns, function (i, column) {\n          if (field === column.field) {\n            result = column;\n            return false;\n          }\n        });\n        return result;\n      },\n\n      /**\n       * Get default sort column\n       */\n      getDefaultSortColumn: function getDefaultSortColumn() {\n        var result;\n        $.each(options.columns, function (i, column) {\n          if (typeof column.sortable !== 'undefined' && $.inArray(column.sortable, ['asc', 'desc']) !== -1) {\n            result = {\n              sort: column.sortable,\n              field: column.field\n            };\n            return false;\n          }\n        });\n        return result;\n      },\n\n      /**\n       * Helper to get element dimensions, when the element is hidden\n       * @param element\n       * @param includeMargin\n       * @returns {{width: number, height: number, innerWidth: number,\n       *     innerHeight: number, outerWidth: number, outerHeight: number}}\n       */\n      getHiddenDimensions: function getHiddenDimensions(element, includeMargin) {\n        var props = {\n          position: 'absolute',\n          visibility: 'hidden',\n          display: 'block'\n        },\n            dim = {\n          width: 0,\n          height: 0,\n          innerWidth: 0,\n          innerHeight: 0,\n          outerWidth: 0,\n          outerHeight: 0\n        },\n            hiddenParents = $(element).parents().addBack().not(':visible');\n        includeMargin = typeof includeMargin === 'boolean' ? includeMargin : false;\n        var oldProps = [];\n        hiddenParents.each(function () {\n          var old = {};\n\n          for (var name in props) {\n            old[name] = this.style[name];\n            this.style[name] = props[name];\n          }\n\n          oldProps.push(old);\n        });\n        dim.width = $(element).width();\n        dim.outerWidth = $(element).outerWidth(includeMargin);\n        dim.innerWidth = $(element).innerWidth();\n        dim.height = $(element).height();\n        dim.innerHeight = $(element).innerHeight();\n        dim.outerHeight = $(element).outerHeight(includeMargin);\n        hiddenParents.each(function (i) {\n          var old = oldProps[i];\n\n          for (var name in props) {\n            this.style[name] = old[name];\n          }\n        });\n        return dim;\n      },\n      getGeneralSearchKey: function getGeneralSearchKey() {\n        var searchInput = $(Plugin.getOption('search.input'));\n        return $(searchInput).prop('name') || $(searchInput).prop('id');\n      },\n\n      /**\n       * Get value by dot notation path string and to prevent undefined errors\n       * @param path String Dot notation path in string\n       * @param object Object to iterate\n       * @returns {*}\n       */\n      getObject: function getObject(path, object) {\n        return path.split('.').reduce(function (obj, i) {\n          return obj !== null && typeof obj[i] !== 'undefined' ? obj[i] : null;\n        }, object);\n      },\n\n      /**\n       * Extend object\n       * @param obj\n       * @param path\n       * @param value\n       * @returns {*}\n       */\n      extendObj: function extendObj(obj, path, value) {\n        var levels = path.split('.'),\n            i = 0;\n\n        function createLevel(child) {\n          var name = levels[i++];\n\n          if (typeof child[name] !== 'undefined' && child[name] !== null) {\n            if (typeof child[name] !== 'object' && typeof child[name] !== 'function') {\n              child[name] = {};\n            }\n          } else {\n            child[name] = {};\n          }\n\n          if (i === levels.length) {\n            child[name] = value;\n          } else {\n            createLevel(child[name]);\n          }\n        }\n\n        createLevel(obj);\n        return obj;\n      },\n      rowEvenOdd: function rowEvenOdd() {\n        // row even class\n        $(datatable.tableBody).find('.' + pfx + 'datatable__row').removeClass(pfx + 'datatable__row--even');\n\n        if ($(datatable.wrap).hasClass(pfx + 'datatable--subtable')) {\n          $(datatable.tableBody).find('.' + pfx + 'datatable__row:not(.' + pfx + 'datatable__row-detail):even').addClass(pfx + 'datatable__row--even');\n        } else {\n          $(datatable.tableBody).find('.' + pfx + 'datatable__row:nth-child(even)').addClass(pfx + 'datatable__row--even');\n        }\n      },\n\n      /********************\n       ** PUBLIC API METHODS\n       ********************/\n      // delay timer\n      timer: 0,\n\n      /**\n       * Redraw datatable by recalculating its DOM elements, etc.\n       * @returns {jQuery}\n       */\n      redraw: function redraw() {\n        Plugin.adjustCellsWidth.call();\n\n        if (Plugin.isLocked()) {\n          // fix hiding cell width issue\n          Plugin.scrollbar();\n          Plugin.resetScroll();\n          Plugin.adjustCellsHeight.call();\n        }\n\n        Plugin.adjustLockContainer.call();\n        Plugin.initHeight.call();\n        return datatable;\n      },\n\n      /**\n       * Shortcode to reload\n       * @returns {jQuery}\n       */\n      load: function load() {\n        Plugin.reload();\n        return datatable;\n      },\n\n      /**\n       * Datasource reload\n       * @returns {jQuery}\n       */\n      reload: function reload() {\n        var delay = function () {\n          return function (callback, ms) {\n            clearTimeout(Plugin.timer);\n            Plugin.timer = setTimeout(callback, ms);\n          };\n        }();\n\n        delay(function () {\n          // local only. remote pagination will skip this block\n          if (!options.data.serverFiltering) {\n            Plugin.localDataUpdate();\n          }\n\n          Plugin.dataRender();\n          $(datatable).trigger(pfx + 'datatable--on-reloaded');\n        }, Plugin.getOption('search.delay'));\n        return datatable;\n      },\n\n      /**\n       * Get record by record ID\n       * @param id\n       * @returns {jQuery}\n       */\n      getRecord: function getRecord(id) {\n        if (typeof datatable.tableBody === 'undefined') datatable.tableBody = $(datatable.table).children('tbody');\n        $(datatable.tableBody).find('.' + pfx + 'datatable__cell:first-child').each(function (i, cell) {\n          if (id == $(cell).text()) {\n            var rowNumber = $(cell).closest('.' + pfx + 'datatable__row').index() + 1;\n            datatable.API.record = datatable.API.value = Plugin.getOneRow(datatable.tableBody, rowNumber);\n            return datatable;\n          }\n        });\n        return datatable;\n      },\n\n      /**\n       * @deprecated in v5.0.6\n       * Get column of current record ID\n       * @param columnName\n       * @returns {jQuery}\n       */\n      getColumn: function getColumn(columnName) {\n        Plugin.setSelectedRecords();\n        datatable.API.value = $(datatable.API.record).find('[data-field=\"' + columnName + '\"]');\n        return datatable;\n      },\n\n      /**\n       * Destroy datatable to original DOM state before datatable was\n       * initialized\n       * @returns {jQuery}\n       */\n      destroy: function destroy() {\n        $(datatable).parent().find('.' + pfx + 'datatable__pager').remove();\n        var initialDatatable = $(datatable.initialDatatable).addClass(pfx + 'datatable--destroyed').show();\n        $(datatable).replaceWith(initialDatatable);\n        datatable = initialDatatable;\n        $(datatable).trigger(pfx + 'datatable--on-destroy');\n        Plugin.isInit = false;\n        initialDatatable = null;\n        return initialDatatable;\n      },\n\n      /**\n       * Sort by column field\n       * @param field\n       * @param sort\n       */\n      sort: function sort(field, _sort) {\n        // toggle sort\n        _sort = typeof _sort === 'undefined' ? 'asc' : _sort;\n        Plugin.spinnerCallback(true); // update field and sort params\n\n        var meta = {\n          field: field,\n          sort: _sort\n        };\n        Plugin.setDataSourceParam('sort', meta);\n        setTimeout(function () {\n          Plugin.dataRender('sort');\n          $(datatable).trigger(pfx + 'datatable--on-sort', meta);\n          $(datatable.tableHead).find('.' + pfx + 'datatable__cell > span > i').remove();\n        }, 300);\n        return datatable;\n      },\n\n      /**\n       * @deprecated in v5.0.6\n       * Get current selected column value\n       * @returns {jQuery}\n       */\n      getValue: function getValue() {\n        return $(datatable.API.value).text();\n      },\n\n      /**\n       * Set checkbox active\n       * @param cell JQuery selector or checkbox ID\n       */\n      setActive: function setActive(cell) {\n        if (typeof cell === 'string') {\n          // set by checkbox id\n          cell = $(datatable.tableBody).find('.' + pfx + 'checkbox--single > [type=\"checkbox\"][value=\"' + cell + '\"]');\n        }\n\n        $(cell).prop('checked', true); // normal table\n\n        var row = $(cell).closest('.' + pfx + 'datatable__row').addClass(pfx + 'datatable__row--active');\n        var index = $(row).index() + 1; // lock table\n\n        $(row).closest('.' + pfx + 'datatable__lock').parent().find('.' + pfx + 'datatable__row:nth-child(' + index + ')').addClass(pfx + 'datatable__row--active');\n        var ids = [];\n        $(row).each(function (i, td) {\n          var id = $(td).find('.' + pfx + 'checkbox--single:not(.' + pfx + 'checkbox--all) > [type=\"checkbox\"]').val();\n\n          if (typeof id !== 'undefined') {\n            ids.push(id);\n          }\n        });\n        $(datatable).trigger(pfx + 'datatable--on-check', [ids]);\n      },\n\n      /**\n       * Set checkbox inactive\n       * @param cell JQuery selector or checkbox ID\n       */\n      setInactive: function setInactive(cell) {\n        if (typeof cell === 'string') {\n          // set by checkbox id\n          cell = $(datatable.tableBody).find('.' + pfx + 'checkbox--single > [type=\"checkbox\"][value=\"' + cell + '\"]');\n        }\n\n        $(cell).prop('checked', false); // normal table\n\n        var row = $(cell).closest('.' + pfx + 'datatable__row').removeClass(pfx + 'datatable__row--active');\n        var index = $(row).index() + 1; // lock table\n\n        $(row).closest('.' + pfx + 'datatable__lock').parent().find('.' + pfx + 'datatable__row:nth-child(' + index + ')').removeClass(pfx + 'datatable__row--active');\n        var ids = [];\n        $(row).each(function (i, td) {\n          var id = $(td).find('.' + pfx + 'checkbox--single:not(.' + pfx + 'checkbox--all) > [type=\"checkbox\"]').val();\n\n          if (typeof id !== 'undefined') {\n            ids.push(id);\n          }\n        });\n        $(datatable).trigger(pfx + 'datatable--on-uncheck', [ids]);\n      },\n\n      /**\n       * Set all checkboxes active or inactive\n       * @param active\n       */\n      setActiveAll: function setActiveAll(active) {\n        // todo; check if child table also will set active?\n        var checkboxes = $(datatable.table).find('> tbody, > thead').find('> tr:not(.' + pfx + 'datatable__row-subtable)').find('.' + pfx + 'datatable__cell--check [type=\"checkbox\"]');\n\n        if (active) {\n          Plugin.setActive(checkboxes);\n        } else {\n          Plugin.setInactive(checkboxes);\n        }\n      },\n\n      /**\n       * @deprecated in v5.0.6\n       * Get selected rows which are active\n       * @returns {jQuery}\n       */\n      setSelectedRecords: function setSelectedRecords() {\n        datatable.API.record = $(datatable.tableBody).find('.' + pfx + 'datatable__row--active');\n        return datatable;\n      },\n\n      /**\n       * Get selected records\n       * @returns {null}\n       */\n      getSelectedRecords: function getSelectedRecords() {\n        // support old method\n        Plugin.setSelectedRecords();\n        datatable.API.record = datatable.rows('.' + pfx + 'datatable__row--active').nodes();\n        return datatable.API.record;\n      },\n\n      /**\n       * Get options by dots notation path\n       * @param path String Dot notation path in string\n       * @returns {*}\n       */\n      getOption: function getOption(path) {\n        return Plugin.getObject(path, options);\n      },\n\n      /**\n       * Set global options nodes by dots notation path\n       * @param path\n       * @param object\n       */\n      setOption: function setOption(path, object) {\n        options = Plugin.extendObj(options, path, object);\n      },\n\n      /**\n       * Search filter for local & remote\n       * @param value\n       * @param columns. Optional list of columns to be filtered.\n       */\n      search: function search(value, columns) {\n        if (typeof columns !== 'undefined') columns = $.makeArray(columns);\n\n        var delay = function () {\n          return function (callback, ms) {\n            clearTimeout(Plugin.timer);\n            Plugin.timer = setTimeout(callback, ms);\n          };\n        }();\n\n        delay(function () {\n          // get query parameters\n          var query = Plugin.getDataSourceQuery(); // search not by columns\n\n          if (typeof columns === 'undefined' && typeof value !== 'undefined') {\n            var key = Plugin.getGeneralSearchKey();\n            query[key] = value;\n          } // search by columns, support multiple columns\n\n\n          if (typeof columns === 'object') {\n            $.each(columns, function (k, column) {\n              query[column] = value;\n            }); // remove empty element from arrays\n\n            $.each(query, function (k, v) {\n              if (v === '' || $.isEmptyObject(v)) {\n                delete query[k];\n              }\n            });\n          }\n\n          Plugin.setDataSourceQuery(query); // local filter only. remote pagination will skip this block\n\n          if (!options.data.serverFiltering) {\n            Plugin.localDataUpdate();\n          }\n\n          Plugin.dataRender('search');\n        }, Plugin.getOption('search.delay'));\n      },\n\n      /**\n       * Set datasource params extract\n       * @param param\n       * @param value\n       */\n      setDataSourceParam: function setDataSourceParam(param, value) {\n        datatable.API.params = $.extend({}, {\n          pagination: {\n            page: 1,\n            perpage: Plugin.getOption('data.pageSize')\n          },\n          sort: Plugin.getDefaultSortColumn(),\n          query: {}\n        }, datatable.API.params, Plugin.stateGet(Plugin.stateId));\n        datatable.API.params = Plugin.extendObj(datatable.API.params, param, value);\n        Plugin.stateKeep(Plugin.stateId, datatable.API.params);\n      },\n\n      /**\n       * Get datasource params\n       * @param param\n       */\n      getDataSourceParam: function getDataSourceParam(param) {\n        datatable.API.params = $.extend({}, {\n          pagination: {\n            page: 1,\n            perpage: Plugin.getOption('data.pageSize')\n          },\n          sort: Plugin.getDefaultSortColumn(),\n          query: {}\n        }, datatable.API.params, Plugin.stateGet(Plugin.stateId));\n\n        if (typeof param === 'string') {\n          return Plugin.getObject(param, datatable.API.params);\n        }\n\n        return datatable.API.params;\n      },\n\n      /**\n       * Shortcode to datatable.getDataSourceParam('query');\n       * @returns {*}\n       */\n      getDataSourceQuery: function getDataSourceQuery() {\n        return Plugin.getDataSourceParam('query') || {};\n      },\n\n      /**\n       * Shortcode to datatable.setDataSourceParam('query', query);\n       * @param query\n       */\n      setDataSourceQuery: function setDataSourceQuery(query) {\n        Plugin.setDataSourceParam('query', query);\n      },\n\n      /**\n       * Get current page number\n       * @returns {number}\n       */\n      getCurrentPage: function getCurrentPage() {\n        return $(datatable.table).siblings('.' + pfx + 'datatable__pager').last().find('.' + pfx + 'datatable__pager-nav').find('.' + pfx + 'datatable__pager-link.' + pfx + 'datatable__pager-link--active').data('page') || 1;\n      },\n\n      /**\n       * Get selected dropdown page size\n       * @returns {*|number}\n       */\n      getPageSize: function getPageSize() {\n        return $(datatable.table).siblings('.' + pfx + 'datatable__pager').last().find('select.' + pfx + 'datatable__pager-size').val() || 10;\n      },\n\n      /**\n       * Get total rows\n       */\n      getTotalRows: function getTotalRows() {\n        return datatable.API.params.pagination.total;\n      },\n\n      /**\n       * Get full dataset in grid\n       * @returns {*|null|Array}\n       */\n      getDataSet: function getDataSet() {\n        return datatable.originalDataSet;\n      },\n\n      /**\n       * @deprecated in v5.0.6\n       * Hide column by column's field name\n       * @param fieldName\n       */\n      hideColumn: function hideColumn(fieldName) {\n        // add hide option for this column\n        $.map(options.columns, function (column) {\n          if (fieldName === column.field) {\n            column.responsive = {\n              hidden: 'xl'\n            };\n          }\n\n          return column;\n        }); // hide current displayed column\n\n        var tds = $.grep($(datatable.table).find('.' + pfx + 'datatable__cell'), function (n, i) {\n          return fieldName === $(n).data('field');\n        });\n        $(tds).hide();\n      },\n\n      /**\n       * @deprecated in v5.0.6\n       * Show column by column's field name\n       * @param fieldName\n       */\n      showColumn: function showColumn(fieldName) {\n        // add hide option for this column\n        $.map(options.columns, function (column) {\n          if (fieldName === column.field) {\n            delete column.responsive;\n          }\n\n          return column;\n        }); // hide current displayed column\n\n        var tds = $.grep($(datatable.table).find('.' + pfx + 'datatable__cell'), function (n, i) {\n          return fieldName === $(n).data('field');\n        });\n        $(tds).show();\n      },\n      nodeTr: [],\n      nodeTd: [],\n      nodeCols: [],\n      recentNode: [],\n      table: function table() {\n        return datatable.table;\n      },\n\n      /**\n       * Select a single row from the table\n       * @param selector\n       * @returns {jQuery}\n       */\n      row: function row(selector) {\n        Plugin.rows(selector);\n        Plugin.nodeTr = Plugin.recentNode = $(Plugin.nodeTr).first();\n        return datatable;\n      },\n\n      /**\n       * Select multiple rows from the table\n       * @param selector\n       * @returns {jQuery}\n       */\n      rows: function rows(selector) {\n        Plugin.nodeTr = Plugin.recentNode = $(datatable.tableBody).find(selector).filter('.' + pfx + 'datatable__row');\n        return datatable;\n      },\n\n      /**\n       * Select a single column from the table\n       * @param index zero-based index\n       * @returns {jQuery}\n       */\n      column: function column(index) {\n        Plugin.nodeCols = Plugin.recentNode = $(datatable.tableBody).find('.' + pfx + 'datatable__cell:nth-child(' + (index + 1) + ')');\n        return datatable;\n      },\n\n      /**\n       * Select multiple columns from the table\n       * @param selector\n       * @returns {jQuery}\n       */\n      columns: function columns(selector) {\n        var context = datatable.table;\n\n        if (Plugin.nodeTr === Plugin.recentNode) {\n          context = Plugin.nodeTr;\n        }\n\n        var columns = $(context).find('.' + pfx + 'datatable__cell[data-field=\"' + selector + '\"]');\n\n        if (columns.length > 0) {\n          Plugin.nodeCols = Plugin.recentNode = columns;\n        } else {\n          Plugin.nodeCols = Plugin.recentNode = $(context).find(selector).filter('.' + pfx + 'datatable__cell');\n        }\n\n        return datatable;\n      },\n      cell: function cell(selector) {\n        Plugin.cells(selector);\n        Plugin.nodeTd = Plugin.recentNode = $(Plugin.nodeTd).first();\n        return datatable;\n      },\n      cells: function cells(selector) {\n        var cells = $(datatable.tableBody).find('.' + pfx + 'datatable__cell');\n\n        if (typeof selector !== 'undefined') {\n          cells = $(cells).filter(selector);\n        }\n\n        Plugin.nodeTd = Plugin.recentNode = cells;\n        return datatable;\n      },\n\n      /**\n       * Delete the selected row from the table\n       * @returns {jQuery}\n       */\n      remove: function remove() {\n        if ($(Plugin.nodeTr.length) && Plugin.nodeTr === Plugin.recentNode) {\n          $(Plugin.nodeTr).remove();\n        }\n\n        Plugin.layoutUpdate();\n        return datatable;\n      },\n\n      /**\n       * Show or hide the columns or rows\n       */\n      visible: function visible(bool) {\n        if ($(Plugin.recentNode.length)) {\n          var locked = Plugin.lockEnabledColumns();\n\n          if (Plugin.recentNode === Plugin.nodeCols) {\n            var index = Plugin.recentNode.index();\n\n            if (Plugin.isLocked()) {\n              var scrollColumns = $(Plugin.recentNode).closest('.' + pfx + 'datatable__lock--scroll').length;\n\n              if (scrollColumns) {\n                // is at center of scrollable area\n                index += locked.left.length + 1;\n              } else if ($(Plugin.recentNode).closest('.' + pfx + 'datatable__lock--right').length) {\n                // is at the right locked table\n                index += locked.left.length + scrollColumns + 1;\n              }\n            }\n          }\n\n          if (bool) {\n            if (Plugin.recentNode === Plugin.nodeCols) {\n              delete options.columns[index].responsive;\n            }\n\n            $(Plugin.recentNode).show();\n          } else {\n            if (Plugin.recentNode === Plugin.nodeCols) {\n              Plugin.setOption('columns.' + index + '.responsive', {\n                hidden: 'xl'\n              });\n            }\n\n            $(Plugin.recentNode).hide();\n          }\n\n          Plugin.redraw();\n        }\n      },\n\n      /**\n       * Get the the DOM element for the selected rows or columns\n       * @returns {Array}\n       */\n      nodes: function nodes() {\n        return Plugin.recentNode;\n      },\n\n      /**\n       * will be implemented soon\n       * @returns {jQuery}\n       */\n      dataset: function dataset() {\n        return datatable;\n      }\n    };\n    /**\n     * Public API methods can be used directly by datatable\n     */\n\n    $.each(Plugin, function (funcName, func) {\n      datatable[funcName] = func;\n    }); // initialize main datatable plugin\n\n    if (typeof options !== 'undefined') {\n      if (typeof options === 'string') {\n        var method = options;\n        datatable = $(this).data(pluginName);\n\n        if (typeof datatable !== 'undefined') {\n          options = datatable.options;\n          Plugin[method].apply(this, Array.prototype.slice.call(arguments, 1));\n        }\n      } else {\n        if (!datatable.data(pluginName) && !$(this).hasClass(pfx + 'datatable--loaded')) {\n          datatable.dataSet = null;\n          datatable.textAlign = {\n            left: pfx + 'datatable__cell--left',\n            center: pfx + 'datatable__cell--center',\n            right: pfx + 'datatable__cell--right'\n          }; // merge default and user defined options\n\n          options = $.extend(true, {}, $.fn[pluginName].defaults, options);\n          datatable.options = options; // init plugin process\n\n          Plugin.init.apply(this, [options]);\n          $(datatable.wrap).data(pluginName, datatable);\n        }\n      }\n    } else {\n      // get existing instance datatable\n      datatable = $(this).data(pluginName);\n\n      if (typeof datatable === 'undefined') {\n        $.error(pluginName + ' not initialized');\n      }\n\n      options = datatable.options;\n    }\n\n    return datatable;\n  }; // default options\n\n\n  $.fn[pluginName].defaults = {\n    // datasource definition\n    data: {\n      type: 'local',\n      source: null,\n      pageSize: 10,\n      // display records per page\n      saveState: {\n        // save datatable state(pagination, filtering, sorting, etc) in cookie or browser webstorage\n        cookie: false,\n        webstorage: true\n      },\n      serverPaging: false,\n      serverFiltering: false,\n      serverSorting: false,\n      autoColumns: false,\n      attr: {\n        rowProps: []\n      }\n    },\n    // layout definition\n    layout: {\n      theme: 'default',\n      // datatable will support multiple themes and designs\n      \"class\": pfx + 'datatable--brand',\n      // custom wrapper class\n      scroll: false,\n      // enable/disable datatable scroll both horizontal and vertical when needed.\n      height: null,\n      // datatable's body's fixed height\n      minHeight: 300,\n      footer: false,\n      // display/hide footer\n      header: true,\n      // display/hide header\n      customScrollbar: true,\n      // set false to disable custom scrollbar\n      // datatable spinner\n      spinner: {\n        overlayColor: '#000000',\n        opacity: 0,\n        type: 'loader',\n        state: 'brand',\n        message: true\n      },\n      // datatable UI icons\n      icons: {\n        sort: {\n          asc: 'la la-arrow-up',\n          desc: 'la la-arrow-down'\n        },\n        pagination: {\n          next: 'la la-angle-right',\n          prev: 'la la-angle-left',\n          first: 'la la-angle-double-left',\n          last: 'la la-angle-double-right',\n          more: 'la la-ellipsis-h'\n        },\n        rowDetail: {\n          expand: 'fa fa-caret-down',\n          collapse: 'fa fa-caret-right'\n        }\n      }\n    },\n    // column sorting\n    sortable: true,\n    // resize column size with mouse drag coming soon)\n    resizable: false,\n    // column based filtering (coming soon)\n    filterable: false,\n    pagination: true,\n    // inline and bactch editing (cooming soon)\n    editable: false,\n    // columns definition\n    columns: [],\n    search: {\n      // enable trigger search by keyup enter\n      onEnter: false,\n      // input text for search\n      input: null,\n      // search delay in milliseconds\n      delay: 400\n    },\n    rows: {\n      // deprecated\n      callback: function callback() {},\n      // call before row template\n      beforeTemplate: function beforeTemplate() {},\n      // call after row template\n      afterTemplate: function afterTemplate() {},\n      // auto hide columns, if rows overflow. work on non locked columns\n      autoHide: false\n    },\n    // toolbar\n    toolbar: {\n      // place pagination and displayInfo blocks according to the array order\n      layout: ['pagination', 'info'],\n      // toolbar placement can be at top or bottom or both top and bottom repeated\n      placement: ['bottom'],\n      //'top', 'bottom'\n      // toolbar items\n      items: {\n        // pagination\n        pagination: {\n          // pagination type(default or scroll)\n          type: 'default',\n          // number of pages to display by breakpoints\n          pages: {\n            desktop: {\n              layout: 'default',\n              pagesNumber: 6\n            },\n            tablet: {\n              layout: 'default',\n              pagesNumber: 3\n            },\n            mobile: {\n              layout: 'compact'\n            }\n          },\n          // navigation buttons\n          navigation: {\n            prev: true,\n            // display prev link\n            next: true,\n            // display next link\n            first: true,\n            // display first link\n            last: true // display last link\n\n          },\n          // page size select\n          pageSizeSelect: [] // display dropdown to select pagination size. -1 is used for \"ALl\" option\n\n        },\n        // records info\n        info: true\n      }\n    },\n    // here we will keep all strings and message used by datatable UI so developer can easiliy translate to any language.\n    // By default the stirngs will be in the plugin source and here can override it\n    translate: {\n      records: {\n        processing: 'Please wait...',\n        noRecords: 'No records found'\n      },\n      toolbar: {\n        pagination: {\n          items: {\n            \"default\": {\n              first: 'First',\n              prev: 'Previous',\n              next: 'Next',\n              last: 'Last',\n              more: 'More pages',\n              input: 'Page number',\n              select: 'Select page size'\n            },\n            info: 'Displaying {{start}} - {{end}} of {{total}} records'\n          }\n        }\n      }\n    },\n    extensions: {}\n  };\n})(jQuery);\n\nvar defaults = {\n  layout: {\n    icons: {\n      pagination: {\n        next: 'la la-angle-right',\n        prev: 'la la-angle-left',\n        first: 'la la-angle-double-left',\n        last: 'la la-angle-double-right',\n        more: 'la la-ellipsis-h'\n      },\n      rowDetail: {\n        expand: 'fa fa-caret-down',\n        collapse: 'fa fa-caret-right'\n      }\n    }\n  }\n};\n\nif (mUtil.isRTL()) {\n  defaults = {\n    layout: {\n      icons: {\n        pagination: {\n          next: 'la la-angle-left',\n          prev: 'la la-angle-right',\n          last: 'la la-angle-double-left',\n          first: 'la la-angle-double-right'\n        },\n        rowDetail: {\n          collapse: 'fa fa-caret-down',\n          expand: 'fa fa-caret-right'\n        }\n      }\n    }\n  };\n}\n\n$.extend(true, $.fn.mDatatable.defaults, defaults);\n\nvar mDropdown = function mDropdown(elementId, options) {\n  //== Main object\n  var the = this;\n  var init = false; //== Get element object\n\n  var element = mUtil.get(elementId);\n  var body = mUtil.get('body');\n\n  if (!element) {\n    return;\n  } //== Default options\n\n\n  var defaultOptions = {\n    toggle: 'click',\n    hoverTimeout: 300,\n    skin: 'light',\n    height: 'auto',\n    maxHeight: false,\n    minHeight: false,\n    persistent: false,\n    mobileOverlay: true\n  }; ////////////////////////////\n  // ** Private Methods  ** //\n  ////////////////////////////\n\n  var Plugin = {\n    /**\n     * Run plugin\n     * @returns {mdropdown}\n     */\n    construct: function construct(options) {\n      if (mUtil.data(element).has('dropdown')) {\n        the = mUtil.data(element).get('dropdown');\n      } else {\n        // reset dropdown\n        Plugin.init(options);\n        Plugin.setup();\n        mUtil.data(element).set('dropdown', the);\n      }\n\n      return the;\n    },\n\n    /**\n     * Handles subdropdown click toggle\n     * @returns {mdropdown}\n     */\n    init: function init(options) {\n      // merge default and user defined options\n      the.options = mUtil.deepExtend({}, defaultOptions, options);\n      the.events = [];\n      the.eventHandlers = {};\n      the.open = false;\n      the.layout = {};\n      the.layout.close = mUtil.find(element, '.m-dropdown__close');\n      the.layout.toggle = mUtil.find(element, '.m-dropdown__toggle');\n      the.layout.arrow = mUtil.find(element, '.m-dropdown__arrow');\n      the.layout.wrapper = mUtil.find(element, '.m-dropdown__wrapper');\n      the.layout.defaultDropPos = mUtil.hasClass(element, 'm-dropdown--up') ? 'up' : 'down';\n      the.layout.currentDropPos = the.layout.defaultDropPos;\n\n      if (mUtil.attr(element, 'm-dropdown-toggle') == \"hover\") {\n        the.options.toggle = 'hover';\n      }\n    },\n\n    /**\n     * Setup dropdown\n     */\n    setup: function setup() {\n      if (the.options.placement) {\n        mUtil.addClass(element, 'm-dropdown--' + the.options.placement);\n      }\n\n      if (the.options.align) {\n        mUtil.addClass(element, 'm-dropdown--align-' + the.options.align);\n      }\n\n      if (the.options.width) {\n        mUtil.css(the.layout.wrapper, 'width', the.options.width + 'px');\n      }\n\n      if (mUtil.attr(element, 'm-dropdown-persistent') == '1') {\n        the.options.persistent = true;\n      }\n\n      if (the.options.toggle == 'hover') {\n        mUtil.addEvent(element, 'mouseout', Plugin.hideMouseout);\n      } // set zindex\n\n\n      Plugin.setZindex();\n    },\n\n    /**\n     * Toggle dropdown\n     */\n    toggle: function toggle() {\n      if (the.open) {\n        return Plugin.hide();\n      } else {\n        return Plugin.show();\n      }\n    },\n\n    /**\n     * Set content\n     */\n    setContent: function setContent(content) {\n      var content = mUtil.find(element, '.m-dropdown__content').innerHTML = content;\n      return the;\n    },\n\n    /**\n     * Show dropdown\n     */\n    show: function show() {\n      if (the.options.toggle == 'hover' && mUtil.hasAttr(element, 'hover')) {\n        Plugin.clearHovered();\n        return the;\n      }\n\n      if (the.open) {\n        return the;\n      }\n\n      if (the.layout.arrow) {\n        Plugin.adjustArrowPos();\n      }\n\n      Plugin.eventTrigger('beforeShow');\n      Plugin.hideOpened();\n      mUtil.addClass(element, 'm-dropdown--open');\n\n      if (mUtil.isMobileDevice() && the.options.mobileOverlay) {\n        var zIndex = mUtil.css(element, 'z-index') - 1;\n        var dropdownoff = mUtil.insertAfter(document.createElement('DIV'), element);\n        mUtil.addClass(dropdownoff, 'm-dropdown__dropoff');\n        mUtil.css(dropdownoff, 'z-index', zIndex);\n        mUtil.data(dropdownoff).set('dropdown', element);\n        mUtil.data(element).set('dropoff', dropdownoff);\n        mUtil.addEvent(dropdownoff, 'click', function (e) {\n          Plugin.hide();\n          mUtil.remove(this);\n          e.preventDefault();\n        });\n      }\n\n      element.focus();\n      element.setAttribute('aria-expanded', 'true');\n      the.open = true; //== Update scrollers\n\n      mUtil.scrollersUpdate(element);\n      Plugin.eventTrigger('afterShow');\n      return the;\n    },\n\n    /**\n     * Clear dropdown hover\n     */\n    clearHovered: function clearHovered() {\n      var timeout = mUtil.attr(element, 'timeout');\n      mUtil.removeAttr(element, 'hover');\n      mUtil.removeAttr(element, 'timeout');\n      clearTimeout(timeout);\n    },\n\n    /**\n     * Hide hovered dropdown\n     */\n    hideHovered: function hideHovered(force) {\n      if (force === true) {\n        if (Plugin.eventTrigger('beforeHide') === false) {\n          return;\n        }\n\n        Plugin.clearHovered();\n        mUtil.removeClass(element, 'm-dropdown--open');\n        the.open = false;\n        Plugin.eventTrigger('afterHide');\n      } else {\n        if (mUtil.hasAttr(element, 'hover') === true) {\n          return;\n        }\n\n        if (Plugin.eventTrigger('beforeHide') === false) {\n          return;\n        }\n\n        var timeout = setTimeout(function () {\n          if (mUtil.attr(element, 'hover')) {\n            Plugin.clearHovered();\n            mUtil.removeClass(element, 'm-dropdown--open');\n            the.open = false;\n            Plugin.eventTrigger('afterHide');\n          }\n        }, the.options.hoverTimeout);\n        mUtil.attr(element, 'hover', '1');\n        mUtil.attr(element, 'timeout', timeout);\n      }\n    },\n\n    /**\n     * Hide clicked dropdown\n     */\n    hideClicked: function hideClicked() {\n      if (Plugin.eventTrigger('beforeHide') === false) {\n        return;\n      }\n\n      mUtil.removeClass(element, 'm-dropdown--open');\n      mUtil.data(element).remove('dropoff');\n      the.open = false;\n      Plugin.eventTrigger('afterHide');\n    },\n\n    /**\n     * Hide dropdown\n     */\n    hide: function hide(force) {\n      if (the.open === false) {\n        return the;\n      }\n\n      if (mUtil.isDesktopDevice() && the.options.toggle == 'hover') {\n        Plugin.hideHovered(force);\n      } else {\n        Plugin.hideClicked();\n      }\n\n      if (the.layout.defaultDropPos == 'down' && the.layout.currentDropPos == 'up') {\n        mUtil.removeClass(element, 'm-dropdown--up');\n        the.layout.arrow.prependTo(the.layout.wrapper);\n        the.layout.currentDropPos = 'down';\n      }\n\n      return the;\n    },\n\n    /**\n     * Hide on mouseout\n     */\n    hideMouseout: function hideMouseout() {\n      if (mUtil.isDesktopDevice()) {\n        Plugin.hide();\n      }\n    },\n\n    /**\n     * Hide opened dropdowns\n     */\n    hideOpened: function hideOpened() {\n      var query = mUtil.findAll(body, '.m-dropdown.m-dropdown--open');\n\n      for (var i = 0, j = query.length; i < j; i++) {\n        var dropdown = query[i];\n        mUtil.data(dropdown).get('dropdown').hide(true);\n      }\n    },\n\n    /**\n     * Adjust dropdown arrow positions\n     */\n    adjustArrowPos: function adjustArrowPos() {\n      var width = mUtil.outerWidth(element); // ?\n\n      var alignment = mUtil.hasClass(the.layout.arrow, 'm-dropdown__arrow--right') ? 'right' : 'left';\n      var pos = 0;\n\n      if (the.layout.arrow) {\n        if (mUtil.isInResponsiveRange('mobile') && mUtil.hasClass(element, 'm-dropdown--mobile-full-width')) {\n          pos = mUtil.offset(element).left + width / 2 - Math.abs(parseInt(mUtil.css(the.layout.arrow, 'width')) / 2) - parseInt(mUtil.css(the.layout.wrapper, 'left'));\n          mUtil.css(the.layout.arrow, 'right', 'auto');\n          mUtil.css(the.layout.arrow, 'left', pos + 'px');\n          mUtil.css(the.layout.arrow, 'margin-left', 'auto');\n          mUtil.css(the.layout.arrow, 'margin-right', 'auto');\n        } else if (mUtil.hasClass(the.layout.arrow, 'm-dropdown__arrow--adjust')) {\n          pos = width / 2 - Math.abs(parseInt(mUtil.css(the.layout.arrow, 'width')) / 2);\n\n          if (mUtil.hasClass(element, 'm-dropdown--align-push')) {\n            pos = pos + 20;\n          }\n\n          if (alignment == 'right') {\n            if (mUtil.isRTL()) {\n              mUtil.css(the.layout.arrow, 'right', 'auto');\n              mUtil.css(the.layout.arrow, 'left', pos + 'px');\n            } else {\n              mUtil.css(the.layout.arrow, 'left', 'auto');\n              mUtil.css(the.layout.arrow, 'right', pos + 'px');\n            }\n          } else {\n            if (mUtil.isRTL()) {\n              mUtil.css(the.layout.arrow, 'left', 'auto');\n              mUtil.css(the.layout.arrow, 'right', pos + 'px');\n            } else {\n              mUtil.css(the.layout.arrow, 'right', 'auto');\n              mUtil.css(the.layout.arrow, 'left', pos + 'px');\n            }\n          }\n        }\n      }\n    },\n\n    /**\n     * Get zindex\n     */\n    setZindex: function setZindex() {\n      var zIndex = 101; //mUtil.css(the.layout.wrapper, 'z-index');\n\n      var newZindex = mUtil.getHighestZindex(element);\n\n      if (newZindex >= zIndex) {\n        zIndex = newZindex + 1;\n      }\n\n      mUtil.css(the.layout.wrapper, 'z-index', zIndex);\n    },\n\n    /**\n     * Check persistent\n     */\n    isPersistent: function isPersistent() {\n      return the.options.persistent;\n    },\n\n    /**\n     * Check persistent\n     */\n    isShown: function isShown() {\n      return the.open;\n    },\n\n    /**\n     * Trigger events\n     */\n    eventTrigger: function eventTrigger(name, args) {\n      for (var i = 0; i < the.events.length; i++) {\n        var event = the.events[i];\n\n        if (event.name == name) {\n          if (event.one == true) {\n            if (event.fired == false) {\n              the.events[i].fired = true;\n              event.handler.call(this, the, args);\n            }\n          } else {\n            event.handler.call(this, the, args);\n          }\n        }\n      }\n    },\n    addEvent: function addEvent(name, handler, one) {\n      the.events.push({\n        name: name,\n        handler: handler,\n        one: one,\n        fired: false\n      });\n    }\n  }; //////////////////////////\n  // ** Public Methods ** //\n  //////////////////////////\n\n  /**\n   * Set default options\n   */\n\n  the.setDefaults = function (options) {\n    defaultOptions = options;\n  };\n  /**\n   * Show dropdown\n   * @returns {mDropdown}\n   */\n\n\n  the.show = function () {\n    return Plugin.show();\n  };\n  /**\n   * Hide dropdown\n   * @returns {mDropdown}\n   */\n\n\n  the.hide = function () {\n    return Plugin.hide();\n  };\n  /**\n   * Toggle dropdown\n   * @returns {mDropdown}\n   */\n\n\n  the.toggle = function () {\n    return Plugin.toggle();\n  };\n  /**\n   * Toggle dropdown\n   * @returns {mDropdown}\n   */\n\n\n  the.isPersistent = function () {\n    return Plugin.isPersistent();\n  };\n  /**\n   * Check shown state\n   * @returns {mDropdown}\n   */\n\n\n  the.isShown = function () {\n    return Plugin.isShown();\n  };\n  /**\n   * Set dropdown content\n   * @returns {mDropdown}\n   */\n\n\n  the.setContent = function (content) {\n    return Plugin.setContent(content);\n  };\n  /**\n   * Register event\n   */\n\n\n  the.on = function (name, handler) {\n    return Plugin.addEvent(name, handler);\n  };\n  /**\n   * Register event\n   */\n\n\n  the.one = function (name, handler) {\n    return Plugin.addEvent(name, handler, true);\n  }; ///////////////////////////////\n  // ** Plugin Construction ** //\n  ///////////////////////////////\n  //== Run plugin\n\n\n  Plugin.construct.apply(the, [options]); //== Init done\n\n  init = true; // Return plugin instance\n\n  return the;\n}; //== Plugin global lazy initialization\n\n\nmUtil.on(document, '[m-dropdown-toggle=\"click\"] .m-dropdown__toggle', 'click', function (e) {\n  var element = this.closest('.m-dropdown');\n  var dropdown;\n\n  if (element) {\n    if (mUtil.data(element).has('dropdown')) {\n      dropdown = mUtil.data(element).get('dropdown');\n    } else {\n      dropdown = new mDropdown(element);\n    }\n\n    dropdown.toggle();\n    e.preventDefault();\n  }\n});\nmUtil.on(document, '[m-dropdown-toggle=\"hover\"] .m-dropdown__toggle', 'click', function (e) {\n  if (mUtil.isDesktopDevice()) {\n    if (mUtil.attr(this, 'href') == '#') {\n      e.preventDefault();\n    }\n  } else if (mUtil.isMobileDevice()) {\n    var element = this.closest('.m-dropdown');\n    var dropdown;\n\n    if (element) {\n      if (mUtil.data(element).has('dropdown')) {\n        dropdown = mUtil.data(element).get('dropdown');\n      } else {\n        dropdown = new mDropdown(element);\n      }\n\n      dropdown.toggle();\n      e.preventDefault();\n    }\n  }\n});\nmUtil.on(document, '[m-dropdown-toggle=\"hover\"]', 'mouseover', function (e) {\n  if (mUtil.isDesktopDevice()) {\n    var element = this;\n    var dropdown;\n\n    if (element) {\n      if (mUtil.data(element).has('dropdown')) {\n        dropdown = mUtil.data(element).get('dropdown');\n      } else {\n        dropdown = new mDropdown(element);\n      }\n\n      dropdown.show();\n      e.preventDefault();\n    }\n  }\n});\ndocument.addEventListener(\"click\", function (e) {\n  var query;\n  var body = mUtil.get('body');\n  var target = e.target; //== Handle dropdown close\n\n  if (query = body.querySelectorAll('.m-dropdown.m-dropdown--open')) {\n    for (var i = 0, len = query.length; i < len; i++) {\n      var element = query[i];\n\n      if (mUtil.data(element).has('dropdown') === false) {\n        return;\n      }\n\n      var the = mUtil.data(element).get('dropdown');\n      var toggle = mUtil.find(element, '.m-dropdown__toggle');\n\n      if (mUtil.hasClass(element, 'm-dropdown--disable-close')) {\n        e.preventDefault();\n        e.stopPropagation(); //return;\n      }\n\n      if (toggle && target !== toggle && toggle.contains(target) === false && target.contains(toggle) === false) {\n        if (the.isPersistent() === false) {\n          the.hide();\n        }\n      } else if (element.contains(target) === false) {\n        the.hide();\n      }\n    }\n  }\n});\n\nvar mHeader = function mHeader(elementId, options) {\n  //== Main object\n  var the = this;\n  var init = false; //== Get element object\n\n  var element = mUtil.get(elementId);\n  var body = mUtil.get('body');\n\n  if (element === undefined) {\n    return;\n  } //== Default options\n\n\n  var defaultOptions = {\n    classic: false,\n    offset: {\n      mobile: 150,\n      desktop: 200\n    },\n    minimize: {\n      mobile: false,\n      desktop: false\n    }\n  }; ////////////////////////////\n  // ** Private Methods  ** //\n  ////////////////////////////\n\n  var Plugin = {\n    /**\n     * Run plugin\n     * @returns {mHeader}\n     */\n    construct: function construct(options) {\n      if (mUtil.data(element).has('header')) {\n        the = mUtil.data(element).get('header');\n      } else {\n        // reset header\n        Plugin.init(options); // build header\n\n        Plugin.build();\n        mUtil.data(element).set('header', the);\n      }\n\n      return the;\n    },\n\n    /**\n     * Handles subheader click toggle\n     * @returns {mHeader}\n     */\n    init: function init(options) {\n      the.events = []; // merge default and user defined options\n\n      the.options = mUtil.deepExtend({}, defaultOptions, options);\n    },\n\n    /**\n     * Reset header\n     * @returns {mHeader}\n     */\n    build: function build() {\n      var lastScrollTop = 0;\n\n      if (the.options.minimize.mobile === false && the.options.minimize.desktop === false) {\n        return;\n      }\n\n      window.addEventListener('scroll', function () {\n        var offset = 0,\n            on,\n            off,\n            st;\n\n        if (mUtil.isInResponsiveRange('desktop')) {\n          offset = the.options.offset.desktop;\n          on = the.options.minimize.desktop.on;\n          off = the.options.minimize.desktop.off;\n        } else if (mUtil.isInResponsiveRange('tablet-and-mobile')) {\n          offset = the.options.offset.mobile;\n          on = the.options.minimize.mobile.on;\n          off = the.options.minimize.mobile.off;\n        }\n\n        st = window.pageYOffset;\n\n        if (mUtil.isInResponsiveRange('tablet-and-mobile') && the.options.classic && the.options.classic.mobile || mUtil.isInResponsiveRange('desktop') && the.options.classic && the.options.classic.desktop) {\n          if (st > offset) {\n            // down scroll mode\n            mUtil.addClass(body, on);\n            mUtil.removeClass(body, off);\n          } else {\n            // back scroll mode\n            mUtil.addClass(body, off);\n            mUtil.removeClass(body, on);\n          }\n        } else {\n          if (st > offset && lastScrollTop < st) {\n            // down scroll mode\n            mUtil.addClass(body, on);\n            mUtil.removeClass(body, off);\n          } else {\n            // back scroll mode\n            mUtil.addClass(body, off);\n            mUtil.removeClass(body, on);\n          }\n\n          lastScrollTop = st;\n        }\n      });\n    },\n\n    /**\n     * Trigger events\n     */\n    eventTrigger: function eventTrigger(name, args) {\n      for (var i = 0; i < the.events.length; i++) {\n        var event = the.events[i];\n\n        if (event.name == name) {\n          if (event.one == true) {\n            if (event.fired == false) {\n              the.events[i].fired = true;\n              event.handler.call(this, the, args);\n            }\n          } else {\n            event.handler.call(this, the, args);\n          }\n        }\n      }\n    },\n    addEvent: function addEvent(name, handler, one) {\n      the.events.push({\n        name: name,\n        handler: handler,\n        one: one,\n        fired: false\n      });\n    }\n  }; //////////////////////////\n  // ** Public Methods ** //\n  //////////////////////////\n\n  /**\n   * Set default options\n   */\n\n  the.setDefaults = function (options) {\n    defaultOptions = options;\n  };\n  /**\n   * Register event\n   */\n\n\n  the.on = function (name, handler) {\n    return Plugin.addEvent(name, handler);\n  }; ///////////////////////////////\n  // ** Plugin Construction ** //\n  ///////////////////////////////\n  //== Run plugin\n\n\n  Plugin.construct.apply(the, [options]); //== Init done\n\n  init = true; // Return plugin instance\n\n  return the;\n};\n\nvar mMenu = function mMenu(elementId, options) {\n  //== Main object\n  var the = this;\n  var init = false; //== Get element object\n\n  var element = mUtil.get(elementId);\n  var body = mUtil.get('body');\n\n  if (!element) {\n    return;\n  } //== Default options\n\n\n  var defaultOptions = {\n    // accordion submenu mode\n    accordion: {\n      slideSpeed: 200,\n      // accordion toggle slide speed in milliseconds\n      autoScroll: false,\n      // enable auto scrolling(focus) to the clicked menu item\n      autoScrollSpeed: 1200,\n      expandAll: true // allow having multiple expanded accordions in the menu\n\n    },\n    // dropdown submenu mode\n    dropdown: {\n      timeout: 500 // timeout in milliseconds to show and hide the hoverable submenu dropdown\n\n    }\n  }; ////////////////////////////\n  // ** Private Methods  ** //\n  ////////////////////////////\n\n  var Plugin = {\n    /**\n     * Run plugin\n     * @returns {mMenu}\n     */\n    construct: function construct(options) {\n      if (mUtil.data(element).has('menu')) {\n        the = mUtil.data(element).get('menu');\n      } else {\n        // reset menu\n        Plugin.init(options); // reset menu\n\n        Plugin.reset(); // build menu\n\n        Plugin.build();\n        mUtil.data(element).set('menu', the);\n      }\n\n      return the;\n    },\n\n    /**\n     * Handles submenu click toggle\n     * @returns {mMenu}\n     */\n    init: function init(options) {\n      the.events = [];\n      the.eventHandlers = {}; // merge default and user defined options\n\n      the.options = mUtil.deepExtend({}, defaultOptions, options); // pause menu\n\n      the.pauseDropdownHoverTime = 0;\n      the.uid = mUtil.getUniqueID();\n    },\n    update: function update(options) {\n      // merge default and user defined options\n      the.options = mUtil.deepExtend({}, defaultOptions, options); // pause menu\n\n      the.pauseDropdownHoverTime = 0; // reset menu\n\n      Plugin.reset();\n      the.eventHandlers = {}; // build menu\n\n      Plugin.build();\n      mUtil.data(element).set('menu', the);\n    },\n    reload: function reload() {\n      // reset menu\n      Plugin.reset(); // build menu\n\n      Plugin.build();\n    },\n\n    /**\n     * Reset menu\n     * @returns {mMenu}\n     */\n    build: function build() {\n      //== General accordion submenu toggle\n      the.eventHandlers['event_1'] = mUtil.on(element, '.m-menu__toggle', 'click', Plugin.handleSubmenuAccordion); //== Dropdown mode(hoverable)\n\n      if (Plugin.getSubmenuMode() === 'dropdown' || Plugin.isConditionalSubmenuDropdown()) {\n        // dropdown submenu - hover toggle\n        the.eventHandlers['event_2'] = mUtil.on(element, '[m-menu-submenu-toggle=\"hover\"]', 'mouseover', Plugin.handleSubmenuDrodownHoverEnter);\n        the.eventHandlers['event_3'] = mUtil.on(element, '[m-menu-submenu-toggle=\"hover\"]', 'mouseout', Plugin.handleSubmenuDrodownHoverExit); // dropdown submenu - click toggle\n\n        the.eventHandlers['event_4'] = mUtil.on(element, '[m-menu-submenu-toggle=\"click\"] > .m-menu__toggle, [m-menu-submenu-toggle=\"click\"] > .m-menu__link .m-menu__toggle', 'click', Plugin.handleSubmenuDropdownClick);\n        the.eventHandlers['event_5'] = mUtil.on(element, '[m-menu-submenu-toggle=\"tab\"] > .m-menu__toggle, [m-menu-submenu-toggle=\"tab\"] > .m-menu__link .m-menu__toggle', 'click', Plugin.handleSubmenuDropdownTabClick);\n      } //== General link click\n\n\n      the.eventHandlers['event_6'] = mUtil.on(element, '.m-menu__item:not(.m-menu__item--submenu) > .m-menu__link:not(.m-menu__toggle):not(.m-menu__link--toggle-skip)', 'click', Plugin.handleLinkClick); //== Init scrollable menu\n\n      if (the.options.scroll && the.options.scroll.height) {\n        Plugin.scrollerInit();\n      }\n    },\n\n    /**\n     * Reset menu\n     * @returns {mMenu}\n     */\n    reset: function reset() {\n      mUtil.off(element, 'click', the.eventHandlers['event_1']); // dropdown submenu - hover toggle\n\n      mUtil.off(element, 'mouseover', the.eventHandlers['event_2']);\n      mUtil.off(element, 'mouseout', the.eventHandlers['event_3']); // dropdown submenu - click toggle\n\n      mUtil.off(element, 'click', the.eventHandlers['event_4']);\n      mUtil.off(element, 'click', the.eventHandlers['event_5']);\n      mUtil.off(element, 'click', the.eventHandlers['event_6']);\n    },\n\n    /**\n     * Init scroll menu\n     *\n     */\n    scrollerInit: function scrollerInit() {\n      if (the.options.scroll && the.options.scroll.height) {\n        mUtil.scrollerDestroy(element);\n        mUtil.scrollerInit(element, {\n          disableForMobile: true,\n          resetHeightOnDestroy: true,\n          handleWindowResize: true,\n          height: the.options.scroll.height\n        });\n      }\n    },\n\n    /**\n     * Update scroll menu\n     */\n    scrollerUpdate: function scrollerUpdate() {\n      if (the.options.scroll && the.options.scroll.height) {\n        mUtil.scrollerUpdate(element);\n      } else {\n        mUtil.scrollerDestroy(element);\n      }\n    },\n\n    /**\n     * Scroll top\n     */\n    scrollerTop: function scrollerTop() {\n      if (the.options.scroll && the.options.scroll.height) {\n        mUtil.scrollerTop(element);\n      }\n    },\n\n    /**\n     * Get submenu mode for current breakpoint and menu state\n     * @returns {mMenu}\n     */\n    getSubmenuMode: function getSubmenuMode(el) {\n      if (mUtil.isInResponsiveRange('desktop')) {\n        if (el && mUtil.hasAttr(el, 'm-menu-submenu-toggle')) {\n          return mUtil.attr(el, 'm-menu-submenu-toggle');\n        }\n\n        if (mUtil.isset(the.options.submenu, 'desktop.state.body')) {\n          if (mUtil.hasClass(body, the.options.submenu.desktop.state.body)) {\n            return the.options.submenu.desktop.state.mode;\n          } else {\n            return the.options.submenu.desktop[\"default\"];\n          }\n        } else if (mUtil.isset(the.options.submenu, 'desktop')) {\n          return the.options.submenu.desktop;\n        }\n      } else if (mUtil.isInResponsiveRange('tablet') && mUtil.isset(the.options.submenu, 'tablet')) {\n        return the.options.submenu.tablet;\n      } else if (mUtil.isInResponsiveRange('mobile') && mUtil.isset(the.options.submenu, 'mobile')) {\n        return the.options.submenu.mobile;\n      } else {\n        return false;\n      }\n    },\n\n    /**\n     * Get submenu mode for current breakpoint and menu state\n     * @returns {mMenu}\n     */\n    isConditionalSubmenuDropdown: function isConditionalSubmenuDropdown() {\n      if (mUtil.isInResponsiveRange('desktop') && mUtil.isset(the.options.submenu, 'desktop.state.body')) {\n        return true;\n      } else {\n        return false;\n      }\n    },\n\n    /**\n     * Handles menu link click\n     * @returns {mMenu}\n     */\n    handleLinkClick: function handleLinkClick(e) {\n      if (Plugin.eventTrigger('linkClick', this) === false) {\n        e.preventDefault();\n      }\n\n      ;\n\n      if (Plugin.getSubmenuMode(this) === 'dropdown' || Plugin.isConditionalSubmenuDropdown()) {\n        Plugin.handleSubmenuDropdownClose(e, this);\n      }\n    },\n\n    /**\n     * Handles submenu hover toggle\n     * @returns {mMenu}\n     */\n    handleSubmenuDrodownHoverEnter: function handleSubmenuDrodownHoverEnter(e) {\n      if (Plugin.getSubmenuMode(this) === 'accordion') {\n        return;\n      }\n\n      if (the.resumeDropdownHover() === false) {\n        return;\n      }\n\n      var item = this;\n\n      if (item.getAttribute('data-hover') == '1') {\n        item.removeAttribute('data-hover');\n        clearTimeout(item.getAttribute('data-timeout'));\n        item.removeAttribute('data-timeout'); //Plugin.hideSubmenuDropdown(item, false);\n      }\n\n      Plugin.showSubmenuDropdown(item);\n    },\n\n    /**\n     * Handles submenu hover toggle\n     * @returns {mMenu}\n     */\n    handleSubmenuDrodownHoverExit: function handleSubmenuDrodownHoverExit(e) {\n      if (the.resumeDropdownHover() === false) {\n        return;\n      }\n\n      if (Plugin.getSubmenuMode(this) === 'accordion') {\n        return;\n      }\n\n      var item = this;\n      var time = the.options.dropdown.timeout;\n      var timeout = setTimeout(function () {\n        if (item.getAttribute('data-hover') == '1') {\n          Plugin.hideSubmenuDropdown(item, true);\n        }\n      }, time);\n      item.setAttribute('data-hover', '1');\n      item.setAttribute('data-timeout', timeout);\n    },\n\n    /**\n     * Handles submenu click toggle\n     * @returns {mMenu}\n     */\n    handleSubmenuDropdownClick: function handleSubmenuDropdownClick(e) {\n      if (Plugin.getSubmenuMode(this) === 'accordion') {\n        return;\n      }\n\n      var item = this.closest('.m-menu__item');\n\n      if (item.getAttribute('m-menu-submenu-mode') == 'accordion') {\n        return;\n      }\n\n      if (mUtil.hasClass(item, 'm-menu__item--hover') === false) {\n        mUtil.addClass(item, 'm-menu__item--open-dropdown');\n        Plugin.showSubmenuDropdown(item);\n      } else {\n        mUtil.removeClass(item, 'm-menu__item--open-dropdown');\n        Plugin.hideSubmenuDropdown(item, true);\n      }\n\n      e.preventDefault();\n    },\n\n    /**\n     * Handles tab click toggle\n     * @returns {mMenu}\n     */\n    handleSubmenuDropdownTabClick: function handleSubmenuDropdownTabClick(e) {\n      if (Plugin.getSubmenuMode(this) === 'accordion') {\n        return;\n      }\n\n      var item = this.closest('.m-menu__item');\n\n      if (item.getAttribute('m-menu-submenu-mode') == 'accordion') {\n        return;\n      }\n\n      if (mUtil.hasClass(item, 'm-menu__item--hover') == false) {\n        mUtil.addClass(item, 'm-menu__item--open-dropdown');\n        Plugin.showSubmenuDropdown(item);\n      }\n\n      e.preventDefault();\n    },\n\n    /**\n     * Handles submenu dropdown close on link click\n     * @returns {mMenu}\n     */\n    handleSubmenuDropdownClose: function handleSubmenuDropdownClose(e, el) {\n      // exit if its not submenu dropdown mode\n      if (Plugin.getSubmenuMode(el) === 'accordion') {\n        return;\n      }\n\n      var shown = element.querySelectorAll('.m-menu__item.m-menu__item--submenu.m-menu__item--hover:not(.m-menu__item--tabs)'); // check if currently clicked link's parent item ha\n\n      if (shown.length > 0 && mUtil.hasClass(el, 'm-menu__toggle') === false && el.querySelectorAll('.m-menu__toggle').length === 0) {\n        // close opened dropdown menus\n        for (var i = 0, len = shown.length; i < len; i++) {\n          Plugin.hideSubmenuDropdown(shown[0], true);\n        }\n      }\n    },\n\n    /**\n     * helper functions\n     * @returns {mMenu}\n     */\n    handleSubmenuAccordion: function handleSubmenuAccordion(e, el) {\n      var query;\n      var item = el ? el : this;\n\n      if (Plugin.getSubmenuMode(el) === 'dropdown' && (query = item.closest('.m-menu__item'))) {\n        if (query.getAttribute('m-menu-submenu-mode') != 'accordion') {\n          e.preventDefault();\n          return;\n        }\n      }\n\n      var li = item.closest('.m-menu__item');\n      var submenu = mUtil.child(li, '.m-menu__submenu, .m-menu__inner');\n\n      if (mUtil.hasClass(item.closest('.m-menu__item'), 'm-menu__item--open-always')) {\n        return;\n      }\n\n      if (li && submenu) {\n        e.preventDefault();\n        var speed = the.options.accordion.slideSpeed;\n        var hasClosables = false;\n\n        if (mUtil.hasClass(li, 'm-menu__item--open') === false) {\n          // hide other accordions\n          if (the.options.accordion.expandAll === false) {\n            var subnav = item.closest('.m-menu__nav, .m-menu__subnav');\n            var closables = mUtil.children(subnav, '.m-menu__item.m-menu__item--open.m-menu__item--submenu:not(.m-menu__item--expanded):not(.m-menu__item--open-always)');\n\n            if (subnav && closables) {\n              for (var i = 0, len = closables.length; i < len; i++) {\n                var el_ = closables[0];\n                var submenu_ = mUtil.child(el_, '.m-menu__submenu');\n\n                if (submenu_) {\n                  mUtil.slideUp(submenu_, speed, function () {\n                    Plugin.scrollerUpdate();\n                    mUtil.removeClass(el_, 'm-menu__item--open');\n                  });\n                }\n              }\n            }\n          }\n\n          mUtil.slideDown(submenu, speed, function () {\n            Plugin.scrollToItem(item);\n            Plugin.scrollerUpdate();\n            Plugin.eventTrigger('submenuToggle', submenu);\n          });\n          mUtil.addClass(li, 'm-menu__item--open');\n        } else {\n          mUtil.slideUp(submenu, speed, function () {\n            Plugin.scrollToItem(item);\n            Plugin.eventTrigger('submenuToggle', submenu);\n          });\n          mUtil.removeClass(li, 'm-menu__item--open');\n        }\n      }\n    },\n\n    /**\n     * scroll to item function\n     * @returns {mMenu}\n     */\n    scrollToItem: function scrollToItem(item) {\n      // handle auto scroll for accordion submenus\n      if (mUtil.isInResponsiveRange('desktop') && the.options.accordion.autoScroll && element.getAttribute('m-menu-scrollable') !== '1') {\n        mUtil.scrollTo(item, the.options.accordion.autoScrollSpeed);\n      }\n    },\n\n    /**\n     * helper functions\n     * @returns {mMenu}\n     */\n    hideSubmenuDropdown: function hideSubmenuDropdown(item, classAlso) {\n      // remove submenu activation class\n      if (classAlso) {\n        mUtil.removeClass(item, 'm-menu__item--hover');\n        mUtil.removeClass(item, 'm-menu__item--active-tab');\n      } // clear timeout\n\n\n      item.removeAttribute('data-hover');\n\n      if (item.getAttribute('m-menu-dropdown-toggle-class')) {\n        mUtil.removeClass(body, item.getAttribute('m-menu-dropdown-toggle-class'));\n      }\n\n      var timeout = item.getAttribute('data-timeout');\n      item.removeAttribute('data-timeout');\n      clearTimeout(timeout);\n    },\n\n    /**\n     * helper functions\n     * @returns {mMenu}\n     */\n    showSubmenuDropdown: function showSubmenuDropdown(item) {\n      // close active submenus\n      var list = element.querySelectorAll('.m-menu__item--submenu.m-menu__item--hover, .m-menu__item--submenu.m-menu__item--active-tab');\n\n      if (list) {\n        for (var i = 0, len = list.length; i < len; i++) {\n          var el = list[i];\n\n          if (item !== el && el.contains(item) === false && item.contains(el) === false) {\n            Plugin.hideSubmenuDropdown(el, true);\n          }\n        }\n      } // adjust submenu position\n\n\n      Plugin.adjustSubmenuDropdownArrowPos(item); // add submenu activation class\n\n      mUtil.addClass(item, 'm-menu__item--hover');\n\n      if (item.getAttribute('m-menu-dropdown-toggle-class')) {\n        mUtil.addClass(body, item.getAttribute('m-menu-dropdown-toggle-class'));\n      }\n    },\n\n    /**\n     * Handles submenu slide toggle\n     * @returns {mMenu}\n     */\n    createSubmenuDropdownClickDropoff: function createSubmenuDropdownClickDropoff(el) {\n      var query;\n      var zIndex = (query = mUtil.child(el, '.m-menu__submenu') ? mUtil.css(query, 'z-index') : 0) - 1;\n      var dropoff = document.createElement('<div class=\"m-menu__dropoff\" style=\"background: transparent; position: fixed; top: 0; bottom: 0; left: 0; right: 0; z-index: ' + zIndex + '\"></div>');\n      body.appendChild(dropoff);\n      mUtil.addEvent(dropoff, 'click', function (e) {\n        e.stopPropagation();\n        e.preventDefault();\n        mUtil.remove(this);\n        Plugin.hideSubmenuDropdown(el, true);\n      });\n    },\n\n    /**\n     * Handles submenu click toggle\n     * @returns {mMenu}\n     */\n    adjustSubmenuDropdownArrowPos: function adjustSubmenuDropdownArrowPos(item) {\n      var submenu = mUtil.child(item, '.m-menu__submenu');\n      var arrow = mUtil.child(submenu, '.m-menu__arrow.m-menu__arrow--adjust');\n      var subnav = mUtil.child(submenu, '.m-menu__subnav');\n\n      if (arrow) {\n        var pos = 0;\n        var link = mUtil.child(item, '.m-menu__link');\n\n        if (mUtil.hasClass(submenu, 'm-menu__submenu--classic') || mUtil.hasClass(submenu, 'm-menu__submenu--fixed')) {\n          if (mUtil.hasClass(submenu, 'm-menu__submenu--right')) {\n            pos = mUtil.outerWidth(item) / 2;\n\n            if (mUtil.hasClass(submenu, 'm-menu__submenu--pull')) {\n              if (mUtil.isRTL()) {\n                pos = pos + Math.abs(parseFloat(mUtil.css(submenu, 'margin-left')));\n              } else {\n                pos = pos + Math.abs(parseFloat(mUtil.css(submenu, 'margin-right')));\n              }\n            }\n\n            pos = parseInt(mUtil.css(submenu, 'width')) - pos;\n          } else if (mUtil.hasClass(submenu, 'm-menu__submenu--left')) {\n            pos = mUtil.outerWidth(item) / 2;\n\n            if (mUtil.hasClass(submenu, 'm-menu__submenu--pull')) {\n              if (mUtil.isRTL()) {\n                pos = pos + Math.abs(parseFloat(mUtil.css(submenu, 'margin-right')));\n              } else {\n                pos = pos + Math.abs(parseFloat(mUtil.css(submenu, 'margin-left')));\n              }\n            }\n          }\n\n          if (mUtil.isRTL()) {\n            mUtil.css(arrow, 'right', pos + 'px');\n          } else {\n            mUtil.css(arrow, 'left', pos + 'px');\n          }\n        } else {\n          if (mUtil.hasClass(submenu, 'm-menu__submenu--center') || mUtil.hasClass(submenu, 'm-menu__submenu--full')) {\n            pos = mUtil.offset(item).left - (mUtil.getViewPort().width - parseInt(mUtil.css(submenu, 'width'))) / 2;\n            pos = pos + mUtil.outerWidth(item) / 2;\n            mUtil.css(arrow, 'left', pos + 'px');\n\n            if (mUtil.isRTL()) {\n              mUtil.css(arrow, 'right', 'auto');\n            }\n          }\n        }\n      }\n    },\n\n    /**\n     * Handles submenu hover toggle\n     * @returns {mMenu}\n     */\n    pauseDropdownHover: function pauseDropdownHover(time) {\n      var date = new Date();\n      the.pauseDropdownHoverTime = date.getTime() + time;\n    },\n\n    /**\n     * Handles submenu hover toggle\n     * @returns {mMenu}\n     */\n    resumeDropdownHover: function resumeDropdownHover() {\n      var date = new Date();\n      return date.getTime() > the.pauseDropdownHoverTime ? true : false;\n    },\n\n    /**\n     * Reset menu's current active item\n     * @returns {mMenu}\n     */\n    resetActiveItem: function resetActiveItem(item) {\n      var list;\n      var parents;\n      list = element.querySelectorAll('.m-menu__item--active');\n\n      for (var i = 0, len = list.length; i < len; i++) {\n        var el = list[0];\n        mUtil.removeClass(el, 'm-menu__item--active');\n        mUtil.hide(mUtil.child(el, '.m-menu__submenu'));\n        parents = mUtil.parents(el, '.m-menu__item--submenu');\n\n        for (var i_ = 0, len_ = parents.length; i_ < len_; i_++) {\n          var el_ = parents[i];\n          mUtil.removeClass(el_, 'm-menu__item--open');\n          mUtil.hide(mUtil.child(el_, '.m-menu__submenu'));\n        }\n      } // close open submenus\n\n\n      if (the.options.accordion.expandAll === false) {\n        if (list = element.querySelectorAll('.m-menu__item--open')) {\n          for (var i = 0, len = list.length; i < len; i++) {\n            mUtil.removeClass(parents[0], 'm-menu__item--open');\n          }\n        }\n      }\n    },\n\n    /**\n     * Sets menu's active item\n     * @returns {mMenu}\n     */\n    setActiveItem: function setActiveItem(item) {\n      // reset current active item\n      Plugin.resetActiveItem();\n      mUtil.addClass(item, 'm-menu__item--active');\n      var parents = mUtil.parents(item, '.m-menu__item--submenu');\n\n      for (var i = 0, len = parents.length; i < len; i++) {\n        mUtil.addClass(parents[i], 'm-menu__item--open');\n      }\n    },\n\n    /**\n     * Returns page breadcrumbs for the menu's active item\n     * @returns {mMenu}\n     */\n    getBreadcrumbs: function getBreadcrumbs(item) {\n      var query;\n      var breadcrumbs = [];\n      var link = mUtil.child(item, '.m-menu__link');\n      breadcrumbs.push({\n        text: query = mUtil.child(link, '.m-menu__link-text') ? query.innerHTML : '',\n        title: link.getAttribute('title'),\n        href: link.getAttribute('href')\n      });\n      var parents = mUtil.parents(item, '.m-menu__item--submenu');\n\n      for (var i = 0, len = parents.length; i < len; i++) {\n        var submenuLink = mUtil.child(parents[i], '.m-menu__link');\n        breadcrumbs.push({\n          text: query = mUtil.child(submenuLink, '.m-menu__link-text') ? query.innerHTML : '',\n          title: submenuLink.getAttribute('title'),\n          href: submenuLink.getAttribute('href')\n        });\n      }\n\n      return breadcrumbs.reverse();\n    },\n\n    /**\n     * Returns page title for the menu's active item\n     * @returns {mMenu}\n     */\n    getPageTitle: function getPageTitle(item) {\n      var query;\n      return query = mUtil.child(item, '.m-menu__link-text') ? query.innerHTML : '';\n    },\n\n    /**\n     * Trigger events\n     */\n    eventTrigger: function eventTrigger(name, args) {\n      for (var i = 0; i < the.events.length; i++) {\n        var event = the.events[i];\n\n        if (event.name == name) {\n          if (event.one == true) {\n            if (event.fired == false) {\n              the.events[i].fired = true;\n              event.handler.call(this, the, args);\n            }\n          } else {\n            event.handler.call(this, the, args);\n          }\n        }\n      }\n    },\n    addEvent: function addEvent(name, handler, one) {\n      the.events.push({\n        name: name,\n        handler: handler,\n        one: one,\n        fired: false\n      });\n    },\n    removeEvent: function removeEvent(name) {\n      if (the.events[name]) {\n        delete the.events[name];\n      }\n    }\n  }; //////////////////////////\n  // ** Public Methods ** //\n  //////////////////////////\n\n  /**\n   * Set default options\n   */\n\n  the.setDefaults = function (options) {\n    defaultOptions = options;\n  };\n  /**\n   * Set active menu item\n   */\n\n\n  the.scrollerUpdate = function () {\n    return Plugin.scrollerUpdate();\n  };\n  /**\n   * Set active menu item\n   */\n\n\n  the.scrollerTop = function () {\n    return Plugin.scrollerTop();\n  };\n  /**\n   * Set active menu item\n   */\n\n\n  the.setActiveItem = function (item) {\n    return Plugin.setActiveItem(item);\n  };\n\n  the.reload = function () {\n    return Plugin.reload();\n  };\n\n  the.update = function (options) {\n    return Plugin.update(options);\n  };\n  /**\n   * Set breadcrumb for menu item\n   */\n\n\n  the.getBreadcrumbs = function (item) {\n    return Plugin.getBreadcrumbs(item);\n  };\n  /**\n   * Set page title for menu item\n   */\n\n\n  the.getPageTitle = function (item) {\n    return Plugin.getPageTitle(item);\n  };\n  /**\n   * Get submenu mode\n   */\n\n\n  the.getSubmenuMode = function (el) {\n    return Plugin.getSubmenuMode(el);\n  };\n  /**\n   * Hide dropdown submenu\n   * @returns {jQuery}\n   */\n\n\n  the.hideDropdown = function (item) {\n    Plugin.hideSubmenuDropdown(item, true);\n  };\n  /**\n   * Disable menu for given time\n   * @returns {jQuery}\n   */\n\n\n  the.pauseDropdownHover = function (time) {\n    Plugin.pauseDropdownHover(time);\n  };\n  /**\n   * Disable menu for given time\n   * @returns {jQuery}\n   */\n\n\n  the.resumeDropdownHover = function () {\n    return Plugin.resumeDropdownHover();\n  };\n  /**\n   * Register event\n   */\n\n\n  the.on = function (name, handler) {\n    return Plugin.addEvent(name, handler);\n  };\n\n  the.off = function (name) {\n    return Plugin.removeEvent(name);\n  };\n\n  the.one = function (name, handler) {\n    return Plugin.addEvent(name, handler, true);\n  }; ///////////////////////////////\n  // ** Plugin Construction ** //\n  ///////////////////////////////\n  //== Run plugin\n\n\n  Plugin.construct.apply(the, [options]); //== Handle plugin on window resize\n\n  mUtil.addResizeHandler(function () {\n    if (init) {\n      the.reload();\n    }\n  }); //== Init done\n\n  init = true; // Return plugin instance\n\n  return the;\n}; // Plugin global lazy initialization\n\n\ndocument.addEventListener(\"click\", function (e) {\n  var body = mUtil.get('body');\n  var query;\n\n  if (query = body.querySelectorAll('.m-menu__nav .m-menu__item.m-menu__item--submenu.m-menu__item--hover:not(.m-menu__item--tabs)[m-menu-submenu-toggle=\"click\"]')) {\n    for (var i = 0, len = query.length; i < len; i++) {\n      var element = query[i].closest('.m-menu__nav').parentNode;\n\n      if (element) {\n        var the = mUtil.data(element).get('menu');\n\n        if (!the) {\n          break;\n        }\n\n        if (!the || the.getSubmenuMode() !== 'dropdown') {\n          break;\n        }\n\n        if (e.target !== element && element.contains(e.target) === false) {\n          var items;\n\n          if (items = element.querySelectorAll('.m-menu__item--submenu.m-menu__item--hover:not(.m-menu__item--tabs)[m-menu-submenu-toggle=\"click\"]')) {\n            for (var j = 0, cnt = items.length; j < cnt; j++) {\n              the.hideDropdown(items[j]);\n            }\n          }\n        }\n      }\n    }\n  }\n});\n\nvar mOffcanvas = function mOffcanvas(elementId, options) {\n  //== Main object\n  var the = this;\n  var init = false; //== Get element object\n\n  var element = mUtil.get(elementId);\n  var body = mUtil.get('body');\n\n  if (!element) {\n    return;\n  } //== Default options\n\n\n  var defaultOptions = {}; ////////////////////////////\n  // ** Private Methods  ** //\n  ////////////////////////////\n\n  var Plugin = {\n    /**\n     * Run plugin\n     * @returns {moffcanvas}\n     */\n    construct: function construct(options) {\n      if (mUtil.data(element).has('offcanvas')) {\n        the = mUtil.data(element).get('offcanvas');\n      } else {\n        // reset offcanvas\n        Plugin.init(options); // build offcanvas\n\n        Plugin.build();\n        mUtil.data(element).set('offcanvas', the);\n      }\n\n      return the;\n    },\n\n    /**\n     * Handles suboffcanvas click toggle\n     * @returns {moffcanvas}\n     */\n    init: function init(options) {\n      the.events = []; // merge default and user defined options\n\n      the.options = mUtil.deepExtend({}, defaultOptions, options);\n      the.overlay;\n      the.classBase = the.options.baseClass;\n      the.classShown = the.classBase + '--on';\n      the.classOverlay = the.classBase + '-overlay';\n      the.state = mUtil.hasClass(element, the.classShown) ? 'shown' : 'hidden';\n    },\n    build: function build() {\n      //== offcanvas toggle\n      if (the.options.toggleBy) {\n        if (typeof the.options.toggleBy === 'string') {\n          mUtil.addEvent(the.options.toggleBy, 'click', Plugin.toggle);\n        } else if (the.options.toggleBy && the.options.toggleBy[0] && the.options.toggleBy[0].target) {\n          for (var i in the.options.toggleBy) {\n            mUtil.addEvent(the.options.toggleBy[i].target, 'click', Plugin.toggle);\n          }\n        } else if (the.options.toggleBy && the.options.toggleBy.target) {\n          mUtil.addEvent(the.options.toggleBy.target, 'click', Plugin.toggle);\n        }\n      } //== offcanvas close\n\n\n      var closeBy = mUtil.get(the.options.closeBy);\n\n      if (closeBy) {\n        mUtil.addEvent(closeBy, 'click', Plugin.hide);\n      }\n    },\n\n    /**\n     * Handles offcanvas toggle\n     */\n    toggle: function toggle() {\n      ;\n      Plugin.eventTrigger('toggle');\n\n      if (the.state == 'shown') {\n        Plugin.hide(this);\n      } else {\n        Plugin.show(this);\n      }\n    },\n\n    /**\n     * Handles offcanvas show\n     */\n    show: function show(target) {\n      if (the.state == 'shown') {\n        return;\n      }\n\n      Plugin.eventTrigger('beforeShow');\n      Plugin.togglerClass(target, 'show'); //== Offcanvas panel\n\n      mUtil.addClass(body, the.classShown);\n      mUtil.addClass(element, the.classShown);\n      the.state = 'shown';\n\n      if (the.options.overlay) {\n        the.overlay = mUtil.insertAfter(document.createElement('DIV'), element);\n        mUtil.addClass(the.overlay, the.classOverlay);\n        mUtil.addEvent(the.overlay, 'click', function (e) {\n          e.stopPropagation();\n          e.preventDefault();\n          Plugin.hide(target);\n        });\n      }\n\n      Plugin.eventTrigger('afterShow');\n    },\n\n    /**\n     * Handles offcanvas hide\n     */\n    hide: function hide(target) {\n      if (the.state == 'hidden') {\n        return;\n      }\n\n      Plugin.eventTrigger('beforeHide');\n      Plugin.togglerClass(target, 'hide');\n      mUtil.removeClass(body, the.classShown);\n      mUtil.removeClass(element, the.classShown);\n      the.state = 'hidden';\n\n      if (the.options.overlay && the.overlay) {\n        mUtil.remove(the.overlay);\n      }\n\n      Plugin.eventTrigger('afterHide');\n    },\n\n    /**\n     * Handles toggler class\n     */\n    togglerClass: function togglerClass(target, mode) {\n      //== Toggler\n      var id = mUtil.attr(target, 'id');\n      var toggleBy;\n\n      if (the.options.toggleBy && the.options.toggleBy[0] && the.options.toggleBy[0].target) {\n        for (var i in the.options.toggleBy) {\n          if (the.options.toggleBy[i].target === id) {\n            toggleBy = the.options.toggleBy[i];\n          }\n        }\n      } else if (the.options.toggleBy && the.options.toggleBy.target) {\n        toggleBy = the.options.toggleBy;\n      }\n\n      if (toggleBy) {\n        var el = mUtil.get(toggleBy.target);\n\n        if (mode === 'show') {\n          mUtil.addClass(el, toggleBy.state);\n        }\n\n        if (mode === 'hide') {\n          mUtil.removeClass(el, toggleBy.state);\n        }\n      }\n    },\n\n    /**\n     * Trigger events\n     */\n    eventTrigger: function eventTrigger(name, args) {\n      for (var i = 0; i < the.events.length; i++) {\n        var event = the.events[i];\n\n        if (event.name == name) {\n          if (event.one == true) {\n            if (event.fired == false) {\n              the.events[i].fired = true;\n              event.handler.call(this, the, args);\n            }\n          } else {\n            event.handler.call(this, the, args);\n          }\n        }\n      }\n    },\n    addEvent: function addEvent(name, handler, one) {\n      the.events.push({\n        name: name,\n        handler: handler,\n        one: one,\n        fired: false\n      });\n    }\n  }; //////////////////////////\n  // ** Public Methods ** //\n  //////////////////////////\n\n  /**\n   * Set default options\n   */\n\n  the.setDefaults = function (options) {\n    defaultOptions = options;\n  };\n  /**\n   * Hide\n   */\n\n\n  the.hide = function () {\n    return Plugin.hide();\n  };\n  /**\n   * Show\n   */\n\n\n  the.show = function () {\n    return Plugin.show();\n  };\n  /**\n   * Get suboffcanvas mode\n   */\n\n\n  the.on = function (name, handler) {\n    return Plugin.addEvent(name, handler);\n  };\n  /**\n   * Set offcanvas content\n   * @returns {mOffcanvas}\n   */\n\n\n  the.one = function (name, handler) {\n    return Plugin.addEvent(name, handler, true);\n  }; ///////////////////////////////\n  // ** Plugin Construction ** //\n  ///////////////////////////////\n  //== Run plugin\n\n\n  Plugin.construct.apply(the, [options]); //== Init done\n\n  init = true; // Return plugin instance\n\n  return the;\n}; // plugin setup\n\n\nvar mPortlet = function mPortlet(elementId, options) {\n  //== Main object\n  var the = this;\n  var init = false; //== Get element object\n\n  var element = mUtil.get(elementId);\n  var body = mUtil.get('body');\n\n  if (!element) {\n    return;\n  } //== Default options\n\n\n  var defaultOptions = {\n    bodyToggleSpeed: 400,\n    tooltips: true,\n    tools: {\n      toggle: {\n        collapse: 'Collapse',\n        expand: 'Expand'\n      },\n      reload: 'Reload',\n      remove: 'Remove',\n      fullscreen: {\n        on: 'Fullscreen',\n        off: 'Exit Fullscreen'\n      }\n    },\n    sticky: {\n      offset: 300,\n      zIndex: 98\n    }\n  }; ////////////////////////////\n  // ** Private Methods  ** //\n  ////////////////////////////\n\n  var Plugin = {\n    /**\n     * Construct\n     */\n    construct: function construct(options) {\n      if (mUtil.data(element).has('portlet')) {\n        the = mUtil.data(element).get('portlet');\n      } else {\n        // reset menu\n        Plugin.init(options); // build menu\n\n        Plugin.build();\n        mUtil.data(element).set('portlet', the);\n      }\n\n      return the;\n    },\n\n    /**\n     * Init portlet\n     */\n    init: function init(options) {\n      the.element = element;\n      the.events = []; // merge default and user defined options\n\n      the.options = mUtil.deepExtend({}, defaultOptions, options);\n      the.head = mUtil.child(element, '.m-portlet__head');\n      the.foot = mUtil.child(element, '.m-portlet__foot');\n\n      if (mUtil.child(element, '.m-portlet__body')) {\n        the.body = mUtil.child(element, '.m-portlet__body');\n      } else if (mUtil.child(element, '.m-form').length !== 0) {\n        the.body = mUtil.child(element, '.m-form');\n      }\n    },\n\n    /**\n     * Build Form Wizard\n     */\n    build: function build() {\n      //== Remove\n      var remove = mUtil.find(the.head, '[m-portlet-tool=remove]');\n\n      if (remove) {\n        mUtil.addEvent(remove, 'click', function (e) {\n          e.preventDefault();\n          Plugin.remove();\n        });\n      } //== Reload\n\n\n      var reload = mUtil.find(the.head, '[m-portlet-tool=reload]');\n\n      if (reload) {\n        mUtil.addEvent(reload, 'click', function (e) {\n          e.preventDefault();\n          Plugin.reload();\n        });\n      } //== Toggle\n\n\n      var toggle = mUtil.find(the.head, '[m-portlet-tool=toggle]');\n\n      if (toggle) {\n        mUtil.addEvent(toggle, 'click', function (e) {\n          e.preventDefault();\n          Plugin.toggle();\n        });\n      } //== Fullscreen\n\n\n      var fullscreen = mUtil.find(the.head, '[m-portlet-tool=fullscreen]');\n\n      if (fullscreen) {\n        mUtil.addEvent(fullscreen, 'click', function (e) {\n          e.preventDefault();\n          Plugin.fullscreen();\n        });\n      }\n\n      Plugin.setupTooltips();\n    },\n\n    /**\n     * Window scroll handle event for sticky portlet\n     */\n    onScrollSticky: function onScrollSticky() {\n      var st = window.pageYOffset;\n      var offset = the.options.sticky.offset;\n\n      if (st > offset) {\n        if (mUtil.hasClass(body, 'm-portlet--sticky') === false) {\n          Plugin.eventTrigger('stickyOn');\n          mUtil.addClass(body, 'm-portlet--sticky');\n          mUtil.addClass(element, 'm-portlet--sticky');\n          Plugin.updateSticky();\n        }\n      } else {\n        // back scroll mode\n        if (mUtil.hasClass(body, 'm-portlet--sticky')) {\n          Plugin.eventTrigger('stickyOff');\n          mUtil.removeClass(body, 'm-portlet--sticky');\n          mUtil.removeClass(element, 'm-portlet--sticky');\n          Plugin.resetSticky();\n        }\n      }\n    },\n\n    /**\n     * Init sticky portlet\n     */\n    initSticky: function initSticky() {\n      if (!the.head) {\n        return;\n      }\n\n      window.addEventListener('scroll', Plugin.onScrollSticky);\n    },\n\n    /**\n     * Update sticky portlet positions\n     */\n    updateSticky: function updateSticky() {\n      if (!the.head) {\n        return;\n      }\n\n      var top;\n\n      if (mUtil.hasClass(body, 'm-portlet--sticky')) {\n        if (the.options.sticky.position.top instanceof Function) {\n          top = parseInt(the.options.sticky.position.top.call());\n        } else {\n          top = parseInt(the.options.sticky.position.top);\n        }\n\n        var left;\n\n        if (the.options.sticky.position.left instanceof Function) {\n          left = parseInt(the.options.sticky.position.left.call());\n        } else {\n          left = parseInt(the.options.sticky.position.left);\n        }\n\n        var right;\n\n        if (the.options.sticky.position.right instanceof Function) {\n          right = parseInt(the.options.sticky.position.right.call());\n        } else {\n          right = parseInt(the.options.sticky.position.right);\n        }\n\n        mUtil.css(the.head, 'z-index', the.options.sticky.zIndex);\n        mUtil.css(the.head, 'top', top + 'px');\n\n        if (mUtil.isRTL()) {\n          mUtil.css(the.head, 'left', right + 'px');\n          mUtil.css(the.head, 'right', left + 'px');\n        } else {\n          mUtil.css(the.head, 'left', left + 'px');\n          mUtil.css(the.head, 'right', right + 'px');\n        }\n      }\n    },\n\n    /**\n     * Reset sticky portlet positions\n     */\n    resetSticky: function resetSticky() {\n      if (!the.head) {\n        return;\n      }\n\n      if (mUtil.hasClass(body, 'm-portlet--sticky') === false) {\n        mUtil.css(the.head, 'z-index', '');\n        mUtil.css(the.head, 'top', '');\n        mUtil.css(the.head, 'left', '');\n        mUtil.css(the.head, 'right', '');\n      }\n    },\n\n    /**\n     * Destroy sticky portlet\n     */\n    destroySticky: function destroySticky() {\n      if (!the.head) {\n        return;\n      }\n\n      Plugin.resetSticky();\n      window.removeEventListener('scroll', Plugin.onScrollSticky);\n    },\n\n    /**\n     * Remove portlet\n     */\n    remove: function remove() {\n      if (Plugin.eventTrigger('beforeRemove') === false) {\n        return;\n      }\n\n      if (mUtil.hasClass(body, 'm-portlet--fullscreen') && mUtil.hasClass(element, 'm-portlet--fullscreen')) {\n        Plugin.fullscreen('off');\n      }\n\n      Plugin.removeTooltips();\n      mUtil.remove(element);\n      Plugin.eventTrigger('afterRemove');\n    },\n\n    /**\n     * Set content\n     */\n    setContent: function setContent(html) {\n      if (html) {\n        the.body.innerHTML = html;\n      }\n    },\n\n    /**\n     * Get body\n     */\n    getBody: function getBody() {\n      return the.body;\n    },\n\n    /**\n     * Get self\n     */\n    getSelf: function getSelf() {\n      return element;\n    },\n\n    /**\n     * Setup tooltips\n     */\n    setupTooltips: function setupTooltips() {\n      if (the.options.tooltips) {\n        var collapsed = mUtil.hasClass(element, 'm-portlet--collapse') || mUtil.hasClass(element, 'm-portlet--collapsed');\n        var fullscreenOn = mUtil.hasClass(body, 'm-portlet--fullscreen') && mUtil.hasClass(element, 'm-portlet--fullscreen'); //== Remove\n\n        var remove = mUtil.find(the.head, '[m-portlet-tool=remove]');\n\n        if (remove) {\n          var placement = fullscreenOn ? 'bottom' : 'top';\n          var tip = new Tooltip(remove, {\n            title: the.options.tools.remove,\n            placement: placement,\n            offset: fullscreenOn ? '0,10px,0,0' : '0,5px',\n            trigger: 'hover',\n            template: '<div class=\"m-tooltip m-tooltip--portlet tooltip bs-tooltip-' + placement + '\" role=\"tooltip\">\\\n                            <div class=\"tooltip-arrow arrow\"></div>\\\n                            <div class=\"tooltip-inner\"></div>\\\n                        </div>'\n          });\n          mUtil.data(remove).set('tooltip', tip);\n        } //== Reload\n\n\n        var reload = mUtil.find(the.head, '[m-portlet-tool=reload]');\n\n        if (reload) {\n          var placement = fullscreenOn ? 'bottom' : 'top';\n          var tip = new Tooltip(reload, {\n            title: the.options.tools.reload,\n            placement: placement,\n            offset: fullscreenOn ? '0,10px,0,0' : '0,5px',\n            trigger: 'hover',\n            template: '<div class=\"m-tooltip m-tooltip--portlet tooltip bs-tooltip-' + placement + '\" role=\"tooltip\">\\\n                            <div class=\"tooltip-arrow arrow\"></div>\\\n                            <div class=\"tooltip-inner\"></div>\\\n                        </div>'\n          });\n          mUtil.data(reload).set('tooltip', tip);\n        } //== Toggle\n\n\n        var toggle = mUtil.find(the.head, '[m-portlet-tool=toggle]');\n\n        if (toggle) {\n          var placement = fullscreenOn ? 'bottom' : 'top';\n          var tip = new Tooltip(toggle, {\n            title: collapsed ? the.options.tools.toggle.expand : the.options.tools.toggle.collapse,\n            placement: placement,\n            offset: fullscreenOn ? '0,10px,0,0' : '0,5px',\n            trigger: 'hover',\n            template: '<div class=\"m-tooltip m-tooltip--portlet tooltip bs-tooltip-' + placement + '\" role=\"tooltip\">\\\n                            <div class=\"tooltip-arrow arrow\"></div>\\\n                            <div class=\"tooltip-inner\"></div>\\\n                        </div>'\n          });\n          mUtil.data(toggle).set('tooltip', tip);\n        } //== Fullscreen\n\n\n        var fullscreen = mUtil.find(the.head, '[m-portlet-tool=fullscreen]');\n\n        if (fullscreen) {\n          var placement = fullscreenOn ? 'bottom' : 'top';\n          var tip = new Tooltip(fullscreen, {\n            title: fullscreenOn ? the.options.tools.fullscreen.off : the.options.tools.fullscreen.on,\n            placement: placement,\n            offset: fullscreenOn ? '0,10px,0,0' : '0,5px',\n            trigger: 'hover',\n            template: '<div class=\"m-tooltip m-tooltip--portlet tooltip bs-tooltip-' + placement + '\" role=\"tooltip\">\\\n                            <div class=\"tooltip-arrow arrow\"></div>\\\n                            <div class=\"tooltip-inner\"></div>\\\n                        </div>'\n          });\n          mUtil.data(fullscreen).set('tooltip', tip);\n        }\n      }\n    },\n\n    /**\n     * Setup tooltips\n     */\n    removeTooltips: function removeTooltips() {\n      if (the.options.tooltips) {\n        //== Remove\n        var remove = mUtil.find(the.head, '[m-portlet-tool=remove]');\n\n        if (remove && mUtil.data(remove).has('tooltip')) {\n          mUtil.data(remove).get('tooltip').dispose();\n        } //== Reload\n\n\n        var reload = mUtil.find(the.head, '[m-portlet-tool=reload]');\n\n        if (reload && mUtil.data(reload).has('tooltip')) {\n          mUtil.data(reload).get('tooltip').dispose();\n        } //== Toggle\n\n\n        var toggle = mUtil.find(the.head, '[m-portlet-tool=toggle]');\n\n        if (toggle && mUtil.data(toggle).has('tooltip')) {\n          mUtil.data(toggle).get('tooltip').dispose();\n        } //== Fullscreen\n\n\n        var fullscreen = mUtil.find(the.head, '[m-portlet-tool=fullscreen]');\n\n        if (fullscreen && mUtil.data(fullscreen).has('tooltip')) {\n          mUtil.data(fullscreen).get('tooltip').dispose();\n        }\n      }\n    },\n\n    /**\n     * Reload\n     */\n    reload: function reload() {\n      Plugin.eventTrigger('reload');\n    },\n\n    /**\n     * Toggle\n     */\n    toggle: function toggle() {\n      if (mUtil.hasClass(element, 'm-portlet--collapse') || mUtil.hasClass(element, 'm-portlet--collapsed')) {\n        Plugin.expand();\n      } else {\n        Plugin.collapse();\n      }\n    },\n\n    /**\n     * Collapse\n     */\n    collapse: function collapse() {\n      if (Plugin.eventTrigger('beforeCollapse') === false) {\n        return;\n      }\n\n      mUtil.slideUp(the.body, the.options.bodyToggleSpeed, function () {\n        Plugin.eventTrigger('afterCollapse');\n      });\n      mUtil.addClass(element, 'm-portlet--collapse');\n      var toggle = mUtil.find(the.head, '[m-portlet-tool=toggle]');\n\n      if (toggle && mUtil.data(toggle).has('tooltip')) {\n        mUtil.data(toggle).get('tooltip').updateTitleContent(the.options.tools.toggle.expand);\n      }\n    },\n\n    /**\n     * Expand\n     */\n    expand: function expand() {\n      if (Plugin.eventTrigger('beforeExpand') === false) {\n        return;\n      }\n\n      mUtil.slideDown(the.body, the.options.bodyToggleSpeed, function () {\n        Plugin.eventTrigger('afterExpand');\n      });\n      mUtil.removeClass(element, 'm-portlet--collapse');\n      mUtil.removeClass(element, 'm-portlet--collapsed');\n      var toggle = mUtil.find(the.head, '[m-portlet-tool=toggle]');\n\n      if (toggle && mUtil.data(toggle).has('tooltip')) {\n        mUtil.data(toggle).get('tooltip').updateTitleContent(the.options.tools.toggle.collapse);\n      }\n    },\n\n    /**\n     * Toggle\n     */\n    fullscreen: function fullscreen(mode) {\n      var d = {};\n      var speed = 300;\n\n      if (mode === 'off' || mUtil.hasClass(body, 'm-portlet--fullscreen') && mUtil.hasClass(element, 'm-portlet--fullscreen')) {\n        Plugin.eventTrigger('beforeFullscreenOff');\n        mUtil.removeClass(body, 'm-portlet--fullscreen');\n        mUtil.removeClass(element, 'm-portlet--fullscreen');\n        Plugin.removeTooltips();\n        Plugin.setupTooltips();\n\n        if (the.foot) {\n          mUtil.css(the.body, 'margin-bottom', '');\n          mUtil.css(the.foot, 'margin-top', '');\n        }\n\n        Plugin.eventTrigger('afterFullscreenOff');\n      } else {\n        Plugin.eventTrigger('beforeFullscreenOn');\n        mUtil.addClass(element, 'm-portlet--fullscreen');\n        mUtil.addClass(body, 'm-portlet--fullscreen');\n        Plugin.removeTooltips();\n        Plugin.setupTooltips();\n\n        if (the.foot) {\n          var height1 = parseInt(mUtil.css(the.foot, 'height'));\n          var height2 = parseInt(mUtil.css(the.foot, 'height')) + parseInt(mUtil.css(the.head, 'height'));\n          mUtil.css(the.body, 'margin-bottom', height1 + 'px');\n          mUtil.css(the.foot, 'margin-top', '-' + height2 + 'px');\n        }\n\n        Plugin.eventTrigger('afterFullscreenOn');\n      }\n    },\n\n    /**\n     * Trigger events\n     */\n    eventTrigger: function eventTrigger(name) {\n      //mUtil.triggerCustomEvent(name);\n      for (var i = 0; i < the.events.length; i++) {\n        var event = the.events[i];\n\n        if (event.name == name) {\n          if (event.one == true) {\n            if (event.fired == false) {\n              the.events[i].fired = true;\n              event.handler.call(this, the);\n            }\n          } else {\n            event.handler.call(this, the);\n          }\n        }\n      }\n    },\n    addEvent: function addEvent(name, handler, one) {\n      the.events.push({\n        name: name,\n        handler: handler,\n        one: one,\n        fired: false\n      });\n      return the;\n    }\n  }; //////////////////////////\n  // ** Public Methods ** //\n  //////////////////////////\n\n  /**\n   * Set default options\n   */\n\n  the.setDefaults = function (options) {\n    defaultOptions = options;\n  };\n  /**\n   * Remove portlet\n   * @returns {mPortlet}\n   */\n\n\n  the.remove = function () {\n    return Plugin.remove(html);\n  };\n  /**\n   * Init sticky portlet\n   * @returns {mPortlet}\n   */\n\n\n  the.initSticky = function () {\n    return Plugin.initSticky();\n  };\n  /**\n   * Update sticky portlet scroll event\n   * @returns {mPortlet}\n   */\n\n\n  the.updateSticky = function () {\n    return Plugin.updateSticky();\n  };\n  /**\n   * Reset sticky portlet positions\n   * @returns {mPortlet}\n   */\n\n\n  the.resetSticky = function () {\n    return Plugin.resetSticky();\n  };\n  /**\n   * Destroy sticky portlet scroll event\n   * @returns {mPortlet}\n   */\n\n\n  the.destroySticky = function () {\n    return Plugin.destroySticky();\n  };\n  /**\n   * Reload portlet\n   * @returns {mPortlet}\n   */\n\n\n  the.reload = function () {\n    return Plugin.reload();\n  };\n  /**\n   * Set portlet content\n   * @returns {mPortlet}\n   */\n\n\n  the.setContent = function (html) {\n    return Plugin.setContent(html);\n  };\n  /**\n   * Toggle portlet\n   * @returns {mPortlet}\n   */\n\n\n  the.toggle = function () {\n    return Plugin.toggle();\n  };\n  /**\n   * Collapse portlet\n   * @returns {mPortlet}\n   */\n\n\n  the.collapse = function () {\n    return Plugin.collapse();\n  };\n  /**\n   * Expand portlet\n   * @returns {mPortlet}\n   */\n\n\n  the.expand = function () {\n    return Plugin.expand();\n  };\n  /**\n   * Fullscreen portlet\n   * @returns {mPortlet}\n   */\n\n\n  the.fullscreen = function () {\n    return Plugin.fullscreen('on');\n  };\n  /**\n   * Fullscreen portlet\n   * @returns {mPortlet}\n   */\n\n\n  the.unFullscreen = function () {\n    return Plugin.fullscreen('off');\n  };\n  /**\n   * Get portletbody\n   * @returns {jQuery}\n   */\n\n\n  the.getBody = function () {\n    return Plugin.getBody();\n  };\n  /**\n   * Get portletbody\n   * @returns {jQuery}\n   */\n\n\n  the.getSelf = function () {\n    return Plugin.getSelf();\n  };\n  /**\n   * Attach event\n   */\n\n\n  the.on = function (name, handler) {\n    return Plugin.addEvent(name, handler);\n  };\n  /**\n   * Attach event that will be fired once\n   */\n\n\n  the.one = function (name, handler) {\n    return Plugin.addEvent(name, handler, true);\n  }; //== Construct plugin\n\n\n  Plugin.construct.apply(the, [options]);\n  return the;\n}; // plugin setup\n\n\nvar mQuicksearch = function mQuicksearch(elementId, options) {\n  //== Main object\n  var the = this;\n  var init = false; //== Get element object\n\n  var element = mUtil.get(elementId);\n  var body = mUtil.get('body');\n\n  if (!element) {\n    return;\n  } //== Default options\n\n\n  var defaultOptions = {\n    mode: 'default',\n    //'default/dropdown'\n    minLength: 1,\n    maxHeight: 300,\n    requestTimeout: 200,\n    // ajax request fire timeout in milliseconds\n    inputTarget: 'm_quicksearch_input',\n    iconCloseTarget: 'm_quicksearch_close',\n    iconCancelTarget: 'm_quicksearch_cancel',\n    iconSearchTarget: 'm_quicksearch_search',\n    spinnerClass: 'm-loader m-loader--skin-light m-loader--right',\n    hasResultClass: 'm-list-search--has-result',\n    templates: {\n      error: '<div class=\"m-search-results m-search-results--skin-light\"><span class=\"m-search-result__message\">{{message}}</div></div>'\n    }\n  }; ////////////////////////////\n  // ** Private Methods  ** //\n  ////////////////////////////\n\n  var Plugin = {\n    /**\n     * Construct\n     */\n    construct: function construct(options) {\n      if (mUtil.data(element).has('quicksearch')) {\n        the = mUtil.data(element).get('quicksearch');\n      } else {\n        // reset menu\n        Plugin.init(options); // build menu\n\n        Plugin.build();\n        mUtil.data(element).set('quicksearch', the);\n      }\n\n      return the;\n    },\n    init: function init(options) {\n      the.element = element;\n      the.events = []; // merge default and user defined options\n\n      the.options = mUtil.deepExtend({}, defaultOptions, options); // search query\n\n      the.query = ''; // form\n\n      the.form = mUtil.find(element, 'form'); // input element\n\n      the.input = mUtil.get(the.options.inputTarget); // close icon\n\n      the.iconClose = mUtil.get(the.options.iconCloseTarget);\n\n      if (the.options.mode == 'default') {\n        // search icon\n        the.iconSearch = mUtil.get(the.options.iconSearchTarget); // cancel icon\n\n        the.iconCancel = mUtil.get(the.options.iconCancelTarget);\n      } // dropdown\n\n\n      the.dropdown = new mDropdown(element, {\n        mobileOverlay: false\n      }); // cancel search timeout\n\n      the.cancelTimeout; // ajax processing state\n\n      the.processing = false; // ajax request fire timeout\n\n      the.requestTimeout = false;\n    },\n\n    /**\n     * Build plugin\n     */\n    build: function build() {\n      // attach input keyup handler\n      mUtil.addEvent(the.input, 'keyup', Plugin.search); // Prevent enter click\n\n      mUtil.find(element, \"form\").onkeypress = function (e) {\n        var key = e.charCode || e.keyCode || 0;\n\n        if (key == 13) {\n          e.preventDefault();\n        }\n      };\n\n      if (the.options.mode == 'default') {\n        mUtil.addEvent(the.input, 'focus', Plugin.showDropdown);\n        mUtil.addEvent(the.iconCancel, 'click', Plugin.handleCancel);\n        mUtil.addEvent(the.iconSearch, 'click', function () {\n          if (mUtil.isInResponsiveRange('tablet-and-mobile')) {\n            mUtil.addClass(body, 'm-header-search--mobile-expanded');\n            the.input.focus();\n          }\n        });\n        mUtil.addEvent(the.iconClose, 'click', function () {\n          if (mUtil.isInResponsiveRange('tablet-and-mobile')) {\n            mUtil.removeClass(body, 'm-header-search--mobile-expanded');\n            Plugin.closeDropdown();\n          }\n        });\n      } else if (the.options.mode == 'dropdown') {\n        the.dropdown.on('afterShow', function () {\n          the.input.focus();\n        });\n        mUtil.addEvent(the.iconClose, 'click', Plugin.closeDropdown);\n      }\n    },\n    showProgress: function showProgress() {\n      the.processing = true;\n      mUtil.addClass(the.form, the.options.spinnerClass);\n      Plugin.handleCancelIconVisibility('off');\n      return the;\n    },\n    hideProgress: function hideProgress() {\n      the.processing = false;\n      mUtil.removeClass(the.form, the.options.spinnerClass);\n      Plugin.handleCancelIconVisibility('on');\n      mUtil.addClass(element, the.options.hasResultClass);\n      return the;\n    },\n\n    /**\n     * Search handler\n     */\n    search: function search(e) {\n      the.query = the.input.value;\n\n      if (the.query.length === 0) {\n        Plugin.handleCancelIconVisibility('on');\n        mUtil.removeClass(element, the.options.hasResultClass);\n        mUtil.removeClass(the.form, the.options.spinnerClass);\n      }\n\n      if (the.query.length < the.options.minLength || the.processing == true) {\n        return;\n      }\n\n      if (the.requestTimeout) {\n        clearTimeout(the.requestTimeout);\n      }\n\n      the.requestTimeout = false;\n      the.requestTimeout = setTimeout(function () {\n        Plugin.eventTrigger('search');\n      }, the.options.requestTimeout);\n      return the;\n    },\n\n    /**\n     * Handle cancel icon visibility\n     */\n    handleCancelIconVisibility: function handleCancelIconVisibility(status) {\n      if (status == 'on') {\n        if (the.input.value.length === 0) {\n          if (the.iconCancel) mUtil.css(the.iconCancel, 'visibility', 'hidden');\n          if (the.iconClose) mUtil.css(the.iconClose, 'visibility', 'visible');\n        } else {\n          clearTimeout(the.cancelTimeout);\n          the.cancelTimeout = setTimeout(function () {\n            if (the.iconCancel) mUtil.css(the.iconCancel, 'visibility', 'visible');\n            if (the.iconClose) mUtil.css(the.iconClose, 'visibility', 'visible');\n          }, 500);\n        }\n      } else {\n        if (the.iconCancel) mUtil.css(the.iconCancel, 'visibility', 'hidden');\n        if (the.iconClose) mUtil.css(the.iconClose, 'visibility', 'hidden');\n      }\n    },\n\n    /**\n     * Cancel handler\n     */\n    handleCancel: function handleCancel(e) {\n      the.input.value = '';\n      mUtil.css(the.iconCancel, 'visibility', 'hidden');\n      mUtil.removeClass(element, the.options.hasResultClass);\n      Plugin.closeDropdown();\n    },\n\n    /**\n     * Cancel handler\n     */\n    closeDropdown: function closeDropdown() {\n      the.dropdown.hide();\n    },\n\n    /**\n     * Show dropdown\n     */\n    showDropdown: function showDropdown(e) {\n      if (the.dropdown.isShown() == false && the.input.value.length > the.options.minLength && the.processing == false) {\n        console.log('show!!!');\n        the.dropdown.show();\n\n        if (e) {\n          e.preventDefault();\n          e.stopPropagation();\n        }\n      }\n    },\n\n    /**\n     * Trigger events\n     */\n    eventTrigger: function eventTrigger(name) {\n      //mUtil.triggerCustomEvent(name);\n      for (var i = 0; i < the.events.length; i++) {\n        var event = the.events[i];\n\n        if (event.name == name) {\n          if (event.one == true) {\n            if (event.fired == false) {\n              the.events[i].fired = true;\n              event.handler.call(this, the);\n            }\n          } else {\n            event.handler.call(this, the);\n          }\n        }\n      }\n    },\n    addEvent: function addEvent(name, handler, one) {\n      the.events.push({\n        name: name,\n        handler: handler,\n        one: one,\n        fired: false\n      });\n      return the;\n    }\n  }; //////////////////////////\n  // ** Public Methods ** //\n  //////////////////////////\n\n  /**\n   * Set default options\n   */\n\n  the.setDefaults = function (options) {\n    defaultOptions = options;\n  };\n  /**\n   * quicksearch off\n   */\n\n\n  the.search = function () {\n    return Plugin.handleSearch();\n  };\n\n  the.showResult = function (res) {\n    the.dropdown.setContent(res);\n    Plugin.showDropdown();\n    return the;\n  };\n\n  the.showError = function (text) {\n    var msg = the.options.templates.error.replace('{{message}}', text);\n    the.dropdown.setContent(msg);\n    Plugin.showDropdown();\n    return the;\n  };\n  /**\n   *\n   */\n\n\n  the.showProgress = function () {\n    return Plugin.showProgress();\n  };\n\n  the.hideProgress = function () {\n    return Plugin.hideProgress();\n  };\n  /**\n   * quicksearch off\n   */\n\n\n  the.search = function () {\n    return Plugin.search();\n  };\n  /**\n   * Attach event\n   * @returns {mQuicksearch}\n   */\n\n\n  the.on = function (name, handler) {\n    return Plugin.addEvent(name, handler);\n  };\n  /**\n   * Attach event that will be fired once\n   * @returns {mQuicksearch}\n   */\n\n\n  the.one = function (name, handler) {\n    return Plugin.addEvent(name, handler, true);\n  }; //== Construct plugin\n\n\n  Plugin.construct.apply(the, [options]);\n  return the;\n};\n\nvar mScrollTop = function mScrollTop(elementId, options) {\n  //== Main object\n  var the = this;\n  var init = false; //== Get element object\n\n  var element = mUtil.get(elementId);\n  var body = mUtil.get('body');\n\n  if (!element) {\n    return;\n  } //== Default options\n\n\n  var defaultOptions = {\n    offset: 300,\n    speed: 600\n  }; ////////////////////////////\n  // ** Private Methods  ** //\n  ////////////////////////////\n\n  var Plugin = {\n    /**\n     * Run plugin\n     * @returns {mscrolltop}\n     */\n    construct: function construct(options) {\n      if (mUtil.data(element).has('scrolltop')) {\n        the = mUtil.data(element).get('scrolltop');\n      } else {\n        // reset scrolltop\n        Plugin.init(options); // build scrolltop\n\n        Plugin.build();\n        mUtil.data(element).set('scrolltop', the);\n      }\n\n      return the;\n    },\n\n    /**\n     * Handles subscrolltop click toggle\n     * @returns {mscrolltop}\n     */\n    init: function init(options) {\n      the.events = []; // merge default and user defined options\n\n      the.options = mUtil.deepExtend({}, defaultOptions, options);\n    },\n    build: function build() {\n      // handle window scroll\n      if (navigator.userAgent.match(/iPhone|iPad|iPod/i)) {\n        window.addEventListener('touchend', function () {\n          Plugin.handle();\n        });\n        window.addEventListener('touchcancel', function () {\n          Plugin.handle();\n        });\n        window.addEventListener('touchleave', function () {\n          Plugin.handle();\n        });\n      } else {\n        window.addEventListener('scroll', function () {\n          Plugin.handle();\n        });\n      } // handle button click\n\n\n      mUtil.addEvent(element, 'click', Plugin.scroll);\n    },\n\n    /**\n     * Handles scrolltop click scrollTop\n     */\n    handle: function handle() {\n      var pos = window.pageYOffset; // current vertical position\n\n      if (pos > the.options.offset) {\n        mUtil.addClass(body, 'm-scroll-top--shown');\n      } else {\n        mUtil.removeClass(body, 'm-scroll-top--shown');\n      }\n    },\n\n    /**\n     * Handles scrolltop click scrollTop\n     */\n    scroll: function scroll(e) {\n      e.preventDefault();\n      mUtil.scrollTop(0, the.options.speed);\n    },\n\n    /**\n     * Trigger events\n     */\n    eventTrigger: function eventTrigger(name, args) {\n      for (var i = 0; i < the.events.length; i++) {\n        var event = the.events[i];\n\n        if (event.name == name) {\n          if (event.one == true) {\n            if (event.fired == false) {\n              the.events[i].fired = true;\n              event.handler.call(this, the, args);\n            }\n          } else {\n            event.handler.call(this, the, args);\n          }\n        }\n      }\n    },\n    addEvent: function addEvent(name, handler, one) {\n      the.events.push({\n        name: name,\n        handler: handler,\n        one: one,\n        fired: false\n      });\n    }\n  }; //////////////////////////\n  // ** Public Methods ** //\n  //////////////////////////\n\n  /**\n   * Set default options\n   */\n\n  the.setDefaults = function (options) {\n    defaultOptions = options;\n  };\n  /**\n   * Get subscrolltop mode\n   */\n\n\n  the.on = function (name, handler) {\n    return Plugin.addEvent(name, handler);\n  };\n  /**\n   * Set scrolltop content\n   * @returns {mscrolltop}\n   */\n\n\n  the.one = function (name, handler) {\n    return Plugin.addEvent(name, handler, true);\n  }; ///////////////////////////////\n  // ** Plugin Construction ** //\n  ///////////////////////////////\n  //== Run plugin\n\n\n  Plugin.construct.apply(the, [options]); //== Init done\n\n  init = true; // Return plugin instance\n\n  return the;\n}; // plugin setup\n\n\nvar mToggle = function mToggle(elementId, options) {\n  //== Main object\n  var the = this;\n  var init = false; //== Get element object\n\n  var element = mUtil.get(elementId);\n  var body = mUtil.get('body');\n\n  if (!element) {\n    return;\n  } //== Default options\n\n\n  var defaultOptions = {\n    togglerState: '',\n    targetState: ''\n  }; ////////////////////////////\n  // ** Private Methods  ** //\n  ////////////////////////////\n\n  var Plugin = {\n    /**\n     * Construct\n     */\n    construct: function construct(options) {\n      if (mUtil.data(element).has('toggle')) {\n        the = mUtil.data(element).get('toggle');\n      } else {\n        // reset menu\n        Plugin.init(options); // build menu\n\n        Plugin.build();\n        mUtil.data(element).set('toggle', the);\n      }\n\n      return the;\n    },\n\n    /**\n     * Handles subtoggle click toggle\n     */\n    init: function init(options) {\n      the.element = element;\n      the.events = []; // merge default and user defined options\n\n      the.options = mUtil.deepExtend({}, defaultOptions, options);\n      the.target = mUtil.get(the.options.target);\n      the.targetState = the.options.targetState;\n      the.togglerState = the.options.togglerState;\n      the.state = mUtil.hasClasses(the.target, the.targetState) ? 'on' : 'off';\n    },\n\n    /**\n     * Setup toggle\n     */\n    build: function build() {\n      mUtil.addEvent(element, 'mouseup', Plugin.toggle);\n    },\n\n    /**\n     * Handles offcanvas click toggle\n     */\n    toggle: function toggle() {\n      Plugin.eventTrigger('beforeToggle');\n\n      if (the.state == 'off') {\n        Plugin.toggleOn();\n      } else {\n        Plugin.toggleOff();\n      }\n\n      return the;\n    },\n\n    /**\n     * Handles toggle click toggle\n     */\n    toggleOn: function toggleOn() {\n      Plugin.eventTrigger('beforeOn');\n      mUtil.addClass(the.target, the.targetState);\n\n      if (the.togglerState) {\n        mUtil.addClass(element, the.togglerState);\n      }\n\n      the.state = 'on';\n      Plugin.eventTrigger('afterOn');\n      Plugin.eventTrigger('toggle');\n      return the;\n    },\n\n    /**\n     * Handles toggle click toggle\n     */\n    toggleOff: function toggleOff() {\n      Plugin.eventTrigger('beforeOff');\n      mUtil.removeClass(the.target, the.targetState);\n\n      if (the.togglerState) {\n        mUtil.removeClass(element, the.togglerState);\n      }\n\n      the.state = 'off';\n      Plugin.eventTrigger('afterOff');\n      Plugin.eventTrigger('toggle');\n      return the;\n    },\n\n    /**\n     * Trigger events\n     */\n    eventTrigger: function eventTrigger(name) {\n      for (var i = 0; i < the.events.length; i++) {\n        var event = the.events[i];\n\n        if (event.name == name) {\n          if (event.one == true) {\n            if (event.fired == false) {\n              the.events[i].fired = true;\n              event.handler.call(this, the);\n            }\n          } else {\n            event.handler.call(this, the);\n          }\n        }\n      }\n    },\n    addEvent: function addEvent(name, handler, one) {\n      the.events.push({\n        name: name,\n        handler: handler,\n        one: one,\n        fired: false\n      });\n      return the;\n    }\n  }; //////////////////////////\n  // ** Public Methods ** //\n  //////////////////////////\n\n  /**\n   * Set default options\n   */\n\n  the.setDefaults = function (options) {\n    defaultOptions = options;\n  };\n  /**\n   * Get toggle state\n   */\n\n\n  the.getState = function () {\n    return the.state;\n  };\n  /**\n   * Toggle\n   */\n\n\n  the.toggle = function () {\n    return Plugin.toggle();\n  };\n  /**\n   * Toggle on\n   */\n\n\n  the.toggleOn = function () {\n    return Plugin.toggleOn();\n  };\n  /**\n   * Toggle off\n   */\n\n\n  the.toggle = function () {\n    return Plugin.toggleOff();\n  };\n  /**\n   * Attach event\n   * @returns {mToggle}\n   */\n\n\n  the.on = function (name, handler) {\n    return Plugin.addEvent(name, handler);\n  };\n  /**\n   * Attach event that will be fired once\n   * @returns {mToggle}\n   */\n\n\n  the.one = function (name, handler) {\n    return Plugin.addEvent(name, handler, true);\n  }; //== Construct plugin\n\n\n  Plugin.construct.apply(the, [options]);\n  return the;\n}; // plugin setup\n\n\nvar mWizard = function mWizard(elementId, options) {\n  //== Main object\n  var the = this;\n  var init = false; //== Get element object\n\n  var element = mUtil.get(elementId);\n  var body = mUtil.get('body');\n\n  if (!element) {\n    return;\n  } //== Default options\n\n\n  var defaultOptions = {\n    startStep: 1,\n    manualStepForward: false\n  }; ////////////////////////////\n  // ** Private Methods  ** //\n  ////////////////////////////\n\n  var Plugin = {\n    /**\n     * Construct\n     */\n    construct: function construct(options) {\n      if (mUtil.data(element).has('wizard')) {\n        the = mUtil.data(element).get('wizard');\n      } else {\n        // reset menu\n        Plugin.init(options); // build menu\n\n        Plugin.build();\n        mUtil.data(element).set('wizard', the);\n      }\n\n      return the;\n    },\n\n    /**\n     * Init wizard\n     */\n    init: function init(options) {\n      the.element = element;\n      the.events = []; // merge default and user defined options\n\n      the.options = mUtil.deepExtend({}, defaultOptions, options); //== Elements\n\n      the.steps = mUtil.findAll(element, '.m-wizard__step');\n      the.progress = mUtil.find(element, '.m-wizard__progress .progress-bar');\n      the.btnSubmit = mUtil.find(element, '[data-wizard-action=\"submit\"]');\n      the.btnNext = mUtil.find(element, '[data-wizard-action=\"next\"]');\n      the.btnPrev = mUtil.find(element, '[data-wizard-action=\"prev\"]');\n      the.btnLast = mUtil.find(element, '[data-wizard-action=\"last\"]');\n      the.btnFirst = mUtil.find(element, '[data-wizard-action=\"first\"]'); //== Variables\n\n      the.events = [];\n      the.currentStep = 1;\n      the.stopped = false;\n      the.totalSteps = the.steps.length; //== Init current step\n\n      if (the.options.startStep > 1) {\n        Plugin.goTo(the.options.startStep);\n      } //== Init UI\n\n\n      Plugin.updateUI();\n    },\n\n    /**\n     * Build Form Wizard\n     */\n    build: function build() {\n      //== Next button event handler\n      mUtil.addEvent(the.btnNext, 'click', function (e) {\n        e.preventDefault();\n        Plugin.goNext();\n      }); //== Prev button event handler\n\n      mUtil.addEvent(the.btnPrev, 'click', function (e) {\n        e.preventDefault();\n        Plugin.goPrev();\n      }); //== First button event handler\n\n      mUtil.addEvent(the.btnFirst, 'click', function (e) {\n        e.preventDefault();\n        Plugin.goFirst();\n      }); //== Last button event handler\n\n      mUtil.addEvent(the.btnLast, 'click', function (e) {\n        e.preventDefault();\n        Plugin.goLast();\n      });\n      mUtil.on(element, '.m-wizard__step a.m-wizard__step-number', 'click', function () {\n        var step = this.closest('.m-wizard__step');\n        var steps = mUtil.parents(this, '.m-wizard__steps');\n        var find = mUtil.findAll(steps, '.m-wizard__step');\n        var num;\n\n        for (var i = 0, j = find.length; i < j; i++) {\n          if (step === find[i]) {\n            num = i + 1;\n            break;\n          }\n        }\n\n        if (num) {\n          if (the.options.manualStepForward === false) {\n            if (num < the.currentStep) {\n              Plugin.goTo(num);\n            }\n          } else {\n            Plugin.goTo(num);\n          }\n        }\n      });\n    },\n\n    /**\n     * Handles wizard click wizard\n     */\n    goTo: function goTo(number) {\n      //== Skip if this step is already shown\n      if (number === the.currentStep || number > the.totalSteps || number < 0) {\n        return;\n      } //== Validate step number\n\n\n      if (number) {\n        number = parseInt(number);\n      } else {\n        number = Plugin.getNextStep();\n      } //== Before next and prev events\n\n\n      var callback;\n\n      if (number > the.currentStep) {\n        callback = Plugin.eventTrigger('beforeNext');\n      } else {\n        callback = Plugin.eventTrigger('beforePrev');\n      } //== Skip if stopped\n\n\n      if (the.stopped === true) {\n        the.stopped = false;\n        return;\n      } //== Continue if no exit\n\n\n      if (callback !== false) {\n        //== Before change\n        Plugin.eventTrigger('beforeChange'); //== Set current step\n\n        the.currentStep = number; //== Update UI\n\n        Plugin.updateUI(); //== Trigger change event\n\n        Plugin.eventTrigger('change');\n      } //== After next and prev events\n\n\n      if (number > the.startStep) {\n        Plugin.eventTrigger('afterNext');\n      } else {\n        Plugin.eventTrigger('afterPrev');\n      }\n\n      return the;\n    },\n\n    /**\n     * Set step class\n     */\n    setStepClass: function setStepClass() {\n      if (Plugin.isLastStep()) {\n        mUtil.addClass(element, 'm-wizard--step-last');\n      } else {\n        mUtil.removeClass(element, 'm-wizard--step-last');\n      }\n\n      if (Plugin.isFirstStep()) {\n        mUtil.addClass(element, 'm-wizard--step-first');\n      } else {\n        mUtil.removeClass(element, 'm-wizard--step-first');\n      }\n\n      if (Plugin.isBetweenStep()) {\n        mUtil.addClass(element, 'm-wizard--step-between');\n      } else {\n        mUtil.removeClass(element, 'm-wizard--step-between');\n      }\n    },\n    updateUI: function updateUI(argument) {\n      //== Update progress bar\n      Plugin.updateProgress(); //== Show current target content\n\n      Plugin.handleTarget(); //== Set classes\n\n      Plugin.setStepClass(); //== Apply nav step classes\n\n      for (var i = 0, j = the.steps.length; i < j; i++) {\n        mUtil.removeClass(the.steps[i], 'm-wizard__step--current m-wizard__step--done');\n      }\n\n      for (var i = 1; i < the.currentStep; i++) {\n        mUtil.addClass(the.steps[i - 1], 'm-wizard__step--done');\n      }\n\n      mUtil.addClass(the.steps[the.currentStep - 1], 'm-wizard__step--current');\n    },\n\n    /**\n     * Cancel\n     */\n    stop: function stop() {\n      the.stopped = true;\n    },\n\n    /**\n     * Resume\n     */\n    start: function start() {\n      the.stopped = false;\n    },\n\n    /**\n     * Check last step\n     */\n    isLastStep: function isLastStep() {\n      return the.currentStep === the.totalSteps;\n    },\n\n    /**\n     * Check first step\n     */\n    isFirstStep: function isFirstStep() {\n      return the.currentStep === 1;\n    },\n\n    /**\n     * Check between step\n     */\n    isBetweenStep: function isBetweenStep() {\n      return Plugin.isLastStep() === false && Plugin.isFirstStep() === false;\n    },\n\n    /**\n     * Go to the next step\n     */\n    goNext: function goNext() {\n      return Plugin.goTo(Plugin.getNextStep());\n    },\n\n    /**\n     * Go to the prev step\n     */\n    goPrev: function goPrev() {\n      return Plugin.goTo(Plugin.getPrevStep());\n    },\n\n    /**\n     * Go to the last step\n     */\n    goLast: function goLast() {\n      return Plugin.goTo(the.totalSteps);\n    },\n\n    /**\n     * Go to the first step\n     */\n    goFirst: function goFirst() {\n      return Plugin.goTo(1);\n    },\n\n    /**\n     * Set progress\n     */\n    updateProgress: function updateProgress() {\n      //== Calculate progress position\n      if (!the.progress) {\n        return;\n      } //== Update progress\n\n\n      if (mUtil.hasClass(element, 'm-wizard--1')) {\n        var width = 100 * ((the.currentStep - 1) / the.totalSteps);\n        var number = mUtil.find(element, '.m-wizard__step-number');\n        var offset = parseInt(mUtil.css(number, 'width'));\n        mUtil.css(the.progress, 'width', 'calc(' + width + '% + ' + offset / 2 + 'px)');\n      } else if (mUtil.hasClass(element, 'm-wizard--2')) {\n        if (the.currentStep === 1) {//return;\n        }\n\n        var progress = (the.currentStep - 1) * (100 * (1 / (the.totalSteps - 1)));\n\n        if (mUtil.isInResponsiveRange('minimal-desktop-and-below')) {\n          mUtil.css(the.progress, 'height', progress + '%');\n        } else {\n          mUtil.css(the.progress, 'width', progress + '%');\n        }\n      } else {\n        var width = 100 * (the.currentStep / the.totalSteps);\n        mUtil.css(the.progress, 'width', width + '%');\n      }\n    },\n\n    /**\n     * Show/hide target content\n     */\n    handleTarget: function handleTarget() {\n      var step = the.steps[the.currentStep - 1];\n      var target = mUtil.get(mUtil.attr(step, 'm-wizard-target'));\n      var current = mUtil.find(element, '.m-wizard__form-step--current');\n      mUtil.removeClass(current, 'm-wizard__form-step--current');\n      mUtil.addClass(target, 'm-wizard__form-step--current');\n    },\n\n    /**\n     * Get next step\n     */\n    getNextStep: function getNextStep() {\n      if (the.totalSteps >= the.currentStep + 1) {\n        return the.currentStep + 1;\n      } else {\n        return the.totalSteps;\n      }\n    },\n\n    /**\n     * Get prev step\n     */\n    getPrevStep: function getPrevStep() {\n      if (the.currentStep - 1 >= 1) {\n        return the.currentStep - 1;\n      } else {\n        return 1;\n      }\n    },\n\n    /**\n     * Trigger events\n     */\n    eventTrigger: function eventTrigger(name) {\n      //mUtil.triggerCustomEvent(name);\n      for (var i = 0; i < the.events.length; i++) {\n        var event = the.events[i];\n\n        if (event.name == name) {\n          if (event.one == true) {\n            if (event.fired == false) {\n              the.events[i].fired = true;\n              event.handler.call(this, the);\n            }\n          } else {\n            event.handler.call(this, the);\n          }\n        }\n      }\n    },\n    addEvent: function addEvent(name, handler, one) {\n      the.events.push({\n        name: name,\n        handler: handler,\n        one: one,\n        fired: false\n      });\n      return the;\n    }\n  }; //////////////////////////\n  // ** Public Methods ** //\n  //////////////////////////\n\n  /**\n   * Set default options\n   */\n\n  the.setDefaults = function (options) {\n    defaultOptions = options;\n  };\n  /**\n   * Go to the next step\n   */\n\n\n  the.goNext = function () {\n    return Plugin.goNext();\n  };\n  /**\n   * Go to the prev step\n   */\n\n\n  the.goPrev = function () {\n    return Plugin.goPrev();\n  };\n  /**\n   * Go to the last step\n   */\n\n\n  the.goLast = function () {\n    return Plugin.goLast();\n  };\n  /**\n   * Cancel step\n   */\n\n\n  the.stop = function () {\n    return Plugin.stop();\n  };\n  /**\n   * Resume step\n   */\n\n\n  the.start = function () {\n    return Plugin.start();\n  };\n  /**\n   * Go to the first step\n   */\n\n\n  the.goFirst = function () {\n    return Plugin.goFirst();\n  };\n  /**\n   * Go to a step\n   */\n\n\n  the.goTo = function (number) {\n    return Plugin.goTo(number);\n  };\n  /**\n   * Get current step number\n   */\n\n\n  the.getStep = function () {\n    return the.currentStep;\n  };\n  /**\n   * Check last step\n   */\n\n\n  the.isLastStep = function () {\n    return Plugin.isLastStep();\n  };\n  /**\n   * Check first step\n   */\n\n\n  the.isFirstStep = function () {\n    return Plugin.isFirstStep();\n  };\n  /**\n   * Attach event\n   */\n\n\n  the.on = function (name, handler) {\n    return Plugin.addEvent(name, handler);\n  };\n  /**\n   * Attach event that will be fired once\n   */\n\n\n  the.one = function (name, handler) {\n    return Plugin.addEvent(name, handler, true);\n  }; //== Construct plugin\n\n\n  Plugin.construct.apply(the, [options]);\n  return the;\n};\n\n(function ($) {\n  var pluginName = 'mDatatable';\n  var pfx = 'm-';\n  $.fn[pluginName] = $.fn[pluginName] || {};\n  /**\n   * @param datatable Main datatable plugin instance\n   * @param options Extension options\n   * @returns {*}\n   */\n\n  $.fn[pluginName].checkbox = function (datatable, options) {\n    var Extension = {\n      selectedAllRows: false,\n      selectedRows: [],\n      unselectedRows: [],\n      init: function init() {\n        if (Extension.selectorEnabled()) {\n          // reset\n          datatable.setDataSourceParam(options.vars.selectedAllRows, false);\n          datatable.stateRemove('checkbox'); // requestIds is not null\n\n          if (options.vars.requestIds) {\n            // request ids in response\n            datatable.setDataSourceParam(options.vars.requestIds, true);\n          } // remove selected checkbox on datatable reload\n\n\n          $(datatable).on(pfx + 'datatable--on-reloaded', function () {\n            datatable.stateRemove('checkbox');\n            datatable.setDataSourceParam(options.vars.selectedAllRows, false);\n            Extension.selectedAllRows = false;\n            Extension.selectedRows = [];\n            Extension.unselectedRows = [];\n          }); // select all on extension init\n\n          Extension.selectedAllRows = datatable.getDataSourceParam(options.vars.selectedAllRows);\n          $(datatable).on(pfx + 'datatable--on-layout-updated', function (e, args) {\n            if (args.table != $(datatable.wrap).attr('id')) {\n              return;\n            }\n\n            datatable.ready(function () {\n              Extension.initVars();\n              Extension.initEvent();\n              Extension.initSelect();\n            });\n          });\n          $(datatable).on(pfx + 'datatable--on-check', function (e, ids) {\n            ids.forEach(function (id) {\n              Extension.selectedRows.push(id); // // remove from unselected rows\n\n              Extension.unselectedRows = Extension.remove(Extension.unselectedRows, id);\n            });\n            var storage = {};\n            storage['selectedRows'] = $.unique(Extension.selectedRows);\n            storage['unselectedRows'] = $.unique(Extension.unselectedRows);\n            datatable.stateKeep('checkbox', storage);\n          });\n          $(datatable).on(pfx + 'datatable--on-uncheck', function (e, ids) {\n            ids.forEach(function (id) {\n              Extension.unselectedRows.push(id); // // remove from selected rows\n\n              Extension.selectedRows = Extension.remove(Extension.selectedRows, id);\n            });\n            var storage = {};\n            storage['selectedRows'] = $.unique(Extension.selectedRows);\n            storage['unselectedRows'] = $.unique(Extension.unselectedRows);\n            datatable.stateKeep('checkbox', storage);\n          });\n        }\n      },\n\n      /**\n       * Init checkbox clicks event\n       */\n      initEvent: function initEvent() {\n        // select all checkbox click\n        $(datatable.tableHead).find('.' + pfx + 'checkbox--all > [type=\"checkbox\"]').click(function (e) {\n          // clear selected and unselected rows\n          Extension.selectedRows = Extension.unselectedRows = [];\n          datatable.stateRemove('checkbox'); // select all rows\n\n          if ($(this).is(':checked')) {\n            Extension.selectedAllRows = true;\n          } else {\n            Extension.selectedAllRows = false;\n          } // local select all current page rows\n\n\n          if (!options.vars.requestIds) {\n            if ($(this).is(':checked')) {\n              Extension.selectedRows = $.makeArray($(datatable.tableBody).find('.' + pfx + 'checkbox--single > [type=\"checkbox\"]').map(function (i, chk) {\n                return $(chk).val();\n              }));\n            }\n\n            var storage = {};\n            storage['selectedRows'] = $.unique(Extension.selectedRows);\n            datatable.stateKeep('checkbox', storage);\n          } // keep selectedAllRows in datasource params\n\n\n          datatable.setDataSourceParam(options.vars.selectedAllRows, Extension.selectedAllRows);\n          $(datatable).trigger(pfx + 'datatable--on-click-checkbox', [$(this)]);\n        }); // single row checkbox click\n\n        $(datatable.tableBody).find('.' + pfx + 'checkbox--single > [type=\"checkbox\"]').click(function (e) {\n          var id = $(this).val();\n\n          if ($(this).is(':checked')) {\n            Extension.selectedRows.push(id); // remove from unselected rows\n\n            Extension.unselectedRows = Extension.remove(Extension.unselectedRows, id);\n          } else {\n            Extension.unselectedRows.push(id); // remove from selected rows\n\n            Extension.selectedRows = Extension.remove(Extension.selectedRows, id);\n          } // local checkbox header check\n\n\n          if (!options.vars.requestIds && Extension.selectedRows.length < 1) {\n            // remove select all checkbox, if there is no checked checkbox left\n            $(datatable.tableHead).find('.' + pfx + 'checkbox--all > [type=\"checkbox\"]').prop('checked', false);\n          }\n\n          var storage = {};\n          storage['selectedRows'] = $.unique(Extension.selectedRows);\n          storage['unselectedRows'] = $.unique(Extension.unselectedRows);\n          datatable.stateKeep('checkbox', storage);\n          $(datatable).trigger(pfx + 'datatable--on-click-checkbox', [$(this)]);\n        });\n      },\n      initSelect: function initSelect() {\n        // selected all rows from server\n        if (Extension.selectedAllRows && options.vars.requestIds) {\n          if (!datatable.hasClass(pfx + 'datatable--error')) {\n            // set header select all checkbox checked\n            $(datatable.tableHead).find('.' + pfx + 'checkbox--all > [type=\"checkbox\"]').prop('checked', true);\n          } // set all checkbox in table body\n\n\n          datatable.setActiveAll(true); // remove unselected rows\n\n          Extension.unselectedRows.forEach(function (id) {\n            datatable.setInactive(id);\n          });\n        } else {\n          // single check for server and local\n          Extension.selectedRows.forEach(function (id) {\n            datatable.setActive(id);\n          }); // local checkbox; check if all checkboxes of currect page are checked\n\n          if (!datatable.hasClass(pfx + 'datatable--error') && $(datatable.tableBody).find('.' + pfx + 'checkbox--single > [type=\"checkbox\"]').not(':checked').length < 1) {\n            // set header select all checkbox checked\n            $(datatable.tableHead).find('.' + pfx + 'checkbox--all > [type=\"checkbox\"]').prop('checked', true);\n          }\n        }\n      },\n\n      /**\n       * Check if selector is enabled from options\n       */\n      selectorEnabled: function selectorEnabled() {\n        return $.grep(datatable.options.columns, function (n, i) {\n          return n.selector || false;\n        })[0];\n      },\n      initVars: function initVars() {\n        // get single select/unselect from localstorage\n        var storage = datatable.stateGet('checkbox');\n\n        if (typeof storage !== 'undefined') {\n          Extension.selectedRows = storage['selectedRows'] || [];\n          Extension.unselectedRows = storage['unselectedRows'] || [];\n        }\n      },\n      getSelectedId: function getSelectedId(path) {\n        Extension.initVars(); // server selected all rows\n\n        if (Extension.selectedAllRows && options.vars.requestIds) {\n          if (typeof path === 'undefined') {\n            path = options.vars.rowIds;\n          } // if selected all rows, return id from response meta\n\n\n          var selectedAllRows = datatable.getObject(path, datatable.lastResponse) || [];\n\n          if (selectedAllRows.length > 0) {\n            // remove single unselected rows from selectedAllRows ids from server response emta\n            Extension.unselectedRows.forEach(function (id) {\n              selectedAllRows = Extension.remove(selectedAllRows, parseInt(id));\n            });\n          }\n\n          return selectedAllRows;\n        } // else return single checked selected rows\n\n\n        return Extension.selectedRows;\n      },\n      remove: function remove(array, element) {\n        return array.filter(function (e) {\n          return e !== element;\n        });\n      }\n    }; // make the extension accessible from datatable init\n\n    datatable.checkbox = function () {\n      return Extension;\n    };\n\n    if (typeof options === 'object') {\n      options = $.extend(true, {}, $.fn[pluginName].checkbox[\"default\"], options);\n      Extension.init.apply(this, [options]);\n    }\n\n    return datatable;\n  };\n\n  $.fn[pluginName].checkbox[\"default\"] = {\n    vars: {\n      // select all rows flag to be sent to the server\n      selectedAllRows: 'selectedAllRows',\n      // request id parameter's name\n      requestIds: 'requestIds',\n      // response path to all rows id\n      rowIds: 'meta.rowIds'\n    }\n  };\n})(jQuery);\n\nvar mLayout = function () {\n  var header;\n  var horMenu;\n  var asideMenu;\n  var asideMenuOffcanvas;\n  var horMenuOffcanvas;\n  var asideLeftToggle;\n  var asideLeftHide;\n  var scrollTop;\n  var quicksearch;\n  var mainPortlet; //== Header\n\n  var initStickyHeader = function initStickyHeader() {\n    var tmp;\n    var headerEl = mUtil.get('m_header');\n    var options = {\n      offset: {},\n      minimize: {}\n    };\n\n    if (mUtil.attr(headerEl, 'm-minimize-mobile') == 'hide') {\n      options.minimize.mobile = {};\n      options.minimize.mobile.on = 'm-header--hide';\n      options.minimize.mobile.off = 'm-header--show';\n    } else {\n      options.minimize.mobile = false;\n    }\n\n    if (mUtil.attr(headerEl, 'm-minimize') == 'hide') {\n      options.minimize.desktop = {};\n      options.minimize.desktop.on = 'm-header--hide';\n      options.minimize.desktop.off = 'm-header--show';\n    } else {\n      options.minimize.desktop = false;\n    }\n\n    if (tmp = mUtil.attr(headerEl, 'm-minimize-offset')) {\n      options.offset.desktop = tmp;\n    }\n\n    if (tmp = mUtil.attr(headerEl, 'm-minimize-mobile-offset')) {\n      options.offset.mobile = tmp;\n    }\n\n    header = new mHeader('m_header', options);\n  }; //== Hor menu\n\n\n  var initHorMenu = function initHorMenu() {\n    // init aside left offcanvas\n    horMenuOffcanvas = new mOffcanvas('m_header_menu', {\n      overlay: true,\n      baseClass: 'm-aside-header-menu-mobile',\n      closeBy: 'm_aside_header_menu_mobile_close_btn',\n      toggleBy: {\n        target: 'm_aside_header_menu_mobile_toggle',\n        state: 'm-brand__toggler--active'\n      }\n    });\n    horMenu = new mMenu('m_header_menu', {\n      submenu: {\n        desktop: 'dropdown',\n        tablet: 'accordion',\n        mobile: 'accordion'\n      },\n      accordion: {\n        slideSpeed: 200,\n        // accordion toggle slide speed in milliseconds\n        expandAll: false // allow having multiple expanded accordions in the menu\n\n      }\n    });\n  }; //== Aside menu\n\n\n  var initLeftAsideMenu = function initLeftAsideMenu() {\n    //== Init aside menu\n    var menu = mUtil.get('m_ver_menu');\n    var menuDesktopMode = mUtil.attr(menu, 'm-menu-dropdown') === '1' ? 'dropdown' : 'accordion';\n    var scroll;\n\n    if (mUtil.attr(menu, 'm-menu-scrollable') === '1') {\n      scroll = {\n        height: function height() {\n          if (mUtil.isInResponsiveRange('desktop')) {\n            return mUtil.getViewPort().height - parseInt(mUtil.css('m_header', 'height'));\n          }\n        }\n      };\n    }\n\n    asideMenu = new mMenu('m_ver_menu', {\n      // vertical scroll\n      scroll: scroll,\n      // submenu setup\n      submenu: {\n        desktop: {\n          // by default the menu mode set to accordion in desktop mode\n          \"default\": menuDesktopMode,\n          // whenever body has this class switch the menu mode to dropdown\n          state: {\n            body: 'm-aside-left--minimize',\n            mode: 'dropdown'\n          }\n        },\n        tablet: 'accordion',\n        // menu set to accordion in tablet mode\n        mobile: 'accordion' // menu set to accordion in mobile mode\n\n      },\n      //accordion setup\n      accordion: {\n        autoScroll: false,\n        // enable auto scrolling(focus) to the clicked menu item\n        expandAll: false // allow having multiple expanded accordions in the menu\n\n      }\n    });\n  }; //== Aside\n\n\n  var initLeftAside = function initLeftAside() {\n    // init aside left offcanvas\n    var body = mUtil.get('body');\n    var asideLeft = mUtil.get('m_aside_left');\n    var asideOffcanvasClass = mUtil.hasClass(asideLeft, 'm-aside-left--offcanvas-default') ? 'm-aside-left--offcanvas-default' : 'm-aside-left';\n    asideMenuOffcanvas = new mOffcanvas('m_aside_left', {\n      baseClass: asideOffcanvasClass,\n      overlay: true,\n      closeBy: 'm_aside_left_close_btn',\n      toggleBy: {\n        target: 'm_aside_left_offcanvas_toggle',\n        state: 'm-brand__toggler--active'\n      }\n    }); //== Handle minimzied aside hover\n\n    if (mUtil.hasClass(body, 'm-aside-left--fixed')) {\n      var insideTm;\n      var outsideTm;\n      mUtil.addEvent(asideLeft, 'mouseenter', function () {\n        if (outsideTm) {\n          clearTimeout(outsideTm);\n          outsideTm = null;\n        }\n\n        insideTm = setTimeout(function () {\n          if (mUtil.hasClass(body, 'm-aside-left--minimize') && mUtil.isInResponsiveRange('desktop')) {\n            mUtil.removeClass(body, 'm-aside-left--minimize');\n            mUtil.addClass(body, 'm-aside-left--minimize-hover');\n            asideMenu.scrollerUpdate();\n            asideMenu.scrollerTop();\n          }\n        }, 300);\n      });\n      mUtil.addEvent(asideLeft, 'mouseleave', function () {\n        if (insideTm) {\n          clearTimeout(insideTm);\n          insideTm = null;\n        }\n\n        outsideTm = setTimeout(function () {\n          if (mUtil.hasClass(body, 'm-aside-left--minimize-hover') && mUtil.isInResponsiveRange('desktop')) {\n            mUtil.removeClass(body, 'm-aside-left--minimize-hover');\n            mUtil.addClass(body, 'm-aside-left--minimize');\n            asideMenu.scrollerUpdate();\n            asideMenu.scrollerTop();\n          }\n        }, 500);\n      });\n    }\n  }; //== Sidebar toggle\n\n\n  var initLeftAsideToggle = function initLeftAsideToggle() {\n    if ($('#m_aside_left_minimize_toggle').length === 0) {\n      return;\n    }\n\n    asideLeftToggle = new mToggle('m_aside_left_minimize_toggle', {\n      target: 'body',\n      targetState: 'm-brand--minimize m-aside-left--minimize',\n      togglerState: 'm-brand__toggler--active'\n    });\n    asideLeftToggle.on('toggle', function (toggle) {\n      if (mUtil.get('main_portlet')) {\n        mainPortlet.updateSticky();\n      }\n\n      horMenu.pauseDropdownHover(800);\n      asideMenu.pauseDropdownHover(800); //== Remember state in cookie\n\n      Cookies.set('sidebar_toggle_state', toggle.getState()); // to set default minimized left aside use this cookie value in your\n      // server side code and add \"m-brand--minimize m-aside-left--minimize\" classes to\n      // the body tag in order to initialize the minimized left aside mode during page loading.\n    });\n    asideLeftToggle.on('beforeToggle', function (toggle) {\n      var body = mUtil.get('body');\n\n      if (mUtil.hasClass(body, 'm-aside-left--minimize') === false && mUtil.hasClass(body, 'm-aside-left--minimize-hover')) {\n        mUtil.removeClass(body, 'm-aside-left--minimize-hover');\n      }\n    });\n  }; //== Sidebar hide\n\n\n  var _initLeftAsideHide = function initLeftAsideHide() {\n    if ($('#m_aside_left_hide_toggle').length === 0) {\n      return;\n    }\n\n    _initLeftAsideHide = new mToggle('m_aside_left_hide_toggle', {\n      target: 'body',\n      targetState: 'm-aside-left--hide',\n      togglerState: 'm-brand__toggler--active'\n    });\n\n    _initLeftAsideHide.on('toggle', function (toggle) {\n      horMenu.pauseDropdownHover(800);\n      asideMenu.pauseDropdownHover(800); //== Remember state in cookie\n\n      Cookies.set('sidebar_hide_state', toggle.getState()); // to set default minimized left aside use this cookie value in your\n      // server side code and add \"m-brand--minimize m-aside-left--minimize\" classes to\n      // the body tag in order to initialize the minimized left aside mode during page loading.\n    });\n  }; //== Topbar\n\n\n  var initTopbar = function initTopbar() {\n    $('#m_aside_header_topbar_mobile_toggle').click(function () {\n      $('body').toggleClass('m-topbar--on');\n    }); // Animated Notification Icon\n\n    /*\n    setInterval(function() {\n        $('#m_topbar_notification_icon .m-nav__link-icon').addClass('m-animate-shake');\n        $('#m_topbar_notification_icon .m-nav__link-badge').addClass('m-animate-blink');\n    }, 3000);\n     setInterval(function() {\n        $('#m_topbar_notification_icon .m-nav__link-icon').removeClass('m-animate-shake');\n        $('#m_topbar_notification_icon .m-nav__link-badge').removeClass('m-animate-blink');\n    }, 6000);\n    */\n  }; //== Quicksearch\n\n\n  var initQuicksearch = function initQuicksearch() {\n    if ($('#m_quicksearch').length === 0) {\n      return;\n    }\n\n    quicksearch = new mQuicksearch('m_quicksearch', {\n      mode: mUtil.attr('m_quicksearch', 'm-quicksearch-mode'),\n      // quick search type\n      minLength: 1\n    }); //<div class=\"m-search-results m-search-results--skin-light\"><span class=\"m-search-result__message\">Something went wrong</div></div>\n\n    quicksearch.on('search', function (the) {\n      the.showProgress();\n      $.ajax({\n        url: 'https://keenthemes.com/metronic/themes/themes/metronic/dist/preview/inc/api/quick_search.php',\n        data: {\n          query: the.query\n        },\n        dataType: 'html',\n        success: function success(res) {\n          the.hideProgress();\n          the.showResult(res);\n        },\n        error: function error(res) {\n          the.hideProgress();\n          the.showError('Connection error. Pleae try again later.');\n        }\n      });\n    });\n  }; //== Scrolltop\n\n\n  var initScrollTop = function initScrollTop() {\n    var scrollTop = new mScrollTop('m_scroll_top', {\n      offset: 300,\n      speed: 600\n    });\n  }; //== Main portlet(sticky portlet)\n\n\n  var createMainPortlet = function createMainPortlet() {\n    return new mPortlet('main_portlet', {\n      sticky: {\n        offset: parseInt(mUtil.css(mUtil.get('m_header'), 'height')),\n        zIndex: 90,\n        position: {\n          top: function top() {\n            return parseInt(mUtil.css(mUtil.get('m_header'), 'height'));\n          },\n          left: function left() {\n            var left = parseInt(mUtil.css(mUtil.getByClass('m-content'), 'paddingLeft'));\n\n            if (mUtil.isInResponsiveRange('desktop')) {\n              //left += parseInt(mUtil.css(mUtil.get('m_aside_left'), 'width') );\n              if (mUtil.hasClass(mUtil.get('body'), 'm-aside-left--minimize')) {\n                left += 78; // need to use hardcoded width of the minimize aside\n              } else {\n                left += 255; // need to use hardcoded width of the aside\n              }\n            }\n\n            return left;\n          },\n          right: function right() {\n            return parseInt(mUtil.css(mUtil.getByClass('m-content'), 'paddingRight'));\n          }\n        }\n      }\n    });\n  };\n\n  return {\n    init: function init() {\n      this.initHeader();\n      this.initAside();\n      this.initMainPortlet();\n    },\n    initMainPortlet: function initMainPortlet() {\n      if (!mUtil.get('main_portlet')) {\n        return;\n      }\n\n      mainPortlet = createMainPortlet();\n      mainPortlet.initSticky();\n      mUtil.addResizeHandler(function () {\n        mainPortlet.updateSticky();\n      });\n    },\n    resetMainPortlet: function resetMainPortlet() {\n      mainPortlet.destroySticky();\n      mainPortlet = createMainPortlet();\n      mainPortlet.initSticky();\n    },\n    initHeader: function initHeader() {\n      initStickyHeader();\n      initHorMenu();\n      initTopbar();\n      initQuicksearch();\n      initScrollTop();\n    },\n    initAside: function initAside() {\n      initLeftAside();\n      initLeftAsideMenu();\n      initLeftAsideToggle();\n\n      _initLeftAsideHide();\n\n      this.onLeftSidebarToggle(function (e) {\n        //== Update sticky portlet\n        if (mainPortlet) {\n          mainPortlet.updateSticky();\n        } //== Reload datatable\n\n\n        var datatables = $('.m-datatable');\n\n        if (datatables) {\n          datatables.each(function () {\n            $(this).mDatatable('redraw');\n          });\n        }\n      });\n    },\n    getAsideMenu: function getAsideMenu() {\n      return asideMenu;\n    },\n    onLeftSidebarToggle: function onLeftSidebarToggle(handler) {\n      if (asideLeftToggle) {\n        asideLeftToggle.on('toggle', handler);\n      }\n    },\n    closeMobileAsideMenuOffcanvas: function closeMobileAsideMenuOffcanvas() {\n      if (mUtil.isMobileDevice()) {\n        asideMenuOffcanvas.hide();\n      }\n    },\n    closeMobileHorMenuOffcanvas: function closeMobileHorMenuOffcanvas() {\n      if (mUtil.isMobileDevice()) {\n        horMenuOffcanvas.hide();\n      }\n    }\n  };\n}();\n\n$(document).on('turbolinks:load', function () {\n  if (mUtil.isAngularVersion() === false) {\n    mLayout.init();\n  }\n});\n\nvar mQuickSidebar = function () {\n  var topbarAside = $('#m_quick_sidebar');\n  var topbarAsideTabs = $('#m_quick_sidebar_tabs');\n  var topbarAsideContent = topbarAside.find('.m-quick-sidebar__content');\n\n  var initMessages = function initMessages() {\n    var messages = mUtil.find(mUtil.get('m_quick_sidebar_tabs_messenger'), '.m-messenger__messages');\n    var form = $('#m_quick_sidebar_tabs_messenger .m-messenger__form');\n    mUtil.scrollerInit(messages, {\n      disableForMobile: true,\n      resetHeightOnDestroy: false,\n      handleWindowResize: true,\n      height: function height() {\n        var height = topbarAside.outerHeight(true) - topbarAsideTabs.outerHeight(true) - form.outerHeight(true) - 120;\n        return height;\n      }\n    });\n  };\n\n  var initSettings = function initSettings() {\n    var settings = mUtil.find(mUtil.get('m_quick_sidebar_tabs_settings'), '.m-list-settings');\n\n    if (!settings) {\n      return;\n    }\n\n    mUtil.scrollerInit(settings, {\n      disableForMobile: true,\n      resetHeightOnDestroy: false,\n      handleWindowResize: true,\n      height: function height() {\n        return mUtil.getViewPort().height - topbarAsideTabs.outerHeight(true) - 60;\n      }\n    });\n  };\n\n  var initLogs = function initLogs() {\n    var logs = mUtil.find(mUtil.get('m_quick_sidebar_tabs_logs'), '.m-list-timeline');\n\n    if (!logs) {\n      return;\n    }\n\n    mUtil.scrollerInit(logs, {\n      disableForMobile: true,\n      resetHeightOnDestroy: false,\n      handleWindowResize: true,\n      height: function height() {\n        return mUtil.getViewPort().height - topbarAsideTabs.outerHeight(true) - 60;\n      }\n    });\n  };\n\n  var initOffcanvasTabs = function initOffcanvasTabs() {\n    initMessages();\n    initSettings();\n    initLogs();\n  };\n\n  var initOffcanvas = function initOffcanvas() {\n    var topbarAsideObj = new mOffcanvas('m_quick_sidebar', {\n      overlay: true,\n      baseClass: 'm-quick-sidebar',\n      closeBy: 'm_quick_sidebar_close',\n      toggleBy: 'm_quick_sidebar_toggle'\n    }); // run once on first time dropdown shown\n\n    topbarAsideObj.one('afterShow', function () {\n      mApp.block(topbarAside);\n      setTimeout(function () {\n        mApp.unblock(topbarAside);\n        topbarAsideContent.removeClass('m--hide');\n        initOffcanvasTabs();\n      }, 1000);\n    });\n  };\n\n  return {\n    init: function init() {\n      if (topbarAside.length === 0) {\n        return;\n      }\n\n      initOffcanvas();\n    }\n  };\n}();\n\n$(document).on('turbolinks:load', function () {\n  mQuickSidebar.init();\n});","map":{"version":3,"sources":["/Users/vponce/Desarrollos/credits_factor_global/vendor/assets/javascripts/scripts.bundle.js"],"names":["$","jQuery","PerfectScrollbar","Cookies","lastTime","vendors","x","length","window","requestAnimationFrame","cancelAnimationFrame","callback","currTime","Date","getTime","timeToCall","Math","max","id","setTimeout","clearTimeout","arr","forEach","item","hasOwnProperty","Object","defineProperty","configurable","enumerable","writable","value","prepend","argArr","Array","prototype","slice","call","arguments","docFrag","document","createDocumentFragment","argItem","isNode","Node","appendChild","createTextNode","String","insertBefore","firstChild","Element","Document","DocumentFragment","mUtilElementDataStore","mUtilElementDataStoreID","mUtilDelegatedEventHandlers","mUtil","resizeHandlers","breakpoints","sm","md","lg","xl","_windowResizeHandler","_runResizeHandlers","i","each","timeout","delay","addEventListener","init","options","addResizeHandler","push","removeResizeHandler","runResizeHandlers","resize","Event","dispatchEvent","evt","createEvent","initUIEvent","getURLParam","paramName","searchString","location","search","substring","val","params","split","unescape","isMobileDevice","getViewPort","width","getBreakpoint","isDesktopDevice","e","a","documentElement","body","height","isInResponsiveRange","mode","breakpoint","getUniqueID","prefix","floor","random","isset","obj","keys","stone","indexOf","Error","undefined","shift","getHighestZindex","el","elem","get","position","css","parseInt","isNaN","parentNode","hasFixedPositionedParent","sleep","milliseconds","start","getRandomInt","min","isAngularVersion","Zone","deepExtend","out","key","extend","query","nodeType","getElementById","getElementsByTagName","getElementsByClassName","getByClass","hasClasses","classes","classesArr","hasClass","trim","className","classList","contains","RegExp","test","addClass","classNames","add","removeClass","remove","replace","triggerCustomEvent","eventName","data","CustomEvent","event","detail","initCustomEvent","string","eventTriggered","currentTarget","dataset","triggered","removeChild","find","parent","querySelector","findAll","querySelectorAll","insertAfter","referenceNode","nextSibling","parents","collectionHas","b","len","findParentBySelector","selector","all","cur","children","log","childNodes","result","l","matches","child","p","f","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","s","tagName","element","set","name","customDataTag","has","outerWidth","margin","parseFloat","offsetWidth","offset","rect","win","getClientRects","top","left","getBoundingClientRect","ownerDocument","defaultView","pageYOffset","pageXOffset","visible","offsetHeight","attr","setAttribute","getAttribute","hasAttr","removeAttr","removeAttribute","animate","from","to","duration","update","easing","done","easings","linear","t","c","d","rAF","canceled","change","loop","timestamp","time","performance","now","actualCss","prop","cache","HTMLElement","style","cssText","actualHeight","actualWidth","getScroll","method","self","browserSupportsBoxModel","styleProp","getComputedStyle","toLowerCase","getPropertyValue","currentStyle","str","letter","toUpperCase","oldLeft","oldRsLeft","runtimeStyle","pixelLeft","slide","dir","speed","recalcMaxHeight","calcHeight","calcPaddingTop","calcPaddingBottom","paddingTop","paddingBottom","display","overflow","slideUp","slideDown","show","hide","addEvent","type","handler","one","removeEvent","removeEventListener","on","eventId","targets","target","j","off","onetime","callee","hash","chr","charCodeAt","animateClass","animationName","animationEnd","animateDelay","animateDuration","scrollTo","targetPos","scrollPos","scrollTop","isArray","ready","attachEvent","readyState","isEmpty","numberString","nStr","x1","x2","rgx","detectIE","ua","navigator","userAgent","msie","trident","rv","edge","isRTL","scrollerInit","ps","Function","disableForMobile","resetHeightOnDestroy","destroy","wheelSpeed","swipeEasing","wheelPropagation","minScrollbarLength","suppressScrollX","handleWindowResize","scrollerUpdate","scrollersUpdate","scrollers","scrollerTop","scrollerDestroy","mApp","colors","brand","metal","light","accent","primary","success","info","warning","danger","focus","initTooltip","skin","triggerValue","placement","tooltip","trigger","template","initTooltips","initPopover","popover","initPopovers","initFileInput","fileName","next","html","initPortlet","portlet","mPortlet","initPortlets","initScrollers","initAlerts","closest","initCustomTabs","click","preventDefault","tab","tabs","contents","content","hideTouchWarning","special","touchstart","setup","_","ns","handle","includes","passive","touchmove","wheel","initComponents","block","opacity","overlayColor","state","size","centerX","centerY","message","shadow","loading","createElement","innerHTML","border","padding","backgroundColor","overlayCSS","cursor","zIndex","onUnblock","blockUI","unblock","unblockUI","blockPage","unblockPage","progress","alignment","unprogress","getColor","pluginName","pfx","util","app","fn","console","datatable","debug","API","record","Plugin","isInit","stateId","ajaxParams","isHtmlTable","source","extractTable","setupBaseDOM","setupDOM","table","spinnerCallback","setDataSourceQuery","getOption","afterRender","stateRemove","extName","extOptions","saveState","cookie","webstorage","dataSet","originalDataSet","dataMapCallback","dataRender","setHeadTitle","tableFoot","layout","header","footer","setupCellField","setupTemplateCell","setupSubDatatable","setupSystemColumn","redraw","fullRender","which","columns","headers","map","cell","field","text","column","title","ii","rowProp","td","rowProps","layoutUpdate","setupHover","getDepth","lockTable","columnHide","resetScroll","wrap","lock","lockEnabled","lockEnabledColumns","right","enable","enableLock","tablePart","lockLeft","lockScroll","lockRight","rowLeft","appendTo","rowScroll","rowRight","locked","isLocked","tableHead","empty","insertData","screen","enabled","args","autoHide","rowEvenOdd","tableBody","scrollbar","sorting","hoverTimer","isScrolling","scroll","row","index","adjustLockContainer","containerWidth","dragResize","pressed","startX","startWidth","mousedown","pageX","mousemove","ifLocked","lockedIndex","eq","tri","tr","mouseup","initHeight","theadHeight","tfootHeight","bodyHeight","initialDatatable","clone","theme","setOption","prependTo","tableParts","part","tdi","rowCallback","beforeTemplate","grep","n","finalValue","dataPlaceholder","span","afterTemplate","chk","append","is","setActive","setInactive","subtable","initCheckbox","setActiveAll","first","adjustCellsWidth","sortOffset","minWidth","dataWidth","adjustCellsHeight","totalRows","rows","maxHeight","apply","ceil","wrapInner","scrollable","tableLocked","mcsOptions","scrollInertia","autoDraggerLength","autoHideScrollbar","autoExpandScrollbar","alwaysShowScrollbar","mouseWheel","scrollAmount","advanced","updateOnContentResize","autoExpandHorizontalScroll","scrollHead","scrollFoot","initCustomScrollbar","initDefaultScrollbar","onScrolling","scrollLeft","initScrollbar","ths","th","textAlign","align","action","siblings","buildMeta","localDataUpdate","meta","getDataSourceParam","perpage","pageSize","total","page","end","afterGetData","localPagingCallback","ctx","pager","pagination","serverPaging","serverMeta","getObject","paging","serverSorting","serverFiltering","getData","pages","visibility","colLength","rowIndex","cellIndex","tds","join","errorSpan","replaceWith","updateTableComponents","dataType","url","ajax","response","textStatus","jqXHR","lastResponse","setAutoColumns","fail","errorThrown","always","pg","paginateEvent","pagerLayout","getTablePrefix","setDataSourceParam","serverCallback","addPaginateEvent","populate","pagingBreakpoint","icons","pagerNumber","gotoMorePage","prev","more","input","abs","pagesNumber","pageNumber","gotoPage","last","pageSizeSelect","updatePerpage","pageSizes","selectpicker","paste","unique","openPage","originalEvent","updateInfo","currentPage","getCurrentPage","pagerInput","option","paginationUpdate","pagerMorePrev","pagerMoreNext","pagerFirst","pagerPrev","pagerNext","pagerLast","morePrevPage","moreNextPage","nav","responsive","hidden","subTableCallback","toggleSubTable","parentRow","subTableRow","getTotalColumns","after","toggle","subTable","primaryKey","icon","detailCell","raw","isSpinning","spinnerOptions","sortCallback","sort","format","aField","bField","moment","diff","Number","scrollWidth","not","toggleHiddenColumns","detailRow","detailRowTd","detailSubTable","hoverColumn","colIdx","nodes","cells","k","v","found","getExtraSpace","getTableId","suffix","depth","stateKeep","localStorage","setItem","JSON","stringify","stateGet","defValue","getItem","parse","stateUpdate","ori","removeItem","getOneRow","tdOnly","hasOverflowY","innerHeight","sortColumn","int","hIndex","container","tda","tdb","sortObj","sortable","sortClick","setIcon","isEmptyObject","getColumnByField","nestedSearch","getGeneralSearchKey","filterArray","filter","list","operator","inArray","count","filtered","to_match","matched","m_key","m_value","lhs","toString","getDefaultSortColumn","getHiddenDimensions","includeMargin","props","dim","innerWidth","outerHeight","hiddenParents","addBack","oldProps","old","searchInput","path","object","reduce","extendObj","levels","createLevel","timer","load","reload","ms","getRecord","rowNumber","getColumn","columnName","setSelectedRecords","getValue","ids","active","checkboxes","getSelectedRecords","makeArray","getDataSourceQuery","param","getPageSize","getTotalRows","getDataSet","hideColumn","fieldName","showColumn","nodeTr","nodeTd","nodeCols","recentNode","context","bool","scrollColumns","funcName","func","center","defaults","error","autoColumns","minHeight","customScrollbar","spinner","asc","desc","rowDetail","expand","collapse","resizable","filterable","editable","onEnter","toolbar","items","desktop","tablet","mobile","navigation","translate","records","processing","noRecords","select","extensions","mDatatable","mDropdown","elementId","the","defaultOptions","hoverTimeout","persistent","mobileOverlay","construct","events","eventHandlers","open","close","arrow","wrapper","defaultDropPos","currentDropPos","hideMouseout","setZindex","setContent","clearHovered","adjustArrowPos","eventTrigger","hideOpened","dropdownoff","hideHovered","force","hideClicked","dropdown","pos","newZindex","isPersistent","isShown","fired","setDefaults","stopPropagation","mHeader","classic","minimize","build","lastScrollTop","st","mMenu","accordion","slideSpeed","autoScroll","autoScrollSpeed","expandAll","reset","pauseDropdownHoverTime","uid","handleSubmenuAccordion","getSubmenuMode","isConditionalSubmenuDropdown","handleSubmenuDrodownHoverEnter","handleSubmenuDrodownHoverExit","handleSubmenuDropdownClick","handleSubmenuDropdownTabClick","handleLinkClick","submenu","handleSubmenuDropdownClose","resumeDropdownHover","showSubmenuDropdown","hideSubmenuDropdown","shown","li","hasClosables","subnav","closables","el_","submenu_","scrollToItem","classAlso","adjustSubmenuDropdownArrowPos","createSubmenuDropdownClickDropoff","dropoff","link","pauseDropdownHover","date","resetActiveItem","i_","len_","setActiveItem","getBreadcrumbs","breadcrumbs","href","submenuLink","reverse","getPageTitle","hideDropdown","cnt","mOffcanvas","overlay","classBase","baseClass","classShown","classOverlay","toggleBy","closeBy","togglerClass","bodyToggleSpeed","tooltips","tools","fullscreen","sticky","head","foot","setupTooltips","onScrollSticky","updateSticky","resetSticky","initSticky","destroySticky","removeTooltips","getBody","getSelf","collapsed","fullscreenOn","tip","Tooltip","dispose","updateTitleContent","height1","height2","unFullscreen","mQuicksearch","minLength","requestTimeout","inputTarget","iconCloseTarget","iconCancelTarget","iconSearchTarget","spinnerClass","hasResultClass","templates","form","iconClose","iconSearch","iconCancel","cancelTimeout","onkeypress","charCode","keyCode","showDropdown","handleCancel","closeDropdown","showProgress","handleCancelIconVisibility","hideProgress","status","handleSearch","showResult","res","showError","msg","mScrollTop","match","mToggle","togglerState","targetState","toggleOn","toggleOff","getState","mWizard","startStep","manualStepForward","steps","btnSubmit","btnNext","btnPrev","btnLast","btnFirst","currentStep","stopped","totalSteps","goTo","updateUI","goNext","goPrev","goFirst","goLast","step","num","number","getNextStep","setStepClass","isLastStep","isFirstStep","isBetweenStep","argument","updateProgress","handleTarget","stop","getPrevStep","current","getStep","checkbox","Extension","selectedAllRows","selectedRows","unselectedRows","selectorEnabled","vars","requestIds","initVars","initEvent","initSelect","storage","getSelectedId","rowIds","array","mLayout","horMenu","asideMenu","asideMenuOffcanvas","horMenuOffcanvas","asideLeftToggle","asideLeftHide","quicksearch","mainPortlet","initStickyHeader","tmp","headerEl","initHorMenu","initLeftAsideMenu","menu","menuDesktopMode","initLeftAside","asideLeft","asideOffcanvasClass","insideTm","outsideTm","initLeftAsideToggle","initLeftAsideHide","initTopbar","toggleClass","initQuicksearch","initScrollTop","createMainPortlet","initHeader","initAside","initMainPortlet","resetMainPortlet","onLeftSidebarToggle","datatables","getAsideMenu","closeMobileAsideMenuOffcanvas","closeMobileHorMenuOffcanvas","mQuickSidebar","topbarAside","topbarAsideTabs","topbarAsideContent","initMessages","messages","initSettings","settings","initLogs","logs","initOffcanvasTabs","initOffcanvas","topbarAsideObj"],"mappings":"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","sourcesContent":["import $ from 'jquery';\nimport jQuery from 'jquery';\nimport 'popper.js';\nimport 'bootstrap';\nimport PerfectScrollbar from 'javascripts/perfect-scrollbar';\nimport Cookies from 'javascripts/js.cookie';\n\n/**\n * @class mUtil  Metronic base utilize class that privides helper functions\n */\n//== Polyfill\n// matches polyfill\n/*\nthis.Element && function(ElementPrototype) {\n    ElementPrototype.matches = ElementPrototype.matches ||\n        ElementPrototype.matchesSelector ||\n        ElementPrototype.webkitMatchesSelector ||\n        ElementPrototype.msMatchesSelector ||\n        function(selector) {\n            var node = this,\n                nodes = (node.parentNode || node.document).querySelectorAll(selector),\n                i = -1;\n            while (nodes[++i] && nodes[i] != node);\n            return !!nodes[i];\n        }\n}(Element.prototype);\n\n// closest polyfill\nthis.Element && function(ElementPrototype) {\n    ElementPrototype.closest = ElementPrototype.closest ||\n        function(selector) {\n            var el = this;\n            while (el.matches && !el.matches(selector)) el = el.parentNode;\n            return el.matches ? el : null;\n        }\n}(Element.prototype);\n\n\n// matches polyfill\nthis.Element && function(ElementPrototype) {\n    ElementPrototype.matches = ElementPrototype.matches ||\n        ElementPrototype.matchesSelector ||\n        ElementPrototype.webkitMatchesSelector ||\n        ElementPrototype.msMatchesSelector ||\n        function(selector) {\n            var node = this,\n                nodes = (node.parentNode || node.document).querySelectorAll(selector),\n                i = -1;\n            while (nodes[++i] && nodes[i] != node);\n            return !!nodes[i];\n        }\n}(Element.prototype);\n*/\n\n//\n// requestAnimationFrame polyfill by Erik MÃ¶ller.\n//  With fixes from Paul Irish and Tino Zijdel\n//\n//  http://paulirish.com/2011/requestanimationframe-for-smart-animating/\n//  http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating\n//\n//  MIT license\n//\n(function() {\n    var lastTime = 0;\n    var vendors = ['webkit', 'moz'];\n    for (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n        window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\n        window.cancelAnimationFrame =\n            window[vendors[x] + 'CancelAnimationFrame'] || window[vendors[x] + 'CancelRequestAnimationFrame'];\n    }\n\n    if (!window.requestAnimationFrame)\n        window.requestAnimationFrame = function(callback) {\n            var currTime = new Date().getTime();\n            var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n            var id = window.setTimeout(function() {\n                callback(currTime + timeToCall);\n            }, timeToCall);\n            lastTime = currTime + timeToCall;\n            return id;\n        };\n\n    if (!window.cancelAnimationFrame)\n        window.cancelAnimationFrame = function(id) {\n            clearTimeout(id);\n        };\n}());\n\n// Source: https://github.com/jserz/js_piece/blob/master/DOM/ParentNode/prepend()/prepend().md\n(function(arr) {\n    arr.forEach(function(item) {\n        if (item.hasOwnProperty('prepend')) {\n            return;\n        }\n        Object.defineProperty(item, 'prepend', {\n            configurable: true,\n            enumerable: true,\n            writable: true,\n            value: function prepend() {\n                var argArr = Array.prototype.slice.call(arguments),\n                    docFrag = document.createDocumentFragment();\n\n                argArr.forEach(function(argItem) {\n                    var isNode = argItem instanceof Node;\n                    docFrag.appendChild(isNode ? argItem : document.createTextNode(String(argItem)));\n                });\n\n                this.insertBefore(docFrag, this.firstChild);\n            }\n        });\n    });\n})([Element.prototype, Document.prototype, DocumentFragment.prototype]);\n\n//== Global variables\nwindow.mUtilElementDataStore = {};\nwindow.mUtilElementDataStoreID = 0;\nwindow.mUtilDelegatedEventHandlers = {};\n\nvar mUtil = function() {\n\n    var resizeHandlers = [];\n\n    /** @type {object} breakpoints The device width breakpoints **/\n    var breakpoints = {\n        sm: 544, // Small screen / phone\n        md: 768, // Medium screen / tablet\n        lg: 1024, // Large screen / desktop\n        xl: 1200 // Extra large screen / wide desktop\n    };\n\n    /**\n     * Handle window resize event with some\n     * delay to attach event handlers upon resize complete\n     */\n    var _windowResizeHandler = function() {\n        var _runResizeHandlers = function() {\n            // reinitialize other subscribed elements\n            for (var i = 0; i < resizeHandlers.length; i++) {\n                var each = resizeHandlers[i];\n                each.call();\n            }\n        };\n\n        var timeout = false; // holder for timeout id\n        var delay = 250; // delay after event is \"complete\" to run callback\n\n        window.addEventListener('resize', function() {\n            clearTimeout(timeout);\n            timeout = setTimeout(function() {\n                _runResizeHandlers();\n            }, delay); // wait 50ms until window resize finishes.\n        });\n    };\n\n    return {\n        /**\n         * Class main initializer.\n         * @param {object} options.\n         * @returns null\n         */\n        //main function to initiate the theme\n        init: function(options) {\n            if (options && options.breakpoints) {\n                breakpoints = options.breakpoints;\n            }\n\n            _windowResizeHandler();\n        },\n\n        /**\n         * Adds window resize event handler.\n         * @param {function} callback function.\n         */\n        addResizeHandler: function(callback) {\n            resizeHandlers.push(callback);\n        },\n\n        /**\n         * Removes window resize event handler.\n         * @param {function} callback function.\n         */\n        removeResizeHandler: function(callback) {\n            for (var i = 0; i < resizeHandlers.length; i++) {\n                if (callback === resizeHandlers[i]) {\n                    delete resizeHandlers[i];\n                }\n            }\n        },\n\n        /**\n         * Trigger window resize handlers.\n         */\n        runResizeHandlers: function() {\n            _runResizeHandlers();\n        },\n\n        resize: function() {\n            if (typeof(Event) === 'function') {\n                // modern browsers\n                window.dispatchEvent(new Event('resize'));\n            } else {\n                // for IE and other old browsers\n                // causes deprecation warning on modern browsers\n                var evt = window.document.createEvent('UIEvents');\n                evt.initUIEvent('resize', true, false, window, 0);\n                window.dispatchEvent(evt);\n            }\n        },\n\n        /**\n         * Get GET parameter value from URL.\n         * @param {string} paramName Parameter name.\n         * @returns {string}\n         */\n        getURLParam: function(paramName) {\n            var searchString = window.location.search.substring(1),\n                i, val, params = searchString.split(\"&\");\n\n            for (i = 0; i < params.length; i++) {\n                val = params[i].split(\"=\");\n                if (val[0] == paramName) {\n                    return unescape(val[1]);\n                }\n            }\n\n            return null;\n        },\n\n        /**\n         * Checks whether current device is mobile touch.\n         * @returns {boolean}\n         */\n        isMobileDevice: function() {\n            return (this.getViewPort().width < this.getBreakpoint('lg') ? true : false);\n        },\n\n        /**\n         * Checks whether current device is desktop.\n         * @returns {boolean}\n         */\n        isDesktopDevice: function() {\n            return mUtil.isMobileDevice() ? false : true;\n        },\n\n        /**\n         * Gets browser window viewport size. Ref:\n         * http://andylangton.co.uk/articles/javascript/get-viewport-size-javascript/\n         * @returns {object}\n         */\n        getViewPort: function() {\n            var e = window,\n                a = 'inner';\n            if (!('innerWidth' in window)) {\n                a = 'client';\n                e = document.documentElement || document.body;\n            }\n\n            return {\n                width: e[a + 'Width'],\n                height: e[a + 'Height']\n            };\n        },\n\n        /**\n         * Checks whether given device mode is currently activated.\n         * @param {string} mode Responsive mode name(e.g: desktop,\n         *     desktop-and-tablet, tablet, tablet-and-mobile, mobile)\n         * @returns {boolean}\n         */\n        isInResponsiveRange: function(mode) {\n            var breakpoint = this.getViewPort().width;\n\n            if (mode == 'general') {\n                return true;\n            } else if (mode == 'desktop' && breakpoint >= (this.getBreakpoint('lg') + 1)) {\n                return true;\n            } else if (mode == 'tablet' && (breakpoint >= (this.getBreakpoint('md') + 1) && breakpoint < this.getBreakpoint('lg'))) {\n                return true;\n            } else if (mode == 'mobile' && breakpoint <= this.getBreakpoint('md')) {\n                return true;\n            } else if (mode == 'desktop-and-tablet' && breakpoint >= (this.getBreakpoint('md') + 1)) {\n                return true;\n            } else if (mode == 'tablet-and-mobile' && breakpoint <= this.getBreakpoint('lg')) {\n                return true;\n            } else if (mode == 'minimal-desktop-and-below' && breakpoint <= this.getBreakpoint('xl')) {\n                return true;\n            }\n\n            return false;\n        },\n\n        /**\n         * Generates unique ID for give prefix.\n         * @param {string} prefix Prefix for generated ID\n         * @returns {boolean}\n         */\n        getUniqueID: function(prefix) {\n            return prefix + Math.floor(Math.random() * (new Date()).getTime());\n        },\n\n        /**\n         * Gets window width for give breakpoint mode.\n         * @param {string} mode Responsive mode name(e.g: xl, lg, md, sm)\n         * @returns {number}\n         */\n        getBreakpoint: function(mode) {\n            return breakpoints[mode];\n        },\n\n        /**\n         * Checks whether object has property matchs given key path.\n         * @param {object} obj Object contains values paired with given key path\n         * @param {string} keys Keys path seperated with dots\n         * @returns {object}\n         */\n        isset: function(obj, keys) {\n            var stone;\n\n            keys = keys || '';\n\n            if (keys.indexOf('[') !== -1) {\n                throw new Error('Unsupported object path notation.');\n            }\n\n            keys = keys.split('.');\n\n            do {\n                if (obj === undefined) {\n                    return false;\n                }\n\n                stone = keys.shift();\n\n                if (!obj.hasOwnProperty(stone)) {\n                    return false;\n                }\n\n                obj = obj[stone];\n\n            } while (keys.length);\n\n            return true;\n        },\n\n        /**\n         * Gets highest z-index of the given element parents\n         * @param {object} el jQuery element object\n         * @returns {number}\n         */\n        getHighestZindex: function(el) {\n            var elem = mUtil.get(el),\n                position, value;\n\n            while (elem && elem !== document) {\n                // Ignore z-index if position is set to a value where z-index is ignored by the browser\n                // This makes behavior of this function consistent across browsers\n                // WebKit always returns auto if the element is positioned\n                position = mUtil.css(elem, 'position');\n\n                if (position === \"absolute\" || position === \"relative\" || position === \"fixed\") {\n                    // IE returns 0 when zIndex is not specified\n                    // other browsers return a string\n                    // we ignore the case of nested elements with an explicit value of 0\n                    // <div style=\"z-index: -10;\"><div style=\"z-index: 0;\"></div></div>\n                    value = parseInt(mUtil.css(elem, 'z-index'));\n\n                    if (!isNaN(value) && value !== 0) {\n                        return value;\n                    }\n                }\n\n                elem = elem.parentNode;\n            }\n\n            return null;\n        },\n\n        /**\n         * Checks whether the element has any parent with fixed positionfreg\n         * @param {object} el jQuery element object\n         * @returns {boolean}\n         */\n        hasFixedPositionedParent: function(el) {\n            while (el && el !== document) {\n                position = mUtil.css(el, 'position');\n\n                if (position === \"fixed\") {\n                    return true;\n                }\n\n                el = el.parentNode;\n            }\n\n            return false;\n        },\n\n        /**\n         * Simulates delay\n         */\n        sleep: function(milliseconds) {\n            var start = new Date().getTime();\n            for (var i = 0; i < 1e7; i++) {\n                if ((new Date().getTime() - start) > milliseconds) {\n                    break;\n                }\n            }\n        },\n\n        /**\n         * Gets randomly generated integer value within given min and max range\n         * @param {number} min Range start value\n         * @param {number} min Range end value\n         * @returns {number}\n         */\n        getRandomInt: function(min, max) {\n            return Math.floor(Math.random() * (max - min + 1)) + min;\n        },\n\n        /**\n         * Checks whether Angular library is included\n         * @returns {boolean}\n         */\n        isAngularVersion: function() {\n            return window.Zone !== undefined ? true : false;\n        },\n\n        //== jQuery Workarounds\n\n        //== Deep extend:  $.extend(true, {}, objA, objB);\n        deepExtend: function(out) {\n            out = out || {};\n\n            for (var i = 1; i < arguments.length; i++) {\n                var obj = arguments[i];\n\n                if (!obj)\n                    continue;\n\n                for (var key in obj) {\n                    if (obj.hasOwnProperty(key)) {\n                        if (typeof obj[key] === 'object')\n                            out[key] = mUtil.deepExtend(out[key], obj[key]);\n                        else\n                            out[key] = obj[key];\n                    }\n                }\n            }\n\n            return out;\n        },\n\n        //== extend:  $.extend({}, objA, objB);\n        extend: function(out) {\n            out = out || {};\n\n            for (var i = 1; i < arguments.length; i++) {\n                if (!arguments[i])\n                    continue;\n\n                for (var key in arguments[i]) {\n                    if (arguments[i].hasOwnProperty(key))\n                        out[key] = arguments[i][key];\n                }\n            }\n\n            return out;\n        },\n\n        get: function(query) {\n            var el;\n\n            if (query === document) {\n                return document;\n            }\n\n            if (!!(query && query.nodeType === 1)) {\n                return query;\n            }\n\n            if (el = document.getElementById(query)) {\n                return el;\n            } else if (el = document.getElementsByTagName(query)) {\n                return el[0];\n            } else if (el = document.getElementsByClassName(query)) {\n                return el[0];\n            } else {\n                return null;\n            }\n        },\n\n        getByClass: function(query) {\n            var el;\n\n            if (el = document.getElementsByClassName(query)) {\n                return el[0];\n            } else {\n                return null;\n            }\n        },\n\n        /**\n         * Checks whether the element has given classes\n         * @param {object} el jQuery element object\n         * @param {string} Classes string\n         * @returns {boolean}\n         */\n        hasClasses: function(el, classes) {\n            if (!el) {\n                return;\n            }\n\n            var classesArr = classes.split(\" \");\n\n            for (var i = 0; i < classesArr.length; i++) {\n                if (mUtil.hasClass(el, mUtil.trim(classesArr[i])) == false) {\n                    return false;\n                }\n            }\n\n            return true;\n        },\n\n        hasClass: function(el, className) {\n            if (!el) {\n                return;\n            }\n\n            return el.classList ? el.classList.contains(className) : new RegExp('\\\\b' + className + '\\\\b').test(el.className);\n        },\n\n        addClass: function(el, className) {\n            if (!el || typeof className === 'undefined') {\n                return;\n            }\n\n            var classNames = className.split(' ');\n\n            if (el.classList) {\n                for (var i = 0; i < classNames.length; i++) {\n                    if (classNames[i] && classNames[i].length > 0) {\n                        el.classList.add(mUtil.trim(classNames[i]));\n                    }\n                }\n            } else if (!mUtil.hasClass(el, className)) {\n                for (var i = 0; i < classNames.length; i++) {\n                    el.className += ' ' + mUtil.trim(classNames[i]);\n                }\n            }\n        },\n\n        removeClass: function(el, className) {\n            if (!el || typeof className === 'undefined') {\n                return;\n            }\n\n            var classNames = className.split(' ');\n\n            if (el.classList) {\n                for (var i = 0; i < classNames.length; i++) {\n                    el.classList.remove(mUtil.trim(classNames[i]));\n                }\n            } else if (mUtil.hasClass(el, className)) {\n                for (var i = 0; i < classNames.length; i++) {\n                    el.className = el.className.replace(new RegExp('\\\\b' + mUtil.trim(classNames[i]) + '\\\\b', 'g'), '');\n                }\n            }\n        },\n\n        triggerCustomEvent: function(el, eventName, data) {\n            if (window.CustomEvent) {\n                var event = new CustomEvent(eventName, {\n                    detail: data\n                });\n            } else {\n                var event = document.createEvent('CustomEvent');\n                event.initCustomEvent(eventName, true, true, data);\n            }\n\n            el.dispatchEvent(event);\n        },\n\n        trim: function(string) {\n            return string.trim();\n        },\n\n        eventTriggered: function(e) {\n            if (e.currentTarget.dataset.triggered) {\n                return true;\n            } else {\n                e.currentTarget.dataset.triggered = true;\n\n                return false;\n            }\n        },\n\n        remove: function(el) {\n            if (el && el.parentNode) {\n                el.parentNode.removeChild(el);\n            }\n        },\n\n        find: function(parent, query) {\n            parent = mUtil.get(parent);\n            if (parent) {\n                return parent.querySelector(query);\n            }\n        },\n\n        findAll: function(parent, query) {\n            parent = mUtil.get(parent);\n            if (parent) {\n                return parent.querySelectorAll(query);\n            }\n        },\n\n        insertAfter: function(el, referenceNode) {\n            return referenceNode.parentNode.insertBefore(el, referenceNode.nextSibling);\n        },\n\n        parents: function(el, query) {\n            function collectionHas(a, b) { //helper function (see below)\n                for (var i = 0, len = a.length; i < len; i++) {\n                    if (a[i] == b) return true;\n                }\n\n                return false;\n            }\n\n            function findParentBySelector(el, selector) {\n                var all = document.querySelectorAll(selector);\n                var cur = el.parentNode;\n\n                while (cur && !collectionHas(all, cur)) { //keep going up until you find a match\n                    cur = cur.parentNode; //go up\n                }\n\n                return cur; //will return null if not found\n            }\n\n            return findParentBySelector(el, query);\n        },\n\n        children: function(el, selector, log) {\n            if (!el || !el.childNodes) {\n                return;\n            }\n\n            var result = [],\n                i = 0,\n                l = el.childNodes.length;\n\n            for (var i; i < l; ++i) {\n                if (el.childNodes[i].nodeType == 1 && mUtil.matches(el.childNodes[i], selector, log)) {\n                    result.push(el.childNodes[i]);\n                }\n            }\n\n            return result;\n        },\n\n        child: function(el, selector, log) {\n            var children = mUtil.children(el, selector, log);\n\n            return children ? children[0] : null;\n        },\n\n        matches: function(el, selector, log) {\n            var p = Element.prototype;\n            var f = p.matches || p.webkitMatchesSelector || p.mozMatchesSelector || p.msMatchesSelector || function(s) {\n                return [].indexOf.call(document.querySelectorAll(s), this) !== -1;\n            };\n\n            if (el && el.tagName) {\n                return f.call(el, selector);\n            } else {\n                return false;\n            }\n        },\n\n        data: function(element) {\n            element = mUtil.get(element);\n\n            return {\n                set: function(name, data) {\n                    if (element.customDataTag === undefined) {\n                        mUtilElementDataStoreID++;\n                        element.customDataTag = mUtilElementDataStoreID;\n                    }\n\n                    if (mUtilElementDataStore[element.customDataTag] === undefined) {\n                        mUtilElementDataStore[element.customDataTag] = {};\n                    }\n\n                    mUtilElementDataStore[element.customDataTag][name] = data;\n                },\n\n                get: function(name) {\n                    return this.has(name) ? mUtilElementDataStore[element.customDataTag][name] : null;\n                },\n\n                has: function(name) {\n                    return (mUtilElementDataStore[element.customDataTag] && mUtilElementDataStore[element.customDataTag][name]) ? true : false;\n                },\n\n                remove: function(name) {\n                    if (this.has(name)) {\n                        delete mUtilElementDataStore[element.customDataTag][name];\n                    }\n                }\n            };\n        },\n\n        outerWidth: function(el, margin) {\n            var width;\n\n            if (margin === true) {\n                var width = parseFloat(el.offsetWidth);\n                width += parseFloat(mUtil.css(el, 'margin-left')) + parseFloat(mUtil.css(el, 'margin-right'));\n\n                return parseFloat(width);\n            } else {\n                var width = parseFloat(el.offsetWidth);\n\n                return width;\n            }\n        },\n\n        offset: function(elem) {\n            var rect, win;\n            elem = mUtil.get(elem);\n\n            if ( !elem ) {\n                return;\n            }\n\n            // Return zeros for disconnected and hidden (display: none) elements (gh-2310)\n            // Support: IE <=11 only\n            // Running getBoundingClientRect on a\n            // disconnected node in IE throws an error\n\n            if ( !elem.getClientRects().length ) {\n                return { top: 0, left: 0 };\n            }\n\n            // Get document-relative position by adding viewport scroll to viewport-relative gBCR\n            rect = elem.getBoundingClientRect();\n            win = elem.ownerDocument.defaultView;\n\n            return {\n                top: rect.top + win.pageYOffset,\n                left: rect.left + win.pageXOffset\n            };\n        },\n\n        height: function(el) {\n            return mUtil.css(el, 'height');\n        },\n\n        visible: function(el) {\n            return !(el.offsetWidth === 0 && el.offsetHeight === 0);\n        },\n\n        attr: function(el, name, value) {\n            el = mUtil.get(el);\n\n            if (el == undefined) {\n                return;\n            }\n\n            if (value !== undefined) {\n                el.setAttribute(name, value);\n            } else {\n                return el.getAttribute(name);\n            }\n        },\n\n        hasAttr: function(el, name) {\n            el = mUtil.get(el);\n\n            if (el == undefined) {\n                return;\n            }\n\n            return el.getAttribute(name) ? true : false;\n        },\n\n        removeAttr: function(el, name) {\n            el = mUtil.get(el);\n\n            if (el == undefined) {\n                return;\n            }\n\n            el.removeAttribute(name);\n        },\n\n        animate: function(from, to, duration, update, easing, done) {\n            /**\n             * TinyAnimate.easings\n             *  Adapted from jQuery Easing\n             */\n            var easings = {};\n            var easing;\n\n            easings.linear = function(t, b, c, d) {\n                return c * t / d + b;\n            };\n\n            easing = easings.linear;\n\n            // Early bail out if called incorrectly\n            if (typeof from !== 'number' ||\n                typeof to !== 'number' ||\n                typeof duration !== 'number' ||\n                typeof update !== 'function') {\n                return;\n            }\n\n            // Create mock done() function if necessary\n            if (typeof done !== 'function') {\n                done = function() {};\n            }\n\n            // Pick implementation (requestAnimationFrame | setTimeout)\n            var rAF = window.requestAnimationFrame || function(callback) {\n                window.setTimeout(callback, 1000 / 50);\n            };\n\n            // Animation loop\n            var canceled = false;\n            var change = to - from;\n\n            function loop(timestamp) {\n                var time = (timestamp || +new Date()) - start;\n\n                if (time >= 0) {\n                    update(easing(time, from, change, duration));\n                }\n                if (time >= 0 && time >= duration) {\n                    update(to);\n                    done();\n                } else {\n                    rAF(loop);\n                }\n            }\n\n            update(from);\n\n            // Start animation loop\n            var start = window.performance && window.performance.now ? window.performance.now() : +new Date();\n\n            rAF(loop);\n        },\n\n        actualCss: function(el, prop, cache) {\n            if (el instanceof HTMLElement === false) {\n                return;\n            }\n\n            if (!el.getAttribute('m-hidden-' + prop) || cache === false) {\n                var value;\n\n                // the element is hidden so:\n                // making the el block so we can meassure its height but still be hidden\n                el.style.cssText = 'position: absolute; visibility: hidden; display: block;';\n\n                if (prop == 'width') {\n                    value = el.offsetWidth;\n                } else if (prop == 'height') {\n                    value = el.offsetHeight;\n                }\n\n                el.style.cssText = '';\n\n                // store it in cache\n                el.setAttribute('m-hidden-' + prop, value);\n\n                return parseFloat(value);\n            } else {\n                // store it in cache\n                return parseFloat(el.getAttribute('m-hidden-' + prop));\n            }\n        },\n\n        actualHeight: function(el, cache) {\n            return mUtil.actualCss(el, 'height', cache);\n        },\n\n        actualWidth: function(el, cache) {\n            return mUtil.actualCss(el, 'width', cache);\n        },\n\n        getScroll: function(element, method) {\n            // The passed in `method` value should be 'Top' or 'Left'\n            method = 'scroll' + method;\n            return (element == window || element == document) ? (\n                self[(method == 'scrollTop') ? 'pageYOffset' : 'pageXOffset'] ||\n                (browserSupportsBoxModel && document.documentElement[method]) ||\n                document.body[method]\n            ) : element[method];\n        },\n\n        css: function(el, styleProp, value) {\n            el = mUtil.get(el);\n\n            if (!el) {\n                return;\n            }\n\n            if (value !== undefined) {\n                el.style[styleProp] = value;\n            } else {\n                var value, defaultView = (el.ownerDocument || document).defaultView;\n                // W3C standard way:\n                if (defaultView && defaultView.getComputedStyle) {\n                    // sanitize property name to css notation\n                    // (hyphen separated words eg. font-Size)\n                    styleProp = styleProp.replace(/([A-Z])/g, \"-$1\").toLowerCase();\n                    return defaultView.getComputedStyle(el, null).getPropertyValue(styleProp);\n                } else if (el.currentStyle) { // IE\n                    // sanitize property name to camelCase\n                    styleProp = styleProp.replace(/\\-(\\w)/g, function(str, letter) {\n                        return letter.toUpperCase();\n                    });\n                    value = el.currentStyle[styleProp];\n                    // convert other units to pixels on IE\n                    if (/^\\d+(em|pt|%|ex)?$/i.test(value)) {\n                        return (function(value) {\n                            var oldLeft = el.style.left,\n                                oldRsLeft = el.runtimeStyle.left;\n                            el.runtimeStyle.left = el.currentStyle.left;\n                            el.style.left = value || 0;\n                            value = el.style.pixelLeft + \"px\";\n                            el.style.left = oldLeft;\n                            el.runtimeStyle.left = oldRsLeft;\n                            return value;\n                        })(value);\n                    }\n                    return value;\n                }\n            }\n        },\n\n        slide: function(el, dir, speed, callback, recalcMaxHeight) {\n            if (!el || (dir == 'up' && mUtil.visible(el) === false) || (dir == 'down' && mUtil.visible(el) === true)) {\n                return;\n            }\n\n            speed = (speed ? speed : 600);\n            var calcHeight = mUtil.actualHeight(el);\n            var calcPaddingTop = false;\n            var calcPaddingBottom = false;\n\n            if (mUtil.css(el, 'padding-top') && mUtil.data(el).has('slide-padding-top') !== true) {\n                mUtil.data(el).set('slide-padding-top', mUtil.css(el, 'padding-top'));\n            }\n\n            if (mUtil.css(el, 'padding-bottom') && mUtil.data(el).has('slide-padding-bottom') !== true) {\n                mUtil.data(el).set('slide-padding-bottom', mUtil.css(el, 'padding-bottom'));\n            }\n\n            if (mUtil.data(el).has('slide-padding-top')) {\n                calcPaddingTop = parseInt(mUtil.data(el).get('slide-padding-top'));\n            }\n\n            if (mUtil.data(el).has('slide-padding-bottom')) {\n                calcPaddingBottom = parseInt(mUtil.data(el).get('slide-padding-bottom'));\n            }\n\n            if (dir == 'up') { // up\n                el.style.cssText = 'display: block; overflow: hidden;';\n\n                if (calcPaddingTop) {\n                    mUtil.animate(0, calcPaddingTop, speed, function(value) {\n                        el.style.paddingTop = (calcPaddingTop - value) + 'px';\n                    }, 'linear');\n                }\n\n                if (calcPaddingBottom) {\n                    mUtil.animate(0, calcPaddingBottom, speed, function(value) {\n                        el.style.paddingBottom = (calcPaddingBottom - value) + 'px';\n                    }, 'linear');\n                }\n\n                mUtil.animate(0, calcHeight, speed, function(value) {\n                    el.style.height = (calcHeight - value) + 'px';\n                }, 'linear', function() {\n                    callback();\n                    el.style.height = '';\n                    el.style.display = 'none';\n                });\n\n\n            } else if (dir == 'down') { // down\n                el.style.cssText = 'display: block; overflow: hidden;';\n\n                if (calcPaddingTop) {\n                    mUtil.animate(0, calcPaddingTop, speed, function(value) {\n                        el.style.paddingTop = value + 'px';\n                    }, 'linear', function() {\n                        el.style.paddingTop = '';\n                    });\n                }\n\n                if (calcPaddingBottom) {\n                    mUtil.animate(0, calcPaddingBottom, speed, function(value) {\n                        el.style.paddingBottom = value + 'px';\n                    }, 'linear', function() {\n                        el.style.paddingBottom = '';\n                    });\n                }\n\n                mUtil.animate(0, calcHeight, speed, function(value) {\n                    el.style.height = value + 'px';\n                }, 'linear', function() {\n                    callback();\n                    el.style.height = '';\n                    el.style.display = '';\n                    el.style.overflow = '';\n                });\n            }\n        },\n\n        slideUp: function(el, speed, callback) {\n            mUtil.slide(el, 'up', speed, callback);\n        },\n\n        slideDown: function(el, speed, callback) {\n            mUtil.slide(el, 'down', speed, callback);\n        },\n\n        show: function(el, display) {\n            el.style.display = (display ? display : 'block');\n        },\n\n        hide: function(el) {\n            el.style.display = 'none';\n        },\n\n        addEvent: function(el, type, handler, one) {\n            el = mUtil.get(el);\n            if (typeof el !== 'undefined') {\n                el.addEventListener(type, handler);\n            }\n        },\n\n        removeEvent: function(el, type, handler) {\n            el = mUtil.get(el);\n            el.removeEventListener(type, handler);\n        },\n\n        on: function(element, selector, event, handler) {\n            if (!selector) {\n                return;\n            }\n\n            var eventId = mUtil.getUniqueID('event');\n\n            mUtilDelegatedEventHandlers[eventId] = function(e) {\n                var targets = element.querySelectorAll(selector);\n                var target = e.target;\n\n                while (target && target !== element) {\n                    for (var i = 0, j = targets.length; i < j; i++) {\n                        if (target === targets[i]) {\n                            handler.call(target, e);\n                        }\n                    }\n\n                    target = target.parentNode;\n                }\n            }\n\n            mUtil.addEvent(element, event, mUtilDelegatedEventHandlers[eventId]);\n\n            return eventId;\n        },\n\n        off: function(element, event, eventId) {\n            if (!element || !mUtilDelegatedEventHandlers[eventId]) {\n                return;\n            }\n\n            mUtil.removeEvent(element, event, mUtilDelegatedEventHandlers[eventId]);\n\n            delete mUtilDelegatedEventHandlers[eventId];\n        },\n\n        one: function onetime(el, type, callback) {\n            el = mUtil.get(el);\n\n            el.addEventListener(type, function(e) {\n                // remove event\n                e.target.removeEventListener(e.type, arguments.callee);\n                // call handler\n                return callback(e);\n            });\n        },\n\n        hash: function(str) {\n            var hash = 0,\n                i, chr;\n\n            if (str.length === 0) return hash;\n            for (i = 0; i < str.length; i++) {\n                chr = str.charCodeAt(i);\n                hash = ((hash << 5) - hash) + chr;\n                hash |= 0; // Convert to 32bit integer\n            }\n\n            return hash;\n        },\n\n        animateClass: function(el, animationName, callback) {\n            var animationEnd = 'webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend';\n\n            mUtil.addClass(el, 'animated ' + animationName);\n\n            mUtil.one(el, animationEnd, function() {\n                mUtil.removeClass(el, 'animated ' + animationName);\n            });\n\n            if (callback) {\n                mUtil.one(el.animationEnd, callback);\n            }\n        },\n\n        animateDelay: function(el, value) {\n            var vendors = ['webkit-', 'moz-', 'ms-', 'o-', ''];\n            for (var i = 0; i < vendors.length; i++) {\n                mUtil.css(el, vendors[i] + 'animation-delay', value);\n            }\n        },\n\n        animateDuration: function(el, value) {\n            var vendors = ['webkit-', 'moz-', 'ms-', 'o-', ''];\n            for (var i = 0; i < vendors.length; i++) {\n                mUtil.css(el, vendors[i] + 'animation-duration', value);\n            }\n        },\n\n        scrollTo: function(target, offset, duration) {\n            var duration = duration ? duration : 500;\n            var target = mUtil.get(target);\n            var targetPos = target ? mUtil.offset(target).top : 0;\n            var scrollPos = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;\n            var from, to;\n\n            if (targetPos > scrollPos) {\n                from = targetPos;\n                to = scrollPos;\n            } else {\n                from = scrollPos;\n                to = targetPos;\n            }\n\n            if (offset) {\n                to += offset;\n            }\n\n            mUtil.animate(from, to, duration, function(value) {\n                document.documentElement.scrollTop = value;\n                document.body.parentNode.scrollTop = value;\n                document.body.scrollTop = value;\n            }); //, easing, done\n        },\n\n        scrollTop: function(offset, duration) {\n            mUtil.scrollTo(null, offset, duration);\n        },\n\n        isArray: function(obj) {\n            return obj && Array.isArray(obj);\n        },\n\n        ready: function(callback) {\n            if (document.attachEvent ? document.readyState === \"complete\" : document.readyState !== \"loading\") {\n                callback();\n            } else {\n                document.addEventListener('DOMContentLoaded', callback);\n            }\n        },\n\n        isEmpty: function(obj) {\n            for (var prop in obj) {\n                if (obj.hasOwnProperty(prop)) {\n                    return false;\n                }\n            }\n\n            return true;\n        },\n\n        numberString: function(nStr) {\n            nStr += '';\n            var x = nStr.split('.');\n            var x1 = x[0];\n            var x2 = x.length > 1 ? '.' + x[1] : '';\n            var rgx = /(\\d+)(\\d{3})/;\n            while (rgx.test(x1)) {\n                x1 = x1.replace(rgx, '$1' + ',' + '$2');\n            }\n            return x1 + x2;\n        },\n\n        detectIE: function() {\n            var ua = window.navigator.userAgent;\n\n            // Test values; Uncomment to check result â¦\n\n            // IE 10\n            // ua = 'Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; Trident/6.0)';\n\n            // IE 11\n            // ua = 'Mozilla/5.0 (Windows NT 6.3; Trident/7.0; rv:11.0) like Gecko';\n\n            // Edge 12 (Spartan)\n            // ua = 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.71 Safari/537.36 Edge/12.0';\n\n            // Edge 13\n            // ua = 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/46.0.2486.0 Safari/537.36 Edge/13.10586';\n\n            var msie = ua.indexOf('MSIE ');\n            if (msie > 0) {\n                // IE 10 or older => return version number\n                return parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);\n            }\n\n            var trident = ua.indexOf('Trident/');\n            if (trident > 0) {\n                // IE 11 => return version number\n                var rv = ua.indexOf('rv:');\n                return parseInt(ua.substring(rv + 3, ua.indexOf('.', rv)), 10);\n            }\n\n            var edge = ua.indexOf('Edge/');\n            if (edge > 0) {\n                // Edge (IE 12+) => return version number\n                return parseInt(ua.substring(edge + 5, ua.indexOf('.', edge)), 10);\n            }\n\n            // other browser\n            return false;\n        },\n\n        isRTL: function() {\n            return (mUtil.attr(mUtil.get('html'), 'direction') == 'rtl');\n        },\n\n        //== Scroller\n        scrollerInit: function(element, options) {\n            //== Define init function\n            function init() {\n                var ps;\n                var height;\n\n                if (options.height instanceof Function) {\n                    height = parseInt(options.height.call());\n                } else {\n                    height = parseInt(options.height);\n                }\n\n                //== Destroy scroll on table and mobile modes\n                if (options.disableForMobile && mUtil.isInResponsiveRange('tablet-and-mobile')) {\n                    if (ps = mUtil.data(element).get('ps')) {\n                        if (options.resetHeightOnDestroy) {\n                            mUtil.css(element, 'height', 'auto');\n                        } else {\n                            mUtil.css(element, 'overflow', 'auto');\n                            if (height > 0) {\n                                mUtil.css(element, 'height', height + 'px');\n                            }\n                        }\n\n                        ps.destroy();\n                        ps = mUtil.data(element).remove('ps');\n                    } else if (height > 0){\n                        mUtil.css(element, 'overflow', 'auto');\n                        mUtil.css(element, 'height', height + 'px');\n                    }\n\n                    return;\n                }\n\n                if (height > 0) {\n                    mUtil.css(element, 'height', height + 'px');\n                }\n\n                mUtil.css(element, 'overflow', 'hidden');\n\n                //== Init scroll\n                if (ps = mUtil.data(element).get('ps')) {\n                    ps.update();\n                } else {\n                    mUtil.addClass(element, 'm-scroller');\n                    ps = new PerfectScrollbar(element, {\n                        wheelSpeed: 0.5,\n                        swipeEasing: true,\n                        wheelPropagation: false,\n                        minScrollbarLength: 40,\n                        suppressScrollX: mUtil.isRTL() ? false : true\n                    });\n\n                    mUtil.data(element).set('ps', ps);\n                }\n            }\n\n            //== Init\n            init();\n\n            //== Handle window resize\n            if (options.handleWindowResize) {\n                mUtil.addResizeHandler(function() {\n                    init();\n                });\n            }\n        },\n\n        scrollerUpdate: function(element) {\n            var ps;\n            if (ps = mUtil.data(element).get('ps')) {\n                ps.update();\n            }\n        },\n\n        scrollersUpdate: function(parent) {\n            var scrollers = mUtil.findAll(parent, '.ps');\n            for (var i = 0, len = scrollers.length; i < len; i++) {\n                mUtil.scrollerUpdate(scrollers[i]);\n            }\n        },\n\n        scrollerTop: function(element) {\n            var ps;\n            if (ps = mUtil.data(element).get('ps')) {\n                element.scrollTop = 0;\n            }\n        },\n\n        scrollerDestroy: function(element) {\n            var ps;\n            if (ps = mUtil.data(element).get('ps')) {\n                ps.destroy();\n                ps = mUtil.data(element).remove('ps');\n            }\n        }\n    }\n}();\n\n//== Initialize mUtil class on document ready\nmUtil.ready(function() {\n    mUtil.init();\n});\n/**\n * @class mApp  Metronic App class\n */\n\nvar mApp = function() {\n\n    /** @type {object} colors State colors **/\n    var colors = {\n        brand:      '#716aca',\n        metal:      '#c4c5d6',\n        light:      '#ffffff',\n        accent:     '#00c5dc',\n        primary:    '#5867dd',\n        success:    '#34bfa3',\n        info:       '#36a3f7',\n        warning:    '#ffb822',\n        danger:     '#f4516c',\n        focus:      '#9816f4'\n    }\n\n    /**\n     * Initializes bootstrap tooltip\n     */\n    var initTooltip = function(el) {\n        var skin = el.data('skin') ? 'm-tooltip--skin-' + el.data('skin') : '';\n        var width = el.data('width') == 'auto' ? 'm-tooltop--auto-width' : '';\n        var triggerValue = el.data('trigger') ? el.data('trigger') : 'hover';\n        var placement = el.data('placement') ? el.data('placement') : 'left';\n\n        el.tooltip({\n            trigger: triggerValue,\n            template: '<div class=\"m-tooltip ' + skin + ' ' + width + ' tooltip\" role=\"tooltip\">\\\n                <div class=\"arrow\"></div>\\\n                <div class=\"tooltip-inner\"></div>\\\n            </div>'\n        });\n    }\n\n    /**\n     * Initializes bootstrap tooltips\n     */\n    var initTooltips = function() {\n        // init bootstrap tooltips\n        $('[data-toggle=\"m-tooltip\"]').each(function() {\n            initTooltip($(this));\n        });\n    }\n\n    /**\n     * Initializes bootstrap popover\n     */\n    var initPopover = function(el) {\n        var skin = el.data('skin') ? 'm-popover--skin-' + el.data('skin') : '';\n        var triggerValue = el.data('trigger') ? el.data('trigger') : 'hover';\n\n        el.popover({\n            trigger: triggerValue,\n            template: '\\\n            <div class=\"m-popover ' + skin + ' popover\" role=\"tooltip\">\\\n                <div class=\"arrow\"></div>\\\n                <h3 class=\"popover-header\"></h3>\\\n                <div class=\"popover-body\"></div>\\\n            </div>'\n        });\n    }\n\n    /**\n     * Initializes bootstrap popovers\n     */\n    var initPopovers = function() {\n        // init bootstrap popover\n        $('[data-toggle=\"m-popover\"]').each(function() {\n            initPopover($(this));\n        });\n    }\n\n    /**\n     * Initializes bootstrap file input\n     */\n    var initFileInput = function() {\n        // init bootstrap popover\n        $('.custom-file-input').on('change',function(){\n            var fileName = $(this).val();\n            $(this).next('.custom-file-label').addClass(\"selected\").html(fileName);\n        });\n    }\n\n    /**\n     * Initializes metronic portlet\n     */\n    var initPortlet = function(el, options) {\n        // init portlet tools\n        var el = $(el);\n        var portlet = new mPortlet(el[0], options);\n    }\n\n    /**\n     * Initializes metronic portlets\n     */\n    var initPortlets = function() {\n        // init portlet tools\n        $('[m-portlet=\"true\"]').each(function() {\n            var el = $(this);\n\n            if ( el.data('portlet-initialized') !== true ) {\n                initPortlet(el, {});\n                el.data('portlet-initialized', true);\n            }\n        });\n    }\n\n    /**\n     * Initializes scrollable contents\n     */\n    var initScrollers = function() {\n        $('[data-scrollable=\"true\"]').each(function(){\n            var el = $(this);\n            mUtil.scrollerInit(this, {disableForMobile: true, handleWindowResize: true, height: function() {\n                    if (mUtil.isInResponsiveRange('tablet-and-mobile') && el.data('mobile-height')) {\n                        return el.data('mobile-height');\n                    } else {\n                        return el.data('height');\n                    }\n                }});\n        });\n    }\n\n    /**\n     * Initializes bootstrap alerts\n     */\n    var initAlerts = function() {\n        // init bootstrap popover\n        $('body').on('click', '[data-close=alert]', function() {\n            $(this).closest('.alert').hide();\n        });\n    }\n\n    /**\n     * Initializes Metronic custom tabs\n     */\n    var initCustomTabs = function() {\n        // init bootstrap popover\n        $('[data-tab-target]').each(function() {\n            if ($(this).data('tabs-initialized') == true ) {\n                return;\n            }\n\n            $(this).click(function(e) {\n                e.preventDefault();\n\n                var tab = $(this);\n                var tabs = tab.closest('[data-tabs=\"true\"]');\n                var contents = $( tabs.data('tabs-contents') );\n                var content = $( tab.data('tab-target') );\n\n                tabs.find('.m-tabs__item.m-tabs__item--active').removeClass('m-tabs__item--active');\n                tab.addClass('m-tabs__item--active');\n\n                contents.find('.m-tabs-content__item.m-tabs-content__item--active').removeClass('m-tabs-content__item--active');\n                content.addClass('m-tabs-content__item--active');\n            });\n\n            $(this).data('tabs-initialized', true);\n        });\n    }\n\n    var hideTouchWarning = function() {\n        jQuery.event.special.touchstart = {\n            setup: function(_, ns, handle) {\n                if (typeof this === 'function')\n                    if (ns.includes('noPreventDefault')) {\n                        this.addEventListener('touchstart', handle, {passive: false});\n                    } else {\n                        this.addEventListener('touchstart', handle, {passive: true});\n                    }\n            },\n        };\n        jQuery.event.special.touchmove = {\n            setup: function(_, ns, handle) {\n                if (typeof this === 'function')\n                    if (ns.includes('noPreventDefault')) {\n                        this.addEventListener('touchmove', handle, {passive: false});\n                    } else {\n                        this.addEventListener('touchmove', handle, {passive: true});\n                    }\n            },\n        };\n        jQuery.event.special.wheel = {\n            setup: function(_, ns, handle) {\n                if (typeof this === 'function')\n                    if (ns.includes('noPreventDefault')) {\n                        this.addEventListener('wheel', handle, {passive: false});\n                    } else {\n                        this.addEventListener('wheel', handle, {passive: true});\n                    }\n            },\n        };\n    };\n\n    return {\n        /**\n         * Main class initializer\n         */\n        init: function(options) {\n            if (options && options.colors) {\n                colors = options.colors;\n            }\n            mApp.initComponents();\n        },\n\n        /**\n         * Initializes components\n         */\n        initComponents: function() {\n            hideTouchWarning();\n            initScrollers();\n            initTooltips();\n            initPopovers();\n            initAlerts();\n            initPortlets();\n            initFileInput();\n            initCustomTabs();\n        },\n\n\n        /**\n         * Init custom tabs\n         */\n        initCustomTabs: function() {\n            initCustomTabs();\n        },\n\n        /**\n         *\n         * @param {object} el jQuery element object\n         */\n        // wrJangoer function to scroll(focus) to an element\n        initTooltips: function() {\n            initTooltips();\n        },\n\n        /**\n         *\n         * @param {object} el jQuery element object\n         */\n        // wrJangoer function to scroll(focus) to an element\n        initTooltip: function(el) {\n            initTooltip(el);\n        },\n\n        /**\n         *\n         * @param {object} el jQuery element object\n         */\n        // wrJangoer function to scroll(focus) to an element\n        initPopovers: function() {\n            initPopovers();\n        },\n\n        /**\n         *\n         * @param {object} el jQuery element object\n         */\n        // wrJangoer function to scroll(focus) to an element\n        initPopover: function(el) {\n            initPopover(el);\n        },\n\n        /**\n         *\n         * @param {object} el jQuery element object\n         */\n        // function to init portlet\n        initPortlet: function(el, options) {\n            initPortlet(el, options);\n        },\n\n        /**\n         *\n         * @param {object} el jQuery element object\n         */\n        // function to init portlets\n        initPortlets: function() {\n            initPortlets();\n        },\n\n        /**\n         * Blocks element with loading indiciator using http://malsup.com/jquery/block/\n         * @param {object} target jQuery element object\n         * @param {object} options\n         */\n        block: function(target, options) {\n            var el = $(target);\n\n            options = $.extend(true, {\n                opacity: 0.03,\n                overlayColor: '#000000',\n                state: 'brand',\n                type: 'loader',\n                size: 'lg',\n                centerX: true,\n                centerY: true,\n                message: '',\n                shadow: true,\n                width: 'auto'\n            }, options);\n\n            var skin;\n            var state;\n            var loading;\n\n            if (options.type == 'spinner') {\n                skin = options.skin ? 'm-spinner--skin-' + options.skin : '';\n                state = options.state ? 'm-spinner--' + options.state : '';\n                loading = '<div class=\"m-spinner ' + skin + ' ' + state + '\"></div';\n            } else {\n                skin = options.skin ? 'm-loader--skin-' + options.skin : '';\n                state = options.state ? 'm-loader--' + options.state : '';\n                size = options.size ? 'm-loader--' + options.size : '';\n                loading = '<div class=\"m-loader ' + skin + ' ' + state + ' ' + size + '\"></div';\n            }\n\n            if (options.message && options.message.length > 0) {\n                var classes = 'm-blockui ' + (options.shadow === false ? 'm-blockui-no-shadow' : '');\n\n                html = '<div class=\"' + classes + '\"><span>' + options.message + '</span><span>' + loading + '</span></div>';\n\n                var el = document.createElement('div');\n                mUtil.get('body').prepend(el);\n                mUtil.addClass(el, classes);\n                el.innerHTML = '<span>' + options.message + '</span><span>' + loading + '</span>';\n                options.width = mUtil.actualWidth(el) + 10;\n                mUtil.remove(el);\n\n                if (target == 'body') {\n                    html = '<div class=\"' + classes + '\" style=\"margin-left:-'+ (options.width / 2) +'px;\"><span>' + options.message + '</span><span>' + loading + '</span></div>';\n                }\n            } else {\n                html = loading;\n            }\n\n            var params = {\n                message: html,\n                centerY: options.centerY,\n                centerX: options.centerX,\n                css: {\n                    top: '30%',\n                    left: '50%',\n                    border: '0',\n                    padding: '0',\n                    backgroundColor: 'none',\n                    width: options.width\n                },\n                overlayCSS: {\n                    backgroundColor: options.overlayColor,\n                    opacity: options.opacity,\n                    cursor: 'wait',\n                    zIndex: '10'\n                },\n                onUnblock: function() {\n                    if (el && el[0]) {\n                        mUtil.css(el[0], 'position', '');\n                        mUtil.css(el[0], 'zoom', '');\n                    }\n                }\n            };\n\n            if (target == 'body') {\n                params.css.top = '50%';\n                $.blockUI(params);\n            } else {\n                var el = $(target);\n                el.block(params);\n            }\n        },\n\n        /**\n         * Un-blocks the blocked element\n         * @param {object} target jQuery element object\n         */\n        unblock: function(target) {\n            if (target && target != 'body') {\n                $(target).unblock();\n            } else {\n                $.unblockUI();\n            }\n        },\n\n        /**\n         * Blocks the page body element with loading indicator\n         * @param {object} options\n         */\n        blockPage: function(options) {\n            return mApp.block('body', options);\n        },\n\n        /**\n         * Un-blocks the blocked page body element\n         */\n        unblockPage: function() {\n            return mApp.unblock('body');\n        },\n\n        /**\n         * Enable loader progress for button and other elements\n         * @param {object} target jQuery element object\n         * @param {object} options\n         */\n        progress: function(target, options) {\n            var skin = (options && options.skin) ? options.skin : 'light';\n            var alignment = (options && options.alignment) ? options.alignment : 'right';\n            var size = (options && options.size) ? 'm-spinner--' + options.size : '';\n            var classes = 'm-loader ' + 'm-loader--' + skin + ' m-loader--' + alignment + ' m-loader--' + size;\n\n            mApp.unprogress(target);\n\n            $(target).addClass(classes);\n            $(target).data('progress-classes', classes);\n        },\n\n        /**\n         * Disable loader progress for button and other elements\n         * @param {object} target jQuery element object\n         */\n        unprogress: function(target) {\n            $(target).removeClass($(target).data('progress-classes'));\n        },\n\n        /**\n         * Gets state color's hex code by color name\n         * @param {string} name Color name\n         * @returns {string}\n         */\n        getColor: function(name) {\n            return colors[name];\n        }\n    };\n}();\n\n//== Initialize mApp class on document ready\n$(document).on('turbolinks:load', () => {\n    mApp.init({});\n});\n(function($) {\n\n    var pluginName = 'mDatatable';\n    var pfx = 'm-';\n    var util = mUtil;\n    var app = mApp;\n\n    if (typeof util === 'undefined') throw new Error('Util class is required and must be included before ' + pluginName);\n\n    // plugin setup\n    $.fn[pluginName] = function(options) {\n        if ($(this).length === 0) {\n            console.log('No ' + pluginName + ' element exist.');\n            return;\n        }\n\n        // global variables\n        var datatable = this;\n\n        // debug enabled?\n        // 1) state will be cleared on each refresh\n        // 2) enable some logs\n        // 3) etc.\n        datatable.debug = false;\n\n        datatable.API = {\n            record: null,\n            value: null,\n            params: null,\n        };\n\n        var Plugin = {\n            /********************\n             ** PRIVATE METHODS\n             ********************/\n            isInit: false,\n            offset: 110,\n            stateId: 'meta',\n            ajaxParams: {},\n\n            init: function(options) {\n                var isHtmlTable = false;\n                // data source option empty is normal table\n                if (options.data.source === null) {\n                    Plugin.extractTable();\n                    isHtmlTable = true;\n                }\n\n                Plugin.setupBaseDOM.call();\n                Plugin.setupDOM(datatable.table);\n                Plugin.spinnerCallback(true);\n\n                // set custom query from options\n                Plugin.setDataSourceQuery(Plugin.getOption('data.source.read.params.query'));\n\n                // on event after layout had done setup, show datatable\n                $(datatable).on(pfx + 'datatable--on-layout-updated', Plugin.afterRender);\n\n                if (datatable.debug) Plugin.stateRemove(Plugin.stateId);\n\n                // initialize extensions\n                $.each(Plugin.getOption('extensions'), function(extName, extOptions) {\n                    if (typeof $.fn[pluginName][extName] === 'function')\n                        new $.fn[pluginName][extName](datatable, extOptions);\n                });\n\n                // get data\n                if (options.data.type === 'remote' || options.data.type === 'local') {\n                    if (options.data.saveState === false\n                        || options.data.saveState.cookie === false\n                        && options.data.saveState.webstorage === false) {\n                        Plugin.stateRemove(Plugin.stateId);\n                    }\n                    // get data for local datatable and local table\n                    if (options.data.type === 'local' && typeof options.data.source === 'object') {\n                        datatable.dataSet = datatable.originalDataSet = Plugin.dataMapCallback(options.data.source);\n                    }\n                    Plugin.dataRender();\n                }\n\n                if (!isHtmlTable) {\n                    // if not a html table, setup header\n                    Plugin.setHeadTitle();\n                    if (Plugin.getOption('layout.footer')) {\n                        Plugin.setHeadTitle(datatable.tableFoot);\n                    }\n                }\n\n                // hide header\n                if (typeof options.layout.header !== 'undefined' &&\n                    options.layout.header === false) {\n                    $(datatable.table).find('thead').remove();\n                }\n\n                // hide footer\n                if (typeof options.layout.footer !== 'undefined' &&\n                    options.layout.footer === false) {\n                    $(datatable.table).find('tfoot').remove();\n                }\n\n                // for normal and local data type, run layoutUpdate\n                if (options.data.type === null ||\n                    options.data.type === 'local') {\n                    Plugin.setupCellField.call();\n                    Plugin.setupTemplateCell.call();\n\n                    // setup nested datatable, if option enabled\n                    Plugin.setupSubDatatable.call();\n\n                    // setup extra system column properties\n                    Plugin.setupSystemColumn.call();\n                    Plugin.redraw();\n                }\n\n                $(window).resize(Plugin.fullRender);\n\n                $(datatable).height('');\n\n                $(Plugin.getOption('search.input')).on('keyup', function(e) {\n                    if (Plugin.getOption('search.onEnter') && e.which !== 13) return;\n                    Plugin.search($(this).val());\n                });\n\n                return datatable;\n            },\n\n            /**\n             * Extract static HTML table content into datasource\n             */\n            extractTable: function() {\n                var columns = [];\n                var headers = $(datatable).find('tr:first-child th').get().map(function(cell, i) {\n                    var field = $(cell).data('field');\n                    if (typeof field === 'undefined') {\n                        field = $(cell).text().trim();\n                    }\n                    var column = {field: field, title: field};\n                    for (var ii in options.columns) {\n                        if (options.columns[ii].field === field) {\n                            column = $.extend(true, {}, options.columns[ii], column);\n                        }\n                    }\n                    columns.push(column);\n                    return field;\n                });\n                // auto create columns config\n                options.columns = columns;\n\n                var rowProp = [];\n                var source = [];\n\n                $(datatable).find('tr').each(function() {\n                    if ($(this).find('td').length) {\n                        rowProp.push($(this).prop('attributes'));\n                    }\n                    var td = {};\n                    $(this).find('td').each(function(i, cell) {\n                        td[headers[i]] = cell.innerHTML.trim();\n                    });\n                    if (!util.isEmpty(td)) {\n                        source.push(td);\n                    }\n                });\n\n                options.data.attr.rowProps = rowProp;\n                options.data.source = source;\n            },\n\n            /**\n             * One time layout update on init\n             */\n            layoutUpdate: function() {\n                // setup nested datatable, if option enabled\n                Plugin.setupSubDatatable.call();\n\n                // setup extra system column properties\n                Plugin.setupSystemColumn.call();\n\n                // setup cell hover event\n                Plugin.setupHover.call();\n\n                if (typeof options.detail === 'undefined'\n                    // temporary disable lock column in subtable\n                    && Plugin.getDepth() === 1) {\n                    // lock columns handler\n                    Plugin.lockTable.call();\n                }\n\n                Plugin.columnHide.call();\n\n                Plugin.resetScroll();\n\n                if (!Plugin.isInit) {\n                    $(datatable).trigger(pfx + 'datatable--on-init', {table: $(datatable.wrap).attr('id'), options: options});\n                    Plugin.isInit = true;\n                }\n\n                $(datatable).trigger(pfx + 'datatable--on-layout-updated', {table: $(datatable.wrap).attr('id')});\n            },\n\n            lockTable: function() {\n                // todo; revise lock table responsive\n                var lock = {\n                    lockEnabled: false,\n                    init: function() {\n                        // check if table should be locked columns\n                        lock.lockEnabled = Plugin.lockEnabledColumns();\n                        if (lock.lockEnabled.left.length === 0 &&\n                            lock.lockEnabled.right.length === 0) {\n                            return;\n                        }\n                        lock.enable();\n                    },\n                    enable: function() {\n                        var enableLock = function(tablePart) {\n                            // check if already has lock column\n                            if ($(tablePart).find('.' + pfx + 'datatable__lock').length > 0) {\n                                Plugin.log('Locked container already exist in: ', tablePart);\n                                return;\n                            }\n                            // check if no rows exists\n                            if ($(tablePart).find('.' + pfx + 'datatable__row').length === 0) {\n                                Plugin.log('No row exist in: ', tablePart);\n                                return;\n                            }\n\n                            // locked div container\n                            var lockLeft = $('<div/>').addClass(pfx + 'datatable__lock ' + pfx + 'datatable__lock--left');\n                            var lockScroll = $('<div/>').addClass(pfx + 'datatable__lock ' + pfx + 'datatable__lock--scroll');\n                            var lockRight = $('<div/>').addClass(pfx + 'datatable__lock ' + pfx + 'datatable__lock--right');\n\n                            $(tablePart).find('.' + pfx + 'datatable__row').each(function() {\n                                var rowLeft = $('<tr/>').addClass(pfx + 'datatable__row').appendTo(lockLeft);\n                                var rowScroll = $('<tr/>').addClass(pfx + 'datatable__row').appendTo(lockScroll);\n                                var rowRight = $('<tr/>').addClass(pfx + 'datatable__row').appendTo(lockRight);\n                                $(this).find('.' + pfx + 'datatable__cell').each(function() {\n                                    var locked = $(this).data('locked');\n                                    if (typeof locked !== 'undefined') {\n                                        if (typeof locked.left !== 'undefined' || locked === true) {\n                                            // default locked to left\n                                            $(this).appendTo(rowLeft);\n                                        }\n                                        if (typeof locked.right !== 'undefined') {\n                                            $(this).appendTo(rowRight);\n                                        }\n                                    } else {\n                                        $(this).appendTo(rowScroll);\n                                    }\n                                });\n                                // remove old row\n                                $(this).remove();\n                            });\n\n                            if (lock.lockEnabled.left.length > 0) {\n                                $(datatable.wrap).addClass(pfx + 'datatable--lock');\n                                $(lockLeft).appendTo(tablePart);\n                            }\n                            if (lock.lockEnabled.left.length > 0 || lock.lockEnabled.right.length > 0) {\n                                $(lockScroll).appendTo(tablePart);\n                            }\n                            if (lock.lockEnabled.right.length > 0) {\n                                $(datatable.wrap).addClass(pfx + 'datatable--lock');\n                                $(lockRight).appendTo(tablePart);\n                            }\n                        };\n\n                        $(datatable.table).find('thead,tbody,tfoot').each(function() {\n                            var tablePart = this;\n                            if ($(this).find('.' + pfx + 'datatable__lock').length === 0) {\n                                $(this).ready(function() {\n                                    enableLock(tablePart);\n                                });\n                            }\n                        });\n                    },\n                };\n                lock.init();\n                return lock;\n            },\n\n            /**\n             * Render everything for resize\n             */\n            fullRender: function() {\n                if (Plugin.isLocked()) {\n\n                    $(datatable.tableHead).empty();\n                    Plugin.setHeadTitle();\n                    if (Plugin.getOption('layout.footer')) {\n                        $(datatable.tableFoot).empty();\n                        Plugin.setHeadTitle(datatable.tableFoot);\n                    }\n\n                    // todo; full render datatable for specific condition only\n                    Plugin.spinnerCallback(true);\n                    $(datatable.wrap).removeClass(pfx + 'datatable--loaded');\n\n                    Plugin.insertData();\n                }\n            },\n\n            lockEnabledColumns: function() {\n                var screen = $(window).width();\n                var columns = options.columns;\n                var enabled = {left: [], right: []};\n                $.each(columns, function(i, column) {\n                    if (typeof column.locked !== 'undefined') {\n                        if (typeof column.locked.left !== 'undefined') {\n                            if (util.getBreakpoint(column.locked.left) <= screen) {\n                                enabled['left'].push(column.locked.left);\n                            }\n                        }\n                        if (typeof column.locked.right !== 'undefined') {\n                            if (util.getBreakpoint(column.locked.right) <= screen) {\n                                enabled['right'].push(column.locked.right);\n                            }\n                        }\n                    }\n                });\n                return enabled;\n            },\n\n            /**\n             * After render event, called by '+pfx+'-datatable--on-layout-updated\n             * @param e\n             * @param args\n             */\n            afterRender: function(e, args) {\n                if (args.table == $(datatable.wrap).attr('id')) {\n                    $(datatable).ready(function() {\n                        if (!Plugin.isLocked()) {\n                            Plugin.redraw();\n                            // work on non locked columns\n                            if (Plugin.getOption('rows.autoHide')) {\n                                Plugin.autoHide();\n                                // reset row\n                                $(datatable.table).find('.' + pfx + 'datatable__row').css('height', '');\n                            }\n                        }\n\n                        Plugin.rowEvenOdd.call();\n\n                        // redraw locked columns table\n                        if (Plugin.isLocked()) Plugin.redraw();\n                        $(datatable.tableBody).css('visibility', '');\n                        $(datatable.wrap).addClass(pfx + 'datatable--loaded');\n\n                        Plugin.scrollbar.call();\n\n                        // Plugin.hoverColumn.call();\n                        Plugin.spinnerCallback(false);\n                        Plugin.sorting.call();\n                    });\n                }\n            },\n\n            hoverTimer: 0,\n            isScrolling: false,\n            setupHover: function() {\n                $(window).scroll(function(e) {\n                    // stop hover when scrolling\n                    clearTimeout(Plugin.hoverTimer);\n                    Plugin.isScrolling = true;\n                });\n\n                $(datatable.tableBody).find('.' + pfx + 'datatable__cell').off('mouseenter', 'mouseleave').on('mouseenter', function() {\n                    // reset scroll timer to hover class\n                    Plugin.hoverTimer = setTimeout(function() {\n                        Plugin.isScrolling = false;\n                    }, 200);\n                    if (Plugin.isScrolling) return;\n\n                    // normal table\n                    var row = $(this).closest('.' + pfx + 'datatable__row').addClass(pfx + 'datatable__row--hover');\n                    var index = $(row).index() + 1;\n\n                    // lock table\n                    $(row).closest('.' + pfx + 'datatable__lock').parent().find('.' + pfx + 'datatable__row:nth-child(' + index + ')').addClass(pfx + 'datatable__row--hover');\n                }).on('mouseleave', function() {\n                    // normal table\n                    var row = $(this).closest('.' + pfx + 'datatable__row').removeClass(pfx + 'datatable__row--hover');\n                    var index = $(row).index() + 1;\n\n                    // look table\n                    $(row).closest('.' + pfx + 'datatable__lock').parent().find('.' + pfx + 'datatable__row:nth-child(' + index + ')').removeClass(pfx + 'datatable__row--hover');\n                });\n            },\n\n            /**\n             * Adjust width of locked table containers by resize handler\n             * @returns {number}\n             */\n            adjustLockContainer: function() {\n                if (!Plugin.isLocked()) return 0;\n\n                // refer to head dimension\n                var containerWidth = $(datatable.tableHead).width();\n                var lockLeft = $(datatable.tableHead).find('.' + pfx + 'datatable__lock--left').width();\n                var lockRight = $(datatable.tableHead).find('.' + pfx + 'datatable__lock--right').width();\n\n                if (typeof lockLeft === 'undefined') lockLeft = 0;\n                if (typeof lockRight === 'undefined') lockRight = 0;\n\n                var lockScroll = Math.floor(containerWidth - lockLeft - lockRight);\n                $(datatable.table).find('.' + pfx + 'datatable__lock--scroll').css('width', lockScroll);\n\n                return lockScroll;\n            },\n\n            /**\n             * todo; not in use\n             */\n            dragResize: function() {\n                var pressed = false;\n                var start = undefined;\n                var startX, startWidth;\n                $(datatable.tableHead).find('.' + pfx + 'datatable__cell').mousedown(function(e) {\n                    start = $(this);\n                    pressed = true;\n                    startX = e.pageX;\n                    startWidth = $(this).width();\n                    $(start).addClass(pfx + 'datatable__cell--resizing');\n\n                }).mousemove(function(e) {\n                    if (pressed) {\n                        var i = $(start).index();\n                        var tableBody = $(datatable.tableBody);\n                        var ifLocked = $(start).closest('.' + pfx + 'datatable__lock');\n\n                        if (ifLocked) {\n                            var lockedIndex = $(ifLocked).index();\n                            tableBody = $(datatable.tableBody).find('.' + pfx + 'datatable__lock').eq(lockedIndex);\n                        }\n\n                        $(tableBody).find('.' + pfx + 'datatable__row').each(function(tri, tr) {\n                            $(tr).find('.' + pfx + 'datatable__cell').eq(i).width(startWidth + (e.pageX - startX)).children().width(startWidth + (e.pageX - startX));\n                        });\n\n                        $(start).children().css('width', startWidth + (e.pageX - startX));\n                    }\n\n                }).mouseup(function() {\n                    $(start).removeClass(pfx + 'datatable__cell--resizing');\n                    pressed = false;\n                });\n\n                $(document).mouseup(function() {\n                    $(start).removeClass(pfx + 'datatable__cell--resizing');\n                    pressed = false;\n                });\n            },\n\n            /**\n             * To prepare placeholder for table before content is loading\n             */\n            initHeight: function() {\n                if (options.layout.height && options.layout.scroll) {\n                    var theadHeight = $(datatable.tableHead).find('.' + pfx + 'datatable__row').height();\n                    var tfootHeight = $(datatable.tableFoot).find('.' + pfx + 'datatable__row').height();\n                    var bodyHeight = options.layout.height;\n                    if (theadHeight > 0) {\n                        bodyHeight -= theadHeight;\n                    }\n                    if (tfootHeight > 0) {\n                        bodyHeight -= tfootHeight;\n                    }\n                    $(datatable.tableBody).css('max-height', bodyHeight);\n\n                    // set scrollable area fixed height\n                    $(datatable.tableBody).find('.' + pfx + 'datatable__lock--scroll').css('height', bodyHeight);\n                }\n            },\n\n            /**\n             * Setup base DOM (table, thead, tbody, tfoot) and create if not exist.\n             */\n            setupBaseDOM: function() {\n                // keep original state before datatable initialize\n                datatable.initialDatatable = $(datatable).clone();\n\n                // main element\n                if ($(datatable).prop('tagName') === 'TABLE') {\n                    // if main init element is <table>, wrap with div\n                    datatable.table = $(datatable).removeClass(pfx + 'datatable').addClass(pfx + 'datatable__table');\n                    if ($(datatable.table).parents('.' + pfx + 'datatable').length === 0) {\n                        datatable.table.wrap($('<div/>').addClass(pfx + 'datatable').addClass(pfx + 'datatable--' + options.layout.theme));\n                        datatable.wrap = $(datatable.table).parent();\n                    }\n                } else {\n                    // create table\n                    datatable.wrap = $(datatable).addClass(pfx + 'datatable').addClass(pfx + 'datatable--' + options.layout.theme);\n                    datatable.table = $('<table/>').addClass(pfx + 'datatable__table').appendTo(datatable);\n                }\n\n                if (typeof options.layout.class !== 'undefined') {\n                    $(datatable.wrap).addClass(options.layout.class);\n                }\n\n                $(datatable.table).removeClass(pfx + 'datatable--destroyed').css('display', 'block');\n\n                // force disable save state\n                if (typeof $(datatable).attr('id') === 'undefined') {\n                    Plugin.setOption('data.saveState', false);\n                    $(datatable.table).attr('id', util.getUniqueID(pfx + 'datatable--'));\n                }\n\n                // predefine table height\n                if (Plugin.getOption('layout.minHeight'))\n                    $(datatable.table).css('min-height', Plugin.getOption('layout.minHeight'));\n\n                if (Plugin.getOption('layout.height'))\n                    $(datatable.table).css('max-height', Plugin.getOption('layout.height'));\n\n                // for normal table load\n                if (options.data.type === null) {\n                    $(datatable.table).css('width', '').css('display', '');\n                }\n\n                // create table head element\n                datatable.tableHead = $(datatable.table).find('thead');\n                if ($(datatable.tableHead).length === 0) {\n                    datatable.tableHead = $('<thead/>').prependTo(datatable.table);\n                }\n\n                // create table head element\n                datatable.tableBody = $(datatable.table).find('tbody');\n                if ($(datatable.tableBody).length === 0) {\n                    datatable.tableBody = $('<tbody/>').appendTo(datatable.table);\n                }\n\n                if (typeof options.layout.footer !== 'undefined' &&\n                    options.layout.footer) {\n                    // create table foot element\n                    datatable.tableFoot = $(datatable.table).find('tfoot');\n                    if ($(datatable.tableFoot).length === 0) {\n                        datatable.tableFoot = $('<tfoot/>').appendTo(datatable.table);\n                    }\n                }\n            },\n\n            /**\n             * Set column data before table manipulation.\n             */\n            setupCellField: function(tableParts) {\n                if (typeof tableParts === 'undefined') tableParts = $(datatable.table).children();\n                var columns = options.columns;\n                $.each(tableParts, function(part, tablePart) {\n                    $(tablePart).find('.' + pfx + 'datatable__row').each(function(tri, tr) {\n                        // prepare data\n                        $(tr).find('.' + pfx + 'datatable__cell').each(function(tdi, td) {\n                            if (typeof columns[tdi] !== 'undefined') {\n                                $(td).data(columns[tdi]);\n                            }\n                        });\n                    });\n                });\n            },\n\n            /**\n             * Set column template callback\n             * @param tablePart\n             */\n            setupTemplateCell: function(tablePart) {\n                if (typeof tablePart === 'undefined') tablePart = datatable.tableBody;\n                var columns = options.columns;\n                $(tablePart).find('.' + pfx + 'datatable__row').each(function(tri, tr) {\n                    // row data object, if any\n                    var obj = $(tr).data('obj') || {};\n\n                    // @deprecated in v5.0.6\n                    // obj['getIndex'] = function() {\n                    // \treturn tri;\n                    // };\n                    // @deprecated in v5.0.6\n                    // obj['getDatatable'] = function() {\n                    // \treturn datatable;\n                    // };\n\n                    // @deprecated in v5.0.6\n                    var rowCallback = Plugin.getOption('rows.callback');\n                    if (typeof rowCallback === 'function') {\n                        rowCallback($(tr), obj, tri);\n                    }\n                    // before template row callback\n                    var beforeTemplate = Plugin.getOption('rows.beforeTemplate');\n                    if (typeof beforeTemplate === 'function') {\n                        beforeTemplate($(tr), obj, tri);\n                    }\n                    // if data object is undefined, collect from table\n                    if (typeof obj === 'undefined') {\n                        obj = {};\n                        $(tr).find('.' + pfx + 'datatable__cell').each(function(tdi, td) {\n                            // get column settings by field\n                            var column = $.grep(columns, function(n, i) {\n                                return $(td).data('field') === n.field;\n                            })[0];\n                            if (typeof column !== 'undefined') {\n                                obj[column['field']] = $(td).text();\n                            }\n                        });\n                    }\n\n                    $(tr).find('.' + pfx + 'datatable__cell').each(function(tdi, td) {\n                        // get column settings by field\n                        var column = $.grep(columns, function(n, i) {\n                            return $(td).data('field') === n.field;\n                        })[0];\n                        if (typeof column !== 'undefined') {\n                            // column template\n                            if (typeof column.template !== 'undefined') {\n                                var finalValue = '';\n                                // template string\n                                if (typeof column.template === 'string') {\n                                    finalValue = Plugin.dataPlaceholder(column.template, obj);\n                                }\n                                // template callback function\n                                if (typeof column.template === 'function') {\n                                    finalValue = column.template(obj, tri, datatable);\n                                }\n                                var span = document.createElement('span');\n                                span.innerHTML = finalValue;\n                                // insert to cell, wrap with span\n                                $(td).html(span);\n\n                                // set span overflow\n                                if (typeof column.overflow !== 'undefined') {\n                                    $(span).css('overflow', column.overflow);\n                                    $(span).css('position', 'relative');\n                                }\n                            }\n                        }\n                    });\n\n                    // after template row callback\n                    var afterTemplate = Plugin.getOption('rows.afterTemplate');\n                    if (typeof afterTemplate === 'function') {\n                        afterTemplate($(tr), obj, tri);\n                    }\n                });\n            },\n\n            /**\n             * Setup extra system column properties\n             * Note: selector checkbox, subtable toggle\n             */\n            setupSystemColumn: function() {\n                datatable.dataSet = datatable.dataSet || [];\n                // no records available\n                if (datatable.dataSet.length === 0) return;\n\n                var columns = options.columns;\n                $(datatable.tableBody).find('.' + pfx + 'datatable__row').each(function(tri, tr) {\n                    $(tr).find('.' + pfx + 'datatable__cell').each(function(tdi, td) {\n                        // get column settings by field\n                        var column = $.grep(columns, function(n, i) {\n                            return $(td).data('field') === n.field;\n                        })[0];\n                        if (typeof column !== 'undefined') {\n                            var value = $(td).text();\n\n                            // enable column selector\n                            if (typeof column.selector !== 'undefined' && column.selector !== false) {\n                                // check if checkbox exist\n                                if ($(td).find('.' + pfx + 'checkbox [type=\"checkbox\"]').length > 0) return;\n\n                                $(td).addClass(pfx + 'datatable__cell--check');\n\n                                // append checkbox\n                                var chk = $('<label/>').\n                                addClass(pfx + 'checkbox ' + pfx + 'checkbox--single').\n                                append($('<input/>').attr('type', 'checkbox').attr('value', value).on('click', function() {\n                                    if ($(this).is(':checked')) {\n                                        // add checkbox active row class\n                                        Plugin.setActive(this);\n                                    } else {\n                                        // add checkbox active row class\n                                        Plugin.setInactive(this);\n                                    }\n                                })).\n                                append('&nbsp;<span></span>');\n\n                                // checkbox selector has outline style\n                                if (typeof column.selector.class !== 'undefined') {\n                                    $(chk).addClass(column.selector.class);\n                                }\n\n                                $(td).children().html(chk);\n                            }\n\n                            // enable column subtable toggle\n                            if (typeof column.subtable !== 'undefined' && column.subtable) {\n                                // check if subtable toggle exist\n                                if ($(td).find('.' + pfx + 'datatable__toggle-subtable').length > 0) return;\n                                // append subtable toggle\n                                $(td).\n                                children().\n                                html($('<a/>').\n                                addClass(pfx + 'datatable__toggle-subtable').\n                                attr('href', '#').\n                                attr('data-value', value).\n                                append($('<i/>').addClass(Plugin.getOption('layout.icons.rowDetail.collapse'))));\n                            }\n                        }\n                    });\n                });\n\n                // init checkbox for header/footer\n                var initCheckbox = function(tr) {\n                    // get column settings by field\n                    var column = $.grep(columns, function(n, i) {\n                        return typeof n.selector !== 'undefined' && n.selector !== false;\n                    })[0];\n\n                    if (typeof column !== 'undefined') {\n                        // enable column selector\n                        if (typeof column.selector !== 'undefined' && column.selector !== false) {\n                            var td = $(tr).find('[data-field=\"' + column.field + '\"]');\n                            // check if checkbox exist\n                            if ($(td).find('.' + pfx + 'checkbox [type=\"checkbox\"]').length > 0) return;\n\n                            $(td).addClass(pfx + 'datatable__cell--check');\n\n                            // append checkbox\n                            var chk = $('<label/>').\n                            addClass(pfx + 'checkbox ' + pfx + 'checkbox--single ' + pfx + 'checkbox--all').\n                            append($('<input/>').attr('type', 'checkbox').on('click', function() {\n                                if ($(this).is(':checked')) {\n                                    Plugin.setActiveAll(true);\n                                } else {\n                                    Plugin.setActiveAll(false);\n                                }\n                            })).\n                            append('&nbsp;<span></span>');\n\n                            // checkbox selector has outline style\n                            if (typeof column.selector.class !== 'undefined') {\n                                $(chk).addClass(column.selector.class);\n                            }\n\n                            $(td).children().html(chk);\n                        }\n                    }\n                };\n\n                if (options.layout.header) {\n                    initCheckbox($(datatable.tableHead).find('.' + pfx + 'datatable__row').first());\n                }\n                if (options.layout.footer) {\n                    initCheckbox($(datatable.tableFoot).find('.' + pfx + 'datatable__row').first());\n                }\n            },\n\n            /**\n             * Adjust width to match container size\n             */\n            adjustCellsWidth: function() {\n                // get table width\n                var containerWidth = $(datatable.tableHead).width();\n\n                // offset reserved for sort icon\n                var sortOffset = 20;\n\n                // get total number of columns\n                var columns = $(datatable.tableHead).find('.' + pfx + 'datatable__row:first-child').find('.' + pfx + 'datatable__cell:visible').length;\n                if (columns > 0) {\n                    //  remove reserved sort icon width\n                    containerWidth = containerWidth - (sortOffset * columns);\n                    var minWidth = Math.floor(containerWidth / columns);\n\n                    // minimum width\n                    if (minWidth <= Plugin.offset) {\n                        minWidth = Plugin.offset;\n                    }\n\n                    $(datatable.table).find('.' + pfx + 'datatable__row').find('.' + pfx + 'datatable__cell:visible').each(function(tdi, td) {\n                        var width = minWidth;\n                        var dataWidth = $(td).data('width');\n                        if (typeof dataWidth !== 'undefined') {\n                            width = dataWidth;\n                        }\n                        $(td).children().css('width', parseInt(width));\n                    });\n                }\n\n                return datatable;\n            },\n\n            /**\n             * Adjust height to match container size\n             */\n            adjustCellsHeight: function() {\n                $.each($(datatable.table).children(), function(part, tablePart) {\n                    var totalRows = $(tablePart).find('.' + pfx + 'datatable__row').first().parent().find('.' + pfx + 'datatable__row').length;\n                    for (var i = 1; i <= totalRows; i++) {\n                        var rows = $(tablePart).find('.' + pfx + 'datatable__row:nth-child(' + i + ')');\n                        if ($(rows).length > 0) {\n                            var maxHeight = Math.max.apply(null, $(rows).map(function() {\n                                return $(this).height();\n                            }).get());\n                            $(rows).css('height', Math.ceil(parseInt(maxHeight)));\n                        }\n                    }\n                });\n            },\n\n            /**\n             * Setup table DOM and classes\n             */\n            setupDOM: function(table) {\n                // set table classes\n                $(table).find('> thead').addClass(pfx + 'datatable__head');\n                $(table).find('> tbody').addClass(pfx + 'datatable__body');\n                $(table).find('> tfoot').addClass(pfx + 'datatable__foot');\n                $(table).find('tr').addClass(pfx + 'datatable__row');\n                $(table).find('tr > th, tr > td').addClass(pfx + 'datatable__cell');\n                $(table).find('tr > th, tr > td').each(function(i, td) {\n                    if ($(td).find('span').length === 0) {\n                        $(td).wrapInner($('<span/>').css('width', Plugin.offset));\n                    }\n                });\n            },\n\n            /**\n             * Default scrollbar\n             * @returns {{tableLocked: null, init: init, onScrolling: onScrolling}}\n             */\n            scrollbar: function() {\n                var scroll = {\n                    scrollable: null,\n                    tableLocked: null,\n                    mcsOptions: {\n                        scrollInertia: 0,\n                        autoDraggerLength: true,\n                        autoHideScrollbar: true,\n                        autoExpandScrollbar: false,\n                        alwaysShowScrollbar: 0,\n                        mouseWheel: {\n                            scrollAmount: 120,\n                            preventDefault: false,\n                        },\n                        advanced: {\n                            updateOnContentResize: true,\n                            autoExpandHorizontalScroll: true,\n                        },\n                        theme: 'minimal-dark',\n                    },\n                    init: function() {\n                        var screen = util.getViewPort().width;\n                        // setup scrollable datatable\n                        if (options.layout.scroll) {\n                            // add scrollable datatable class\n                            $(datatable.wrap).addClass(pfx + 'datatable--scroll');\n\n                            var scrollable = $(datatable.tableBody).find('.' + pfx + 'datatable__lock--scroll');\n\n                            // check if scrollable area have rows\n                            if ($(scrollable).find('.' + pfx + 'datatable__row').length > 0 && $(scrollable).length > 0) {\n                                scroll.scrollHead = $(datatable.tableHead).find('> .' + pfx + 'datatable__lock--scroll > .' + pfx + 'datatable__row');\n                                scroll.scrollFoot = $(datatable.tableFoot).find('> .' + pfx + 'datatable__lock--scroll > .' + pfx + 'datatable__row');\n                                scroll.tableLocked = $(datatable.tableBody).find('.' + pfx + 'datatable__lock:not(.' + pfx + 'datatable__lock--scroll)');\n                                if (Plugin.getOption('layout.customScrollbar') && util.detectIE() != 10 && screen > util.getBreakpoint('lg')) {\n                                    scroll.initCustomScrollbar(scrollable[0]);\n                                } else {\n                                    scroll.initDefaultScrollbar(scrollable);\n                                }\n                            } else if ($(datatable.tableBody).find('.' + pfx + 'datatable__row').length > 0) {\n                                scroll.scrollHead = $(datatable.tableHead).find('> .' + pfx + 'datatable__row');\n                                scroll.scrollFoot = $(datatable.tableFoot).find('> .' + pfx + 'datatable__row');\n                                if (Plugin.getOption('layout.customScrollbar') && util.detectIE() != 10 && screen > util.getBreakpoint('lg')) {\n                                    scroll.initCustomScrollbar(datatable.tableBody);\n                                } else {\n                                    scroll.initDefaultScrollbar(datatable.tableBody);\n                                }\n                            }\n                        } else {\n                            $(datatable.table).// css('height', 'auto').\n                            css('overflow-x', 'auto');\n                        }\n                    },\n                    initDefaultScrollbar: function(scrollable) {\n                        $(scrollable).css('overflow', 'auto').off().on('scroll', scroll.onScrolling);\n                    },\n                    onScrolling: function(e) {\n                        var left = $(this).scrollLeft();\n                        var top = $(this).scrollTop();\n                        $(scroll.scrollHead).css('left', -left);\n                        $(scroll.scrollFoot).css('left', -left);\n                        $(scroll.tableLocked).each(function(i, table) {\n                            $(table).css('top', -top);\n                        });\n                    },\n                    initCustomScrollbar: function(scrollable) {\n                        scroll.scrollable = scrollable;\n                        // create a new instance for table body with scrollbar\n                        Plugin.initScrollbar(scrollable);\n                        $(scrollable).off().on('scroll', scroll.onScrolling);\n                    },\n                };\n                scroll.init();\n                return scroll;\n            },\n\n            /**\n             * Init custom scrollbar and reset position\n             * @param element\n             * @param options\n             */\n            initScrollbar: function(element, options) {\n                $(datatable.tableBody).css('overflow', '');\n                if (util.hasClass(element, 'ps')) {\n                    $(element).data('ps').update();\n                } else {\n                    var ps = new PerfectScrollbar(element);\n                    $(element).data('ps', ps);\n                }\n            },\n\n            /**\n             * Set column title from options.columns settings\n             */\n            setHeadTitle: function(tablePart) {\n                if (typeof tablePart === 'undefined') tablePart = datatable.tableHead;\n                tablePart = $(tablePart)[0];\n                var columns = options.columns;\n                var row = tablePart.getElementsByTagName('tr')[0];\n                var ths = tablePart.getElementsByTagName('td');\n\n                if (typeof row === 'undefined') {\n                    row = document.createElement('tr');\n                    tablePart.appendChild(row);\n                }\n\n                $.each(columns, function(i, column) {\n                    var th = ths[i];\n                    if (typeof th === 'undefined') {\n                        th = document.createElement('th');\n                        row.appendChild(th);\n                    }\n\n                    // set column title\n                    if (typeof column['title'] !== 'undefined') {\n                        th.innerHTML = column.title;\n                        th.setAttribute('data-field', column.field);\n                        util.addClass(th, column.class);\n                        $(th).data(column);\n                    }\n\n                    // set header attr option\n                    if (typeof column.attr !== 'undefined') {\n                        $.each(column.attr, function(key, val) {\n                            th.setAttribute(key, val);\n                        });\n                    }\n\n                    // apply text align to thead/tfoot\n                    if (typeof column.textAlign !== 'undefined') {\n                        var align = typeof datatable.textAlign[column.textAlign] !== 'undefined' ? datatable.textAlign[column.textAlign] : '';\n                        util.addClass(th, align);\n                    }\n                });\n                Plugin.setupDOM(tablePart);\n            },\n\n            /**\n             * Initiate to get remote or local data via ajax\n             */\n            dataRender: function(action) {\n                $(datatable.table).siblings('.' + pfx + 'datatable__pager').removeClass(pfx + 'datatable--paging-loaded');\n\n                var buildMeta = function() {\n                    datatable.dataSet = datatable.dataSet || [];\n                    Plugin.localDataUpdate();\n                    // local pagination meta\n                    var meta = Plugin.getDataSourceParam('pagination');\n                    if (meta.perpage === 0) {\n                        meta.perpage = options.data.pageSize || 10;\n                    }\n                    meta.total = datatable.dataSet.length;\n                    var start = Math.max(meta.perpage * (meta.page - 1), 0);\n                    var end = Math.min(start + meta.perpage, meta.total);\n                    datatable.dataSet = $(datatable.dataSet).slice(start, end);\n                    return meta;\n                };\n\n                var afterGetData = function(result) {\n                    var localPagingCallback = function(ctx, meta) {\n                        if (!$(ctx.pager).hasClass(pfx + 'datatable--paging-loaded')) {\n                            $(ctx.pager).remove();\n                            ctx.init(meta);\n                        }\n                        $(ctx.pager).off().on(pfx + 'datatable--on-goto-page', function(e) {\n                            $(ctx.pager).remove();\n                            ctx.init(meta);\n                        });\n\n                        var start = Math.max(meta.perpage * (meta.page - 1), 0);\n                        var end = Math.min(start + meta.perpage, meta.total);\n\n                        Plugin.localDataUpdate();\n                        datatable.dataSet = $(datatable.dataSet).slice(start, end);\n\n                        // insert data into table content\n                        Plugin.insertData();\n                    };\n\n                    $(datatable.wrap).removeClass(pfx + 'datatable--error');\n                    // pagination enabled\n                    if (options.pagination) {\n                        if (options.data.serverPaging && options.data.type !== 'local') {\n                            // server pagination\n                            var serverMeta = Plugin.getObject('meta', result || null);\n                            if (serverMeta !== null) {\n                                Plugin.paging(serverMeta);\n                            } else {\n                                // no meta object from server response, fallback to local pagination\n                                Plugin.paging(buildMeta(), localPagingCallback);\n                            }\n                        } else {\n                            // local pagination can be used by remote data also\n                            Plugin.paging(buildMeta(), localPagingCallback);\n                        }\n                    } else {\n                        // pagination is disabled\n                        Plugin.localDataUpdate();\n                    }\n                    // insert data into table content\n                    Plugin.insertData();\n                };\n\n                // get local datasource\n                if (options.data.type === 'local'\n                    // for remote json datasource\n                    // || typeof options.data.source.read === 'undefined' && datatable.dataSet !== null\n                    // for remote datasource, server sorting is disabled and data already received from remote\n                    || options.data.serverSorting === false && action === 'sort'\n                    || options.data.serverFiltering === false && action === 'search'\n                ) {\n                    afterGetData();\n                    return;\n                }\n\n                // getting data from remote only\n                Plugin.getData().done(afterGetData);\n            },\n\n            /**\n             * Process ajax data\n             */\n            insertData: function() {\n                datatable.dataSet = datatable.dataSet || [];\n                var params = Plugin.getDataSourceParam();\n\n                // get row attributes\n                var pagination = params.pagination;\n                var start = (Math.max(pagination.page, 1) - 1) * pagination.perpage;\n                var end = Math.min(pagination.page, pagination.pages) * pagination.perpage;\n                var rowProps = {};\n                if (typeof options.data.attr.rowProps !== 'undefined' && options.data.attr.rowProps.length) {\n                    rowProps = options.data.attr.rowProps.slice(start, end);\n                }\n\n                // todo; fix performance\n                var tableBody = document.createElement('tbody');\n                tableBody.style.visibility = 'hidden';\n                var colLength = options.columns.length;\n\n                $.each(datatable.dataSet, function(rowIndex, row) {\n                    var tr = document.createElement('tr');\n                    tr.setAttribute('data-row', rowIndex);\n                    // keep data object to row\n                    $(tr).data('obj', row);\n\n                    if (typeof rowProps[rowIndex] !== 'undefined') {\n                        $.each(rowProps[rowIndex], function() {\n                            tr.setAttribute(this.name, this.value);\n                        });\n                    }\n\n                    var cellIndex = 0;\n                    var tds = [];\n                    for (var a = 0; a < colLength; a += 1) {\n                        var column = options.columns[a];\n                        var classes = [];\n                        // add sorted class to cells\n                        if (Plugin.getObject('sort.field', params) === column.field) {\n                            classes.push(pfx + 'datatable__cell--sorted');\n                        }\n\n                        // apply text align\n                        if (typeof column.textAlign !== 'undefined') {\n                            var align = typeof datatable.textAlign[column.textAlign] !==\n                            'undefined' ? datatable.textAlign[column.textAlign] : '';\n                            classes.push(align);\n                        }\n\n                        // var classAttr = '';\n                        if (typeof column.class !== 'undefined') {\n                            classes.push(column.class);\n                        }\n\n                        var td = document.createElement('td');\n                        util.addClass(td, classes.join(' '));\n                        td.setAttribute('data-field', column.field);\n                        td.innerHTML = Plugin.getObject(column.field, row);\n                        tr.appendChild(td);\n                    }\n\n                    tableBody.appendChild(tr);\n                });\n\n                // display no records message\n                if (datatable.dataSet.length === 0) {\n                    var errorSpan = document.createElement('span');\n                    util.addClass(errorSpan, pfx + 'datatable--error');\n                    errorSpan.innerHTML = Plugin.getOption('translate.records.noRecords');\n                    tableBody.appendChild(errorSpan);\n                    $(datatable.wrap).addClass(pfx + 'datatable--error ' + pfx + 'datatable--loaded');\n                    Plugin.spinnerCallback(false);\n                }\n\n                // replace existing table body\n                $(datatable.tableBody).replaceWith(tableBody);\n                datatable.tableBody = tableBody;\n\n                // layout update\n                Plugin.setupDOM(datatable.table);\n                Plugin.setupCellField([datatable.tableBody]);\n                Plugin.setupTemplateCell(datatable.tableBody);\n                Plugin.layoutUpdate();\n            },\n\n            updateTableComponents: function() {\n                datatable.tableHead = $(datatable.table).children('thead');\n                datatable.tableBody = $(datatable.table).children('tbody');\n                datatable.tableFoot = $(datatable.table).children('tfoot');\n            },\n\n            /**\n             * Call ajax for raw JSON data\n             */\n            getData: function() {\n                Plugin.spinnerCallback(true);\n\n                var ajaxParams = {\n                    dataType: 'json',\n                    method: 'GET',\n                    data: {},\n                    timeout: Plugin.getOption('data.source.read.timeout') || 30000,\n                };\n\n                if (options.data.type === 'local') {\n                    ajaxParams.url = options.data.source;\n                }\n\n                if (options.data.type === 'remote') {\n                    ajaxParams.url = Plugin.getOption('data.source.read.url');\n                    if (typeof ajaxParams.url !== 'string') ajaxParams.url = Plugin.getOption('data.source.read');\n                    if (typeof ajaxParams.url !== 'string') ajaxParams.url = Plugin.getOption('data.source');\n                    ajaxParams.headers = Plugin.getOption('data.source.read.headers');\n                    ajaxParams.method = Plugin.getOption('data.source.read.method') || 'POST';\n\n                    var data = Plugin.getDataSourceParam();\n                    // remove if server params is not enabled\n                    if (!Plugin.getOption('data.serverPaging')) {\n                        delete data['pagination'];\n                    }\n                    if (!Plugin.getOption('data.serverSorting')) {\n                        delete data['sort'];\n                    }\n                    ajaxParams.data = $.extend({}, ajaxParams.data, data, Plugin.getOption('data.source.read.params'));\n                }\n\n                return $.ajax(ajaxParams).done(function(response, textStatus, jqXHR) {\n                    datatable.lastResponse = response;\n                    // extendible data map callback for custom datasource\n                    datatable.dataSet = datatable.originalDataSet = Plugin.dataMapCallback(response);\n                    Plugin.setAutoColumns();\n                    $(datatable).trigger(pfx + 'datatable--on-ajax-done', [datatable.dataSet]);\n                }).fail(function(jqXHR, textStatus, errorThrown) {\n                    $(datatable).trigger(pfx + 'datatable--on-ajax-fail', [jqXHR]);\n                    $(datatable.tableBody).html($('<span/>').addClass(pfx + 'datatable--error').html(Plugin.getOption('translate.records.noRecords')));\n                    $(datatable.wrap).addClass(pfx + 'datatable--error ' + pfx + 'datatable--loaded');\n                    Plugin.spinnerCallback(false);\n                }).always(function() {\n                });\n            },\n\n            /**\n             * Pagination object\n             * @param meta if null, local pagination, otherwise remote pagination\n             * @param callback for update data when navigating page\n             */\n            paging: function(meta, callback) {\n                var pg = {\n                    meta: null,\n                    pager: null,\n                    paginateEvent: null,\n                    pagerLayout: {pagination: null, info: null},\n                    callback: null,\n                    init: function(meta) {\n                        pg.meta = meta;\n\n                        // parse pagination meta to integer\n                        pg.meta.page = parseInt(pg.meta.page);\n                        pg.meta.pages = parseInt(pg.meta.pages);\n                        pg.meta.perpage = parseInt(pg.meta.perpage);\n                        pg.meta.total = parseInt(pg.meta.total);\n\n                        // todo; if meta object not exist will cause error\n                        // always recount total pages\n                        pg.meta.pages = Math.max(Math.ceil(pg.meta.total / pg.meta.perpage), 1);\n\n                        // current page must be not over than total pages\n                        if (pg.meta.page > pg.meta.pages) pg.meta.page = pg.meta.pages;\n\n                        // set unique event name between tables\n                        pg.paginateEvent = Plugin.getTablePrefix();\n\n                        pg.pager = $(datatable.table).siblings('.' + pfx + 'datatable__pager');\n                        if ($(pg.pager).hasClass(pfx + 'datatable--paging-loaded')) return;\n\n                        // if class .'+pfx+'datatable--paging-loaded not exist, recreate pagination\n                        $(pg.pager).remove();\n\n                        // if no pages available\n                        if (pg.meta.pages === 0) return;\n\n                        // update datasource params\n                        Plugin.setDataSourceParam('pagination', {\n                            page: pg.meta.page,\n                            pages: pg.meta.pages,\n                            perpage: pg.meta.perpage,\n                            total: pg.meta.total,\n                        });\n\n                        // default callback function, contains remote pagination handler\n                        pg.callback = pg.serverCallback;\n                        // custom callback function\n                        if (typeof callback === 'function') pg.callback = callback;\n\n                        pg.addPaginateEvent();\n                        pg.populate();\n\n                        pg.meta.page = Math.max(pg.meta.page || 1, pg.meta.page);\n\n                        $(datatable).trigger(pg.paginateEvent, pg.meta);\n\n                        pg.pagingBreakpoint.call();\n                        $(window).resize(pg.pagingBreakpoint);\n                    },\n                    serverCallback: function(ctx, meta) {\n                        Plugin.dataRender();\n                    },\n                    populate: function() {\n                        var icons = Plugin.getOption('layout.icons.pagination');\n                        var title = Plugin.getOption('translate.toolbar.pagination.items.default');\n                        // pager root element\n                        pg.pager = $('<div/>').addClass(pfx + 'datatable__pager ' + pfx + 'datatable--paging-loaded clearfix');\n                        // numbering links\n                        var pagerNumber = $('<ul/>').addClass(pfx + 'datatable__pager-nav');\n                        pg.pagerLayout['pagination'] = pagerNumber;\n\n                        // pager first/previous button\n                        $('<li/>').\n                        append($('<a/>').\n                        attr('title', title.first).\n                        addClass(pfx + 'datatable__pager-link ' + pfx + 'datatable__pager-link--first').\n                        append($('<i/>').addClass(icons.first)).\n                        on('click', pg.gotoMorePage).\n                        attr('data-page', 1)).\n                        appendTo(pagerNumber);\n                        $('<li/>').\n                        append($('<a/>').\n                        attr('title', title.prev).\n                        addClass(pfx + 'datatable__pager-link ' + pfx + 'datatable__pager-link--prev').\n                        append($('<i/>').addClass(icons.prev)).\n                        on('click', pg.gotoMorePage)).\n                        appendTo(pagerNumber);\n\n                        // more previous pages\n                        $('<li/>').\n                        append($('<a/>').\n                        attr('title', title.more).\n                        addClass(pfx + 'datatable__pager-link ' + pfx + 'datatable__pager-link--more-prev').\n                        html($('<i/>').addClass(icons.more)).\n                        on('click', pg.gotoMorePage)).\n                        appendTo(pagerNumber);\n\n                        $('<li/>').append($('<input/>').attr('type', 'text').addClass(pfx + 'pager-input form-control').attr('title', title.input).on('keyup', function() {\n                            // on keyup update [data-page]\n                            $(this).attr('data-page', Math.abs($(this).val()));\n                        }).on('keypress', function(e) {\n                            // on keypressed enter button\n                            if (e.which === 13) pg.gotoMorePage(e);\n                        })).appendTo(pagerNumber);\n\n                        var pagesNumber = Plugin.getOption('toolbar.items.pagination.pages.desktop.pagesNumber');\n                        var end = Math.ceil(pg.meta.page / pagesNumber) * pagesNumber;\n                        var start = end - pagesNumber;\n                        if (end > pg.meta.pages) {\n                            end = pg.meta.pages;\n                        }\n                        for (var x = start; x < end; x++) {\n                            var pageNumber = x + 1;\n                            $('<li/>').\n                            append($('<a/>').\n                            addClass(pfx + 'datatable__pager-link ' + pfx + 'datatable__pager-link-number').\n                            text(pageNumber).\n                            attr('data-page', pageNumber).\n                            attr('title', pageNumber).\n                            on('click', pg.gotoPage)).\n                            appendTo(pagerNumber);\n                        }\n\n                        // more next pages\n                        $('<li/>').\n                        append($('<a/>').\n                        attr('title', title.more).\n                        addClass(pfx + 'datatable__pager-link ' + pfx + 'datatable__pager-link--more-next').\n                        html($('<i/>').addClass(icons.more)).\n                        on('click', pg.gotoMorePage)).\n                        appendTo(pagerNumber);\n\n                        // pager next/last button\n                        $('<li/>').\n                        append($('<a/>').\n                        attr('title', title.next).\n                        addClass(pfx + 'datatable__pager-link ' + pfx + 'datatable__pager-link--next').\n                        append($('<i/>').addClass(icons.next)).\n                        on('click', pg.gotoMorePage)).\n                        appendTo(pagerNumber);\n                        $('<li/>').\n                        append($('<a/>').\n                        attr('title', title.last).\n                        addClass(pfx + 'datatable__pager-link ' + pfx + 'datatable__pager-link--last').\n                        append($('<i/>').addClass(icons.last)).\n                        on('click', pg.gotoMorePage).\n                        attr('data-page', pg.meta.pages)).\n                        appendTo(pagerNumber);\n\n                        // page info\n                        if (Plugin.getOption('toolbar.items.info')) {\n                            pg.pagerLayout['info'] = $('<div/>').addClass(pfx + 'datatable__pager-info').append($('<span/>').addClass(pfx + 'datatable__pager-detail'));\n                        }\n\n                        $.each(Plugin.getOption('toolbar.layout'), function(i, layout) {\n                            $(pg.pagerLayout[layout]).appendTo(pg.pager);\n                        });\n\n                        // page size select\n                        var pageSizeSelect = $('<select/>').\n                        addClass('selectpicker ' + pfx + 'datatable__pager-size').\n                        attr('title', Plugin.getOption('translate.toolbar.pagination.items.default.select')).\n                        attr('data-width', '70px').\n                        val(pg.meta.perpage).\n                        on('change', pg.updatePerpage).\n                        prependTo(pg.pagerLayout['info']);\n\n                        var pageSizes = Plugin.getOption('toolbar.items.pagination.pageSizeSelect');\n                        // default value here, to fix override option by user\n                        if (pageSizes.length == 0) pageSizes = [10, 20, 30, 50, 100];\n                        $.each(pageSizes, function(i, size) {\n                            var display = size;\n                            if (size === -1) display = 'All';\n                            $('<option/>').attr('value', size).html(display).appendTo(pageSizeSelect);\n                        });\n\n                        // init selectpicker to dropdown\n                        $(datatable).ready(function() {\n                            $('.selectpicker').selectpicker().siblings('.dropdown-toggle').attr('title', Plugin.getOption(\n                                'translate.toolbar.pagination.items.default.select'));\n                        });\n\n                        pg.paste();\n                    },\n                    paste: function() {\n                        // insert pagination based on placement position, top|bottom\n                        $.each($.unique(Plugin.getOption('toolbar.placement')),\n                            function(i, position) {\n                                if (position === 'bottom') {\n                                    $(pg.pager).clone(true).insertAfter(datatable.table);\n                                }\n                                if (position === 'top') {\n                                    // pager top need some extra space\n                                    $(pg.pager).clone(true).addClass(pfx + 'datatable__pager--top').insertBefore(datatable.table);\n                                }\n                            });\n                    },\n                    gotoMorePage: function(e) {\n                        e.preventDefault();\n                        // $(this) is a link of .'+pfx+'datatable__pager-link\n\n                        if ($(this).attr('disabled') === 'disabled') return false;\n\n                        var page = $(this).attr('data-page');\n\n                        // event from text input\n                        if (typeof page === 'undefined') {\n                            page = $(e.target).attr('data-page');\n                        }\n\n                        pg.openPage(parseInt(page));\n                        return false;\n                    },\n                    gotoPage: function(e) {\n                        e.preventDefault();\n                        // prevent from click same page number\n                        if ($(this).hasClass(pfx + 'datatable__pager-link--active')) return;\n\n                        pg.openPage(parseInt($(this).data('page')));\n                    },\n                    openPage: function(page) {\n                        // currentPage is 1-based index\n                        pg.meta.page = parseInt(page);\n\n                        $(datatable).trigger(pg.paginateEvent, pg.meta);\n                        pg.callback(pg, pg.meta);\n\n                        // update page callback function\n                        $(pg.pager).trigger(pfx + 'datatable--on-goto-page', pg.meta);\n                    },\n                    updatePerpage: function(e) {\n                        e.preventDefault();\n                        // if (Plugin.getOption('layout.height') === null) {\n                        // fix white space, when perpage is set from many records to less records\n                        // $('html, body').animate({scrollTop: $(datatable).position().top});\n                        // }\n\n                        pg.pager = $(datatable.table).siblings('.' + pfx + 'datatable__pager').removeClass(pfx + 'datatable--paging-loaded');\n\n                        // on change select page size\n                        if (e.originalEvent) {\n                            pg.meta.perpage = parseInt($(this).val());\n                        }\n\n                        $(pg.pager).find('select.' + pfx + 'datatable__pager-size').val(pg.meta.perpage).attr('data-selected', pg.meta.perpage);\n\n                        // update datasource params\n                        Plugin.setDataSourceParam('pagination', {\n                            page: pg.meta.page,\n                            pages: pg.meta.pages,\n                            perpage: pg.meta.perpage,\n                            total: pg.meta.total,\n                        });\n\n                        // update page callback function\n                        $(pg.pager).trigger(pfx + 'datatable--on-update-perpage', pg.meta);\n                        $(datatable).trigger(pg.paginateEvent, pg.meta);\n                        pg.callback(pg, pg.meta);\n\n                        // update pagination info\n                        pg.updateInfo.call();\n                    },\n                    addPaginateEvent: function(e) {\n                        // pagination event\n                        $(datatable).off(pg.paginateEvent).on(pg.paginateEvent, function(e, meta) {\n                            Plugin.spinnerCallback(true);\n\n                            pg.pager = $(datatable.table).siblings('.' + pfx + 'datatable__pager');\n                            var pagerNumber = $(pg.pager).find('.' + pfx + 'datatable__pager-nav');\n\n                            // set sync active page class\n                            $(pagerNumber).find('.' + pfx + 'datatable__pager-link--active').removeClass(pfx + 'datatable__pager-link--active');\n                            $(pagerNumber).find('.' + pfx + 'datatable__pager-link-number[data-page=\"' + meta.page + '\"]').addClass(pfx + 'datatable__pager-link--active');\n\n                            // set next and previous link page number\n                            $(pagerNumber).find('.' + pfx + 'datatable__pager-link--prev').attr('data-page', Math.max(meta.page - 1, 1));\n                            $(pagerNumber).find('.' + pfx + 'datatable__pager-link--next').attr('data-page', Math.min(meta.page + 1, meta.pages));\n\n                            // current page input value sync\n                            $(pg.pager).each(function() {\n                                $(this).find('.' + pfx + 'pager-input[type=\"text\"]').prop('value', meta.page);\n                            });\n\n                            $(pg.pager).find('.' + pfx + 'datatable__pager-nav').show();\n                            if (meta.pages <= 1) {\n                                // hide pager if has 1 page\n                                $(pg.pager).find('.' + pfx + 'datatable__pager-nav').hide();\n                            }\n\n                            // update datasource params\n                            Plugin.setDataSourceParam('pagination', {\n                                page: pg.meta.page,\n                                pages: pg.meta.pages,\n                                perpage: pg.meta.perpage,\n                                total: pg.meta.total,\n                            });\n\n                            $(pg.pager).find('select.' + pfx + 'datatable__pager-size').val(meta.perpage).attr('data-selected', meta.perpage);\n\n                            // clear active rows\n                            $(datatable.table).find('.' + pfx + 'checkbox > [type=\"checkbox\"]').prop('checked', false);\n                            $(datatable.table).find('.' + pfx + 'datatable__row--active').removeClass(pfx + 'datatable__row--active');\n\n                            pg.updateInfo.call();\n                            pg.pagingBreakpoint.call();\n                            // Plugin.resetScroll();\n                        });\n                    },\n                    updateInfo: function() {\n                        var start = Math.max(pg.meta.perpage * (pg.meta.page - 1) + 1, 1);\n                        var end = Math.min(start + pg.meta.perpage - 1, pg.meta.total);\n                        // page info update\n                        $(pg.pager).find('.' + pfx + 'datatable__pager-info').find('.' + pfx + 'datatable__pager-detail').html(Plugin.dataPlaceholder(\n                            Plugin.getOption('translate.toolbar.pagination.items.info'), {\n                                start: start,\n                                end: pg.meta.perpage === -1 ? pg.meta.total : end,\n                                pageSize: pg.meta.perpage === -1 ||\n                                pg.meta.perpage >= pg.meta.total\n                                    ? pg.meta.total\n                                    : pg.meta.perpage,\n                                total: pg.meta.total,\n                            }));\n                    },\n\n                    /**\n                     * Update pagination layout breakpoint\n                     */\n                    pagingBreakpoint: function() {\n                        // keep page links reference\n                        var pagerNumber = $(datatable.table).siblings('.' + pfx + 'datatable__pager').find('.' + pfx + 'datatable__pager-nav');\n                        if ($(pagerNumber).length === 0) return;\n\n                        var currentPage = Plugin.getCurrentPage();\n                        var pagerInput = $(pagerNumber).find('.' + pfx + 'pager-input').closest('li');\n\n                        // reset\n                        $(pagerNumber).find('li').show();\n\n                        // pagination update\n                        $.each(Plugin.getOption('toolbar.items.pagination.pages'),\n                            function(mode, option) {\n                                if (util.isInResponsiveRange(mode)) {\n                                    switch (mode) {\n                                        case 'desktop':\n                                        case 'tablet':\n                                            var end = Math.ceil(currentPage / option.pagesNumber) *\n                                                option.pagesNumber;\n                                            var start = end - option.pagesNumber;\n                                            $(pagerInput).hide();\n                                            pg.meta = Plugin.getDataSourceParam('pagination');\n                                            pg.paginationUpdate();\n                                            break;\n\n                                        case 'mobile':\n                                            $(pagerInput).show();\n                                            $(pagerNumber).find('.' + pfx + 'datatable__pager-link--more-prev').closest('li').hide();\n                                            $(pagerNumber).find('.' + pfx + 'datatable__pager-link--more-next').closest('li').hide();\n                                            $(pagerNumber).find('.' + pfx + 'datatable__pager-link-number').closest('li').hide();\n                                            break;\n                                    }\n\n                                    return false;\n                                }\n                            });\n                    },\n\n                    /**\n                     * Update pagination number and button display\n                     */\n                    paginationUpdate: function() {\n                        var pager = $(datatable.table).siblings('.' + pfx + 'datatable__pager').find('.' + pfx + 'datatable__pager-nav'),\n                            pagerMorePrev = $(pager).find('.' + pfx + 'datatable__pager-link--more-prev'),\n                            pagerMoreNext = $(pager).find('.' + pfx + 'datatable__pager-link--more-next'),\n                            pagerFirst = $(pager).find('.' + pfx + 'datatable__pager-link--first'),\n                            pagerPrev = $(pager).find('.' + pfx + 'datatable__pager-link--prev'),\n                            pagerNext = $(pager).find('.' + pfx + 'datatable__pager-link--next'),\n                            pagerLast = $(pager).find('.' + pfx + 'datatable__pager-link--last');\n\n                        // get visible page\n                        var pagerNumber = $(pager).find('.' + pfx + 'datatable__pager-link-number');\n                        // get page before of first visible\n                        var morePrevPage = Math.max($(pagerNumber).first().data('page') - 1,\n                            1);\n                        $(pagerMorePrev).each(function(i, prev) {\n                            $(prev).attr('data-page', morePrevPage);\n                        });\n                        // show/hide <li>\n                        if (morePrevPage === 1) {\n                            $(pagerMorePrev).parent().hide();\n                        } else {\n                            $(pagerMorePrev).parent().show();\n                        }\n\n                        // get page after of last visible\n                        var moreNextPage = Math.min($(pagerNumber).last().data('page') + 1,\n                            pg.meta.pages);\n                        $(pagerMoreNext).each(function(i, prev) {\n                            $(pagerMoreNext).attr('data-page', moreNextPage).show();\n                        });\n\n                        // show/hide <li>\n                        if (moreNextPage === pg.meta.pages\n                            // missing dot fix when last hidden page is one left\n                            && moreNextPage === $(pagerNumber).last().data('page')) {\n                            $(pagerMoreNext).parent().hide();\n                        } else {\n                            $(pagerMoreNext).parent().show();\n                        }\n\n                        // begin/end of pages\n                        if (pg.meta.page === 1) {\n                            $(pagerFirst).attr('disabled', true).addClass(pfx + 'datatable__pager-link--disabled');\n                            $(pagerPrev).attr('disabled', true).addClass(pfx + 'datatable__pager-link--disabled');\n                        } else {\n                            $(pagerFirst).removeAttr('disabled').removeClass(pfx + 'datatable__pager-link--disabled');\n                            $(pagerPrev).removeAttr('disabled').removeClass(pfx + 'datatable__pager-link--disabled');\n                        }\n                        if (pg.meta.page === pg.meta.pages) {\n                            $(pagerNext).attr('disabled', true).addClass(pfx + 'datatable__pager-link--disabled');\n                            $(pagerLast).attr('disabled', true).addClass(pfx + 'datatable__pager-link--disabled');\n                        } else {\n                            $(pagerNext).removeAttr('disabled').removeClass(pfx + 'datatable__pager-link--disabled');\n                            $(pagerLast).removeAttr('disabled').removeClass(pfx + 'datatable__pager-link--disabled');\n                        }\n\n                        // display more buttons\n                        var nav = Plugin.getOption('toolbar.items.pagination.navigation');\n                        if (!nav.first) $(pagerFirst).remove();\n                        if (!nav.prev) $(pagerPrev).remove();\n                        if (!nav.next) $(pagerNext).remove();\n                        if (!nav.last) $(pagerLast).remove();\n                    },\n                };\n                pg.init(meta);\n                return pg;\n            },\n\n            /**\n             * Hide/show table cell defined by\n             * options[columns][i][responsive][visible/hidden]\n             */\n            columnHide: function() {\n                var screen = util.getViewPort().width;\n                // foreach columns setting\n                $.each(options.columns, function(i, column) {\n                    if (typeof column.responsive !== 'undefined') {\n                        var field = column.field;\n                        var tds = $.grep($(datatable.table).find('.' + pfx + 'datatable__cell'), function(n, i) {\n                            return field === $(n).data('field');\n                        });\n                        if (util.getBreakpoint(column.responsive.hidden) >= screen) {\n                            $(tds).hide();\n                        } else {\n                            $(tds).show();\n                        }\n                        if (util.getBreakpoint(column.responsive.visible) <= screen) {\n                            $(tds).show();\n                        } else {\n                            $(tds).hide();\n                        }\n                    }\n                });\n            },\n\n            /**\n             * Setup sub datatable\n             */\n            setupSubDatatable: function() {\n                var subTableCallback = Plugin.getOption('detail.content');\n                if (typeof subTableCallback !== 'function') return;\n\n                // subtable already exist\n                if ($(datatable.table).find('.' + pfx + 'datatable__subtable').length > 0) return;\n\n                $(datatable.wrap).addClass(pfx + 'datatable--subtable');\n\n                options.columns[0]['subtable'] = true;\n\n                // toggle on open sub table\n                var toggleSubTable = function(e) {\n                    e.preventDefault();\n                    // get parent row of this subtable\n                    var parentRow = $(this).closest('.' + pfx + 'datatable__row');\n\n                    // get subtable row for sub table\n                    var subTableRow = $(parentRow).next('.' + pfx + 'datatable__row-subtable');\n                    if ($(subTableRow).length === 0) {\n                        // prepare DOM for sub table, each <tr> as parent and add <tr> as child table\n                        subTableRow = $('<tr/>').\n                        addClass(pfx + 'datatable__row-subtable ' + pfx + 'datatable__row-loading').\n                        hide().\n                        append($('<td/>').addClass(pfx + 'datatable__subtable').attr('colspan', Plugin.getTotalColumns()));\n                        $(parentRow).after(subTableRow);\n                        // add class to even row\n                        if ($(parentRow).hasClass(pfx + 'datatable__row--even')) {\n                            $(subTableRow).addClass(pfx + 'datatable__row-subtable--even');\n                        }\n                    }\n\n                    $(subTableRow).toggle();\n\n                    var subTable = $(subTableRow).find('.' + pfx + 'datatable__subtable');\n\n                    // get id from first column of parent row\n                    var primaryKey = $(this).closest('[data-field]:first-child').find('.' + pfx + 'datatable__toggle-subtable').data('value');\n\n                    var icon = $(this).find('i').removeAttr('class');\n\n                    // prevent duplicate datatable init\n                    if ($(parentRow).hasClass(pfx + 'datatable__row--subtable-expanded')) {\n                        $(icon).addClass(Plugin.getOption('layout.icons.rowDetail.collapse'));\n                        // remove expand class from parent row\n                        $(parentRow).removeClass(pfx + 'datatable__row--subtable-expanded');\n                        // trigger event on collapse\n                        $(datatable).trigger(pfx + 'datatable--on-collapse-subtable', [parentRow]);\n                    } else {\n                        // expand and run callback function\n                        $(icon).addClass(Plugin.getOption('layout.icons.rowDetail.expand'));\n                        // add expand class to parent row\n                        $(parentRow).addClass(pfx + 'datatable__row--subtable-expanded');\n                        // trigger event on expand\n                        $(datatable).trigger(pfx + 'datatable--on-expand-subtable', [parentRow]);\n                    }\n\n                    // prevent duplicate datatable init\n                    if ($(subTable).find('.' + pfx + 'datatable').length === 0) {\n                        // get data by primary id\n                        $.map(datatable.dataSet, function(n, i) {\n                            // primary id must be at the first column, otherwise e.data will be undefined\n                            if (primaryKey === n[options.columns[0].field]) {\n                                e.data = n;\n                                return true;\n                            }\n                            return false;\n                        });\n\n                        // deprecated in v5.0.6\n                        e.detailCell = subTable;\n\n                        e.parentRow = parentRow;\n                        e.subTable = subTable;\n\n                        // run callback with event\n                        subTableCallback(e);\n\n                        $(subTable).children('.' + pfx + 'datatable').on(pfx + 'datatable--on-init', function(e) {\n                            $(subTableRow).removeClass(pfx + 'datatable__row-loading');\n                        });\n                        if (Plugin.getOption('data.type') === 'local') {\n                            $(subTableRow).removeClass(pfx + 'datatable__row-loading');\n                        }\n                    }\n                };\n\n                var columns = options.columns;\n                $(datatable.tableBody).find('.' + pfx + 'datatable__row').each(function(tri, tr) {\n                    $(tr).find('.' + pfx + 'datatable__cell').each(function(tdi, td) {\n                        // get column settings by field\n                        var column = $.grep(columns, function(n, i) {\n                            return $(td).data('field') === n.field;\n                        })[0];\n                        if (typeof column !== 'undefined') {\n                            var value = $(td).text();\n                            // enable column subtable toggle\n                            if (typeof column.subtable !== 'undefined' && column.subtable) {\n                                // check if subtable toggle exist\n                                if ($(td).find('.' + pfx + 'datatable__toggle-subtable').length > 0) return;\n                                // append subtable toggle\n                                $(td).\n                                html($('<a/>').\n                                addClass(pfx + 'datatable__toggle-subtable').\n                                attr('href', '#').\n                                attr('data-value', value).\n                                attr('title', Plugin.getOption('detail.title')).\n                                on('click', toggleSubTable).\n                                append($('<i/>').css('width', $(td).data('width')).addClass(Plugin.getOption('layout.icons.rowDetail.collapse'))));\n                            }\n                        }\n                    });\n                });\n\n                // $(datatable.tableHead).find('.'+pfx+'-datatable__row').first()\n            },\n\n            /**\n             * Datasource mapping callback\n             */\n            dataMapCallback: function(raw) {\n                // static dataset array\n                var dataSet = raw;\n                // dataset mapping callback\n                if (typeof Plugin.getOption('data.source.read.map') === 'function') {\n                    return Plugin.getOption('data.source.read.map')(raw);\n                } else {\n                    // default data mapping fallback\n                    if (typeof raw !== 'undefined' && typeof raw.data !== 'undefined') {\n                        dataSet = raw.data;\n                    }\n                }\n                return dataSet;\n            },\n\n            isSpinning: false,\n            /**\n             * BlockUI spinner callback\n             * @param block\n             */\n            spinnerCallback: function(block) {\n                if (block) {\n                    if (!Plugin.isSpinning) {\n                        // get spinner options\n                        var spinnerOptions = Plugin.getOption('layout.spinner');\n                        if (typeof spinnerOptions.message !== 'undefined' && spinnerOptions.message === true) {\n                            // use default spinner message from translation\n                            spinnerOptions.message = Plugin.getOption('translate.records.processing');\n                        }\n                        Plugin.isSpinning = true;\n                        if (typeof app !== 'undefined') {\n                            app.block(datatable, spinnerOptions);\n                        }\n                    }\n                } else {\n                    Plugin.isSpinning = false;\n                    if (typeof app !== 'undefined') {\n                        app.unblock(datatable);\n                    }\n                }\n            },\n\n            /**\n             * Default sort callback function\n             * @param data\n             * @param sort\n             * @param column\n             * @returns {*|Array.<T>|{sort, field}|{asc, desc}}\n             */\n            sortCallback: function(data, sort, column) {\n                var type = column['type'] || 'string';\n                var format = column['format'] || '';\n                var field = column['field'];\n\n                return $(data).sort(function(a, b) {\n                    var aField = a[field];\n                    var bField = b[field];\n\n                    switch (type) {\n                        case 'date':\n                            if (typeof moment === 'undefined') {\n                                throw new Error('Moment.js is required.');\n                            }\n                            var diff = moment(aField, format).diff(moment(bField, format));\n                            if (sort === 'asc') {\n                                return diff > 0 ? 1 : diff < 0 ? -1 : 0;\n                            } else {\n                                return diff < 0 ? 1 : diff > 0 ? -1 : 0;\n                            }\n                            break;\n\n                        case 'number':\n                            if (isNaN(parseFloat(aField)) && aField != null) {\n                                aField = Number(aField.replace(/[^0-9\\.-]+/g, ''));\n                            }\n                            if (isNaN(parseFloat(bField)) && bField != null) {\n                                bField = Number(bField.replace(/[^0-9\\.-]+/g, ''));\n                            }\n                            aField = parseFloat(aField);\n                            bField = parseFloat(bField);\n                            if (sort === 'asc') {\n                                return aField > bField ? 1 : aField < bField ? -1 : 0;\n                            } else {\n                                return aField < bField ? 1 : aField > bField ? -1 : 0;\n                            }\n                            break;\n\n                        case 'string':\n                        default:\n                            if (sort === 'asc') {\n                                return aField > bField ? 1 : aField < bField ? -1 : 0;\n                            } else {\n                                return aField < bField ? 1 : aField > bField ? -1 : 0;\n                            }\n                            break;\n                    }\n                });\n            },\n\n            /**\n             * Custom debug log\n             * @param text\n             * @param obj\n             */\n            log: function(text, obj) {\n                if (typeof obj === 'undefined') obj = '';\n                if (datatable.debug) {\n                    console.log(text, obj);\n                }\n            },\n\n            /**\n             * Auto hide columnds overflow in row\n             */\n            autoHide: function() {\n                $(datatable.table).find('.' + pfx + 'datatable__cell').show();\n                $(datatable.tableBody).each(function() {\n                    while ($(this)[0].offsetWidth < $(this)[0].scrollWidth) {\n                        $(datatable.table).find('.' + pfx + 'datatable__row').each(function(i) {\n                            var cell = $(this).find('.' + pfx + 'datatable__cell').not(':hidden').last();\n                            $(cell).hide();\n                        });\n                        Plugin.adjustCellsWidth.call();\n                    }\n                });\n\n                var toggleHiddenColumns = function(e) {\n                    e.preventDefault();\n\n                    var row = $(this).closest('.' + pfx + 'datatable__row');\n                    var detailRow = $(row).next();\n\n                    if (!$(detailRow).hasClass(pfx + 'datatable__row-detail')) {\n                        $(this).find('i').removeClass(Plugin.getOption('layout.icons.rowDetail.collapse')).addClass(Plugin.getOption('layout.icons.rowDetail.expand'));\n\n                        var hidden = $(row).find('.' + pfx + 'datatable__cell:hidden').clone().show();\n\n                        detailRow = $('<tr/>').addClass(pfx + 'datatable__row-detail').insertAfter(row);\n                        var detailRowTd = $('<td/>').addClass(pfx + 'datatable__detail').attr('colspan', Plugin.getTotalColumns()).appendTo(detailRow);\n\n                        var detailSubTable = $('<table/>');\n                        $(hidden).each(function() {\n                            var field = $(this).data('field');\n                            var column = $.grep(options.columns, function(n, i) {\n                                return field === n.field;\n                            })[0];\n                            $(detailSubTable).\n                            append($('<tr class=\"' + pfx + 'datatable__row\"></tr>').\n                            append($('<td class=\"' + pfx + 'datatable__cell\"></td>').append($('<span/>').css('width', Plugin.offset).append(column.title))).\n                            append(this));\n                        });\n                        $(detailRowTd).append(detailSubTable);\n\n                    } else {\n                        $(this).find('i').removeClass(Plugin.getOption('layout.icons.rowDetail.expand')).addClass(Plugin.getOption('layout.icons.rowDetail.collapse'));\n                        $(detailRow).remove();\n                    }\n                };\n\n                // toggle show hidden columns\n                $(datatable.tableBody).find('.' + pfx + 'datatable__row').each(function() {\n                    $(this).\n                    prepend($('<td/>').\n                    addClass(pfx + 'datatable__cell ' + pfx + 'datatable__toggle--detail').\n                    append($('<a/>').\n                    addClass(pfx + 'datatable__toggle-detail').\n                    attr('href', '').\n                    on('click', toggleHiddenColumns).\n                    append($('<i/>').css('width', '21px').// maintain width for both icons expand and collapse\n                    addClass(Plugin.getOption('layout.icons.rowDetail.collapse')))));\n\n                    // check if subtable toggle exist\n                    if ($(datatable.tableHead).find('.' + pfx + 'datatable__toggle-detail').length === 0) {\n                        $(datatable.tableHead).\n                        find('.' + pfx + 'datatable__row').\n                        first().\n                        prepend('<th class=\"' + pfx + 'datatable__cell ' + pfx + 'datatable__toggle-detail\"><span style=\"width: 21px\"></span></th>');\n                        $(datatable.tableFoot).\n                        find('.' + pfx + 'datatable__row').\n                        first().\n                        prepend('<th class=\"' + pfx + 'datatable__cell ' + pfx + 'datatable__toggle-detail\"><span style=\"width: 21px\"></span></th>');\n                    } else {\n                        $(datatable.tableHead).find('.' + pfx + 'datatable__toggle-detail').find('span').css('width', '21px');\n                    }\n                });\n            },\n\n            /**\n             * todo; implement hover column\n             */\n            hoverColumn: function() {\n                $(datatable.tableBody).on('mouseenter', '.' + pfx + 'datatable__cell', function() {\n                    var colIdx = $(Plugin.cell(this).nodes()).index();\n                    $(Plugin.cells().nodes()).removeClass(pfx + 'datatable__cell--hover');\n                    $(Plugin.column(colIdx).nodes()).addClass(pfx + 'datatable__cell--hover');\n                });\n            },\n\n            /**\n             * To enable auto columns features for remote data source\n             */\n            setAutoColumns: function() {\n                if (Plugin.getOption('data.autoColumns')) {\n                    $.each(datatable.dataSet[0], function(k, v) {\n                        var found = $.grep(options.columns, function(n, i) {\n                            return k === n.field;\n                        });\n                        if (found.length === 0) {\n                            options.columns.push({field: k, title: k});\n                        }\n                    });\n                    $(datatable.tableHead).find('.' + pfx + 'datatable__row').remove();\n                    Plugin.setHeadTitle();\n                    if (Plugin.getOption('layout.footer')) {\n                        $(datatable.tableFoot).find('.' + pfx + 'datatable__row').remove();\n                        Plugin.setHeadTitle(datatable.tableFoot);\n                    }\n                }\n            },\n\n            /********************\n             ** HELPERS\n             ********************/\n\n            /**\n             * Check if table is a locked colums table\n             */\n            isLocked: function() {\n                return util.hasClass(datatable.wrap[0], pfx + 'datatable--lock') || false;\n            },\n\n            /**\n             * Get total extra space of an element for width calculation, including\n             * padding, margin, border\n             * @param element\n             * @returns {number}\n             */\n            getExtraSpace: function(element) {\n                var padding = parseInt($(element).css('paddingRight')) +\n                    parseInt($(element).css('paddingLeft'));\n                var margin = parseInt($(element).css('marginRight')) +\n                    parseInt($(element).css('marginLeft'));\n                var border = Math.ceil(\n                    $(element).css('border-right-width').replace('px', ''));\n                return padding + margin + border;\n            },\n\n            /**\n             * Insert data of array into {{ }} template placeholder\n             * @param template\n             * @param data\n             * @returns {*}\n             */\n            dataPlaceholder: function(template, data) {\n                var result = template;\n                $.each(data, function(key, val) {\n                    result = result.replace('{{' + key + '}}', val);\n                });\n                return result;\n            },\n\n            /**\n             * Get table unique ID\n             * Note: table unique change each time refreshed\n             * @param suffix\n             * @returns {*}\n             */\n            getTableId: function(suffix) {\n                if (typeof suffix === 'undefined') suffix = '';\n                var id = $(datatable).attr('id');\n                if (typeof id === 'undefined') {\n                    id = $(datatable).attr('class').split(' ')[0];\n                }\n                return id + suffix;\n            },\n\n            /**\n             * Get table prefix with depth number\n             */\n            getTablePrefix: function(suffix) {\n                if (typeof suffix !== 'undefined') suffix = '-' + suffix;\n                return Plugin.getTableId() + '-' + Plugin.getDepth() + suffix;\n            },\n\n            /**\n             * Get current table depth of sub table\n             * @returns {number}\n             */\n            getDepth: function() {\n                var depth = 0;\n                var table = datatable.table;\n                do {\n                    table = $(table).parents('.' + pfx + 'datatable__table');\n                    depth++;\n                } while ($(table).length > 0);\n                return depth;\n            },\n\n            /**\n             * Keep state item\n             * @param key\n             * @param value\n             */\n            stateKeep: function(key, value) {\n                key = Plugin.getTablePrefix(key);\n                if (Plugin.getOption('data.saveState') === false) return;\n                if (Plugin.getOption('data.saveState.webstorage') && localStorage) {\n                    localStorage.setItem(key, JSON.stringify(value));\n                }\n                if (Plugin.getOption('data.saveState.cookie')) {\n                    Cookies.set(key, JSON.stringify(value));\n                }\n            },\n\n            /**\n             * Get state item\n             * @param key\n             * @param defValue\n             */\n            stateGet: function(key, defValue) {\n                key = Plugin.getTablePrefix(key);\n                if (Plugin.getOption('data.saveState') === false) return;\n                var value = null;\n                if (Plugin.getOption('data.saveState.webstorage') && localStorage) {\n                    value = localStorage.getItem(key);\n                } else {\n                    value = Cookies.get(key);\n                }\n                if (typeof value !== 'undefined' && value !== null) {\n                    return JSON.parse(value);\n                }\n            },\n\n            /**\n             * Update data in state without clear existing\n             * @param key\n             * @param value\n             */\n            stateUpdate: function(key, value) {\n                var ori = Plugin.stateGet(key);\n                if (typeof ori === 'undefined' || ori === null) ori = {};\n                Plugin.stateKeep(key, $.extend({}, ori, value));\n            },\n\n            /**\n             * Remove state item\n             * @param key\n             */\n            stateRemove: function(key) {\n                key = Plugin.getTablePrefix(key);\n                if (localStorage) {\n                    localStorage.removeItem(key);\n                }\n                Cookies.remove(key);\n            },\n\n            /**\n             * Get total columns.\n             */\n            getTotalColumns: function(tablePart) {\n                if (typeof tablePart === 'undefined') tablePart = datatable.tableBody;\n                return $(tablePart).find('.' + pfx + 'datatable__row').first().find('.' + pfx + 'datatable__cell').length;\n            },\n\n            /**\n             * Get table row. Useful to get row when current table is in lock mode.\n             * Can be used for both lock and normal table mode.\n             * By default, returning result will be in a list of <td>.\n             * @param tablePart\n             * @param row 1-based index\n             * @param tdOnly Optional. Default true\n             * @returns {*}\n             */\n            getOneRow: function(tablePart, row, tdOnly) {\n                if (typeof tdOnly === 'undefined') tdOnly = true;\n                // get list of <tr>\n                var result = $(tablePart).find('.' + pfx + 'datatable__row:not(.' + pfx + 'datatable__row-detail):nth-child(' + row + ')');\n                if (tdOnly) {\n                    // get list of <td> or <th>\n                    result = result.find('.' + pfx + 'datatable__cell');\n                }\n                return result;\n            },\n\n            /**\n             * Check if element has vertical overflow\n             * @param element\n             * @returns {boolean}\n             */\n            hasOverflowY: function(element) {\n                var children = $(element).find('.' + pfx + 'datatable__row');\n                var maxHeight = 0;\n\n                if (children.length > 0) {\n                    $(children).each(function(tdi, td) {\n                        maxHeight += Math.floor($(td).innerHeight());\n                    });\n\n                    return maxHeight > $(element).innerHeight();\n                }\n\n                return false;\n            },\n\n            /**\n             * Sort table row at HTML level by column index.\n             * todo; Not in use.\n             * @param header Header sort clicked\n             * @param sort asc|desc. Optional. Default asc\n             * @param int Boolean. Optional. Comparison value parse to integer.\n             *     Default false\n             */\n            sortColumn: function(header, sort, int) {\n                if (typeof sort === 'undefined') sort = 'asc'; // desc\n                if (typeof int === 'undefined') int = false;\n\n                var column = $(header).index();\n                var rows = $(datatable.tableBody).find('.' + pfx + 'datatable__row');\n                var hIndex = $(header).closest('.' + pfx + 'datatable__lock').index();\n                if (hIndex !== -1) {\n                    rows = $(datatable.tableBody).find('.' + pfx + 'datatable__lock:nth-child(' + (hIndex + 1) + ')').find('.' + pfx + 'datatable__row');\n                }\n\n                var container = $(rows).parent();\n                $(rows).sort(function(a, b) {\n                    var tda = $(a).find('td:nth-child(' + column + ')').text();\n                    var tdb = $(b).find('td:nth-child(' + column + ')').text();\n\n                    if (int) {\n                        // useful for integer type sorting\n                        tda = parseInt(tda);\n                        tdb = parseInt(tdb);\n                    }\n\n                    if (sort === 'asc') {\n                        return tda > tdb ? 1 : tda < tdb ? -1 : 0;\n                    } else {\n                        return tda < tdb ? 1 : tda > tdb ? -1 : 0;\n                    }\n                }).appendTo(container);\n            },\n\n            /**\n             * Perform sort remote and local\n             */\n            sorting: function() {\n                var sortObj = {\n                    init: function() {\n                        if (options.sortable) {\n                            $(datatable.tableHead).\n                            find('.' + pfx + 'datatable__cell:not(.' + pfx + 'datatable__cell--check)').\n                            addClass(pfx + 'datatable__cell--sort').\n                            off('click').\n                            on('click', sortObj.sortClick);\n                            // first init\n                            sortObj.setIcon();\n                        }\n                    },\n                    setIcon: function() {\n                        var meta = Plugin.getDataSourceParam('sort');\n                        if ($.isEmptyObject(meta)) return;\n\n                        // sort icon beside column header\n                        var td = $(datatable.tableHead).find('.' + pfx + 'datatable__cell[data-field=\"' + meta.field + '\"]').attr('data-sort', meta.sort);\n                        var sorting = $(td).find('span');\n                        var icon = $(sorting).find('i');\n\n                        var icons = Plugin.getOption('layout.icons.sort');\n                        // update sort icon; desc & asc\n                        if ($(icon).length > 0) {\n                            $(icon).removeAttr('class').addClass(icons[meta.sort]);\n                        } else {\n                            $(sorting).append($('<i/>').addClass(icons[meta.sort]));\n                        }\n                    },\n                    sortClick: function(e) {\n                        var meta = Plugin.getDataSourceParam('sort');\n                        var field = $(this).data('field');\n                        var column = Plugin.getColumnByField(field);\n                        // sort is disabled for this column\n                        if (typeof column.sortable !== 'undefined' &&\n                            column.sortable === false) return;\n\n                        $(datatable.tableHead).find('.' + pfx + 'datatable__cell > span > i').remove();\n\n                        if (options.sortable) {\n                            Plugin.spinnerCallback(true);\n\n                            var sort = 'desc';\n                            if (Plugin.getObject('field', meta) === field) {\n                                sort = Plugin.getObject('sort', meta);\n                            }\n\n                            // toggle sort\n                            sort = typeof sort === 'undefined' || sort === 'desc'\n                                ? 'asc'\n                                : 'desc';\n\n                            // update field and sort params\n                            meta = {field: field, sort: sort};\n                            Plugin.setDataSourceParam('sort', meta);\n\n                            sortObj.setIcon();\n\n                            setTimeout(function() {\n                                Plugin.dataRender('sort');\n                                $(datatable).trigger(pfx + 'datatable--on-sort', meta);\n                            }, 300);\n                        }\n                    },\n                };\n                sortObj.init();\n            },\n\n            /**\n             * Update JSON data list linked with sort, filter and pagination.\n             * Call this method, before using dataSet variable.\n             * @returns {*|null}\n             */\n            localDataUpdate: function() {\n                // todo; fix twice execution\n                var params = Plugin.getDataSourceParam();\n                if (typeof datatable.originalDataSet === 'undefined') {\n                    datatable.originalDataSet = datatable.dataSet;\n                }\n\n                var field = Plugin.getObject('sort.field', params);\n                var sort = Plugin.getObject('sort.sort', params);\n                var column = Plugin.getColumnByField(field);\n                if (typeof column !== 'undefined' && Plugin.getOption('data.serverSorting') !== true) {\n                    if (typeof column.sortCallback === 'function') {\n                        datatable.dataSet = column.sortCallback(datatable.originalDataSet, sort, column);\n                    } else {\n                        datatable.dataSet = Plugin.sortCallback(datatable.originalDataSet, sort, column);\n                    }\n                } else {\n                    datatable.dataSet = datatable.originalDataSet;\n                }\n\n                // if server filter enable, don't pass local filter\n                if (typeof params.query === 'object' && !Plugin.getOption('data.serverFiltering')) {\n                    params.query = params.query || {};\n\n                    var nestedSearch = function(obj) {\n                        for (var field in obj) {\n                            if (!obj.hasOwnProperty(field)) continue;\n                            if (typeof obj[field] === 'string') {\n                                if (obj[field].toLowerCase() == search || obj[field].toLowerCase().indexOf(search) !== -1) {\n                                    return true;\n                                }\n                            }\n                            else if (typeof obj[field] === 'number') {\n                                if (obj[field] === search) {\n                                    return true;\n                                }\n                            }\n                            else if (typeof obj[field] === 'object') {\n                                return nestedSearch(obj[field]);\n                            }\n                        }\n                        return false;\n                    };\n\n                    var search = $(Plugin.getOption('search.input')).val();\n                    if (typeof search !== 'undefined' && search !== '') {\n                        search = search.toLowerCase();\n                        datatable.dataSet = $.grep(datatable.dataSet, nestedSearch);\n                        // remove generalSearch as we don't need this for next columns filter\n                        delete params.query[Plugin.getGeneralSearchKey()];\n                    }\n\n                    // remove empty element from array\n                    $.each(params.query, function(k, v) {\n                        if (v === '') {\n                            delete params.query[k];\n                        }\n                    });\n\n                    // filter array by query\n                    datatable.dataSet = Plugin.filterArray(datatable.dataSet, params.query);\n\n                    // reset array index\n                    datatable.dataSet = datatable.dataSet.filter(function() {\n                        return true;\n                    });\n                }\n\n                return datatable.dataSet;\n            },\n\n            /**\n             * Utility helper to filter array by object pair of {key:value}\n             * @param list\n             * @param args\n             * @param operator\n             * @returns {*}\n             */\n            filterArray: function(list, args, operator) {\n                if (typeof list !== 'object') {\n                    return [];\n                }\n\n                if (typeof operator === 'undefined') operator = 'AND';\n\n                if (typeof args !== 'object') {\n                    return list;\n                }\n\n                operator = operator.toUpperCase();\n\n                if ($.inArray(operator, ['AND', 'OR', 'NOT']) === -1) {\n                    return [];\n                }\n\n                var count = Object.keys(args).length;\n                var filtered = [];\n\n                $.each(list, function(key, obj) {\n                    var to_match = obj;\n\n                    var matched = 0;\n                    $.each(args, function(m_key, m_value) {\n                        m_value = m_value instanceof Array ? m_value : [m_value];\n                        if (to_match.hasOwnProperty(m_key)) {\n                            var lhs = to_match[m_key].toString().toLowerCase();\n                            m_value.forEach(function(item, index) {\n                                if (item.toString().toLowerCase() == lhs || lhs.indexOf(item.toString().toLowerCase()) !== -1) {\n                                    matched++;\n                                }\n                            });\n                        }\n                    });\n\n                    if (('AND' == operator && matched == count) ||\n                        ('OR' == operator && matched > 0) ||\n                        ('NOT' == operator && 0 == matched)) {\n                        filtered[key] = obj;\n                    }\n                });\n\n                list = filtered;\n\n                return list;\n            },\n\n            /**\n             * Reset lock column scroll to 0 when resize\n             */\n            resetScroll: function() {\n                if (typeof options.detail === 'undefined' && Plugin.getDepth() === 1) {\n                    $(datatable.table).find('.' + pfx + 'datatable__row').css('left', 0);\n                    $(datatable.table).find('.' + pfx + 'datatable__lock').css('top', 0);\n                    $(datatable.tableBody).scrollTop(0);\n                }\n            },\n\n            /**\n             * Get column options by field\n             * @param field\n             * @returns {boolean}\n             */\n            getColumnByField: function(field) {\n                if (typeof field === 'undefined') return;\n                var result;\n                $.each(options.columns, function(i, column) {\n                    if (field === column.field) {\n                        result = column;\n                        return false;\n                    }\n                });\n                return result;\n            },\n\n            /**\n             * Get default sort column\n             */\n            getDefaultSortColumn: function() {\n                var result;\n                $.each(options.columns, function(i, column) {\n                    if (typeof column.sortable !== 'undefined'\n                        && $.inArray(column.sortable, ['asc', 'desc']) !== -1) {\n                        result = {sort: column.sortable, field: column.field};\n                        return false;\n                    }\n                });\n                return result;\n            },\n\n            /**\n             * Helper to get element dimensions, when the element is hidden\n             * @param element\n             * @param includeMargin\n             * @returns {{width: number, height: number, innerWidth: number,\n             *     innerHeight: number, outerWidth: number, outerHeight: number}}\n             */\n            getHiddenDimensions: function(element, includeMargin) {\n                var props = {\n                        position: 'absolute',\n                        visibility: 'hidden',\n                        display: 'block',\n                    },\n                    dim = {\n                        width: 0,\n                        height: 0,\n                        innerWidth: 0,\n                        innerHeight: 0,\n                        outerWidth: 0,\n                        outerHeight: 0,\n                    },\n                    hiddenParents = $(element).parents().addBack().not(':visible');\n                includeMargin = (typeof includeMargin === 'boolean')\n                    ? includeMargin\n                    : false;\n\n                var oldProps = [];\n                hiddenParents.each(function() {\n                    var old = {};\n\n                    for (var name in props) {\n                        old[name] = this.style[name];\n                        this.style[name] = props[name];\n                    }\n\n                    oldProps.push(old);\n                });\n\n                dim.width = $(element).width();\n                dim.outerWidth = $(element).outerWidth(includeMargin);\n                dim.innerWidth = $(element).innerWidth();\n                dim.height = $(element).height();\n                dim.innerHeight = $(element).innerHeight();\n                dim.outerHeight = $(element).outerHeight(includeMargin);\n\n                hiddenParents.each(function(i) {\n                    var old = oldProps[i];\n                    for (var name in props) {\n                        this.style[name] = old[name];\n                    }\n                });\n\n                return dim;\n            },\n\n            getGeneralSearchKey: function() {\n                var searchInput = $(Plugin.getOption('search.input'));\n                return $(searchInput).prop('name') || $(searchInput).prop('id');\n            },\n\n            /**\n             * Get value by dot notation path string and to prevent undefined errors\n             * @param path String Dot notation path in string\n             * @param object Object to iterate\n             * @returns {*}\n             */\n            getObject: function(path, object) {\n                return path.split('.').reduce(function(obj, i) {\n                    return obj !== null && typeof obj[i] !== 'undefined' ? obj[i] : null;\n                }, object);\n            },\n\n            /**\n             * Extend object\n             * @param obj\n             * @param path\n             * @param value\n             * @returns {*}\n             */\n            extendObj: function(obj, path, value) {\n                var levels = path.split('.'),\n                    i = 0;\n\n                function createLevel(child) {\n                    var name = levels[i++];\n                    if (typeof child[name] !== 'undefined' && child[name] !== null) {\n                        if (typeof child[name] !== 'object' &&\n                            typeof child[name] !== 'function') {\n                            child[name] = {};\n                        }\n                    } else {\n                        child[name] = {};\n                    }\n                    if (i === levels.length) {\n                        child[name] = value;\n                    } else {\n                        createLevel(child[name]);\n                    }\n                }\n\n                createLevel(obj);\n                return obj;\n            },\n\n            rowEvenOdd: function() {\n                // row even class\n                $(datatable.tableBody).find('.' + pfx + 'datatable__row').removeClass(pfx + 'datatable__row--even');\n                if ($(datatable.wrap).hasClass(pfx + 'datatable--subtable')) {\n                    $(datatable.tableBody).find('.' + pfx + 'datatable__row:not(.' + pfx + 'datatable__row-detail):even').addClass(pfx + 'datatable__row--even');\n                } else {\n                    $(datatable.tableBody).find('.' + pfx + 'datatable__row:nth-child(even)').addClass(pfx + 'datatable__row--even');\n                }\n            },\n\n            /********************\n             ** PUBLIC API METHODS\n             ********************/\n\n            // delay timer\n            timer: 0,\n\n            /**\n             * Redraw datatable by recalculating its DOM elements, etc.\n             * @returns {jQuery}\n             */\n            redraw: function() {\n                Plugin.adjustCellsWidth.call();\n                if (Plugin.isLocked()) {\n                    // fix hiding cell width issue\n                    Plugin.scrollbar();\n                    Plugin.resetScroll();\n\n                    Plugin.adjustCellsHeight.call();\n                }\n                Plugin.adjustLockContainer.call();\n                Plugin.initHeight.call();\n                return datatable;\n            },\n\n            /**\n             * Shortcode to reload\n             * @returns {jQuery}\n             */\n            load: function() {\n                Plugin.reload();\n                return datatable;\n            },\n\n            /**\n             * Datasource reload\n             * @returns {jQuery}\n             */\n            reload: function() {\n                var delay = (function() {\n                    return function(callback, ms) {\n                        clearTimeout(Plugin.timer);\n                        Plugin.timer = setTimeout(callback, ms);\n                    };\n                })();\n                delay(function() {\n                    // local only. remote pagination will skip this block\n                    if (!options.data.serverFiltering) {\n                        Plugin.localDataUpdate();\n                    }\n                    Plugin.dataRender();\n                    $(datatable).trigger(pfx + 'datatable--on-reloaded');\n                }, Plugin.getOption('search.delay'));\n                return datatable;\n            },\n\n            /**\n             * Get record by record ID\n             * @param id\n             * @returns {jQuery}\n             */\n            getRecord: function(id) {\n                if (typeof datatable.tableBody === 'undefined') datatable.tableBody = $(datatable.table).children('tbody');\n                $(datatable.tableBody).find('.' + pfx + 'datatable__cell:first-child').each(function(i, cell) {\n                    if (id == $(cell).text()) {\n                        var rowNumber = $(cell).closest('.' + pfx + 'datatable__row').index() + 1;\n                        datatable.API.record = datatable.API.value = Plugin.getOneRow(datatable.tableBody, rowNumber);\n                        return datatable;\n                    }\n                });\n                return datatable;\n            },\n\n            /**\n             * @deprecated in v5.0.6\n             * Get column of current record ID\n             * @param columnName\n             * @returns {jQuery}\n             */\n            getColumn: function(columnName) {\n                Plugin.setSelectedRecords();\n                datatable.API.value = $(datatable.API.record).find('[data-field=\"' + columnName + '\"]');\n                return datatable;\n            },\n\n            /**\n             * Destroy datatable to original DOM state before datatable was\n             * initialized\n             * @returns {jQuery}\n             */\n            destroy: function() {\n                $(datatable).parent().find('.' + pfx + 'datatable__pager').remove();\n                var initialDatatable = $(datatable.initialDatatable).addClass(pfx + 'datatable--destroyed').show();\n                $(datatable).replaceWith(initialDatatable);\n                datatable = initialDatatable;\n                $(datatable).trigger(pfx + 'datatable--on-destroy');\n                Plugin.isInit = false;\n                initialDatatable = null;\n                return initialDatatable;\n            },\n\n            /**\n             * Sort by column field\n             * @param field\n             * @param sort\n             */\n            sort: function(field, sort) {\n                // toggle sort\n                sort = typeof sort === 'undefined' ? 'asc' : sort;\n\n                Plugin.spinnerCallback(true);\n\n                // update field and sort params\n                var meta = {field: field, sort: sort};\n                Plugin.setDataSourceParam('sort', meta);\n\n                setTimeout(function() {\n                    Plugin.dataRender('sort');\n                    $(datatable).trigger(pfx + 'datatable--on-sort', meta);\n                    $(datatable.tableHead).find('.' + pfx + 'datatable__cell > span > i').remove();\n                }, 300);\n\n                return datatable;\n            },\n\n            /**\n             * @deprecated in v5.0.6\n             * Get current selected column value\n             * @returns {jQuery}\n             */\n            getValue: function() {\n                return $(datatable.API.value).text();\n            },\n\n            /**\n             * Set checkbox active\n             * @param cell JQuery selector or checkbox ID\n             */\n            setActive: function(cell) {\n                if (typeof cell === 'string') {\n                    // set by checkbox id\n                    cell = $(datatable.tableBody).find('.' + pfx + 'checkbox--single > [type=\"checkbox\"][value=\"' + cell + '\"]');\n                }\n\n                $(cell).prop('checked', true);\n\n                // normal table\n                var row = $(cell).closest('.' + pfx + 'datatable__row').addClass(pfx + 'datatable__row--active');\n\n                var index = $(row).index() + 1;\n                // lock table\n                $(row).closest('.' + pfx + 'datatable__lock').parent().find('.' + pfx + 'datatable__row:nth-child(' + index + ')').addClass(pfx + 'datatable__row--active');\n\n                var ids = [];\n                $(row).each(function(i, td) {\n                    var id = $(td).find('.' + pfx + 'checkbox--single:not(.' + pfx + 'checkbox--all) > [type=\"checkbox\"]').val();\n                    if (typeof id !== 'undefined') {\n                        ids.push(id);\n                    }\n                });\n\n                $(datatable).trigger(pfx + 'datatable--on-check', [ids]);\n            },\n\n            /**\n             * Set checkbox inactive\n             * @param cell JQuery selector or checkbox ID\n             */\n            setInactive: function(cell) {\n                if (typeof cell === 'string') {\n                    // set by checkbox id\n                    cell = $(datatable.tableBody).find('.' + pfx + 'checkbox--single > [type=\"checkbox\"][value=\"' + cell + '\"]');\n                }\n\n                $(cell).prop('checked', false);\n\n                // normal table\n                var row = $(cell).closest('.' + pfx + 'datatable__row').removeClass(pfx + 'datatable__row--active');\n                var index = $(row).index() + 1;\n\n                // lock table\n                $(row).closest('.' + pfx + 'datatable__lock').parent().find('.' + pfx + 'datatable__row:nth-child(' + index + ')').removeClass(pfx + 'datatable__row--active');\n\n                var ids = [];\n                $(row).each(function(i, td) {\n                    var id = $(td).find('.' + pfx + 'checkbox--single:not(.' + pfx + 'checkbox--all) > [type=\"checkbox\"]').val();\n                    if (typeof id !== 'undefined') {\n                        ids.push(id);\n                    }\n                });\n\n                $(datatable).trigger(pfx + 'datatable--on-uncheck', [ids]);\n            },\n\n            /**\n             * Set all checkboxes active or inactive\n             * @param active\n             */\n            setActiveAll: function(active) {\n                // todo; check if child table also will set active?\n                var checkboxes = $(datatable.table).find('> tbody, > thead').find('> tr:not(.' + pfx + 'datatable__row-subtable)').find('.' + pfx + 'datatable__cell--check [type=\"checkbox\"]');\n                if (active) {\n                    Plugin.setActive(checkboxes);\n                } else {\n                    Plugin.setInactive(checkboxes);\n                }\n            },\n\n            /**\n             * @deprecated in v5.0.6\n             * Get selected rows which are active\n             * @returns {jQuery}\n             */\n            setSelectedRecords: function() {\n                datatable.API.record = $(datatable.tableBody).find('.' + pfx + 'datatable__row--active');\n                return datatable;\n            },\n\n            /**\n             * Get selected records\n             * @returns {null}\n             */\n            getSelectedRecords: function() {\n                // support old method\n                Plugin.setSelectedRecords();\n                datatable.API.record = datatable.rows('.' + pfx + 'datatable__row--active').nodes();\n                return datatable.API.record;\n            },\n\n            /**\n             * Get options by dots notation path\n             * @param path String Dot notation path in string\n             * @returns {*}\n             */\n            getOption: function(path) {\n                return Plugin.getObject(path, options);\n            },\n\n            /**\n             * Set global options nodes by dots notation path\n             * @param path\n             * @param object\n             */\n            setOption: function(path, object) {\n                options = Plugin.extendObj(options, path, object);\n            },\n\n            /**\n             * Search filter for local & remote\n             * @param value\n             * @param columns. Optional list of columns to be filtered.\n             */\n            search: function(value, columns) {\n                if (typeof columns !== 'undefined') columns = $.makeArray(columns);\n                var delay = (function() {\n                    return function(callback, ms) {\n                        clearTimeout(Plugin.timer);\n                        Plugin.timer = setTimeout(callback, ms);\n                    };\n                })();\n\n                delay(function() {\n                    // get query parameters\n                    var query = Plugin.getDataSourceQuery();\n\n                    // search not by columns\n                    if (typeof columns === 'undefined' && typeof value !== 'undefined') {\n                        var key = Plugin.getGeneralSearchKey();\n                        query[key] = value;\n                    }\n\n                    // search by columns, support multiple columns\n                    if (typeof columns === 'object') {\n                        $.each(columns, function(k, column) {\n                            query[column] = value;\n                        });\n                        // remove empty element from arrays\n                        $.each(query, function(k, v) {\n                            if (v === '' || $.isEmptyObject(v)) {\n                                delete query[k];\n                            }\n                        });\n                    }\n\n                    Plugin.setDataSourceQuery(query);\n\n                    // local filter only. remote pagination will skip this block\n                    if (!options.data.serverFiltering) {\n                        Plugin.localDataUpdate();\n                    }\n                    Plugin.dataRender('search');\n                }, Plugin.getOption('search.delay'));\n            },\n\n            /**\n             * Set datasource params extract\n             * @param param\n             * @param value\n             */\n            setDataSourceParam: function(param, value) {\n                datatable.API.params = $.extend({}, {\n                    pagination: {page: 1, perpage: Plugin.getOption('data.pageSize')},\n                    sort: Plugin.getDefaultSortColumn(),\n                    query: {},\n                }, datatable.API.params, Plugin.stateGet(Plugin.stateId));\n\n                datatable.API.params = Plugin.extendObj(datatable.API.params, param, value);\n\n                Plugin.stateKeep(Plugin.stateId, datatable.API.params);\n            },\n\n            /**\n             * Get datasource params\n             * @param param\n             */\n            getDataSourceParam: function(param) {\n                datatable.API.params = $.extend({}, {\n                    pagination: {page: 1, perpage: Plugin.getOption('data.pageSize')},\n                    sort: Plugin.getDefaultSortColumn(),\n                    query: {},\n                }, datatable.API.params, Plugin.stateGet(Plugin.stateId));\n\n                if (typeof param === 'string') {\n                    return Plugin.getObject(param, datatable.API.params);\n                }\n\n                return datatable.API.params;\n            },\n\n            /**\n             * Shortcode to datatable.getDataSourceParam('query');\n             * @returns {*}\n             */\n            getDataSourceQuery: function() {\n                return Plugin.getDataSourceParam('query') || {};\n            },\n\n            /**\n             * Shortcode to datatable.setDataSourceParam('query', query);\n             * @param query\n             */\n            setDataSourceQuery: function(query) {\n                Plugin.setDataSourceParam('query', query);\n            },\n\n            /**\n             * Get current page number\n             * @returns {number}\n             */\n            getCurrentPage: function() {\n                return $(datatable.table).\n                siblings('.' + pfx + 'datatable__pager').\n                last().\n                find('.' + pfx + 'datatable__pager-nav').\n                find('.' + pfx + 'datatable__pager-link.' + pfx + 'datatable__pager-link--active').\n                data('page') || 1;\n            },\n\n            /**\n             * Get selected dropdown page size\n             * @returns {*|number}\n             */\n            getPageSize: function() {\n                return $(datatable.table).siblings('.' + pfx + 'datatable__pager').last().find('select.' + pfx + 'datatable__pager-size').val() || 10;\n            },\n\n            /**\n             * Get total rows\n             */\n            getTotalRows: function() {\n                return datatable.API.params.pagination.total;\n            },\n\n            /**\n             * Get full dataset in grid\n             * @returns {*|null|Array}\n             */\n            getDataSet: function() {\n                return datatable.originalDataSet;\n            },\n\n            /**\n             * @deprecated in v5.0.6\n             * Hide column by column's field name\n             * @param fieldName\n             */\n            hideColumn: function(fieldName) {\n                // add hide option for this column\n                $.map(options.columns, function(column) {\n                    if (fieldName === column.field) {\n                        column.responsive = {hidden: 'xl'};\n                    }\n                    return column;\n                });\n                // hide current displayed column\n                var tds = $.grep($(datatable.table).find('.' + pfx + 'datatable__cell'), function(n, i) {\n                    return fieldName === $(n).data('field');\n                });\n                $(tds).hide();\n            },\n\n            /**\n             * @deprecated in v5.0.6\n             * Show column by column's field name\n             * @param fieldName\n             */\n            showColumn: function(fieldName) {\n                // add hide option for this column\n                $.map(options.columns, function(column) {\n                    if (fieldName === column.field) {\n                        delete column.responsive;\n                    }\n                    return column;\n                });\n                // hide current displayed column\n                var tds = $.grep($(datatable.table).find('.' + pfx + 'datatable__cell'), function(n, i) {\n                    return fieldName === $(n).data('field');\n                });\n                $(tds).show();\n            },\n\n            nodeTr: [],\n            nodeTd: [],\n            nodeCols: [],\n            recentNode: [],\n\n            table: function() {\n                return datatable.table;\n            },\n\n            /**\n             * Select a single row from the table\n             * @param selector\n             * @returns {jQuery}\n             */\n            row: function(selector) {\n                Plugin.rows(selector);\n                Plugin.nodeTr = Plugin.recentNode = $(Plugin.nodeTr).first();\n                return datatable;\n            },\n\n            /**\n             * Select multiple rows from the table\n             * @param selector\n             * @returns {jQuery}\n             */\n            rows: function(selector) {\n                Plugin.nodeTr = Plugin.recentNode = $(datatable.tableBody).find(selector).filter('.' + pfx + 'datatable__row');\n                return datatable;\n            },\n\n            /**\n             * Select a single column from the table\n             * @param index zero-based index\n             * @returns {jQuery}\n             */\n            column: function(index) {\n                Plugin.nodeCols = Plugin.recentNode = $(datatable.tableBody).find('.' + pfx + 'datatable__cell:nth-child(' + (index + 1) + ')');\n                return datatable;\n            },\n\n            /**\n             * Select multiple columns from the table\n             * @param selector\n             * @returns {jQuery}\n             */\n            columns: function(selector) {\n                var context = datatable.table;\n                if (Plugin.nodeTr === Plugin.recentNode) {\n                    context = Plugin.nodeTr;\n                }\n                var columns = $(context).find('.' + pfx + 'datatable__cell[data-field=\"' + selector + '\"]');\n                if (columns.length > 0) {\n                    Plugin.nodeCols = Plugin.recentNode = columns;\n                } else {\n                    Plugin.nodeCols = Plugin.recentNode = $(context).find(selector).filter('.' + pfx + 'datatable__cell');\n                }\n                return datatable;\n            },\n\n            cell: function(selector) {\n                Plugin.cells(selector);\n                Plugin.nodeTd = Plugin.recentNode = $(Plugin.nodeTd).first();\n                return datatable;\n            },\n\n            cells: function(selector) {\n                var cells = $(datatable.tableBody).find('.' + pfx + 'datatable__cell');\n                if (typeof selector !== 'undefined') {\n                    cells = $(cells).filter(selector);\n                }\n                Plugin.nodeTd = Plugin.recentNode = cells;\n                return datatable;\n            },\n\n            /**\n             * Delete the selected row from the table\n             * @returns {jQuery}\n             */\n            remove: function() {\n                if ($(Plugin.nodeTr.length) && Plugin.nodeTr === Plugin.recentNode) {\n                    $(Plugin.nodeTr).remove();\n                }\n                Plugin.layoutUpdate();\n                return datatable;\n            },\n\n            /**\n             * Show or hide the columns or rows\n             */\n            visible: function(bool) {\n                if ($(Plugin.recentNode.length)) {\n                    var locked = Plugin.lockEnabledColumns();\n                    if (Plugin.recentNode === Plugin.nodeCols) {\n                        var index = Plugin.recentNode.index();\n\n                        if (Plugin.isLocked()) {\n                            var scrollColumns = $(Plugin.recentNode).closest('.' + pfx + 'datatable__lock--scroll').length;\n                            if (scrollColumns) {\n                                // is at center of scrollable area\n                                index += locked.left.length + 1;\n                            } else if ($(Plugin.recentNode).closest('.' + pfx + 'datatable__lock--right').length) {\n                                // is at the right locked table\n                                index += locked.left.length + scrollColumns + 1;\n                            }\n                        }\n                    }\n\n                    if (bool) {\n                        if (Plugin.recentNode === Plugin.nodeCols) {\n                            delete options.columns[index].responsive;\n                        }\n                        $(Plugin.recentNode).show();\n                    } else {\n                        if (Plugin.recentNode === Plugin.nodeCols) {\n                            Plugin.setOption('columns.' + index + '.responsive', {hidden: 'xl'});\n                        }\n                        $(Plugin.recentNode).hide();\n                    }\n                    Plugin.redraw();\n                }\n            },\n\n            /**\n             * Get the the DOM element for the selected rows or columns\n             * @returns {Array}\n             */\n            nodes: function() {\n                return Plugin.recentNode;\n            },\n\n            /**\n             * will be implemented soon\n             * @returns {jQuery}\n             */\n            dataset: function() {\n                return datatable;\n            },\n\n        };\n\n        /**\n         * Public API methods can be used directly by datatable\n         */\n        $.each(Plugin, function(funcName, func) {\n            datatable[funcName] = func;\n        });\n\n        // initialize main datatable plugin\n        if (typeof options !== 'undefined') {\n            if (typeof options === 'string') {\n                var method = options;\n                datatable = $(this).data(pluginName);\n                if (typeof datatable !== 'undefined') {\n                    options = datatable.options;\n                    Plugin[method].apply(this, Array.prototype.slice.call(arguments, 1));\n                }\n            } else {\n                if (!datatable.data(pluginName) && !$(this).hasClass(pfx + 'datatable--loaded')) {\n                    datatable.dataSet = null;\n                    datatable.textAlign = {\n                        left: pfx + 'datatable__cell--left',\n                        center: pfx + 'datatable__cell--center',\n                        right: pfx + 'datatable__cell--right',\n                    };\n\n                    // merge default and user defined options\n                    options = $.extend(true, {}, $.fn[pluginName].defaults, options);\n\n                    datatable.options = options;\n\n                    // init plugin process\n                    Plugin.init.apply(this, [options]);\n\n                    $(datatable.wrap).data(pluginName, datatable);\n                }\n            }\n        } else {\n            // get existing instance datatable\n            datatable = $(this).data(pluginName);\n            if (typeof datatable === 'undefined') {\n                $.error(pluginName + ' not initialized');\n            }\n            options = datatable.options;\n        }\n\n        return datatable;\n    };\n\n    // default options\n    $.fn[pluginName].defaults = {\n        // datasource definition\n        data: {\n            type: 'local',\n            source: null,\n            pageSize: 10, // display records per page\n            saveState: {\n                // save datatable state(pagination, filtering, sorting, etc) in cookie or browser webstorage\n                cookie: false,\n                webstorage: true,\n            },\n\n            serverPaging: false,\n            serverFiltering: false,\n            serverSorting: false,\n\n            autoColumns: false,\n            attr: {\n                rowProps: [],\n            },\n        },\n\n        // layout definition\n        layout: {\n            theme: 'default', // datatable will support multiple themes and designs\n            class: pfx + 'datatable--brand', // custom wrapper class\n            scroll: false, // enable/disable datatable scroll both horizontal and vertical when needed.\n            height: null, // datatable's body's fixed height\n            minHeight: 300,\n            footer: false, // display/hide footer\n            header: true, // display/hide header\n            customScrollbar: true, // set false to disable custom scrollbar\n\n            // datatable spinner\n            spinner: {\n                overlayColor: '#000000',\n                opacity: 0,\n                type: 'loader',\n                state: 'brand',\n                message: true,\n            },\n\n            // datatable UI icons\n            icons: {\n                sort: {asc: 'la la-arrow-up', desc: 'la la-arrow-down'},\n                pagination: {\n                    next: 'la la-angle-right',\n                    prev: 'la la-angle-left',\n                    first: 'la la-angle-double-left',\n                    last: 'la la-angle-double-right',\n                    more: 'la la-ellipsis-h',\n                },\n                rowDetail: {expand: 'fa fa-caret-down', collapse: 'fa fa-caret-right'},\n            },\n        },\n\n        // column sorting\n        sortable: true,\n\n        // resize column size with mouse drag coming soon)\n        resizable: false,\n\n        // column based filtering (coming soon)\n        filterable: false,\n\n        pagination: true,\n\n        // inline and bactch editing (cooming soon)\n        editable: false,\n\n        // columns definition\n        columns: [],\n\n        search: {\n            // enable trigger search by keyup enter\n            onEnter: false,\n            // input text for search\n            input: null,\n            // search delay in milliseconds\n            delay: 400,\n        },\n\n        rows: {\n            // deprecated\n            callback: function() {\n            },\n            // call before row template\n            beforeTemplate: function() {\n            },\n            // call after row template\n            afterTemplate: function() {\n            },\n            // auto hide columns, if rows overflow. work on non locked columns\n            autoHide: false,\n        },\n\n        // toolbar\n        toolbar: {\n            // place pagination and displayInfo blocks according to the array order\n            layout: ['pagination', 'info'],\n\n            // toolbar placement can be at top or bottom or both top and bottom repeated\n            placement: ['bottom'],  //'top', 'bottom'\n\n            // toolbar items\n            items: {\n                // pagination\n                pagination: {\n                    // pagination type(default or scroll)\n                    type: 'default',\n\n                    // number of pages to display by breakpoints\n                    pages: {\n                        desktop: {\n                            layout: 'default',\n                            pagesNumber: 6,\n                        },\n                        tablet: {\n                            layout: 'default',\n                            pagesNumber: 3,\n                        },\n                        mobile: {\n                            layout: 'compact',\n                        },\n                    },\n\n                    // navigation buttons\n                    navigation: {\n                        prev: true, // display prev link\n                        next: true, // display next link\n                        first: true, // display first link\n                        last: true, // display last link\n                    },\n\n                    // page size select\n                    pageSizeSelect: [], // display dropdown to select pagination size. -1 is used for \"ALl\" option\n                },\n\n                // records info\n                info: true,\n            },\n        },\n\n        // here we will keep all strings and message used by datatable UI so developer can easiliy translate to any language.\n        // By default the stirngs will be in the plugin source and here can override it\n        translate: {\n            records: {\n                processing: 'Please wait...',\n                noRecords: 'No records found',\n            },\n            toolbar: {\n                pagination: {\n                    items: {\n                        default: {\n                            first: 'First',\n                            prev: 'Previous',\n                            next: 'Next',\n                            last: 'Last',\n                            more: 'More pages',\n                            input: 'Page number',\n                            select: 'Select page size',\n                        },\n                        info: 'Displaying {{start}} - {{end}} of {{total}} records',\n                    },\n                },\n            },\n        },\n\n        extensions: {},\n    };\n\n}(jQuery));\nvar defaults = {\n    layout: {\n        icons: {\n            pagination: {\n                next: 'la la-angle-right',\n                prev: 'la la-angle-left',\n                first: 'la la-angle-double-left',\n                last: 'la la-angle-double-right',\n                more: 'la la-ellipsis-h',\n            },\n            rowDetail: {expand: 'fa fa-caret-down', collapse: 'fa fa-caret-right'},\n        }\n    }\n};\n\nif (mUtil.isRTL()) {\n    defaults = {\n        layout: {\n            icons: {\n                pagination: {\n                    next: 'la la-angle-left',\n                    prev: 'la la-angle-right',\n                    last: 'la la-angle-double-left',\n                    first: 'la la-angle-double-right',\n                },\n                rowDetail: {collapse: 'fa fa-caret-down', expand: 'fa fa-caret-right'},\n            }\n        }\n    }\n}\n\n$.extend(true, $.fn.mDatatable.defaults, defaults);\nvar mDropdown = function(elementId, options) {\n    //== Main object\n    var the = this;\n    var init = false;\n\n    //== Get element object\n    var element = mUtil.get(elementId);\n    var body = mUtil.get('body');\n\n    if (!element) {\n        return;\n    }\n\n    //== Default options\n    var defaultOptions = {\n        toggle: 'click',\n        hoverTimeout: 300,\n        skin: 'light',\n        height: 'auto',\n        maxHeight: false,\n        minHeight: false,\n        persistent: false,\n        mobileOverlay: true\n    };\n\n    ////////////////////////////\n    // ** Private Methods  ** //\n    ////////////////////////////\n\n    var Plugin = {\n        /**\n         * Run plugin\n         * @returns {mdropdown}\n         */\n        construct: function(options) {\n            if (mUtil.data(element).has('dropdown')) {\n                the = mUtil.data(element).get('dropdown');\n            } else {\n                // reset dropdown\n                Plugin.init(options);\n\n                Plugin.setup();\n\n                mUtil.data(element).set('dropdown', the);\n            }\n\n            return the;\n        },\n\n        /**\n         * Handles subdropdown click toggle\n         * @returns {mdropdown}\n         */\n        init: function(options) {\n            // merge default and user defined options\n            the.options = mUtil.deepExtend({}, defaultOptions, options);\n            the.events = [];\n            the.eventHandlers = {};\n            the.open = false;\n\n            the.layout = {};\n            the.layout.close = mUtil.find(element, '.m-dropdown__close');\n            the.layout.toggle = mUtil.find(element, '.m-dropdown__toggle');\n            the.layout.arrow = mUtil.find(element, '.m-dropdown__arrow');\n            the.layout.wrapper = mUtil.find(element, '.m-dropdown__wrapper');\n            the.layout.defaultDropPos = mUtil.hasClass(element, 'm-dropdown--up') ? 'up' : 'down';\n            the.layout.currentDropPos = the.layout.defaultDropPos;\n\n            if (mUtil.attr(element, 'm-dropdown-toggle') == \"hover\") {\n                the.options.toggle = 'hover';\n            }\n        },\n\n        /**\n         * Setup dropdown\n         */\n        setup: function() {\n            if (the.options.placement) {\n                mUtil.addClass(element, 'm-dropdown--' + the.options.placement);\n            }\n\n            if (the.options.align) {\n                mUtil.addClass(element, 'm-dropdown--align-' + the.options.align);\n            }\n\n            if (the.options.width) {\n                mUtil.css(the.layout.wrapper, 'width', the.options.width + 'px');\n            }\n\n            if (mUtil.attr(element, 'm-dropdown-persistent') == '1') {\n                the.options.persistent = true;\n            }\n\n            if (the.options.toggle == 'hover') {\n                mUtil.addEvent(element, 'mouseout', Plugin.hideMouseout);\n            }\n\n            // set zindex\n            Plugin.setZindex();\n        },\n\n        /**\n         * Toggle dropdown\n         */\n        toggle: function() {\n            if (the.open) {\n                return Plugin.hide();\n            } else {\n                return Plugin.show();\n            }\n        },\n\n        /**\n         * Set content\n         */\n        setContent: function(content) {\n            var content = mUtil.find(element, '.m-dropdown__content').innerHTML = content;\n\n            return the;\n        },\n\n        /**\n         * Show dropdown\n         */\n        show: function() {\n            if (the.options.toggle == 'hover' && mUtil.hasAttr(element, 'hover')) {\n                Plugin.clearHovered();\n                return the;\n            }\n\n            if (the.open) {\n                return the;\n            }\n\n            if (the.layout.arrow) {\n                Plugin.adjustArrowPos();\n            }\n\n            Plugin.eventTrigger('beforeShow');\n\n            Plugin.hideOpened();\n\n            mUtil.addClass(element, 'm-dropdown--open');\n\n            if (mUtil.isMobileDevice() && the.options.mobileOverlay) {\n                var zIndex = mUtil.css(element, 'z-index') - 1;\n\n                var dropdownoff = mUtil.insertAfter(document.createElement('DIV'), element );\n\n                mUtil.addClass(dropdownoff, 'm-dropdown__dropoff');\n                mUtil.css(dropdownoff, 'z-index', zIndex);\n                mUtil.data(dropdownoff).set('dropdown', element);\n                mUtil.data(element).set('dropoff', dropdownoff);\n\n                mUtil.addEvent(dropdownoff, 'click', function(e) {\n                    Plugin.hide();\n                    mUtil.remove(this);\n                    e.preventDefault();\n                });\n            }\n\n            element.focus();\n            element.setAttribute('aria-expanded', 'true');\n            the.open = true;\n\n            //== Update scrollers\n            mUtil.scrollersUpdate(element);\n\n            Plugin.eventTrigger('afterShow');\n\n            return the;\n        },\n\n        /**\n         * Clear dropdown hover\n         */\n        clearHovered: function() {\n            var timeout = mUtil.attr(element, 'timeout');\n\n            mUtil.removeAttr(element, 'hover');\n            mUtil.removeAttr(element, 'timeout');\n\n            clearTimeout(timeout);\n        },\n\n        /**\n         * Hide hovered dropdown\n         */\n        hideHovered: function(force) {\n            if (force === true) {\n                if (Plugin.eventTrigger('beforeHide') === false) {\n                    return;\n                }\n\n                Plugin.clearHovered();\n                mUtil.removeClass(element, 'm-dropdown--open');\n                the.open = false;\n                Plugin.eventTrigger('afterHide');\n            } else {\n                if (mUtil.hasAttr(element, 'hover') === true) {\n                    return;\n                }\n\n                if (Plugin.eventTrigger('beforeHide') === false) {\n                    return;\n                }\n\n                var timeout = setTimeout(function() {\n                    if (mUtil.attr(element, 'hover')) {\n                        Plugin.clearHovered();\n                        mUtil.removeClass(element, 'm-dropdown--open');\n                        the.open = false;\n                        Plugin.eventTrigger('afterHide');\n                    }\n                }, the.options.hoverTimeout);\n\n                mUtil.attr(element, 'hover', '1');\n                mUtil.attr(element, 'timeout', timeout);\n            }\n        },\n\n        /**\n         * Hide clicked dropdown\n         */\n        hideClicked: function() {\n            if (Plugin.eventTrigger('beforeHide') === false) {\n                return;\n            }\n\n            mUtil.removeClass(element, 'm-dropdown--open');\n            mUtil.data(element).remove('dropoff');\n            the.open = false;\n            Plugin.eventTrigger('afterHide');\n        },\n\n        /**\n         * Hide dropdown\n         */\n        hide: function(force) {\n            if (the.open === false) {\n                return the;\n            }\n\n            if (mUtil.isDesktopDevice() && the.options.toggle == 'hover') {\n                Plugin.hideHovered(force);\n            } else {\n                Plugin.hideClicked();\n            }\n\n            if (the.layout.defaultDropPos == 'down' && the.layout.currentDropPos == 'up') {\n                mUtil.removeClass(element, 'm-dropdown--up');\n                the.layout.arrow.prependTo(the.layout.wrapper);\n                the.layout.currentDropPos = 'down';\n            }\n\n            return the;\n        },\n\n        /**\n         * Hide on mouseout\n         */\n        hideMouseout: function() {\n            if (mUtil.isDesktopDevice()) {\n                Plugin.hide();\n            }\n        },\n\n        /**\n         * Hide opened dropdowns\n         */\n        hideOpened: function() {\n            var query = mUtil.findAll(body, '.m-dropdown.m-dropdown--open');\n\n            for (var i = 0, j = query.length; i < j; i++) {\n                var dropdown = query[i];\n                mUtil.data(dropdown).get('dropdown').hide(true);\n            }\n        },\n\n        /**\n         * Adjust dropdown arrow positions\n         */\n        adjustArrowPos: function() {\n            var width = mUtil.outerWidth(element); // ?\n\n            var alignment = mUtil.hasClass(the.layout.arrow, 'm-dropdown__arrow--right') ? 'right' : 'left';\n            var pos = 0;\n\n            if (the.layout.arrow) {\n                if ( mUtil.isInResponsiveRange('mobile') && mUtil.hasClass(element, 'm-dropdown--mobile-full-width') ) {\n                    pos = mUtil.offset(element).left + (width / 2) - Math.abs( parseInt(mUtil.css(the.layout.arrow, 'width')) / 2) - parseInt(mUtil.css(the.layout.wrapper, 'left'));\n\n                    mUtil.css(the.layout.arrow, 'right', 'auto');\n                    mUtil.css(the.layout.arrow, 'left', pos + 'px');\n\n                    mUtil.css(the.layout.arrow, 'margin-left', 'auto');\n                    mUtil.css(the.layout.arrow, 'margin-right', 'auto');\n                } else if (mUtil.hasClass(the.layout.arrow, 'm-dropdown__arrow--adjust')) {\n                    pos = width / 2 - Math.abs( parseInt(mUtil.css(the.layout.arrow, 'width')) / 2);\n                    if (mUtil.hasClass(element, 'm-dropdown--align-push')) {\n                        pos = pos + 20;\n                    }\n\n                    if (alignment == 'right') {\n                        if (mUtil.isRTL()) {\n                            mUtil.css(the.layout.arrow, 'right', 'auto');\n                            mUtil.css(the.layout.arrow, 'left', pos + 'px');\n                        } else {\n                            mUtil.css(the.layout.arrow, 'left', 'auto');\n                            mUtil.css(the.layout.arrow, 'right', pos + 'px');\n                        }\n                    } else {\n                        if (mUtil.isRTL()) {\n                            mUtil.css(the.layout.arrow, 'left', 'auto');\n                            mUtil.css(the.layout.arrow, 'right', pos + 'px');\n                        } else {\n                            mUtil.css(the.layout.arrow, 'right', 'auto');\n                            mUtil.css(the.layout.arrow, 'left', pos + 'px');\n                        }\n                    }\n                }\n            }\n        },\n\n        /**\n         * Get zindex\n         */\n        setZindex: function() {\n            var zIndex = 101; //mUtil.css(the.layout.wrapper, 'z-index');\n            var newZindex = mUtil.getHighestZindex(element);\n            if (newZindex >= zIndex) {\n                zIndex = newZindex + 1;\n            }\n\n            mUtil.css(the.layout.wrapper, 'z-index', zIndex);\n        },\n\n        /**\n         * Check persistent\n         */\n        isPersistent: function() {\n            return the.options.persistent;\n        },\n\n        /**\n         * Check persistent\n         */\n        isShown: function() {\n            return the.open;\n        },\n\n        /**\n         * Trigger events\n         */\n        eventTrigger: function(name, args) {\n            for (var i = 0; i < the.events.length; i++) {\n                var event = the.events[i];\n                if (event.name == name) {\n                    if (event.one == true) {\n                        if (event.fired == false) {\n                            the.events[i].fired = true;\n                            event.handler.call(this, the, args);\n                        }\n                    } else {\n                        event.handler.call(this, the, args);\n                    }\n                }\n            }\n        },\n\n        addEvent: function(name, handler, one) {\n            the.events.push({\n                name: name,\n                handler: handler,\n                one: one,\n                fired: false\n            });\n        }\n    };\n\n    //////////////////////////\n    // ** Public Methods ** //\n    //////////////////////////\n\n    /**\n     * Set default options\n     */\n\n    the.setDefaults = function(options) {\n        defaultOptions = options;\n    };\n\n    /**\n     * Show dropdown\n     * @returns {mDropdown}\n     */\n    the.show = function() {\n        return Plugin.show();\n    };\n\n    /**\n     * Hide dropdown\n     * @returns {mDropdown}\n     */\n    the.hide = function() {\n        return Plugin.hide();\n    };\n\n    /**\n     * Toggle dropdown\n     * @returns {mDropdown}\n     */\n    the.toggle = function() {\n        return Plugin.toggle();\n    };\n\n    /**\n     * Toggle dropdown\n     * @returns {mDropdown}\n     */\n    the.isPersistent = function() {\n        return Plugin.isPersistent();\n    };\n\n    /**\n     * Check shown state\n     * @returns {mDropdown}\n     */\n    the.isShown = function() {\n        return Plugin.isShown();\n    };\n\n    /**\n     * Set dropdown content\n     * @returns {mDropdown}\n     */\n    the.setContent = function(content) {\n        return Plugin.setContent(content);\n    };\n\n    /**\n     * Register event\n     */\n    the.on = function(name, handler) {\n        return Plugin.addEvent(name, handler);\n    };\n\n    /**\n     * Register event\n     */\n    the.one = function(name, handler) {\n        return Plugin.addEvent(name, handler, true);\n    };\n\n    ///////////////////////////////\n    // ** Plugin Construction ** //\n    ///////////////////////////////\n\n    //== Run plugin\n    Plugin.construct.apply(the, [options]);\n\n    //== Init done\n    init = true;\n\n    // Return plugin instance\n    return the;\n};\n\n//== Plugin global lazy initialization\nmUtil.on(document, '[m-dropdown-toggle=\"click\"] .m-dropdown__toggle', 'click', function(e) {\n    var element = this.closest('.m-dropdown');\n    var dropdown;\n\n    if (element) {\n        if (mUtil.data(element).has('dropdown')) {\n            dropdown = mUtil.data(element).get('dropdown');\n        } else {\n            dropdown = new mDropdown(element);\n        }\n\n        dropdown.toggle();\n\n        e.preventDefault();\n    }\n});\n\nmUtil.on(document, '[m-dropdown-toggle=\"hover\"] .m-dropdown__toggle', 'click', function(e) {\n    if (mUtil.isDesktopDevice()) {\n        if (mUtil.attr(this, 'href') == '#') {\n            e.preventDefault();\n        }\n    } else if (mUtil.isMobileDevice()) {\n        var element = this.closest('.m-dropdown');\n        var dropdown;\n\n        if (element) {\n            if (mUtil.data(element).has('dropdown')) {\n                dropdown = mUtil.data(element).get('dropdown');\n            } else {\n                dropdown = new mDropdown(element);\n            }\n\n            dropdown.toggle();\n\n            e.preventDefault();\n        }\n    }\n});\n\nmUtil.on(document, '[m-dropdown-toggle=\"hover\"]', 'mouseover', function(e) {\n    if (mUtil.isDesktopDevice()) {\n        var element = this;\n        var dropdown;\n\n        if (element) {\n            if (mUtil.data(element).has('dropdown')) {\n                dropdown = mUtil.data(element).get('dropdown');\n            } else {\n                dropdown = new mDropdown(element);\n            }\n\n            dropdown.show();\n\n            e.preventDefault();\n        }\n    }\n});\n\ndocument.addEventListener(\"click\", function(e) {\n    var query;\n    var body = mUtil.get('body');\n    var target = e.target;\n\n    //== Handle dropdown close\n    if (query = body.querySelectorAll('.m-dropdown.m-dropdown--open')) {\n        for (var i = 0, len = query.length; i < len; i++) {\n            var element = query[i];\n            if (mUtil.data(element).has('dropdown') === false) {\n                return;\n            }\n\n            var the = mUtil.data(element).get('dropdown');\n            var toggle = mUtil.find(element, '.m-dropdown__toggle');\n\n            if (mUtil.hasClass(element, 'm-dropdown--disable-close')) {\n                e.preventDefault();\n                e.stopPropagation();\n                //return;\n            }\n\n            if (toggle && target !== toggle && toggle.contains(target) === false && target.contains(toggle) === false) {\n                if (the.isPersistent() === false) {\n                    the.hide();\n                }\n            } else if (element.contains(target) === false) {\n                the.hide();\n            }\n        }\n    }\n});\nvar mHeader = function(elementId, options) {\n    //== Main object\n    var the = this;\n    var init = false;\n\n    //== Get element object\n    var element = mUtil.get(elementId);\n    var body = mUtil.get('body');\n\n    if (element === undefined) {\n        return;\n    }\n\n    //== Default options\n    var defaultOptions = {\n        classic: false,\n        offset: {\n            mobile: 150,\n            desktop: 200\n        },\n        minimize: {\n            mobile: false,\n            desktop: false\n        }\n    };\n\n    ////////////////////////////\n    // ** Private Methods  ** //\n    ////////////////////////////\n\n    var Plugin = {\n        /**\n         * Run plugin\n         * @returns {mHeader}\n         */\n        construct: function(options) {\n            if (mUtil.data(element).has('header')) {\n                the = mUtil.data(element).get('header');\n            } else {\n                // reset header\n                Plugin.init(options);\n\n                // build header\n                Plugin.build();\n\n                mUtil.data(element).set('header', the);\n            }\n\n            return the;\n        },\n\n        /**\n         * Handles subheader click toggle\n         * @returns {mHeader}\n         */\n        init: function(options) {\n            the.events = [];\n\n            // merge default and user defined options\n            the.options = mUtil.deepExtend({}, defaultOptions, options);\n        },\n\n        /**\n         * Reset header\n         * @returns {mHeader}\n         */\n        build: function() {\n            var lastScrollTop = 0;\n\n            if (the.options.minimize.mobile === false && the.options.minimize.desktop === false) {\n                return;\n            }\n\n            window.addEventListener('scroll', function() {\n                var offset = 0, on, off, st;\n\n                if (mUtil.isInResponsiveRange('desktop')) {\n                    offset = the.options.offset.desktop;\n                    on = the.options.minimize.desktop.on;\n                    off = the.options.minimize.desktop.off;\n                } else if (mUtil.isInResponsiveRange('tablet-and-mobile')) {\n                    offset = the.options.offset.mobile;\n                    on = the.options.minimize.mobile.on;\n                    off = the.options.minimize.mobile.off;\n                }\n\n                st = window.pageYOffset;\n\n                if (\n                    (mUtil.isInResponsiveRange('tablet-and-mobile') && the.options.classic && the.options.classic.mobile) ||\n                    (mUtil.isInResponsiveRange('desktop') && the.options.classic && the.options.classic.desktop)\n\n                ) {\n                    if (st > offset) { // down scroll mode\n                        mUtil.addClass(body, on);\n                        mUtil.removeClass(body, off);\n                    } else { // back scroll mode\n                        mUtil.addClass(body, off);\n                        mUtil.removeClass(body, on);\n                    }\n                } else {\n                    if (st > offset && lastScrollTop < st) { // down scroll mode\n                        mUtil.addClass(body, on);\n                        mUtil.removeClass(body, off);\n                    } else { // back scroll mode\n                        mUtil.addClass(body, off);\n                        mUtil.removeClass(body, on);\n                    }\n\n                    lastScrollTop = st;\n                }\n            });\n        },\n\n        /**\n         * Trigger events\n         */\n        eventTrigger: function(name, args) {\n            for (var i = 0; i < the.events.length; i++) {\n                var event = the.events[i];\n                if (event.name == name) {\n                    if (event.one == true) {\n                        if (event.fired == false) {\n                            the.events[i].fired = true;\n                            event.handler.call(this, the, args);\n                        }\n                    } else {\n                        event.handler.call(this, the, args);\n                    }\n                }\n            }\n        },\n\n        addEvent: function(name, handler, one) {\n            the.events.push({\n                name: name,\n                handler: handler,\n                one: one,\n                fired: false\n            });\n        }\n    };\n\n    //////////////////////////\n    // ** Public Methods ** //\n    //////////////////////////\n\n    /**\n     * Set default options\n     */\n\n    the.setDefaults = function(options) {\n        defaultOptions = options;\n    };\n\n    /**\n     * Register event\n     */\n    the.on = function(name, handler) {\n        return Plugin.addEvent(name, handler);\n    };\n\n    ///////////////////////////////\n    // ** Plugin Construction ** //\n    ///////////////////////////////\n\n    //== Run plugin\n    Plugin.construct.apply(the, [options]);\n\n    //== Init done\n    init = true;\n\n    // Return plugin instance\n    return the;\n};\nvar mMenu = function(elementId, options) {\n    //== Main object\n    var the = this;\n    var init = false;\n\n    //== Get element object\n    var element = mUtil.get(elementId);\n    var body = mUtil.get('body');\n\n    if (!element) {\n        return;\n    }\n\n    //== Default options\n    var defaultOptions = {\n        // accordion submenu mode\n        accordion: {\n            slideSpeed: 200, // accordion toggle slide speed in milliseconds\n            autoScroll: false, // enable auto scrolling(focus) to the clicked menu item\n            autoScrollSpeed: 1200,\n            expandAll: true // allow having multiple expanded accordions in the menu\n        },\n\n        // dropdown submenu mode\n        dropdown: {\n            timeout: 500 // timeout in milliseconds to show and hide the hoverable submenu dropdown\n        }\n    };\n\n    ////////////////////////////\n    // ** Private Methods  ** //\n    ////////////////////////////\n\n    var Plugin = {\n        /**\n         * Run plugin\n         * @returns {mMenu}\n         */\n        construct: function(options) {\n            if (mUtil.data(element).has('menu')) {\n                the = mUtil.data(element).get('menu');\n            } else {\n                // reset menu\n                Plugin.init(options);\n\n                // reset menu\n                Plugin.reset();\n\n                // build menu\n                Plugin.build();\n\n                mUtil.data(element).set('menu', the);\n            }\n\n            return the;\n        },\n\n        /**\n         * Handles submenu click toggle\n         * @returns {mMenu}\n         */\n        init: function(options) {\n            the.events = [];\n\n            the.eventHandlers = {};\n\n            // merge default and user defined options\n            the.options = mUtil.deepExtend({}, defaultOptions, options);\n\n            // pause menu\n            the.pauseDropdownHoverTime = 0;\n\n            the.uid = mUtil.getUniqueID();\n        },\n\n        update: function(options) {\n            // merge default and user defined options\n            the.options = mUtil.deepExtend({}, defaultOptions, options);\n\n            // pause menu\n            the.pauseDropdownHoverTime = 0;\n\n            // reset menu\n            Plugin.reset();\n\n            the.eventHandlers = {};\n\n            // build menu\n            Plugin.build();\n\n            mUtil.data(element).set('menu', the);\n        },\n\n        reload: function() {\n            // reset menu\n            Plugin.reset();\n\n            // build menu\n            Plugin.build();\n        },\n\n        /**\n         * Reset menu\n         * @returns {mMenu}\n         */\n        build: function() {\n            //== General accordion submenu toggle\n            the.eventHandlers['event_1'] = mUtil.on( element, '.m-menu__toggle', 'click', Plugin.handleSubmenuAccordion);\n\n            //== Dropdown mode(hoverable)\n            if (Plugin.getSubmenuMode() === 'dropdown' || Plugin.isConditionalSubmenuDropdown()) {\n                // dropdown submenu - hover toggle\n                the.eventHandlers['event_2'] = mUtil.on( element, '[m-menu-submenu-toggle=\"hover\"]', 'mouseover', Plugin.handleSubmenuDrodownHoverEnter);\n                the.eventHandlers['event_3'] = mUtil.on( element, '[m-menu-submenu-toggle=\"hover\"]', 'mouseout', Plugin.handleSubmenuDrodownHoverExit);\n\n                // dropdown submenu - click toggle\n                the.eventHandlers['event_4'] = mUtil.on( element, '[m-menu-submenu-toggle=\"click\"] > .m-menu__toggle, [m-menu-submenu-toggle=\"click\"] > .m-menu__link .m-menu__toggle', 'click', Plugin.handleSubmenuDropdownClick);\n                the.eventHandlers['event_5'] = mUtil.on( element, '[m-menu-submenu-toggle=\"tab\"] > .m-menu__toggle, [m-menu-submenu-toggle=\"tab\"] > .m-menu__link .m-menu__toggle', 'click', Plugin.handleSubmenuDropdownTabClick);\n            }\n\n            //== General link click\n            the.eventHandlers['event_6'] = mUtil.on(element, '.m-menu__item:not(.m-menu__item--submenu) > .m-menu__link:not(.m-menu__toggle):not(.m-menu__link--toggle-skip)', 'click', Plugin.handleLinkClick);\n\n            //== Init scrollable menu\n            if (the.options.scroll && the.options.scroll.height) {\n                Plugin.scrollerInit();\n            }\n        },\n\n        /**\n         * Reset menu\n         * @returns {mMenu}\n         */\n        reset: function() {\n            mUtil.off( element, 'click', the.eventHandlers['event_1']);\n\n            // dropdown submenu - hover toggle\n            mUtil.off( element, 'mouseover', the.eventHandlers['event_2']);\n            mUtil.off( element, 'mouseout', the.eventHandlers['event_3']);\n\n            // dropdown submenu - click toggle\n            mUtil.off( element, 'click', the.eventHandlers['event_4']);\n            mUtil.off( element, 'click', the.eventHandlers['event_5']);\n\n            mUtil.off(element, 'click', the.eventHandlers['event_6']);\n        },\n\n        /**\n         * Init scroll menu\n         *\n         */\n        scrollerInit: function() {\n            if ( the.options.scroll && the.options.scroll.height ) {\n                mUtil.scrollerDestroy(element);\n                mUtil.scrollerInit(element, {disableForMobile: true, resetHeightOnDestroy: true, handleWindowResize: true, height: the.options.scroll.height});\n            }\n        },\n\n        /**\n         * Update scroll menu\n         */\n        scrollerUpdate: function() {\n            if ( the.options.scroll && the.options.scroll.height ) {\n                mUtil.scrollerUpdate(element);\n            } else {\n                mUtil.scrollerDestroy(element);\n            }\n        },\n\n        /**\n         * Scroll top\n         */\n        scrollerTop: function() {\n            if ( the.options.scroll && the.options.scroll.height ) {\n                mUtil.scrollerTop(element);\n            }\n        },\n\n        /**\n         * Get submenu mode for current breakpoint and menu state\n         * @returns {mMenu}\n         */\n        getSubmenuMode: function(el) {\n            if ( mUtil.isInResponsiveRange('desktop') ) {\n                if (el && mUtil.hasAttr(el, 'm-menu-submenu-toggle')) {\n                    return mUtil.attr(el, 'm-menu-submenu-toggle');\n                }\n\n                if ( mUtil.isset(the.options.submenu, 'desktop.state.body') ) {\n                    if ( mUtil.hasClass(body, the.options.submenu.desktop.state.body) ) {\n                        return the.options.submenu.desktop.state.mode;\n                    } else {\n                        return the.options.submenu.desktop.default;\n                    }\n                } else if ( mUtil.isset(the.options.submenu, 'desktop') ) {\n                    return the.options.submenu.desktop;\n                }\n            } else if ( mUtil.isInResponsiveRange('tablet') && mUtil.isset(the.options.submenu, 'tablet') ) {\n                return the.options.submenu.tablet;\n            } else if ( mUtil.isInResponsiveRange('mobile') && mUtil.isset(the.options.submenu, 'mobile') ) {\n                return the.options.submenu.mobile;\n            } else {\n                return false;\n            }\n        },\n\n        /**\n         * Get submenu mode for current breakpoint and menu state\n         * @returns {mMenu}\n         */\n        isConditionalSubmenuDropdown: function() {\n            if ( mUtil.isInResponsiveRange('desktop') && mUtil.isset(the.options.submenu, 'desktop.state.body') ) {\n                return true;\n            } else {\n                return false;\n            }\n        },\n\n        /**\n         * Handles menu link click\n         * @returns {mMenu}\n         */\n        handleLinkClick: function(e) {\n            if ( Plugin.eventTrigger('linkClick', this) === false ) {\n                e.preventDefault();\n            };\n\n            if ( Plugin.getSubmenuMode(this) === 'dropdown' || Plugin.isConditionalSubmenuDropdown() ) {\n                Plugin.handleSubmenuDropdownClose(e, this);\n            }\n        },\n\n        /**\n         * Handles submenu hover toggle\n         * @returns {mMenu}\n         */\n        handleSubmenuDrodownHoverEnter: function(e) {\n            if ( Plugin.getSubmenuMode(this) === 'accordion' ) {\n                return;\n            }\n\n            if ( the.resumeDropdownHover() === false ) {\n                return;\n            }\n\n            var item = this;\n\n            if ( item.getAttribute('data-hover') == '1' ) {\n                item.removeAttribute('data-hover');\n                clearTimeout( item.getAttribute('data-timeout') );\n                item.removeAttribute('data-timeout');\n                //Plugin.hideSubmenuDropdown(item, false);\n            }\n\n            Plugin.showSubmenuDropdown(item);\n        },\n\n        /**\n         * Handles submenu hover toggle\n         * @returns {mMenu}\n         */\n        handleSubmenuDrodownHoverExit: function(e) {\n            if ( the.resumeDropdownHover() === false ) {\n                return;\n            }\n\n            if ( Plugin.getSubmenuMode(this) === 'accordion' ) {\n                return;\n            }\n\n            var item = this;\n            var time = the.options.dropdown.timeout;\n\n            var timeout = setTimeout(function() {\n                if ( item.getAttribute('data-hover') == '1' ) {\n                    Plugin.hideSubmenuDropdown(item, true);\n                }\n            }, time);\n\n            item.setAttribute('data-hover', '1');\n            item.setAttribute('data-timeout', timeout);\n        },\n\n        /**\n         * Handles submenu click toggle\n         * @returns {mMenu}\n         */\n        handleSubmenuDropdownClick: function(e) {\n            if ( Plugin.getSubmenuMode(this) === 'accordion' ) {\n                return;\n            }\n\n            var item = this.closest('.m-menu__item');\n\n            if ( item.getAttribute('m-menu-submenu-mode') == 'accordion' ) {\n                return;\n            }\n\n            if ( mUtil.hasClass(item, 'm-menu__item--hover') === false ) {\n                mUtil.addClass(item, 'm-menu__item--open-dropdown');\n                Plugin.showSubmenuDropdown(item);\n            } else {\n                mUtil.removeClass(item, 'm-menu__item--open-dropdown' );\n                Plugin.hideSubmenuDropdown(item, true);\n            }\n\n            e.preventDefault();\n        },\n\n        /**\n         * Handles tab click toggle\n         * @returns {mMenu}\n         */\n        handleSubmenuDropdownTabClick: function(e) {\n            if (Plugin.getSubmenuMode(this) === 'accordion') {\n                return;\n            }\n\n            var item = this.closest('.m-menu__item');\n\n            if (item.getAttribute('m-menu-submenu-mode') == 'accordion') {\n                return;\n            }\n\n            if (mUtil.hasClass(item, 'm-menu__item--hover') == false) {\n                mUtil.addClass(item, 'm-menu__item--open-dropdown');\n                Plugin.showSubmenuDropdown(item);\n            }\n\n            e.preventDefault();\n        },\n\n        /**\n         * Handles submenu dropdown close on link click\n         * @returns {mMenu}\n         */\n        handleSubmenuDropdownClose: function(e, el) {\n            // exit if its not submenu dropdown mode\n            if (Plugin.getSubmenuMode(el) === 'accordion') {\n                return;\n            }\n\n            var shown = element.querySelectorAll('.m-menu__item.m-menu__item--submenu.m-menu__item--hover:not(.m-menu__item--tabs)');\n\n            // check if currently clicked link's parent item ha\n            if (shown.length > 0 && mUtil.hasClass(el, 'm-menu__toggle') === false && el.querySelectorAll('.m-menu__toggle').length === 0) {\n                // close opened dropdown menus\n                for (var i = 0, len = shown.length; i < len; i++) {\n                    Plugin.hideSubmenuDropdown(shown[0], true);\n                }\n            }\n        },\n\n        /**\n         * helper functions\n         * @returns {mMenu}\n         */\n        handleSubmenuAccordion: function(e, el) {\n            var query;\n            var item = el ? el : this;\n\n            if ( Plugin.getSubmenuMode(el) === 'dropdown' && (query = item.closest('.m-menu__item') ) ) {\n                if (query.getAttribute('m-menu-submenu-mode') != 'accordion' ) {\n                    e.preventDefault();\n                    return;\n                }\n            }\n\n            var li = item.closest('.m-menu__item');\n            var submenu = mUtil.child(li, '.m-menu__submenu, .m-menu__inner');\n\n            if (mUtil.hasClass(item.closest('.m-menu__item'), 'm-menu__item--open-always')) {\n                return;\n            }\n\n            if ( li && submenu ) {\n                e.preventDefault();\n                var speed = the.options.accordion.slideSpeed;\n                var hasClosables = false;\n\n                if ( mUtil.hasClass(li, 'm-menu__item--open') === false ) {\n                    // hide other accordions\n                    if ( the.options.accordion.expandAll === false ) {\n                        var subnav = item.closest('.m-menu__nav, .m-menu__subnav');\n                        var closables = mUtil.children(subnav, '.m-menu__item.m-menu__item--open.m-menu__item--submenu:not(.m-menu__item--expanded):not(.m-menu__item--open-always)');\n\n                        if ( subnav && closables ) {\n                            for (var i = 0, len = closables.length; i < len; i++) {\n                                var el_ = closables[0];\n                                var submenu_ = mUtil.child(el_, '.m-menu__submenu');\n                                if ( submenu_ ) {\n                                    mUtil.slideUp(submenu_, speed, function() {\n                                        Plugin.scrollerUpdate();\n                                        mUtil.removeClass(el_, 'm-menu__item--open');\n                                    });\n                                }\n                            }\n                        }\n                    }\n\n                    mUtil.slideDown(submenu, speed, function() {\n                        Plugin.scrollToItem(item);\n                        Plugin.scrollerUpdate();\n\n                        Plugin.eventTrigger('submenuToggle', submenu);\n                    });\n\n                    mUtil.addClass(li, 'm-menu__item--open');\n\n                } else {\n                    mUtil.slideUp(submenu, speed, function() {\n                        Plugin.scrollToItem(item);\n                        Plugin.eventTrigger('submenuToggle', submenu);\n                    });\n\n                    mUtil.removeClass(li, 'm-menu__item--open');\n                }\n            }\n        },\n\n        /**\n         * scroll to item function\n         * @returns {mMenu}\n         */\n        scrollToItem: function(item) {\n            // handle auto scroll for accordion submenus\n            if ( mUtil.isInResponsiveRange('desktop') && the.options.accordion.autoScroll && element.getAttribute('m-menu-scrollable') !== '1' ) {\n                mUtil.scrollTo(item, the.options.accordion.autoScrollSpeed);\n            }\n        },\n\n        /**\n         * helper functions\n         * @returns {mMenu}\n         */\n        hideSubmenuDropdown: function(item, classAlso) {\n            // remove submenu activation class\n            if ( classAlso ) {\n                mUtil.removeClass(item, 'm-menu__item--hover');\n                mUtil.removeClass(item, 'm-menu__item--active-tab');\n            }\n\n            // clear timeout\n            item.removeAttribute('data-hover');\n\n            if ( item.getAttribute('m-menu-dropdown-toggle-class') ) {\n                mUtil.removeClass(body, item.getAttribute('m-menu-dropdown-toggle-class'));\n            }\n\n            var timeout = item.getAttribute('data-timeout');\n            item.removeAttribute('data-timeout');\n            clearTimeout(timeout);\n        },\n\n        /**\n         * helper functions\n         * @returns {mMenu}\n         */\n        showSubmenuDropdown: function(item) {\n            // close active submenus\n            var list = element.querySelectorAll('.m-menu__item--submenu.m-menu__item--hover, .m-menu__item--submenu.m-menu__item--active-tab');\n\n            if ( list ) {\n                for (var i = 0, len = list.length; i < len; i++) {\n                    var el = list[i];\n                    if ( item !== el && el.contains(item) === false && item.contains(el) === false ) {\n                        Plugin.hideSubmenuDropdown(el, true);\n                    }\n                }\n            }\n\n            // adjust submenu position\n            Plugin.adjustSubmenuDropdownArrowPos(item);\n\n            // add submenu activation class\n            mUtil.addClass(item, 'm-menu__item--hover');\n\n            if ( item.getAttribute('m-menu-dropdown-toggle-class') ) {\n                mUtil.addClass(body, item.getAttribute('m-menu-dropdown-toggle-class'));\n            }\n        },\n\n        /**\n         * Handles submenu slide toggle\n         * @returns {mMenu}\n         */\n        createSubmenuDropdownClickDropoff: function(el) {\n            var query;\n            var zIndex = (query = mUtil.child(el, '.m-menu__submenu') ? mUtil.css(query, 'z-index') : 0) - 1;\n\n            var dropoff = document.createElement('<div class=\"m-menu__dropoff\" style=\"background: transparent; position: fixed; top: 0; bottom: 0; left: 0; right: 0; z-index: ' + zIndex + '\"></div>');\n\n            body.appendChild(dropoff);\n\n            mUtil.addEvent(dropoff, 'click', function(e) {\n                e.stopPropagation();\n                e.preventDefault();\n                mUtil.remove(this);\n                Plugin.hideSubmenuDropdown(el, true);\n            });\n        },\n\n        /**\n         * Handles submenu click toggle\n         * @returns {mMenu}\n         */\n        adjustSubmenuDropdownArrowPos: function(item) {\n            var submenu = mUtil.child(item, '.m-menu__submenu');\n            var arrow = mUtil.child( submenu, '.m-menu__arrow.m-menu__arrow--adjust');\n            var subnav = mUtil.child( submenu, '.m-menu__subnav');\n\n            if ( arrow ) {\n                var pos = 0;\n                var link = mUtil.child(item, '.m-menu__link');\n\n                if ( mUtil.hasClass(submenu, 'm-menu__submenu--classic') || mUtil.hasClass(submenu, 'm-menu__submenu--fixed') ) {\n                    if ( mUtil.hasClass(submenu, 'm-menu__submenu--right')) {\n                        pos = mUtil.outerWidth(item) / 2;\n                        if (mUtil.hasClass(submenu, 'm-menu__submenu--pull')) {\n                            if (mUtil.isRTL()) {\n                                pos = pos + Math.abs( parseFloat(mUtil.css(submenu, 'margin-left')) );\n                            } else {\n                                pos = pos + Math.abs( parseFloat(mUtil.css(submenu, 'margin-right')) );\n                            }\n                        }\n                        pos = parseInt(mUtil.css(submenu, 'width')) - pos;\n                    } else if ( mUtil.hasClass(submenu, 'm-menu__submenu--left') ) {\n                        pos = mUtil.outerWidth(item) / 2;\n                        if ( mUtil.hasClass(submenu, 'm-menu__submenu--pull')) {\n                            if (mUtil.isRTL()) {\n                                pos = pos + Math.abs( parseFloat(mUtil.css(submenu, 'margin-right')) );\n                            } else {\n                                pos = pos + Math.abs( parseFloat(mUtil.css(submenu, 'margin-left')) );\n                            }\n                        }\n                    }\n\n                    if (mUtil.isRTL()) {\n                        mUtil.css(arrow, 'right', pos + 'px');\n                    } else {\n                        mUtil.css(arrow, 'left', pos + 'px');\n                    }\n                } else {\n                    if ( mUtil.hasClass(submenu, 'm-menu__submenu--center') || mUtil.hasClass(submenu, 'm-menu__submenu--full') ) {\n                        pos = mUtil.offset(item).left - ((mUtil.getViewPort().width - parseInt(mUtil.css(submenu, 'width'))) / 2);\n                        pos = pos + (mUtil.outerWidth(item) / 2);\n\n                        mUtil.css(arrow, 'left', pos + 'px');\n                        if (mUtil.isRTL()) {\n                            mUtil.css(arrow, 'right', 'auto');\n                        }\n                    }\n                }\n            }\n        },\n\n        /**\n         * Handles submenu hover toggle\n         * @returns {mMenu}\n         */\n        pauseDropdownHover: function(time) {\n            var date = new Date();\n\n            the.pauseDropdownHoverTime = date.getTime() + time;\n        },\n\n        /**\n         * Handles submenu hover toggle\n         * @returns {mMenu}\n         */\n        resumeDropdownHover: function() {\n            var date = new Date();\n\n            return (date.getTime() > the.pauseDropdownHoverTime ? true : false);\n        },\n\n        /**\n         * Reset menu's current active item\n         * @returns {mMenu}\n         */\n        resetActiveItem: function(item) {\n            var list;\n            var parents;\n\n            list = element.querySelectorAll('.m-menu__item--active');\n\n            for (var i = 0, len = list.length; i < len; i++) {\n                var el = list[0];\n                mUtil.removeClass(el, 'm-menu__item--active');\n                mUtil.hide( mUtil.child(el, '.m-menu__submenu') );\n                parents = mUtil.parents(el, '.m-menu__item--submenu');\n\n                for (var i_ = 0, len_ = parents.length; i_ < len_; i_++) {\n                    var el_ = parents[i];\n                    mUtil.removeClass(el_, 'm-menu__item--open');\n                    mUtil.hide( mUtil.child(el_, '.m-menu__submenu') );\n                }\n            }\n\n            // close open submenus\n            if ( the.options.accordion.expandAll === false ) {\n                if ( list = element.querySelectorAll('.m-menu__item--open') ) {\n                    for (var i = 0, len = list.length; i < len; i++) {\n                        mUtil.removeClass(parents[0], 'm-menu__item--open');\n                    }\n                }\n            }\n        },\n\n        /**\n         * Sets menu's active item\n         * @returns {mMenu}\n         */\n        setActiveItem: function(item) {\n            // reset current active item\n            Plugin.resetActiveItem();\n\n            mUtil.addClass(item, 'm-menu__item--active');\n\n            var parents = mUtil.parents(item, '.m-menu__item--submenu');\n            for (var i = 0, len = parents.length; i < len; i++) {\n                mUtil.addClass(parents[i], 'm-menu__item--open');\n            }\n        },\n\n        /**\n         * Returns page breadcrumbs for the menu's active item\n         * @returns {mMenu}\n         */\n        getBreadcrumbs: function(item) {\n            var query;\n            var breadcrumbs = [];\n            var link = mUtil.child(item, '.m-menu__link');\n\n            breadcrumbs.push({\n                text: (query = mUtil.child(link, '.m-menu__link-text') ? query.innerHTML : ''),\n                title: link.getAttribute('title'),\n                href: link.getAttribute('href')\n            });\n\n            var parents = mUtil.parents(item, '.m-menu__item--submenu');\n            for (var i = 0, len = parents.length; i < len; i++) {\n                var submenuLink = mUtil.child(parents[i], '.m-menu__link');\n\n                breadcrumbs.push({\n                    text: (query = mUtil.child(submenuLink, '.m-menu__link-text') ? query.innerHTML : ''),\n                    title: submenuLink.getAttribute('title'),\n                    href: submenuLink.getAttribute('href')\n                });\n            }\n\n            return  breadcrumbs.reverse();\n        },\n\n        /**\n         * Returns page title for the menu's active item\n         * @returns {mMenu}\n         */\n        getPageTitle: function(item) {\n            var query;\n\n            return (query = mUtil.child(item, '.m-menu__link-text') ? query.innerHTML : '');\n        },\n\n        /**\n         * Trigger events\n         */\n        eventTrigger: function(name, args) {\n            for (var i = 0; i < the.events.length; i++ ) {\n                var event = the.events[i];\n                if ( event.name == name ) {\n                    if ( event.one == true ) {\n                        if ( event.fired == false ) {\n                            the.events[i].fired = true;\n                            event.handler.call(this, the, args);\n                        }\n                    } else {\n                        event.handler.call(this, the, args);\n                    }\n                }\n            }\n        },\n\n        addEvent: function(name, handler, one) {\n            the.events.push({\n                name: name,\n                handler: handler,\n                one: one,\n                fired: false\n            });\n        },\n\n        removeEvent: function(name) {\n            if (the.events[name]) {\n                delete the.events[name];\n            }\n        }\n    };\n\n    //////////////////////////\n    // ** Public Methods ** //\n    //////////////////////////\n\n    /**\n     * Set default options\n     */\n\n    the.setDefaults = function(options) {\n        defaultOptions = options;\n    };\n\n    /**\n     * Set active menu item\n     */\n    the.scrollerUpdate = function() {\n        return Plugin.scrollerUpdate();\n    };\n\n    /**\n     * Set active menu item\n     */\n    the.scrollerTop = function() {\n        return Plugin.scrollerTop();\n    };\n\n    /**\n     * Set active menu item\n     */\n    the.setActiveItem = function(item) {\n        return Plugin.setActiveItem(item);\n    };\n\n    the.reload = function() {\n        return Plugin.reload();\n    };\n\n    the.update = function(options) {\n        return Plugin.update(options);\n    };\n\n    /**\n     * Set breadcrumb for menu item\n     */\n    the.getBreadcrumbs = function(item) {\n        return Plugin.getBreadcrumbs(item);\n    };\n\n    /**\n     * Set page title for menu item\n     */\n    the.getPageTitle = function(item) {\n        return Plugin.getPageTitle(item);\n    };\n\n    /**\n     * Get submenu mode\n     */\n    the.getSubmenuMode = function(el) {\n        return Plugin.getSubmenuMode(el);\n    };\n\n    /**\n     * Hide dropdown submenu\n     * @returns {jQuery}\n     */\n    the.hideDropdown = function(item) {\n        Plugin.hideSubmenuDropdown(item, true);\n    };\n\n    /**\n     * Disable menu for given time\n     * @returns {jQuery}\n     */\n    the.pauseDropdownHover = function(time) {\n        Plugin.pauseDropdownHover(time);\n    };\n\n    /**\n     * Disable menu for given time\n     * @returns {jQuery}\n     */\n    the.resumeDropdownHover = function() {\n        return Plugin.resumeDropdownHover();\n    };\n\n    /**\n     * Register event\n     */\n    the.on = function(name, handler) {\n        return Plugin.addEvent(name, handler);\n    };\n\n    the.off = function(name) {\n        return Plugin.removeEvent(name);\n    };\n\n    the.one = function(name, handler) {\n        return Plugin.addEvent(name, handler, true);\n    };\n\n    ///////////////////////////////\n    // ** Plugin Construction ** //\n    ///////////////////////////////\n\n    //== Run plugin\n    Plugin.construct.apply(the, [options]);\n\n    //== Handle plugin on window resize\n    mUtil.addResizeHandler(function() {\n        if (init) {\n            the.reload();\n        }\n    });\n\n    //== Init done\n    init = true;\n\n    // Return plugin instance\n    return the;\n};\n\n// Plugin global lazy initialization\ndocument.addEventListener(\"click\", function (e) {\n    var body = mUtil.get('body');\n    var query;\n    if ( query = body.querySelectorAll('.m-menu__nav .m-menu__item.m-menu__item--submenu.m-menu__item--hover:not(.m-menu__item--tabs)[m-menu-submenu-toggle=\"click\"]') ) {\n        for (var i = 0, len = query.length; i < len; i++) {\n            var element = query[i].closest('.m-menu__nav').parentNode;\n\n            if ( element ) {\n                var the = mUtil.data(element).get('menu');\n\n                if ( !the ) {\n                    break;\n                }\n\n                if ( !the || the.getSubmenuMode() !== 'dropdown' ) {\n                    break;\n                }\n\n                if ( e.target !== element && element.contains(e.target) === false ) {\n                    var items;\n                    if ( items = element.querySelectorAll('.m-menu__item--submenu.m-menu__item--hover:not(.m-menu__item--tabs)[m-menu-submenu-toggle=\"click\"]') ) {\n                        for (var j = 0, cnt = items.length; j < cnt; j++) {\n                            the.hideDropdown(items[j]);\n                        }\n                    }\n                }\n            }\n        }\n    }\n});\nvar mOffcanvas = function(elementId, options) {\n    //== Main object\n    var the = this;\n    var init = false;\n\n    //== Get element object\n    var element = mUtil.get(elementId);\n    var body = mUtil.get('body');\n\n    if (!element) {\n        return;\n    }\n\n    //== Default options\n    var defaultOptions = {};\n\n    ////////////////////////////\n    // ** Private Methods  ** //\n    ////////////////////////////\n\n    var Plugin = {\n        /**\n         * Run plugin\n         * @returns {moffcanvas}\n         */\n        construct: function(options) {\n            if (mUtil.data(element).has('offcanvas')) {\n                the = mUtil.data(element).get('offcanvas');\n            } else {\n                // reset offcanvas\n                Plugin.init(options);\n\n                // build offcanvas\n                Plugin.build();\n\n                mUtil.data(element).set('offcanvas', the);\n            }\n\n            return the;\n        },\n\n        /**\n         * Handles suboffcanvas click toggle\n         * @returns {moffcanvas}\n         */\n        init: function(options) {\n            the.events = [];\n\n            // merge default and user defined options\n            the.options = mUtil.deepExtend({}, defaultOptions, options);\n            the.overlay;\n\n            the.classBase = the.options.baseClass;\n            the.classShown = the.classBase + '--on';\n            the.classOverlay = the.classBase + '-overlay';\n\n            the.state = mUtil.hasClass(element, the.classShown) ? 'shown' : 'hidden';\n        },\n\n        build: function() {\n            //== offcanvas toggle\n            if (the.options.toggleBy) {\n                if (typeof the.options.toggleBy === 'string') {\n                    mUtil.addEvent( the.options.toggleBy, 'click', Plugin.toggle);\n                } else if (the.options.toggleBy && the.options.toggleBy[0] && the.options.toggleBy[0].target) {\n                    for (var i in the.options.toggleBy) {\n                        mUtil.addEvent( the.options.toggleBy[i].target, 'click', Plugin.toggle);\n                    }\n                } else if (the.options.toggleBy && the.options.toggleBy.target) {\n                    mUtil.addEvent( the.options.toggleBy.target, 'click', Plugin.toggle);\n                }\n            }\n\n            //== offcanvas close\n            var closeBy = mUtil.get(the.options.closeBy);\n            if (closeBy) {\n                mUtil.addEvent(closeBy, 'click', Plugin.hide);\n            }\n        },\n\n\n        /**\n         * Handles offcanvas toggle\n         */\n        toggle: function() {;\n            Plugin.eventTrigger('toggle');\n\n            if (the.state == 'shown') {\n                Plugin.hide(this);\n            } else {\n                Plugin.show(this);\n            }\n        },\n\n        /**\n         * Handles offcanvas show\n         */\n        show: function(target) {\n            if (the.state == 'shown') {\n                return;\n            }\n\n            Plugin.eventTrigger('beforeShow');\n\n            Plugin.togglerClass(target, 'show');\n\n            //== Offcanvas panel\n            mUtil.addClass(body, the.classShown);\n            mUtil.addClass(element, the.classShown);\n\n            the.state = 'shown';\n\n            if (the.options.overlay) {\n                the.overlay = mUtil.insertAfter(document.createElement('DIV') , element );\n                mUtil.addClass(the.overlay, the.classOverlay);\n                mUtil.addEvent(the.overlay, 'click', function(e) {\n                    e.stopPropagation();\n                    e.preventDefault();\n                    Plugin.hide(target);\n                });\n            }\n\n            Plugin.eventTrigger('afterShow');\n        },\n\n        /**\n         * Handles offcanvas hide\n         */\n        hide: function(target) {\n            if (the.state == 'hidden') {\n                return;\n            }\n\n            Plugin.eventTrigger('beforeHide');\n\n            Plugin.togglerClass(target, 'hide');\n\n            mUtil.removeClass(body, the.classShown);\n            mUtil.removeClass(element, the.classShown);\n\n            the.state = 'hidden';\n\n            if (the.options.overlay && the.overlay) {\n                mUtil.remove(the.overlay);\n            }\n\n            Plugin.eventTrigger('afterHide');\n        },\n\n        /**\n         * Handles toggler class\n         */\n        togglerClass: function(target, mode) {\n            //== Toggler\n            var id = mUtil.attr(target, 'id');\n            var toggleBy;\n\n            if (the.options.toggleBy && the.options.toggleBy[0] && the.options.toggleBy[0].target) {\n                for (var i in the.options.toggleBy) {\n                    if (the.options.toggleBy[i].target === id) {\n                        toggleBy = the.options.toggleBy[i];\n                    }\n                }\n            } else if (the.options.toggleBy && the.options.toggleBy.target) {\n                toggleBy = the.options.toggleBy;\n            }\n\n            if (toggleBy) {\n                var el = mUtil.get(toggleBy.target);\n\n                if (mode === 'show') {\n                    mUtil.addClass(el, toggleBy.state);\n                }\n\n                if (mode === 'hide') {\n                    mUtil.removeClass(el, toggleBy.state);\n                }\n            }\n        },\n\n        /**\n         * Trigger events\n         */\n        eventTrigger: function(name, args) {\n            for (var i = 0; i < the.events.length; i++) {\n                var event = the.events[i];\n                if (event.name == name) {\n                    if (event.one == true) {\n                        if (event.fired == false) {\n                            the.events[i].fired = true;\n                            event.handler.call(this, the, args);\n                        }\n                    } else {\n                        event.handler.call(this, the, args);\n                    }\n                }\n            }\n        },\n\n        addEvent: function(name, handler, one) {\n            the.events.push({\n                name: name,\n                handler: handler,\n                one: one,\n                fired: false\n            });\n        }\n    };\n\n    //////////////////////////\n    // ** Public Methods ** //\n    //////////////////////////\n\n    /**\n     * Set default options\n     */\n\n    the.setDefaults = function(options) {\n        defaultOptions = options;\n    };\n\n    /**\n     * Hide\n     */\n    the.hide = function() {\n        return Plugin.hide();\n    };\n\n    /**\n     * Show\n     */\n    the.show = function() {\n        return Plugin.show();\n    };\n\n    /**\n     * Get suboffcanvas mode\n     */\n    the.on = function(name, handler) {\n        return Plugin.addEvent(name, handler);\n    };\n\n    /**\n     * Set offcanvas content\n     * @returns {mOffcanvas}\n     */\n    the.one = function(name, handler) {\n        return Plugin.addEvent(name, handler, true);\n    };\n\n    ///////////////////////////////\n    // ** Plugin Construction ** //\n    ///////////////////////////////\n\n    //== Run plugin\n    Plugin.construct.apply(the, [options]);\n\n    //== Init done\n    init = true;\n\n    // Return plugin instance\n    return the;\n};\n// plugin setup\nvar mPortlet = function(elementId, options) {\n    //== Main object\n    var the = this;\n    var init = false;\n\n    //== Get element object\n    var element = mUtil.get(elementId);\n    var body = mUtil.get('body');\n\n    if (!element) {\n        return;\n    }\n\n    //== Default options\n    var defaultOptions = {\n        bodyToggleSpeed: 400,\n        tooltips: true,\n        tools: {\n            toggle: {\n                collapse: 'Collapse',\n                expand: 'Expand'\n            },\n            reload: 'Reload',\n            remove: 'Remove',\n            fullscreen: {\n                on: 'Fullscreen',\n                off: 'Exit Fullscreen'\n            }\n        },\n        sticky: {\n            offset: 300,\n            zIndex: 98\n        }\n    };\n\n    ////////////////////////////\n    // ** Private Methods  ** //\n    ////////////////////////////\n\n    var Plugin = {\n        /**\n         * Construct\n         */\n\n        construct: function(options) {\n            if (mUtil.data(element).has('portlet')) {\n                the = mUtil.data(element).get('portlet');\n            } else {\n                // reset menu\n                Plugin.init(options);\n\n                // build menu\n                Plugin.build();\n\n                mUtil.data(element).set('portlet', the);\n            }\n\n            return the;\n        },\n\n        /**\n         * Init portlet\n         */\n        init: function(options) {\n            the.element = element;\n            the.events = [];\n\n            // merge default and user defined options\n            the.options = mUtil.deepExtend({}, defaultOptions, options);\n            the.head = mUtil.child(element, '.m-portlet__head');\n            the.foot = mUtil.child(element, '.m-portlet__foot');\n\n            if (mUtil.child(element, '.m-portlet__body')) {\n                the.body = mUtil.child(element, '.m-portlet__body');\n            } else if (mUtil.child(element, '.m-form').length !== 0) {\n                the.body = mUtil.child(element, '.m-form');\n            }\n        },\n\n        /**\n         * Build Form Wizard\n         */\n        build: function() {\n            //== Remove\n            var remove = mUtil.find(the.head, '[m-portlet-tool=remove]');\n            if (remove) {\n                mUtil.addEvent(remove, 'click', function(e) {\n                    e.preventDefault();\n                    Plugin.remove();\n                });\n            }\n\n            //== Reload\n            var reload = mUtil.find(the.head, '[m-portlet-tool=reload]');\n            if (reload) {\n                mUtil.addEvent(reload, 'click', function(e) {\n                    e.preventDefault();\n                    Plugin.reload();\n                });\n            }\n\n            //== Toggle\n            var toggle = mUtil.find(the.head, '[m-portlet-tool=toggle]');\n            if (toggle) {\n                mUtil.addEvent(toggle, 'click', function(e) {\n                    e.preventDefault();\n                    Plugin.toggle();\n                });\n            }\n\n            //== Fullscreen\n            var fullscreen = mUtil.find(the.head, '[m-portlet-tool=fullscreen]');\n            if (fullscreen) {\n                mUtil.addEvent(fullscreen, 'click', function(e) {\n                    e.preventDefault();\n                    Plugin.fullscreen();\n                });\n            }\n\n            Plugin.setupTooltips();\n        },\n\n        /**\n         * Window scroll handle event for sticky portlet\n         */\n        onScrollSticky: function() {\n            var st = window.pageYOffset;\n            var offset = the.options.sticky.offset;\n\n\n            if (st > offset) {\n                if (mUtil.hasClass(body, 'm-portlet--sticky') === false) {\n                    Plugin.eventTrigger('stickyOn');\n\n                    mUtil.addClass(body, 'm-portlet--sticky');\n                    mUtil.addClass(element, 'm-portlet--sticky');\n\n                    Plugin.updateSticky();\n                }\n            } else { // back scroll mode\n                if (mUtil.hasClass(body, 'm-portlet--sticky')) {\n                    Plugin.eventTrigger('stickyOff');\n\n                    mUtil.removeClass(body, 'm-portlet--sticky');\n                    mUtil.removeClass(element, 'm-portlet--sticky');\n\n                    Plugin.resetSticky();\n                }\n            }\n        },\n\n        /**\n         * Init sticky portlet\n         */\n        initSticky: function() {\n            if (!the.head) {\n                return;\n            }\n\n            window.addEventListener('scroll', Plugin.onScrollSticky);\n        },\n\n        /**\n         * Update sticky portlet positions\n         */\n        updateSticky: function() {\n            if (!the.head) {\n                return;\n            }\n\n            var top;\n\n            if (mUtil.hasClass(body, 'm-portlet--sticky')) {\n                if (the.options.sticky.position.top instanceof Function) {\n                    top = parseInt(the.options.sticky.position.top.call());\n                } else {\n                    top = parseInt(the.options.sticky.position.top);\n                }\n\n                var left;\n                if (the.options.sticky.position.left instanceof Function) {\n                    left = parseInt(the.options.sticky.position.left.call());\n                } else {\n                    left = parseInt(the.options.sticky.position.left);\n                }\n\n                var right;\n                if (the.options.sticky.position.right instanceof Function) {\n                    right = parseInt(the.options.sticky.position.right.call());\n                } else {\n                    right = parseInt(the.options.sticky.position.right);\n                }\n\n                mUtil.css(the.head, 'z-index', the.options.sticky.zIndex);\n                mUtil.css(the.head, 'top', top + 'px');\n\n                if (mUtil.isRTL()) {\n                    mUtil.css(the.head, 'left', right + 'px');\n                    mUtil.css(the.head, 'right',left  + 'px');\n                } else {\n                    mUtil.css(the.head, 'left', left + 'px');\n                    mUtil.css(the.head, 'right', right + 'px');\n                }\n\n            }\n        },\n\n        /**\n         * Reset sticky portlet positions\n         */\n        resetSticky: function() {\n            if (!the.head) {\n                return;\n            }\n\n            if (mUtil.hasClass(body, 'm-portlet--sticky') === false) {\n                mUtil.css(the.head, 'z-index', '');\n                mUtil.css(the.head, 'top', '');\n                mUtil.css(the.head, 'left', '');\n                mUtil.css(the.head, 'right', '');\n            }\n        },\n\n        /**\n         * Destroy sticky portlet\n         */\n        destroySticky: function() {\n            if (!the.head) {\n                return;\n            }\n\n            Plugin.resetSticky();\n\n            window.removeEventListener('scroll', Plugin.onScrollSticky);\n        },\n\n        /**\n         * Remove portlet\n         */\n        remove: function() {\n            if (Plugin.eventTrigger('beforeRemove') === false) {\n                return;\n            }\n\n            if (mUtil.hasClass(body, 'm-portlet--fullscreen') && mUtil.hasClass(element, 'm-portlet--fullscreen')) {\n                Plugin.fullscreen('off');\n            }\n\n            Plugin.removeTooltips();\n\n            mUtil.remove(element);\n\n            Plugin.eventTrigger('afterRemove');\n        },\n\n        /**\n         * Set content\n         */\n        setContent: function(html) {\n            if (html) {\n                the.body.innerHTML = html;\n            }\n        },\n\n        /**\n         * Get body\n         */\n        getBody: function() {\n            return the.body;\n        },\n\n        /**\n         * Get self\n         */\n        getSelf: function() {\n            return element;\n        },\n\n        /**\n         * Setup tooltips\n         */\n        setupTooltips: function() {\n            if (the.options.tooltips) {\n                var collapsed = mUtil.hasClass(element, 'm-portlet--collapse') || mUtil.hasClass(element, 'm-portlet--collapsed');\n                var fullscreenOn = mUtil.hasClass(body, 'm-portlet--fullscreen') && mUtil.hasClass(element, 'm-portlet--fullscreen');\n\n                //== Remove\n                var remove = mUtil.find(the.head, '[m-portlet-tool=remove]');\n                if (remove) {\n                    var placement = (fullscreenOn ? 'bottom' : 'top');\n                    var tip = new Tooltip(remove, {\n                        title: the.options.tools.remove,\n                        placement: placement,\n                        offset: (fullscreenOn ? '0,10px,0,0' : '0,5px'),\n                        trigger: 'hover',\n                        template: '<div class=\"m-tooltip m-tooltip--portlet tooltip bs-tooltip-' + placement + '\" role=\"tooltip\">\\\n                            <div class=\"tooltip-arrow arrow\"></div>\\\n                            <div class=\"tooltip-inner\"></div>\\\n                        </div>'\n                    });\n\n                    mUtil.data(remove).set('tooltip', tip);\n                }\n\n                //== Reload\n                var reload = mUtil.find(the.head, '[m-portlet-tool=reload]');\n                if (reload) {\n                    var placement = (fullscreenOn ? 'bottom' : 'top');\n                    var tip = new Tooltip(reload, {\n                        title: the.options.tools.reload,\n                        placement: placement,\n                        offset: (fullscreenOn ? '0,10px,0,0' : '0,5px'),\n                        trigger: 'hover',\n                        template: '<div class=\"m-tooltip m-tooltip--portlet tooltip bs-tooltip-' + placement + '\" role=\"tooltip\">\\\n                            <div class=\"tooltip-arrow arrow\"></div>\\\n                            <div class=\"tooltip-inner\"></div>\\\n                        </div>'\n                    });\n\n                    mUtil.data(reload).set('tooltip', tip);\n                }\n\n                //== Toggle\n                var toggle = mUtil.find(the.head, '[m-portlet-tool=toggle]');\n                if (toggle) {\n                    var placement = (fullscreenOn ? 'bottom' : 'top');\n                    var tip = new Tooltip(toggle, {\n                        title: (collapsed ? the.options.tools.toggle.expand : the.options.tools.toggle.collapse),\n                        placement: placement,\n                        offset: (fullscreenOn ? '0,10px,0,0' : '0,5px'),\n                        trigger: 'hover',\n                        template: '<div class=\"m-tooltip m-tooltip--portlet tooltip bs-tooltip-' + placement + '\" role=\"tooltip\">\\\n                            <div class=\"tooltip-arrow arrow\"></div>\\\n                            <div class=\"tooltip-inner\"></div>\\\n                        </div>'\n                    });\n\n                    mUtil.data(toggle).set('tooltip', tip);\n                }\n\n                //== Fullscreen\n                var fullscreen = mUtil.find(the.head, '[m-portlet-tool=fullscreen]');\n                if (fullscreen) {\n                    var placement = (fullscreenOn ? 'bottom' : 'top');\n                    var tip = new Tooltip(fullscreen, {\n                        title: (fullscreenOn ? the.options.tools.fullscreen.off : the.options.tools.fullscreen.on),\n                        placement: placement,\n                        offset: (fullscreenOn ? '0,10px,0,0' : '0,5px'),\n                        trigger: 'hover',\n                        template: '<div class=\"m-tooltip m-tooltip--portlet tooltip bs-tooltip-' + placement + '\" role=\"tooltip\">\\\n                            <div class=\"tooltip-arrow arrow\"></div>\\\n                            <div class=\"tooltip-inner\"></div>\\\n                        </div>'\n                    });\n\n                    mUtil.data(fullscreen).set('tooltip', tip);\n                }\n            }\n        },\n\n        /**\n         * Setup tooltips\n         */\n        removeTooltips: function() {\n            if (the.options.tooltips) {\n                //== Remove\n                var remove = mUtil.find(the.head, '[m-portlet-tool=remove]');\n                if (remove && mUtil.data(remove).has('tooltip')) {\n                    mUtil.data(remove).get('tooltip').dispose();\n                }\n\n                //== Reload\n                var reload = mUtil.find(the.head, '[m-portlet-tool=reload]');\n                if (reload && mUtil.data(reload).has('tooltip')) {\n                    mUtil.data(reload).get('tooltip').dispose();\n                }\n\n                //== Toggle\n                var toggle = mUtil.find(the.head, '[m-portlet-tool=toggle]');\n                if (toggle && mUtil.data(toggle).has('tooltip')) {\n                    mUtil.data(toggle).get('tooltip').dispose();\n                }\n\n                //== Fullscreen\n                var fullscreen = mUtil.find(the.head, '[m-portlet-tool=fullscreen]');\n                if (fullscreen && mUtil.data(fullscreen).has('tooltip')) {\n                    mUtil.data(fullscreen).get('tooltip').dispose();\n                }\n            }\n        },\n\n        /**\n         * Reload\n         */\n        reload: function() {\n            Plugin.eventTrigger('reload');\n        },\n\n        /**\n         * Toggle\n         */\n        toggle: function() {\n            if (mUtil.hasClass(element, 'm-portlet--collapse') || mUtil.hasClass(element, 'm-portlet--collapsed')) {\n                Plugin.expand();\n            } else {\n                Plugin.collapse();\n            }\n        },\n\n        /**\n         * Collapse\n         */\n        collapse: function() {\n            if (Plugin.eventTrigger('beforeCollapse') === false) {\n                return;\n            }\n\n            mUtil.slideUp(the.body, the.options.bodyToggleSpeed, function() {\n                Plugin.eventTrigger('afterCollapse');\n            });\n\n            mUtil.addClass(element, 'm-portlet--collapse');\n\n            var toggle = mUtil.find(the.head, '[m-portlet-tool=toggle]');\n            if (toggle && mUtil.data(toggle).has('tooltip')) {\n                mUtil.data(toggle).get('tooltip').updateTitleContent(the.options.tools.toggle.expand);\n            }\n        },\n\n        /**\n         * Expand\n         */\n        expand: function() {\n            if (Plugin.eventTrigger('beforeExpand') === false) {\n                return;\n            }\n\n            mUtil.slideDown(the.body, the.options.bodyToggleSpeed, function() {\n                Plugin.eventTrigger('afterExpand');\n            });\n\n            mUtil.removeClass(element, 'm-portlet--collapse');\n            mUtil.removeClass(element, 'm-portlet--collapsed');\n\n            var toggle = mUtil.find(the.head, '[m-portlet-tool=toggle]');\n            if (toggle && mUtil.data(toggle).has('tooltip')) {\n                mUtil.data(toggle).get('tooltip').updateTitleContent(the.options.tools.toggle.collapse);\n            }\n        },\n\n        /**\n         * Toggle\n         */\n        fullscreen: function(mode) {\n            var d = {};\n            var speed = 300;\n\n            if (mode === 'off' || (mUtil.hasClass(body, 'm-portlet--fullscreen') && mUtil.hasClass(element, 'm-portlet--fullscreen'))) {\n                Plugin.eventTrigger('beforeFullscreenOff');\n\n                mUtil.removeClass(body, 'm-portlet--fullscreen');\n                mUtil.removeClass(element, 'm-portlet--fullscreen');\n\n                Plugin.removeTooltips();\n                Plugin.setupTooltips();\n\n                if (the.foot) {\n                    mUtil.css(the.body, 'margin-bottom', '');\n                    mUtil.css(the.foot, 'margin-top', '');\n                }\n\n                Plugin.eventTrigger('afterFullscreenOff');\n            } else {\n                Plugin.eventTrigger('beforeFullscreenOn');\n\n                mUtil.addClass(element, 'm-portlet--fullscreen');\n                mUtil.addClass(body, 'm-portlet--fullscreen');\n\n                Plugin.removeTooltips();\n                Plugin.setupTooltips();\n\n\n                if (the.foot) {\n                    var height1 = parseInt(mUtil.css(the.foot, 'height'));\n                    var height2 = parseInt(mUtil.css(the.foot, 'height')) + parseInt(mUtil.css(the.head, 'height'));\n                    mUtil.css(the.body, 'margin-bottom', height1 + 'px');\n                    mUtil.css(the.foot, 'margin-top', '-' + height2 + 'px');\n                }\n\n                Plugin.eventTrigger('afterFullscreenOn');\n            }\n        },\n\n        /**\n         * Trigger events\n         */\n        eventTrigger: function(name) {\n            //mUtil.triggerCustomEvent(name);\n            for (var i = 0; i < the.events.length; i++) {\n                var event = the.events[i];\n                if (event.name == name) {\n                    if (event.one == true) {\n                        if (event.fired == false) {\n                            the.events[i].fired = true;\n                            event.handler.call(this, the);\n                        }\n                    } else {\n                        event.handler.call(this, the);\n                    }\n                }\n            }\n        },\n\n        addEvent: function(name, handler, one) {\n            the.events.push({\n                name: name,\n                handler: handler,\n                one: one,\n                fired: false\n            });\n\n            return the;\n        }\n    };\n\n    //////////////////////////\n    // ** Public Methods ** //\n    //////////////////////////\n\n    /**\n     * Set default options\n     */\n\n    the.setDefaults = function(options) {\n        defaultOptions = options;\n    };\n\n    /**\n     * Remove portlet\n     * @returns {mPortlet}\n     */\n    the.remove = function() {\n        return Plugin.remove(html);\n    };\n\n    /**\n     * Init sticky portlet\n     * @returns {mPortlet}\n     */\n    the.initSticky = function() {\n        return Plugin.initSticky();\n    };\n\n    /**\n     * Update sticky portlet scroll event\n     * @returns {mPortlet}\n     */\n    the.updateSticky = function() {\n        return Plugin.updateSticky();\n    };\n\n    /**\n     * Reset sticky portlet positions\n     * @returns {mPortlet}\n     */\n    the.resetSticky = function() {\n        return Plugin.resetSticky();\n    };\n\n    /**\n     * Destroy sticky portlet scroll event\n     * @returns {mPortlet}\n     */\n    the.destroySticky = function() {\n        return Plugin.destroySticky();\n    };\n\n    /**\n     * Reload portlet\n     * @returns {mPortlet}\n     */\n    the.reload = function() {\n        return Plugin.reload();\n    };\n\n    /**\n     * Set portlet content\n     * @returns {mPortlet}\n     */\n    the.setContent = function(html) {\n        return Plugin.setContent(html);\n    };\n\n    /**\n     * Toggle portlet\n     * @returns {mPortlet}\n     */\n    the.toggle = function() {\n        return Plugin.toggle();\n    };\n\n    /**\n     * Collapse portlet\n     * @returns {mPortlet}\n     */\n    the.collapse = function() {\n        return Plugin.collapse();\n    };\n\n    /**\n     * Expand portlet\n     * @returns {mPortlet}\n     */\n    the.expand = function() {\n        return Plugin.expand();\n    };\n\n    /**\n     * Fullscreen portlet\n     * @returns {mPortlet}\n     */\n    the.fullscreen = function() {\n        return Plugin.fullscreen('on');\n    };\n\n    /**\n     * Fullscreen portlet\n     * @returns {mPortlet}\n     */\n    the.unFullscreen = function() {\n        return Plugin.fullscreen('off');\n    };\n\n    /**\n     * Get portletbody\n     * @returns {jQuery}\n     */\n    the.getBody = function() {\n        return Plugin.getBody();\n    };\n\n    /**\n     * Get portletbody\n     * @returns {jQuery}\n     */\n    the.getSelf = function() {\n        return Plugin.getSelf();\n    };\n\n    /**\n     * Attach event\n     */\n    the.on = function(name, handler) {\n        return Plugin.addEvent(name, handler);\n    };\n\n    /**\n     * Attach event that will be fired once\n     */\n    the.one = function(name, handler) {\n        return Plugin.addEvent(name, handler, true);\n    };\n\n    //== Construct plugin\n    Plugin.construct.apply(the, [options]);\n\n    return the;\n};\n// plugin setup\nvar mQuicksearch = function(elementId, options) {\n    //== Main object\n    var the = this;\n    var init = false;\n\n    //== Get element object\n    var element = mUtil.get(elementId);\n    var body = mUtil.get('body');\n\n    if (!element) {\n        return;\n    }\n\n    //== Default options\n    var defaultOptions = {\n        mode: 'default', //'default/dropdown'\n        minLength: 1,\n        maxHeight: 300,\n        requestTimeout: 200, // ajax request fire timeout in milliseconds\n        inputTarget: 'm_quicksearch_input',\n        iconCloseTarget: 'm_quicksearch_close',\n        iconCancelTarget: 'm_quicksearch_cancel',\n        iconSearchTarget: 'm_quicksearch_search',\n\n        spinnerClass: 'm-loader m-loader--skin-light m-loader--right',\n        hasResultClass: 'm-list-search--has-result',\n\n        templates: {\n            error: '<div class=\"m-search-results m-search-results--skin-light\"><span class=\"m-search-result__message\">{{message}}</div></div>'\n        }\n    };\n\n    ////////////////////////////\n    // ** Private Methods  ** //\n    ////////////////////////////\n\n    var Plugin = {\n        /**\n         * Construct\n         */\n\n        construct: function(options) {\n            if (mUtil.data(element).has('quicksearch')) {\n                the = mUtil.data(element).get('quicksearch');\n            } else {\n                // reset menu\n                Plugin.init(options);\n\n                // build menu\n                Plugin.build();\n\n                mUtil.data(element).set('quicksearch', the);\n            }\n\n            return the;\n        },\n\n        init: function(options) {\n            the.element = element;\n            the.events = [];\n\n            // merge default and user defined options\n            the.options = mUtil.deepExtend({}, defaultOptions, options);\n\n            // search query\n            the.query = '';\n\n            // form\n            the.form = mUtil.find(element, 'form');\n\n            // input element\n            the.input = mUtil.get(the.options.inputTarget);\n\n            // close icon\n            the.iconClose = mUtil.get(the.options.iconCloseTarget);\n\n            if (the.options.mode == 'default') {\n                // search icon\n                the.iconSearch = mUtil.get(the.options.iconSearchTarget);\n\n                // cancel icon\n                the.iconCancel = mUtil.get(the.options.iconCancelTarget);\n            }\n\n            // dropdown\n            the.dropdown = new mDropdown(element, {\n                mobileOverlay: false\n            });\n\n            // cancel search timeout\n            the.cancelTimeout;\n\n            // ajax processing state\n            the.processing = false;\n\n            // ajax request fire timeout\n            the.requestTimeout = false;\n        },\n\n        /**\n         * Build plugin\n         */\n        build: function() {\n            // attach input keyup handler\n            mUtil.addEvent(the.input, 'keyup', Plugin.search);\n\n            // Prevent enter click\n            mUtil.find(element, \"form\").onkeypress = function(e) {\n                var key = e.charCode || e.keyCode || 0;\n                if (key == 13) {\n                    e.preventDefault();\n                }\n            }\n\n            if (the.options.mode == 'default') {\n                mUtil.addEvent(the.input, 'focus', Plugin.showDropdown);\n                mUtil.addEvent(the.iconCancel, 'click', Plugin.handleCancel);\n\n                mUtil.addEvent(the.iconSearch, 'click', function() {\n                    if (mUtil.isInResponsiveRange('tablet-and-mobile')) {\n                        mUtil.addClass(body, 'm-header-search--mobile-expanded');\n                        the.input.focus();\n                    }\n                });\n\n                mUtil.addEvent(the.iconClose, 'click', function() {\n                    if (mUtil.isInResponsiveRange('tablet-and-mobile')) {\n                        mUtil.removeClass(body, 'm-header-search--mobile-expanded');\n                        Plugin.closeDropdown();\n                    }\n                });\n            } else if (the.options.mode == 'dropdown') {\n                the.dropdown.on('afterShow', function() {\n                    the.input.focus();\n                });\n\n                mUtil.addEvent(the.iconClose, 'click', Plugin.closeDropdown);\n            }\n        },\n\n        showProgress: function() {\n            the.processing = true;\n            mUtil.addClass(the.form, the.options.spinnerClass);\n            Plugin.handleCancelIconVisibility('off');\n\n            return the;\n        },\n\n        hideProgress: function() {\n            the.processing = false;\n            mUtil.removeClass(the.form, the.options.spinnerClass);\n            Plugin.handleCancelIconVisibility('on');\n            mUtil.addClass(element, the.options.hasResultClass);\n\n            return the;\n        },\n\n        /**\n         * Search handler\n         */\n        search: function(e) {\n            the.query = the.input.value;\n\n            if (the.query.length === 0) {\n                Plugin.handleCancelIconVisibility('on');\n                mUtil.removeClass(element, the.options.hasResultClass);\n                mUtil.removeClass(the.form, the.options.spinnerClass);\n            }\n\n            if (the.query.length < the.options.minLength || the.processing == true) {\n                return;\n            }\n\n            if (the.requestTimeout) {\n                clearTimeout(the.requestTimeout);\n            }\n\n            the.requestTimeout = false;\n\n            the.requestTimeout = setTimeout(function() {\n                Plugin.eventTrigger('search');\n            }, the.options.requestTimeout);\n\n            return the;\n        },\n\n        /**\n         * Handle cancel icon visibility\n         */\n        handleCancelIconVisibility: function(status) {\n            if (status == 'on') {\n                if (the.input.value.length === 0) {\n                    if (the.iconCancel) mUtil.css(the.iconCancel, 'visibility', 'hidden');\n                    if (the.iconClose) mUtil.css(the.iconClose, 'visibility', 'visible');\n                } else {\n                    clearTimeout(the.cancelTimeout);\n                    the.cancelTimeout = setTimeout(function() {\n                        if (the.iconCancel) mUtil.css(the.iconCancel, 'visibility', 'visible');\n                        if (the.iconClose) mUtil.css(the.iconClose, 'visibility', 'visible');\n                    }, 500);\n                }\n            } else {\n                if (the.iconCancel) mUtil.css(the.iconCancel, 'visibility', 'hidden');\n                if (the.iconClose) mUtil.css(the.iconClose, 'visibility', 'hidden');\n            }\n        },\n\n        /**\n         * Cancel handler\n         */\n        handleCancel: function(e) {\n            the.input.value = '';\n            mUtil.css(the.iconCancel, 'visibility', 'hidden');\n            mUtil.removeClass(element, the.options.hasResultClass);\n\n            Plugin.closeDropdown();\n        },\n\n        /**\n         * Cancel handler\n         */\n        closeDropdown: function() {\n            the.dropdown.hide();\n        },\n\n        /**\n         * Show dropdown\n         */\n        showDropdown: function(e) {\n            if (the.dropdown.isShown() == false && the.input.value.length > the.options.minLength && the.processing == false) {\n                console.log('show!!!');\n                the.dropdown.show();\n                if (e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n                }\n            }\n        },\n\n        /**\n         * Trigger events\n         */\n        eventTrigger: function(name) {\n            //mUtil.triggerCustomEvent(name);\n            for (var i = 0; i < the.events.length; i++) {\n                var event = the.events[i];\n                if (event.name == name) {\n                    if (event.one == true) {\n                        if (event.fired == false) {\n                            the.events[i].fired = true;\n                            event.handler.call(this, the);\n                        }\n                    } else {\n                        event.handler.call(this, the);\n                    }\n                }\n            }\n        },\n\n        addEvent: function(name, handler, one) {\n            the.events.push({\n                name: name,\n                handler: handler,\n                one: one,\n                fired: false\n            });\n\n            return the;\n        }\n    };\n\n    //////////////////////////\n    // ** Public Methods ** //\n    //////////////////////////\n\n    /**\n     * Set default options\n     */\n\n    the.setDefaults = function(options) {\n        defaultOptions = options;\n    };\n\n    /**\n     * quicksearch off\n     */\n    the.search = function() {\n        return Plugin.handleSearch();\n    };\n\n    the.showResult = function(res) {\n        the.dropdown.setContent(res);\n        Plugin.showDropdown();\n\n        return the;\n    };\n\n    the.showError = function(text) {\n        var msg = the.options.templates.error.replace('{{message}}', text);\n        the.dropdown.setContent(msg);\n        Plugin.showDropdown();\n\n        return the;\n    };\n\n    /**\n     *\n     */\n    the.showProgress = function() {\n        return Plugin.showProgress();\n    };\n\n    the.hideProgress = function() {\n        return Plugin.hideProgress();\n    };\n\n    /**\n     * quicksearch off\n     */\n    the.search = function() {\n        return Plugin.search();\n    };\n\n    /**\n     * Attach event\n     * @returns {mQuicksearch}\n     */\n    the.on = function(name, handler) {\n        return Plugin.addEvent(name, handler);\n    };\n\n    /**\n     * Attach event that will be fired once\n     * @returns {mQuicksearch}\n     */\n    the.one = function(name, handler) {\n        return Plugin.addEvent(name, handler, true);\n    };\n\n    //== Construct plugin\n    Plugin.construct.apply(the, [options]);\n\n    return the;\n};\nvar mScrollTop = function(elementId, options) {\n    //== Main object\n    var the = this;\n    var init = false;\n\n    //== Get element object\n    var element = mUtil.get(elementId);\n    var body = mUtil.get('body');\n\n    if (!element) {\n        return;\n    }\n\n    //== Default options\n    var defaultOptions = {\n        offset: 300,\n        speed: 600\n    };\n\n    ////////////////////////////\n    // ** Private Methods  ** //\n    ////////////////////////////\n\n    var Plugin = {\n        /**\n         * Run plugin\n         * @returns {mscrolltop}\n         */\n        construct: function(options) {\n            if (mUtil.data(element).has('scrolltop')) {\n                the = mUtil.data(element).get('scrolltop');\n            } else {\n                // reset scrolltop\n                Plugin.init(options);\n\n                // build scrolltop\n                Plugin.build();\n\n                mUtil.data(element).set('scrolltop', the);\n            }\n\n            return the;\n        },\n\n        /**\n         * Handles subscrolltop click toggle\n         * @returns {mscrolltop}\n         */\n        init: function(options) {\n            the.events = [];\n\n            // merge default and user defined options\n            the.options = mUtil.deepExtend({}, defaultOptions, options);\n        },\n\n        build: function() {\n            // handle window scroll\n            if (navigator.userAgent.match(/iPhone|iPad|iPod/i)) {\n                window.addEventListener('touchend', function() {\n                    Plugin.handle();\n                });\n\n                window.addEventListener('touchcancel', function() {\n                    Plugin.handle();\n                });\n\n                window.addEventListener('touchleave', function() {\n                    Plugin.handle();\n                });\n            } else {\n                window.addEventListener('scroll', function() {\n                    Plugin.handle();\n                });\n            }\n\n            // handle button click\n            mUtil.addEvent(element, 'click', Plugin.scroll);\n        },\n\n        /**\n         * Handles scrolltop click scrollTop\n         */\n        handle: function() {\n            var pos = window.pageYOffset; // current vertical position\n            if (pos > the.options.offset) {\n                mUtil.addClass(body, 'm-scroll-top--shown');\n            } else {\n                mUtil.removeClass(body, 'm-scroll-top--shown');\n            }\n        },\n\n        /**\n         * Handles scrolltop click scrollTop\n         */\n        scroll: function(e) {\n            e.preventDefault();\n\n            mUtil.scrollTop(0, the.options.speed);\n        },\n\n\n        /**\n         * Trigger events\n         */\n        eventTrigger: function(name, args) {\n            for (var i = 0; i < the.events.length; i++) {\n                var event = the.events[i];\n                if (event.name == name) {\n                    if (event.one == true) {\n                        if (event.fired == false) {\n                            the.events[i].fired = true;\n                            event.handler.call(this, the, args);\n                        }\n                    } else {\n                        event.handler.call(this, the, args);\n                    }\n                }\n            }\n        },\n\n        addEvent: function(name, handler, one) {\n            the.events.push({\n                name: name,\n                handler: handler,\n                one: one,\n                fired: false\n            });\n        }\n    };\n\n    //////////////////////////\n    // ** Public Methods ** //\n    //////////////////////////\n\n    /**\n     * Set default options\n     */\n\n    the.setDefaults = function(options) {\n        defaultOptions = options;\n    };\n\n    /**\n     * Get subscrolltop mode\n     */\n    the.on = function(name, handler) {\n        return Plugin.addEvent(name, handler);\n    };\n\n    /**\n     * Set scrolltop content\n     * @returns {mscrolltop}\n     */\n    the.one = function(name, handler) {\n        return Plugin.addEvent(name, handler, true);\n    };\n\n    ///////////////////////////////\n    // ** Plugin Construction ** //\n    ///////////////////////////////\n\n    //== Run plugin\n    Plugin.construct.apply(the, [options]);\n\n    //== Init done\n    init = true;\n\n    // Return plugin instance\n    return the;\n};\n// plugin setup\nvar mToggle = function(elementId, options) {\n    //== Main object\n    var the = this;\n    var init = false;\n\n    //== Get element object\n    var element = mUtil.get(elementId);\n    var body = mUtil.get('body');\n\n    if (!element) {\n        return;\n    }\n\n    //== Default options\n    var defaultOptions = {\n        togglerState: '',\n        targetState: ''\n    };\n\n    ////////////////////////////\n    // ** Private Methods  ** //\n    ////////////////////////////\n\n    var Plugin = {\n        /**\n         * Construct\n         */\n\n        construct: function(options) {\n            if (mUtil.data(element).has('toggle')) {\n                the = mUtil.data(element).get('toggle');\n            } else {\n                // reset menu\n                Plugin.init(options);\n\n                // build menu\n                Plugin.build();\n\n                mUtil.data(element).set('toggle', the);\n            }\n\n            return the;\n        },\n\n        /**\n         * Handles subtoggle click toggle\n         */\n        init: function(options) {\n            the.element = element;\n            the.events = [];\n\n            // merge default and user defined options\n            the.options = mUtil.deepExtend({}, defaultOptions, options);\n\n            the.target = mUtil.get(the.options.target);\n            the.targetState = the.options.targetState;\n            the.togglerState = the.options.togglerState;\n\n            the.state = mUtil.hasClasses(the.target, the.targetState) ? 'on' : 'off';\n        },\n\n        /**\n         * Setup toggle\n         */\n        build: function() {\n            mUtil.addEvent(element, 'mouseup', Plugin.toggle);\n        },\n\n        /**\n         * Handles offcanvas click toggle\n         */\n        toggle: function() {\n            Plugin.eventTrigger('beforeToggle');\n\n            if (the.state == 'off') {\n                Plugin.toggleOn();\n            } else {\n                Plugin.toggleOff();\n            }\n\n            return the;\n        },\n\n        /**\n         * Handles toggle click toggle\n         */\n        toggleOn: function() {\n            Plugin.eventTrigger('beforeOn');\n\n            mUtil.addClass(the.target, the.targetState);\n\n            if (the.togglerState) {\n                mUtil.addClass(element, the.togglerState);\n            }\n\n            the.state = 'on';\n\n            Plugin.eventTrigger('afterOn');\n\n            Plugin.eventTrigger('toggle');\n\n            return the;\n        },\n\n        /**\n         * Handles toggle click toggle\n         */\n        toggleOff: function() {\n            Plugin.eventTrigger('beforeOff');\n\n            mUtil.removeClass(the.target, the.targetState);\n\n            if (the.togglerState) {\n                mUtil.removeClass(element, the.togglerState);\n            }\n\n            the.state = 'off';\n\n            Plugin.eventTrigger('afterOff');\n\n            Plugin.eventTrigger('toggle');\n\n            return the;\n        },\n\n        /**\n         * Trigger events\n         */\n        eventTrigger: function(name) {\n            for (var i = 0; i < the.events.length; i++) {\n                var event = the.events[i];\n\n                if (event.name == name) {\n                    if (event.one == true) {\n                        if (event.fired == false) {\n                            the.events[i].fired = true;\n                            event.handler.call(this, the);\n                        }\n                    } else {\n                        event.handler.call(this, the);\n                    }\n                }\n            }\n        },\n\n        addEvent: function(name, handler, one) {\n            the.events.push({\n                name: name,\n                handler: handler,\n                one: one,\n                fired: false\n            });\n\n            return the;\n        }\n    };\n\n    //////////////////////////\n    // ** Public Methods ** //\n    //////////////////////////\n\n    /**\n     * Set default options\n     */\n\n    the.setDefaults = function(options) {\n        defaultOptions = options;\n    };\n\n    /**\n     * Get toggle state\n     */\n    the.getState = function() {\n        return the.state;\n    };\n\n    /**\n     * Toggle\n     */\n    the.toggle = function() {\n        return Plugin.toggle();\n    };\n\n    /**\n     * Toggle on\n     */\n    the.toggleOn = function() {\n        return Plugin.toggleOn();\n    };\n\n    /**\n     * Toggle off\n     */\n    the.toggle = function() {\n        return Plugin.toggleOff();\n    };\n\n    /**\n     * Attach event\n     * @returns {mToggle}\n     */\n    the.on = function(name, handler) {\n        return Plugin.addEvent(name, handler);\n    };\n\n    /**\n     * Attach event that will be fired once\n     * @returns {mToggle}\n     */\n    the.one = function(name, handler) {\n        return Plugin.addEvent(name, handler, true);\n    };\n\n    //== Construct plugin\n    Plugin.construct.apply(the, [options]);\n\n    return the;\n};\n// plugin setup\nvar mWizard = function(elementId, options) {\n    //== Main object\n    var the = this;\n    var init = false;\n\n    //== Get element object\n    var element = mUtil.get(elementId);\n    var body = mUtil.get('body');\n\n    if (!element) {\n        return;\n    }\n\n    //== Default options\n    var defaultOptions = {\n        startStep: 1,\n        manualStepForward: false\n    };\n\n    ////////////////////////////\n    // ** Private Methods  ** //\n    ////////////////////////////\n\n    var Plugin = {\n        /**\n         * Construct\n         */\n\n        construct: function(options) {\n            if (mUtil.data(element).has('wizard')) {\n                the = mUtil.data(element).get('wizard');\n            } else {\n                // reset menu\n                Plugin.init(options);\n\n                // build menu\n                Plugin.build();\n\n                mUtil.data(element).set('wizard', the);\n            }\n\n            return the;\n        },\n\n        /**\n         * Init wizard\n         */\n        init: function(options) {\n            the.element = element;\n            the.events = [];\n\n            // merge default and user defined options\n            the.options = mUtil.deepExtend({}, defaultOptions, options);\n\n            //== Elements\n            the.steps = mUtil.findAll(element, '.m-wizard__step');\n\n            the.progress = mUtil.find(element, '.m-wizard__progress .progress-bar');\n            the.btnSubmit = mUtil.find(element, '[data-wizard-action=\"submit\"]');\n            the.btnNext = mUtil.find(element, '[data-wizard-action=\"next\"]');\n            the.btnPrev = mUtil.find(element, '[data-wizard-action=\"prev\"]');\n            the.btnLast = mUtil.find(element, '[data-wizard-action=\"last\"]');\n            the.btnFirst = mUtil.find(element, '[data-wizard-action=\"first\"]');\n\n            //== Variables\n            the.events = [];\n            the.currentStep = 1;\n            the.stopped = false;\n            the.totalSteps = the.steps.length;\n\n            //== Init current step\n            if (the.options.startStep > 1) {\n                Plugin.goTo(the.options.startStep);\n            }\n\n            //== Init UI\n            Plugin.updateUI();\n        },\n\n        /**\n         * Build Form Wizard\n         */\n        build: function() {\n            //== Next button event handler\n            mUtil.addEvent(the.btnNext, 'click', function(e) {\n                e.preventDefault();\n                Plugin.goNext();\n            });\n\n            //== Prev button event handler\n            mUtil.addEvent(the.btnPrev, 'click', function(e) {\n                e.preventDefault();\n                Plugin.goPrev();\n            });\n\n            //== First button event handler\n            mUtil.addEvent(the.btnFirst, 'click', function(e) {\n                e.preventDefault();\n                Plugin.goFirst();\n            });\n\n            //== Last button event handler\n            mUtil.addEvent(the.btnLast, 'click', function(e) {\n                e.preventDefault();\n                Plugin.goLast();\n            });\n\n            mUtil.on(element, '.m-wizard__step a.m-wizard__step-number', 'click', function() {\n                var step = this.closest('.m-wizard__step');\n                var steps = mUtil.parents(this, '.m-wizard__steps')\n                var find = mUtil.findAll(steps, '.m-wizard__step');\n                var num;\n\n                for (var i = 0, j = find.length; i < j; i++) {\n                    if (step === find[i]) {\n                        num = (i + 1);\n                        break;\n                    }\n                }\n\n                if (num) {\n                    if (the.options.manualStepForward === false) {\n                        if (num < the.currentStep) {\n                            Plugin.goTo(num);\n                        }\n                    } else {\n                        Plugin.goTo(num);\n                    }\n                }\n            });\n        },\n\n        /**\n         * Handles wizard click wizard\n         */\n        goTo: function(number) {\n            //== Skip if this step is already shown\n            if (number === the.currentStep || number > the.totalSteps || number < 0) {\n                return;\n            }\n\n            //== Validate step number\n            if (number) {\n                number = parseInt(number);\n            } else {\n                number = Plugin.getNextStep();\n            }\n\n            //== Before next and prev events\n            var callback;\n\n            if (number > the.currentStep) {\n                callback = Plugin.eventTrigger('beforeNext');\n            } else {\n                callback = Plugin.eventTrigger('beforePrev');\n            }\n\n            //== Skip if stopped\n            if (the.stopped === true) {\n                the.stopped = false;\n                return;\n            }\n\n            //== Continue if no exit\n            if (callback !== false) {\n                //== Before change\n                Plugin.eventTrigger('beforeChange');\n\n                //== Set current step\n                the.currentStep = number;\n\n                //== Update UI\n                Plugin.updateUI();\n\n                //== Trigger change event\n                Plugin.eventTrigger('change');\n            }\n\n            //== After next and prev events\n            if (number > the.startStep) {\n                Plugin.eventTrigger('afterNext');\n            } else {\n                Plugin.eventTrigger('afterPrev');\n            }\n\n            return the;\n        },\n\n        /**\n         * Set step class\n         */\n        setStepClass: function() {\n            if (Plugin.isLastStep()) {\n                mUtil.addClass(element, 'm-wizard--step-last');\n            } else {\n                mUtil.removeClass(element, 'm-wizard--step-last');\n            }\n\n            if (Plugin.isFirstStep()) {\n                mUtil.addClass(element, 'm-wizard--step-first');\n            } else {\n                mUtil.removeClass(element, 'm-wizard--step-first');\n            }\n\n            if (Plugin.isBetweenStep()) {\n                mUtil.addClass(element, 'm-wizard--step-between');\n            } else {\n                mUtil.removeClass(element, 'm-wizard--step-between');\n            }\n        },\n\n        updateUI: function(argument) {\n            //== Update progress bar\n            Plugin.updateProgress();\n\n            //== Show current target content\n            Plugin.handleTarget();\n\n            //== Set classes\n            Plugin.setStepClass();\n\n            //== Apply nav step classes\n            for (var i = 0, j = the.steps.length; i < j; i++) {\n                mUtil.removeClass(the.steps[i], 'm-wizard__step--current m-wizard__step--done');\n            }\n\n            for (var i = 1; i < the.currentStep; i++) {\n                mUtil.addClass(the.steps[i - 1], 'm-wizard__step--done');\n            }\n\n            mUtil.addClass(the.steps[the.currentStep - 1], 'm-wizard__step--current');\n        },\n\n        /**\n         * Cancel\n         */\n        stop: function() {\n            the.stopped = true;\n        },\n\n        /**\n         * Resume\n         */\n        start: function() {\n            the.stopped = false;\n        },\n\n        /**\n         * Check last step\n         */\n        isLastStep: function() {\n            return the.currentStep === the.totalSteps;\n        },\n\n        /**\n         * Check first step\n         */\n        isFirstStep: function() {\n            return the.currentStep === 1;\n        },\n\n        /**\n         * Check between step\n         */\n        isBetweenStep: function() {\n            return Plugin.isLastStep() === false && Plugin.isFirstStep() === false;\n        },\n\n        /**\n         * Go to the next step\n         */\n        goNext: function() {\n            return Plugin.goTo(Plugin.getNextStep());\n        },\n\n        /**\n         * Go to the prev step\n         */\n        goPrev: function() {\n            return Plugin.goTo(Plugin.getPrevStep());\n        },\n\n        /**\n         * Go to the last step\n         */\n        goLast: function() {\n            return Plugin.goTo(the.totalSteps);\n        },\n\n        /**\n         * Go to the first step\n         */\n        goFirst: function() {\n            return Plugin.goTo(1);\n        },\n\n        /**\n         * Set progress\n         */\n        updateProgress: function() {\n            //== Calculate progress position\n            if (!the.progress) {\n                return;\n            }\n\n            //== Update progress\n            if (mUtil.hasClass(element, 'm-wizard--1')) {\n                var width = 100 * ((the.currentStep - 1) / (the.totalSteps));\n                var number = mUtil.find(element, '.m-wizard__step-number');\n                var offset = parseInt(mUtil.css(number, 'width'));\n                mUtil.css(the.progress, 'width', 'calc(' + width + '% + ' + (offset / 2) + 'px)');\n            } else if (mUtil.hasClass(element, 'm-wizard--2')) {\n                if (the.currentStep === 1) {\n                    //return;\n                }\n\n                var progress = (the.currentStep - 1) * (100 * (1 / (the.totalSteps - 1)));\n\n                if (mUtil.isInResponsiveRange('minimal-desktop-and-below')) {\n                    mUtil.css(the.progress, 'height', progress + '%');\n                } else {\n                    mUtil.css(the.progress, 'width', progress + '%');\n                }\n            } else {\n                var width = 100 * ((the.currentStep) / (the.totalSteps));\n                mUtil.css(the.progress, 'width', width + '%');\n            }\n        },\n\n        /**\n         * Show/hide target content\n         */\n        handleTarget: function() {\n            var step = the.steps[the.currentStep - 1];\n            var target = mUtil.get(mUtil.attr(step, 'm-wizard-target'));\n            var current = mUtil.find(element, '.m-wizard__form-step--current');\n\n            mUtil.removeClass(current, 'm-wizard__form-step--current');\n            mUtil.addClass(target, 'm-wizard__form-step--current');\n        },\n\n        /**\n         * Get next step\n         */\n        getNextStep: function() {\n            if (the.totalSteps >= (the.currentStep + 1)) {\n                return the.currentStep + 1;\n            } else {\n                return the.totalSteps;\n            }\n        },\n\n        /**\n         * Get prev step\n         */\n        getPrevStep: function() {\n            if ((the.currentStep - 1) >= 1) {\n                return the.currentStep - 1;\n            } else {\n                return 1;\n            }\n        },\n\n        /**\n         * Trigger events\n         */\n        eventTrigger: function(name) {\n            //mUtil.triggerCustomEvent(name);\n            for (var i = 0; i < the.events.length; i++) {\n                var event = the.events[i];\n                if (event.name == name) {\n                    if (event.one == true) {\n                        if (event.fired == false) {\n                            the.events[i].fired = true;\n                            event.handler.call(this, the);\n                        }\n                    } else {\n                        event.handler.call(this, the);\n                    }\n                }\n            }\n        },\n\n        addEvent: function(name, handler, one) {\n            the.events.push({\n                name: name,\n                handler: handler,\n                one: one,\n                fired: false\n            });\n\n            return the;\n        }\n    };\n\n    //////////////////////////\n    // ** Public Methods ** //\n    //////////////////////////\n\n    /**\n     * Set default options\n     */\n\n    the.setDefaults = function(options) {\n        defaultOptions = options;\n    };\n\n    /**\n     * Go to the next step\n     */\n    the.goNext = function() {\n        return Plugin.goNext();\n    };\n\n    /**\n     * Go to the prev step\n     */\n    the.goPrev = function() {\n        return Plugin.goPrev();\n    };\n\n    /**\n     * Go to the last step\n     */\n    the.goLast = function() {\n        return Plugin.goLast();\n    };\n\n    /**\n     * Cancel step\n     */\n    the.stop = function() {\n        return Plugin.stop();\n    };\n\n    /**\n     * Resume step\n     */\n    the.start = function() {\n        return Plugin.start();\n    };\n\n    /**\n     * Go to the first step\n     */\n    the.goFirst = function() {\n        return Plugin.goFirst();\n    };\n\n    /**\n     * Go to a step\n     */\n    the.goTo = function(number) {\n        return Plugin.goTo(number);\n    };\n\n    /**\n     * Get current step number\n     */\n    the.getStep = function() {\n        return the.currentStep;\n    };\n\n    /**\n     * Check last step\n     */\n    the.isLastStep = function() {\n        return Plugin.isLastStep();\n    };\n\n    /**\n     * Check first step\n     */\n    the.isFirstStep = function() {\n        return Plugin.isFirstStep();\n    };\n\n    /**\n     * Attach event\n     */\n    the.on = function(name, handler) {\n        return Plugin.addEvent(name, handler);\n    };\n\n    /**\n     * Attach event that will be fired once\n     */\n    the.one = function(name, handler) {\n        return Plugin.addEvent(name, handler, true);\n    };\n\n    //== Construct plugin\n    Plugin.construct.apply(the, [options]);\n\n    return the;\n};\n(function($) {\n\n    var pluginName = 'mDatatable';\n    var pfx = 'm-';\n\n    $.fn[pluginName] = $.fn[pluginName] || {};\n\n    /**\n     * @param datatable Main datatable plugin instance\n     * @param options Extension options\n     * @returns {*}\n     */\n    $.fn[pluginName].checkbox = function(datatable, options) {\n        var Extension = {\n            selectedAllRows: false,\n            selectedRows: [],\n            unselectedRows: [],\n\n            init: function() {\n                if (Extension.selectorEnabled()) {\n                    // reset\n                    datatable.setDataSourceParam(options.vars.selectedAllRows, false);\n                    datatable.stateRemove('checkbox');\n\n                    // requestIds is not null\n                    if (options.vars.requestIds) {\n                        // request ids in response\n                        datatable.setDataSourceParam(options.vars.requestIds, true);\n                    }\n\n                    // remove selected checkbox on datatable reload\n                    $(datatable).on(pfx + 'datatable--on-reloaded', function() {\n                        datatable.stateRemove('checkbox');\n                        datatable.setDataSourceParam(options.vars.selectedAllRows, false);\n                        Extension.selectedAllRows = false;\n                        Extension.selectedRows = [];\n                        Extension.unselectedRows = [];\n                    });\n\n                    // select all on extension init\n                    Extension.selectedAllRows = datatable.getDataSourceParam(options.vars.selectedAllRows);\n\n                    $(datatable).on(pfx + 'datatable--on-layout-updated', function(e, args) {\n                        if (args.table != $(datatable.wrap).attr('id')) {\n                            return;\n                        }\n                        datatable.ready(function() {\n                            Extension.initVars();\n                            Extension.initEvent();\n                            Extension.initSelect();\n                        });\n                    });\n\n                    $(datatable).on(pfx + 'datatable--on-check', function(e, ids) {\n                        ids.forEach(function(id) {\n                            Extension.selectedRows.push(id);\n                            // // remove from unselected rows\n                            Extension.unselectedRows = Extension.remove(Extension.unselectedRows, id);\n                        });\n                        var storage = {};\n                        storage['selectedRows'] = $.unique(Extension.selectedRows);\n                        storage['unselectedRows'] = $.unique(Extension.unselectedRows);\n                        datatable.stateKeep('checkbox', storage);\n                    });\n                    $(datatable).on(pfx + 'datatable--on-uncheck', function(e, ids) {\n                        ids.forEach(function(id) {\n                            Extension.unselectedRows.push(id);\n                            // // remove from selected rows\n                            Extension.selectedRows = Extension.remove(Extension.selectedRows, id);\n                        });\n                        var storage = {};\n                        storage['selectedRows'] = $.unique(Extension.selectedRows);\n                        storage['unselectedRows'] = $.unique(Extension.unselectedRows);\n                        datatable.stateKeep('checkbox', storage);\n                    });\n                }\n            },\n\n            /**\n             * Init checkbox clicks event\n             */\n            initEvent: function() {\n                // select all checkbox click\n                $(datatable.tableHead).find('.' + pfx + 'checkbox--all > [type=\"checkbox\"]').click(function(e) {\n                    // clear selected and unselected rows\n                    Extension.selectedRows = Extension.unselectedRows = [];\n                    datatable.stateRemove('checkbox');\n\n                    // select all rows\n                    if ($(this).is(':checked')) {\n                        Extension.selectedAllRows = true;\n                    }\n                    else {\n                        Extension.selectedAllRows = false;\n                    }\n\n                    // local select all current page rows\n                    if (!options.vars.requestIds) {\n                        if ($(this).is(':checked')) {\n                            Extension.selectedRows = $.makeArray($(datatable.tableBody).find('.' + pfx + 'checkbox--single > [type=\"checkbox\"]').map(function(i, chk) {\n                                return $(chk).val();\n                            }));\n                        }\n                        var storage = {};\n                        storage['selectedRows'] = $.unique(Extension.selectedRows);\n                        datatable.stateKeep('checkbox', storage);\n                    }\n\n                    // keep selectedAllRows in datasource params\n                    datatable.setDataSourceParam(options.vars.selectedAllRows, Extension.selectedAllRows);\n\n                    $(datatable).trigger(pfx + 'datatable--on-click-checkbox', [$(this)]);\n                });\n\n                // single row checkbox click\n                $(datatable.tableBody).find('.' + pfx + 'checkbox--single > [type=\"checkbox\"]').click(function(e) {\n                    var id = $(this).val();\n                    if ($(this).is(':checked')) {\n                        Extension.selectedRows.push(id);\n                        // remove from unselected rows\n                        Extension.unselectedRows = Extension.remove(Extension.unselectedRows, id);\n                    }\n                    else {\n                        Extension.unselectedRows.push(id);\n                        // remove from selected rows\n                        Extension.selectedRows = Extension.remove(Extension.selectedRows, id);\n                    }\n\n                    // local checkbox header check\n                    if (!options.vars.requestIds && Extension.selectedRows.length < 1) {\n                        // remove select all checkbox, if there is no checked checkbox left\n                        $(datatable.tableHead).find('.' + pfx + 'checkbox--all > [type=\"checkbox\"]').prop('checked', false);\n                    }\n\n                    var storage = {};\n                    storage['selectedRows'] = $.unique(Extension.selectedRows);\n                    storage['unselectedRows'] = $.unique(Extension.unselectedRows);\n                    datatable.stateKeep('checkbox', storage);\n\n                    $(datatable).trigger(pfx + 'datatable--on-click-checkbox', [$(this)]);\n                });\n            },\n\n            initSelect: function() {\n                // selected all rows from server\n                if (Extension.selectedAllRows && options.vars.requestIds) {\n                    if (!datatable.hasClass(pfx + 'datatable--error')) {\n                        // set header select all checkbox checked\n                        $(datatable.tableHead).find('.' + pfx + 'checkbox--all > [type=\"checkbox\"]').prop('checked', true);\n                    }\n\n                    // set all checkbox in table body\n                    datatable.setActiveAll(true);\n\n                    // remove unselected rows\n                    Extension.unselectedRows.forEach(function(id) {\n                        datatable.setInactive(id);\n                    });\n\n                }\n                else {\n                    // single check for server and local\n                    Extension.selectedRows.forEach(function(id) {\n                        datatable.setActive(id);\n                    });\n\n                    // local checkbox; check if all checkboxes of currect page are checked\n                    if (!datatable.hasClass(pfx + 'datatable--error') && $(datatable.tableBody).find('.' + pfx + 'checkbox--single > [type=\"checkbox\"]').not(':checked').length < 1) {\n                        // set header select all checkbox checked\n                        $(datatable.tableHead).find('.' + pfx + 'checkbox--all > [type=\"checkbox\"]').prop('checked', true);\n                    }\n                }\n            },\n\n            /**\n             * Check if selector is enabled from options\n             */\n            selectorEnabled: function() {\n                return $.grep(datatable.options.columns, function(n, i) {\n                    return n.selector || false;\n                })[0];\n            },\n\n            initVars: function() {\n                // get single select/unselect from localstorage\n                var storage = datatable.stateGet('checkbox');\n                if (typeof storage !== 'undefined') {\n                    Extension.selectedRows = storage['selectedRows'] || [];\n                    Extension.unselectedRows = storage['unselectedRows'] || [];\n                }\n            },\n\n            getSelectedId: function(path) {\n                Extension.initVars();\n\n                // server selected all rows\n                if (Extension.selectedAllRows && options.vars.requestIds) {\n                    if (typeof path === 'undefined') {\n                        path = options.vars.rowIds;\n                    }\n\n                    // if selected all rows, return id from response meta\n                    var selectedAllRows = datatable.getObject(path, datatable.lastResponse) || [];\n\n                    if (selectedAllRows.length > 0) {\n                        // remove single unselected rows from selectedAllRows ids from server response emta\n                        Extension.unselectedRows.forEach(function(id) {\n                            selectedAllRows = Extension.remove(selectedAllRows, parseInt(id));\n                        });\n                    }\n                    return selectedAllRows;\n                }\n\n                // else return single checked selected rows\n                return Extension.selectedRows;\n            },\n\n            remove: function(array, element) {\n                return array.filter(function(e) {\n                    return e !== element;\n                });\n            },\n        };\n\n        // make the extension accessible from datatable init\n        datatable.checkbox = function() {\n            return Extension;\n        };\n\n        if (typeof options === 'object') {\n            options = $.extend(true, {}, $.fn[pluginName].checkbox.default, options);\n            Extension.init.apply(this, [options]);\n        }\n\n        return datatable;\n    };\n\n    $.fn[pluginName].checkbox.default = {\n        vars: {\n            // select all rows flag to be sent to the server\n            selectedAllRows: 'selectedAllRows',\n            // request id parameter's name\n            requestIds: 'requestIds',\n            // response path to all rows id\n            rowIds: 'meta.rowIds',\n        },\n    };\n\n}(jQuery));\nvar mLayout = function() {\n    var header;\n    var horMenu;\n    var asideMenu;\n    var asideMenuOffcanvas;\n    var horMenuOffcanvas;\n    var asideLeftToggle;\n    var asideLeftHide;\n    var scrollTop;\n    var quicksearch;\n    var mainPortlet;\n\n    //== Header\n    var initStickyHeader = function() {\n        var tmp;\n        var headerEl = mUtil.get('m_header');\n        var options = {\n            offset: {},\n            minimize: {}\n        };\n\n        if (mUtil.attr(headerEl, 'm-minimize-mobile') == 'hide') {\n            options.minimize.mobile = {};\n            options.minimize.mobile.on = 'm-header--hide';\n            options.minimize.mobile.off = 'm-header--show';\n        } else {\n            options.minimize.mobile = false;\n        }\n\n        if (mUtil.attr(headerEl, 'm-minimize') == 'hide') {\n            options.minimize.desktop = {};\n            options.minimize.desktop.on = 'm-header--hide';\n            options.minimize.desktop.off = 'm-header--show';\n        } else {\n            options.minimize.desktop = false;\n        }\n\n        if (tmp = mUtil.attr(headerEl, 'm-minimize-offset')) {\n            options.offset.desktop = tmp;\n        }\n\n        if (tmp = mUtil.attr(headerEl, 'm-minimize-mobile-offset')) {\n            options.offset.mobile = tmp;\n        }\n\n        header = new mHeader('m_header', options);\n    }\n\n    //== Hor menu\n    var initHorMenu = function() {\n        // init aside left offcanvas\n        horMenuOffcanvas = new mOffcanvas('m_header_menu', {\n            overlay: true,\n            baseClass: 'm-aside-header-menu-mobile',\n            closeBy: 'm_aside_header_menu_mobile_close_btn',\n            toggleBy: {\n                target: 'm_aside_header_menu_mobile_toggle',\n                state: 'm-brand__toggler--active'\n            }\n        });\n\n        horMenu = new mMenu('m_header_menu', {\n            submenu: {\n                desktop: 'dropdown',\n                tablet: 'accordion',\n                mobile: 'accordion'\n            },\n            accordion: {\n                slideSpeed: 200, // accordion toggle slide speed in milliseconds\n                expandAll: false // allow having multiple expanded accordions in the menu\n            }\n        });\n    }\n\n    //== Aside menu\n    var initLeftAsideMenu = function() {\n        //== Init aside menu\n        var menu = mUtil.get('m_ver_menu');\n        var menuDesktopMode = (mUtil.attr(menu, 'm-menu-dropdown') === '1' ? 'dropdown' : 'accordion');\n\n        var scroll;\n        if (mUtil.attr(menu, 'm-menu-scrollable') === '1') {\n            scroll = {\n                height: function() {\n                    if (mUtil.isInResponsiveRange('desktop')) {\n                        return mUtil.getViewPort().height - parseInt(mUtil.css('m_header', 'height'));\n                    }\n                }\n            };\n        }\n\n        asideMenu = new mMenu('m_ver_menu', {\n            // vertical scroll\n            scroll: scroll,\n\n            // submenu setup\n            submenu: {\n                desktop: {\n                    // by default the menu mode set to accordion in desktop mode\n                    default: menuDesktopMode,\n                    // whenever body has this class switch the menu mode to dropdown\n                    state: {\n                        body: 'm-aside-left--minimize',\n                        mode: 'dropdown'\n                    }\n                },\n                tablet: 'accordion', // menu set to accordion in tablet mode\n                mobile: 'accordion' // menu set to accordion in mobile mode\n            },\n\n            //accordion setup\n            accordion: {\n                autoScroll: false, // enable auto scrolling(focus) to the clicked menu item\n                expandAll: false // allow having multiple expanded accordions in the menu\n            }\n        });\n    }\n\n    //== Aside\n    var initLeftAside = function() {\n        // init aside left offcanvas\n        var body = mUtil.get('body');\n        var asideLeft = mUtil.get('m_aside_left');\n        var asideOffcanvasClass = mUtil.hasClass(asideLeft, 'm-aside-left--offcanvas-default') ? 'm-aside-left--offcanvas-default' : 'm-aside-left';\n\n        asideMenuOffcanvas = new mOffcanvas('m_aside_left', {\n            baseClass: asideOffcanvasClass,\n            overlay: true,\n            closeBy: 'm_aside_left_close_btn',\n            toggleBy: {\n                target: 'm_aside_left_offcanvas_toggle',\n                state: 'm-brand__toggler--active'\n            }\n        });\n\n        //== Handle minimzied aside hover\n        if (mUtil.hasClass(body, 'm-aside-left--fixed')) {\n            var insideTm;\n            var outsideTm;\n\n            mUtil.addEvent(asideLeft, 'mouseenter', function() {\n                if (outsideTm) {\n                    clearTimeout(outsideTm);\n                    outsideTm = null;\n                }\n\n                insideTm = setTimeout(function() {\n                    if (mUtil.hasClass(body, 'm-aside-left--minimize') && mUtil.isInResponsiveRange('desktop')) {\n                        mUtil.removeClass(body, 'm-aside-left--minimize');\n                        mUtil.addClass(body, 'm-aside-left--minimize-hover');\n                        asideMenu.scrollerUpdate();\n                        asideMenu.scrollerTop();\n                    }\n                }, 300);\n            });\n\n            mUtil.addEvent(asideLeft, 'mouseleave', function() {\n                if (insideTm) {\n                    clearTimeout(insideTm);\n                    insideTm = null;\n                }\n\n                outsideTm = setTimeout(function() {\n                    if (mUtil.hasClass(body, 'm-aside-left--minimize-hover') && mUtil.isInResponsiveRange('desktop')) {\n                        mUtil.removeClass(body, 'm-aside-left--minimize-hover');\n                        mUtil.addClass(body, 'm-aside-left--minimize');\n                        asideMenu.scrollerUpdate();\n                        asideMenu.scrollerTop();\n                    }\n                }, 500);\n            });\n        }\n    }\n\n    //== Sidebar toggle\n    var initLeftAsideToggle = function() {\n        if ($('#m_aside_left_minimize_toggle').length === 0) {\n            return;\n        }\n\n        asideLeftToggle = new mToggle('m_aside_left_minimize_toggle', {\n            target: 'body',\n            targetState: 'm-brand--minimize m-aside-left--minimize',\n            togglerState: 'm-brand__toggler--active'\n        });\n\n        asideLeftToggle.on('toggle', function(toggle) {\n            if (mUtil.get('main_portlet')) {\n                mainPortlet.updateSticky();\n            }\n\n            horMenu.pauseDropdownHover(800);\n            asideMenu.pauseDropdownHover(800);\n\n            //== Remember state in cookie\n            Cookies.set('sidebar_toggle_state', toggle.getState());\n            // to set default minimized left aside use this cookie value in your\n            // server side code and add \"m-brand--minimize m-aside-left--minimize\" classes to\n            // the body tag in order to initialize the minimized left aside mode during page loading.\n        });\n\n        asideLeftToggle.on('beforeToggle', function(toggle) {\n            var body = mUtil.get('body');\n            if (mUtil.hasClass(body, 'm-aside-left--minimize') === false && mUtil.hasClass(body, 'm-aside-left--minimize-hover')) {\n                mUtil.removeClass(body, 'm-aside-left--minimize-hover');\n            }\n        });\n    }\n\n    //== Sidebar hide\n    var initLeftAsideHide = function() {\n        if ($('#m_aside_left_hide_toggle').length === 0 ) {\n            return;\n        }\n\n        initLeftAsideHide = new mToggle('m_aside_left_hide_toggle', {\n            target: 'body',\n            targetState: 'm-aside-left--hide',\n            togglerState: 'm-brand__toggler--active'\n        });\n\n        initLeftAsideHide.on('toggle', function(toggle) {\n            horMenu.pauseDropdownHover(800);\n            asideMenu.pauseDropdownHover(800);\n\n            //== Remember state in cookie\n            Cookies.set('sidebar_hide_state', toggle.getState());\n            // to set default minimized left aside use this cookie value in your\n            // server side code and add \"m-brand--minimize m-aside-left--minimize\" classes to\n            // the body tag in order to initialize the minimized left aside mode during page loading.\n        });\n    }\n\n    //== Topbar\n    var initTopbar = function() {\n        $('#m_aside_header_topbar_mobile_toggle').click(function() {\n            $('body').toggleClass('m-topbar--on');\n        });\n\n        // Animated Notification Icon\n        /*\n        setInterval(function() {\n            $('#m_topbar_notification_icon .m-nav__link-icon').addClass('m-animate-shake');\n            $('#m_topbar_notification_icon .m-nav__link-badge').addClass('m-animate-blink');\n        }, 3000);\n\n        setInterval(function() {\n            $('#m_topbar_notification_icon .m-nav__link-icon').removeClass('m-animate-shake');\n            $('#m_topbar_notification_icon .m-nav__link-badge').removeClass('m-animate-blink');\n        }, 6000);\n        */\n    }\n\n    //== Quicksearch\n    var initQuicksearch = function() {\n        if ($('#m_quicksearch').length === 0) {\n            return;\n        }\n\n        quicksearch = new mQuicksearch('m_quicksearch', {\n            mode: mUtil.attr('m_quicksearch', 'm-quicksearch-mode'), // quick search type\n            minLength: 1\n        });\n\n        //<div class=\"m-search-results m-search-results--skin-light\"><span class=\"m-search-result__message\">Something went wrong</div></div>\n\n        quicksearch.on('search', function(the) {\n            the.showProgress();\n\n            $.ajax({\n                url: 'https://keenthemes.com/metronic/themes/themes/metronic/dist/preview/inc/api/quick_search.php',\n                data: {\n                    query: the.query\n                },\n                dataType: 'html',\n                success: function(res) {\n                    the.hideProgress();\n                    the.showResult(res);\n                },\n                error: function(res) {\n                    the.hideProgress();\n                    the.showError('Connection error. Pleae try again later.');\n                }\n            });\n        });\n    }\n\n    //== Scrolltop\n    var initScrollTop = function() {\n        var scrollTop = new mScrollTop('m_scroll_top', {\n            offset: 300,\n            speed: 600\n        });\n    }\n\n    //== Main portlet(sticky portlet)\n    var createMainPortlet = function() {\n        return new mPortlet('main_portlet', {\n            sticky: {\n                offset: parseInt(mUtil.css( mUtil.get('m_header'), 'height')),\n                zIndex: 90,\n                position: {\n                    top: function() {\n                        return parseInt(mUtil.css( mUtil.get('m_header'), 'height') );\n                    },\n                    left: function() {\n                        var left = parseInt(mUtil.css( mUtil.getByClass('m-content'), 'paddingLeft'));\n\n                        if (mUtil.isInResponsiveRange('desktop')) {\n                            //left += parseInt(mUtil.css(mUtil.get('m_aside_left'), 'width') );\n                            if (mUtil.hasClass(mUtil.get('body'), 'm-aside-left--minimize')) {\n                                left += 78; // need to use hardcoded width of the minimize aside\n                            } else {\n                                left += 255; // need to use hardcoded width of the aside\n                            }\n                        }\n\n                        return left;\n                    },\n                    right: function() {\n                        return parseInt(mUtil.css( mUtil.getByClass('m-content'), 'paddingRight') );\n                    }\n                }\n            }\n        });\n    }\n\n    return {\n        init: function() {\n            this.initHeader();\n            this.initAside();\n            this.initMainPortlet();\n        },\n\n        initMainPortlet: function() {\n            if (!mUtil.get('main_portlet')) {\n                return;\n            }\n\n            mainPortlet = createMainPortlet();\n            mainPortlet.initSticky();\n\n            mUtil.addResizeHandler(function(){\n                mainPortlet.updateSticky();\n            });\n        },\n\n        resetMainPortlet: function() {\n            mainPortlet.destroySticky();\n            mainPortlet = createMainPortlet();\n            mainPortlet.initSticky();\n        },\n\n        initHeader: function() {\n            initStickyHeader();\n            initHorMenu();\n            initTopbar();\n            initQuicksearch();\n            initScrollTop();\n        },\n\n        initAside: function() {\n            initLeftAside();\n            initLeftAsideMenu();\n            initLeftAsideToggle();\n            initLeftAsideHide();\n\n            this.onLeftSidebarToggle(function(e) {\n                //== Update sticky portlet\n                if (mainPortlet) {\n                    mainPortlet.updateSticky();\n                }\n\n                //== Reload datatable\n                var datatables = $('.m-datatable');\n                if (datatables) {\n                    datatables.each(function() {\n                        $(this).mDatatable('redraw');\n                    });\n                }\n            });\n        },\n\n        getAsideMenu: function() {\n            return asideMenu;\n        },\n\n        onLeftSidebarToggle: function(handler) {\n            if (asideLeftToggle) {\n                asideLeftToggle.on('toggle', handler);\n            }\n        },\n\n        closeMobileAsideMenuOffcanvas: function() {\n            if (mUtil.isMobileDevice()) {\n                asideMenuOffcanvas.hide();\n            }\n        },\n\n        closeMobileHorMenuOffcanvas: function() {\n            if (mUtil.isMobileDevice()) {\n                horMenuOffcanvas.hide();\n            }\n        }\n    };\n}();\n\n$(document).on('turbolinks:load', () => {\n    if (mUtil.isAngularVersion() === false) {\n        mLayout.init();\n    }\n});\n\nvar mQuickSidebar = function() {\n    var topbarAside = $('#m_quick_sidebar');\n    var topbarAsideTabs = $('#m_quick_sidebar_tabs');\n    var topbarAsideContent = topbarAside.find('.m-quick-sidebar__content');\n\n    var initMessages = function() {\n        var messages = mUtil.find( mUtil.get('m_quick_sidebar_tabs_messenger'),  '.m-messenger__messages');\n        var form = $('#m_quick_sidebar_tabs_messenger .m-messenger__form');\n\n        mUtil.scrollerInit(messages, {\n            disableForMobile: true,\n            resetHeightOnDestroy: false,\n            handleWindowResize: true,\n            height: function() {\n                var height = topbarAside.outerHeight(true) -\n                    topbarAsideTabs.outerHeight(true) -\n                    form.outerHeight(true) - 120;\n\n                return height;\n            }\n        });\n    }\n\n    var initSettings = function() {\n        var settings = mUtil.find( mUtil.get('m_quick_sidebar_tabs_settings'),  '.m-list-settings');\n\n        if (!settings) {\n            return;\n        }\n\n        mUtil.scrollerInit(settings, {\n            disableForMobile: true,\n            resetHeightOnDestroy: false,\n            handleWindowResize: true,\n            height: function() {\n                return mUtil.getViewPort().height - topbarAsideTabs.outerHeight(true) - 60;\n            }\n        });\n    }\n\n    var initLogs = function() {\n        var logs = mUtil.find( mUtil.get('m_quick_sidebar_tabs_logs'),  '.m-list-timeline');\n\n        if (!logs) {\n            return;\n        }\n\n        mUtil.scrollerInit(logs, {\n            disableForMobile: true,\n            resetHeightOnDestroy: false,\n            handleWindowResize: true,\n            height: function() {\n                return mUtil.getViewPort().height - topbarAsideTabs.outerHeight(true) - 60;\n            }\n        });\n    }\n\n    var initOffcanvasTabs = function() {\n        initMessages();\n        initSettings();\n        initLogs();\n    }\n\n    var initOffcanvas = function() {\n        var topbarAsideObj = new mOffcanvas('m_quick_sidebar', {\n            overlay: true,\n            baseClass: 'm-quick-sidebar',\n            closeBy: 'm_quick_sidebar_close',\n            toggleBy: 'm_quick_sidebar_toggle'\n        });\n\n        // run once on first time dropdown shown\n        topbarAsideObj.one('afterShow', function() {\n            mApp.block(topbarAside);\n\n            setTimeout(function() {\n                mApp.unblock(topbarAside);\n\n                topbarAsideContent.removeClass('m--hide');\n\n                initOffcanvasTabs();\n            }, 1000);\n        });\n    }\n\n    return {\n        init: function() {\n            if (topbarAside.length === 0) {\n                return;\n            }\n\n            initOffcanvas();\n        }\n    };\n}();\n\n$(document).on('turbolinks:load', () => {\n    mQuickSidebar.init();\n});\n"]},"metadata":{},"sourceType":"module"}