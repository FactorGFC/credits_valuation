{"ast":null,"code":"import { Calendar } from \"@fullcalendar/core\";\nimport dayGridPlugin from \"@fullcalendar/daygrid\";\nimport esLocale from '@fullcalendar/core/locales/es';\nimport swal from \"sweetalert\";\nimport I18n from \"i18n-js\";\ndocument.addEventListener('turbolinks:load', function () {\n  var calendarEl = document.getElementById('calendar');\n  $(document).ready(function () {\n    var calendar = new Calendar(calendarEl, {\n      plugins: [dayGridPlugin],\n      initialView: 'dayGridMonth',\n      initialDate: Date.now(),\n      editable: true,\n      droppable: false,\n      locale: esLocale,\n      eventSources: '/get_events',\n      eventClick: function eventClick(info) {\n        var authenticityToken = $('[name=\"csrf-token\"]')[0] && $('[name=\"csrf-token\"]')[0].content;\n        $.ajax({\n          url: 'get_event_info/' + info.event.id,\n          data: {\n            authenticity_token: authenticityToken\n          },\n          type: 'GET',\n          dataType: 'json',\n          success: function success(data) {\n            var event = data;\n            $(\"#titleModalLabel\").text('EDITAR EVENTO');\n            fillEventForm(event.id, event.title, event.description, event.start, event.event_type, event.location, event.url, event.user_ids);\n          },\n          error: function error(_error) {\n            var message = I18n.t('messages.try_again');\n\n            if (_error.responseJSON && _error.responseJSON.message) {\n              message = _error.responseJSON.message;\n            }\n\n            swal(I18n.t('messages.error'), message, 'error');\n          }\n        });\n        info.el.style.borderColor = 'red';\n        $('#m_modal_event').modal();\n      }\n    });\n    calendar.render();\n  });\n  $(document).on(\"click\", \".open-modal-event\", function () {\n    var eventId = $(this).data('id');\n    var eventTitle = $(this).data('title');\n    var eventDesc = $(this).data('desc');\n    var eventDatetime = $(this).data('datetime');\n    var eventType = $(this).data('type');\n    var eventLocation = $(this).data('location');\n    var eventUrl = $(this).data('url');\n    var eventUsers = $(this).data('users');\n\n    if (eventId) {\n      $(\"#titleModalLabel\").text('EDITAR EVENTO');\n      document.getElementById('btn-event-delete').style.display = 'block';\n    } else {\n      $(\"#titleModalLabel\").text('NUEVO EVENTO');\n      document.getElementById('btn-event-delete').style.display = 'none';\n    }\n\n    fillEventForm(eventId, eventTitle, eventDesc, eventDatetime, eventType, eventLocation, eventUrl, eventUsers);\n    console.log(eventId);\n  });\n  $(document).on(\"click\", \".open-modal-agreement\", function () {\n    var eventId = $(this).data('id');\n    var eventAgreements = $(this).data('agreements');\n    $(\"#titleModalLabel\").text('ACUERDOS');\n    $(\".modal-body #event_id\").val(eventId);\n    $(\".modal-body #event_agreements\").val(eventAgreements);\n  });\n\n  function fillEventForm(eventId, eventTitle, eventDesc, eventDatetime, eventType, eventLocation, eventUrl, eventUsers) {\n    $(\".modal-body #event_id\").val(eventId);\n    $(\".modal-body #event_title\").val(eventTitle);\n    $(\".modal-body #event_description\").val(eventDesc);\n    $(\".modal-body #event_date_time\").val(eventDatetime);\n    $(\".modal-body #event_type_select\").val(eventType);\n    $(\".modal-body #event_location\").val(eventLocation);\n    $(\".modal-body #event_url\").val(eventUrl);\n    $(\"#eventUsers\").val(eventUsers);\n    $('#event_type_select').trigger('change');\n    $('#eventUsers').trigger('change');\n  }\n\n  window.displayFieldByType = function (id_p, id_v, elementValue) {\n    if (elementValue.value === 'PRESENCIAL') {\n      document.getElementById(id_p).style.display = 'block';\n      document.getElementById(id_v).style.display = 'none';\n    } else if (elementValue.value === 'VIRTUAL') {\n      document.getElementById(id_v).style.display = 'block';\n      document.getElementById(id_p).style.display = 'none';\n    } else {\n      document.getElementById(id_v).style.display = 'none';\n      document.getElementById(id_p).style.display = 'none';\n    }\n  };\n\n  window.deleteEvent = function (event) {\n    var authenticityToken = $('[name=\"csrf-token\"]')[0] && $('[name=\"csrf-token\"]')[0].content;\n    swal({\n      title: '¿Desea eliminar este evento?',\n      buttons: {\n        cancel: I18n.t('messages.cancel'),\n        confirm: I18n.t('messages.delete')\n      }\n    }).then(function (isConfirmed) {\n      if (isConfirmed) {\n        $.ajax({\n          url: 'delete_event/' + event.value,\n          data: {\n            authenticity_token: authenticityToken\n          },\n          type: 'DELETE',\n          dataType: 'json',\n          success: function success(data) {\n            swal({\n              title: I18n.t('messages.done'),\n              text: I18n.t('messages.deleted'),\n              type: 'success'\n            });\n            window.location.href = 'events';\n          },\n          error: function error(_error2) {\n            var message = I18n.t('messages.try_again');\n\n            if (_error2.responseJSON && _error2.responseJSON.message) {\n              message = _error2.responseJSON.message;\n            }\n\n            swal(I18n.t('messages.error'), message, 'error');\n          }\n        });\n      }\n    });\n  };\n\n  window.finishEvent = function (event) {\n    var authenticityToken = $('[name=\"csrf-token\"]')[0] && $('[name=\"csrf-token\"]')[0].content;\n    swal({\n      title: '¿Desea FINALIZAR este evento?',\n      buttons: {\n        cancel: I18n.t('messages.cancel'),\n        confirm: I18n.t('messages.confirm')\n      }\n    }).then(function (isConfirmed) {\n      if (isConfirmed) {\n        $.ajax({\n          url: 'finish_event/' + event.value,\n          data: {\n            authenticity_token: authenticityToken\n          },\n          type: 'PUT',\n          dataType: 'json',\n          success: function success(data) {\n            swal({\n              title: I18n.t('messages.done'),\n              text: I18n.t('messages.deleted'),\n              type: 'success'\n            });\n            window.location.href = 'events';\n          },\n          error: function error(_error3) {\n            var message = I18n.t('messages.try_again');\n\n            if (_error3.responseJSON && _error3.responseJSON.message) {\n              message = _error3.responseJSON.message;\n            }\n\n            swal(I18n.t('messages.error'), message, 'error');\n          }\n        });\n      }\n    });\n  };\n});","map":{"version":3,"sources":["/Users/alejandrorodriguez/Documents/Develop/credits_valuation/app/javascript/packs/fullcalendar/fullcalendar.js"],"names":["Calendar","dayGridPlugin","esLocale","swal","I18n","document","addEventListener","calendarEl","getElementById","$","ready","calendar","plugins","initialView","initialDate","Date","now","editable","droppable","locale","eventSources","eventClick","info","authenticityToken","content","ajax","url","event","id","data","authenticity_token","type","dataType","success","text","fillEventForm","title","description","start","event_type","location","user_ids","error","message","t","responseJSON","el","style","borderColor","modal","render","on","eventId","eventTitle","eventDesc","eventDatetime","eventType","eventLocation","eventUrl","eventUsers","display","console","log","eventAgreements","val","trigger","window","displayFieldByType","id_p","id_v","elementValue","value","deleteEvent","buttons","cancel","confirm","then","isConfirmed","href","finishEvent"],"mappings":"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","sourcesContent":["import { Calendar } from \"@fullcalendar/core\";\nimport dayGridPlugin from \"@fullcalendar/daygrid\";\nimport esLocale      from '@fullcalendar/core/locales/es';\nimport swal from \"sweetalert\";\nimport I18n from \"i18n-js\";\n\n\ndocument.addEventListener('turbolinks:load', function() {\n\n    var calendarEl  = document.getElementById('calendar');\n    $(document).ready(function() {\n        var calendar = new Calendar(calendarEl, {\n            plugins: [ dayGridPlugin ],\n            initialView: 'dayGridMonth',\n            initialDate: Date.now(),\n            editable: true,\n            droppable: false,\n            locale: esLocale,\n            eventSources: '/get_events',\n            eventClick: function(info) {\n\n                let authenticityToken = $('[name=\"csrf-token\"]')[0] && $('[name=\"csrf-token\"]')[0].content;\n\n                $.ajax({\n                    url: 'get_event_info/'+info.event.id,\n                    data: {authenticity_token: authenticityToken},\n                    type: 'GET',\n                    dataType: 'json',\n                    success: function (data) {\n                        let event = data;\n                        $(\"#titleModalLabel\").text('EDITAR EVENTO');\n                        fillEventForm(event.id, event.title, event.description, event.start, event.event_type, event.location, event.url, event.user_ids)\n                    },\n                    error: function (error) {\n                        let message = I18n.t('messages.try_again');\n                        if (error.responseJSON && error.responseJSON.message) {\n                            message = error.responseJSON.message;\n                        }\n                        swal(I18n.t('messages.error'), message, 'error');\n                    }\n                });\n                info.el.style.borderColor = 'red';\n\n                $('#m_modal_event').modal();\n            }\n        });\n\n        calendar.render();\n    });\n\n    $(document).on(\"click\", \".open-modal-event\", function () {\n        var eventId            = $(this).data('id');\n        var eventTitle         = $(this).data('title');\n        var eventDesc          = $(this).data('desc');\n        var eventDatetime      = $(this).data('datetime');\n        var eventType          = $(this).data('type');\n        var eventLocation      = $(this).data('location');\n        var eventUrl           = $(this).data('url');\n        var eventUsers         = $(this).data('users');\n        if(eventId){\n            $(\"#titleModalLabel\").text('EDITAR EVENTO');\n            document.getElementById('btn-event-delete').style.display = 'block';\n        }else{\n            $(\"#titleModalLabel\").text('NUEVO EVENTO');\n            document.getElementById('btn-event-delete').style.display = 'none';\n        }\n\n        fillEventForm(eventId, eventTitle, eventDesc, eventDatetime, eventType, eventLocation, eventUrl, eventUsers);\n        console.log(eventId);\n\n    });\n\n    $(document).on(\"click\", \".open-modal-agreement\", function (){\n        var eventId            = $(this).data('id');\n        var eventAgreements    = $(this).data('agreements');\n        $(\"#titleModalLabel\").text('ACUERDOS');\n\n        $(\".modal-body #event_id\").val(eventId);\n        $(\".modal-body #event_agreements\").val(eventAgreements);\n    });\n\n    function fillEventForm(eventId, eventTitle, eventDesc, eventDatetime, eventType, eventLocation, eventUrl, eventUsers){\n        $(\".modal-body #event_id\").val(eventId);\n        $(\".modal-body #event_title\").val(eventTitle);\n        $(\".modal-body #event_description\").val(eventDesc);\n        $(\".modal-body #event_date_time\").val(eventDatetime);\n        $(\".modal-body #event_type_select\").val(eventType);\n        $(\".modal-body #event_location\").val(eventLocation);\n        $(\".modal-body #event_url\").val(eventUrl);\n        $(\"#eventUsers\").val(eventUsers);\n\n        $('#event_type_select').trigger('change');\n        $('#eventUsers').trigger('change');\n    }\n\n    window.displayFieldByType = function(id_p, id_v, elementValue) {\n        if(elementValue.value === 'PRESENCIAL'){\n            document.getElementById(id_p).style.display = 'block';\n            document.getElementById(id_v).style.display = 'none';\n        }else if(elementValue.value === 'VIRTUAL'){\n            document.getElementById(id_v).style.display = 'block';\n            document.getElementById(id_p).style.display = 'none';\n        }else{\n            document.getElementById(id_v).style.display = 'none';\n            document.getElementById(id_p).style.display = 'none';\n        }\n    };\n\n    window.deleteEvent = function(event) {\n        let authenticityToken = $('[name=\"csrf-token\"]')[0] && $('[name=\"csrf-token\"]')[0].content;\n        swal({\n            title: '¿Desea eliminar este evento?',\n            buttons: {\n                cancel: I18n.t('messages.cancel'),\n                confirm: I18n.t('messages.delete')\n            }\n        }).then((isConfirmed) => {\n            if (isConfirmed) {\n                $.ajax({\n                    url: 'delete_event/'+event.value,\n                    data: {authenticity_token: authenticityToken},\n                    type: 'DELETE',\n                    dataType: 'json',\n                    success: function (data) {\n                        swal({\n                            title: I18n.t('messages.done'),\n                            text: I18n.t('messages.deleted'),\n                            type: 'success'\n                        });\n                        window.location.href = 'events';\n\n                    },\n                    error: function (error) {\n                        let message = I18n.t('messages.try_again');\n                        if (error.responseJSON && error.responseJSON.message) {\n                            message = error.responseJSON.message;\n                        }\n                        swal(I18n.t('messages.error'), message, 'error');\n                    }\n                });\n            }\n        });\n    }\n\n    window.finishEvent = function(event) {\n        let authenticityToken = $('[name=\"csrf-token\"]')[0] && $('[name=\"csrf-token\"]')[0].content;\n        swal({\n            title: '¿Desea FINALIZAR este evento?',\n            buttons: {\n                cancel: I18n.t('messages.cancel'),\n                confirm: I18n.t('messages.confirm')\n            }\n        }).then((isConfirmed) => {\n            if (isConfirmed) {\n                $.ajax({\n                    url: 'finish_event/'+event.value,\n                    data: {authenticity_token: authenticityToken},\n                    type: 'PUT',\n                    dataType: 'json',\n                    success: function (data) {\n                        swal({\n                            title: I18n.t('messages.done'),\n                            text: I18n.t('messages.deleted'),\n                            type: 'success'\n                        });\n                        window.location.href = 'events';\n                    },\n                    error: function (error) {\n                        let message = I18n.t('messages.try_again');\n                        if (error.responseJSON && error.responseJSON.message) {\n                            message = error.responseJSON.message;\n                        }\n                        swal(I18n.t('messages.error'), message, 'error');\n                    }\n                });\n            }\n        });\n    }\n});"]},"metadata":{},"sourceType":"module"}