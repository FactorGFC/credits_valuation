{"ast":null,"code":"var _jsxFileName = \"/Users/alejandrorodriguez/Documents/Develop/credits_valuation/app/javascript/components/role_permissions.jsx\";\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport $ from 'jquery';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { toastr } from 'packs/notifications';\nimport I18n from 'i18n-js';\nI18n.locale = window.I18n.locale;\n\nvar RolePermissions = /*#__PURE__*/function (_React$Component) {\n  _inherits(RolePermissions, _React$Component);\n\n  var _super = _createSuper(RolePermissions);\n\n  function RolePermissions(props) {\n    _classCallCheck(this, RolePermissions);\n\n    return _super.call(this, props);\n  }\n\n  _createClass(RolePermissions, [{\n    key: \"render\",\n    value: function render() {\n      var _this = this;\n\n      return this.props.controllers.map(function (controller) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: \"row mb-5\",\n          key: controller,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 16,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(\"h5\", {\n          className: \"col-12 mb-3\",\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 17,\n            columnNumber: 21\n          }\n        }, controller), _this.props.permissions[controller].map(function (permission) {\n          return /*#__PURE__*/React.createElement(Permission, {\n            permission: permission,\n            rolePermissionIds: _this.props.rolePermissionIds,\n            roleId: _this.props.roleId,\n            key: permission.id,\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 22,\n              columnNumber: 29\n            }\n          });\n        }));\n      });\n    }\n  }]);\n\n  return RolePermissions;\n}(React.Component);\n\nvar Permission = /*#__PURE__*/function (_React$Component2) {\n  _inherits(Permission, _React$Component2);\n\n  var _super2 = _createSuper(Permission);\n\n  function Permission(props) {\n    var _this2;\n\n    _classCallCheck(this, Permission);\n\n    _this2 = _super2.call(this, props);\n    _this2.state = {\n      checked: _this2.props.rolePermissionIds.includes(_this2.props.permission.id),\n      loading: false\n    };\n    _this2.handleInputChange = _this2.handleInputChange.bind(_assertThisInitialized(_this2));\n    return _this2;\n  }\n\n  _createClass(Permission, [{\n    key: \"handleInputChange\",\n    value: function handleInputChange() {\n      this.setState({\n        loading: true\n      });\n      var authenticityToken = $('[name=\"csrf-token\"]')[0] && $('[name=\"csrf-token\"]')[0].content;\n      $.ajax({\n        url: '/roles/' + this.props.roleId + '/permission/' + this.props.permission.id,\n        data: {\n          authenticity_token: authenticityToken\n        },\n        type: 'PUT',\n        success: function (data) {\n          this.setState({\n            checked: data.status === 'assigned',\n            loading: false\n          });\n        }.bind(this),\n        error: function (err) {\n          this.setState({\n            loading: false\n          });\n          toastr.warning(I18n.t('messages.try_again'));\n        }.bind(this)\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-xs-12 col-sm-6 col-md-4 col-lg-3 role-permission-control\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"control\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"m-switch m-switch--outline m-switch--success\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        className: \"mb-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"checkbox\",\n        checked: this.state.checked,\n        onChange: this.handleInputChange,\n        name: \"\",\n        className: \"switch-input\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 29\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 29\n        }\n      })))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 17\n        }\n      }, this.props.permission.description));\n    }\n  }]);\n\n  return Permission;\n}(React.Component);\n\n$(document).on('turbolinks:load', function () {\n  var role_permissions = document.getElementById('role_permissions');\n\n  if (role_permissions !== null) {\n    var roleId = role_permissions.dataset.roleId;\n    var permissions = JSON.parse(role_permissions.dataset.permissions);\n    var controllers = Object.keys(permissions);\n    var rolePermissionIds = JSON.parse(role_permissions.dataset.rolePermissionIds);\n    ReactDOM.render( /*#__PURE__*/React.createElement(RolePermissions, {\n      roleId: roleId,\n      controllers: controllers,\n      permissions: permissions,\n      rolePermissionIds: rolePermissionIds,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 25\n      }\n    }), role_permissions);\n  }\n});","map":{"version":3,"sources":["/Users/alejandrorodriguez/Documents/Develop/credits_valuation/app/javascript/components/role_permissions.jsx"],"names":["$","React","ReactDOM","toastr","I18n","locale","window","RolePermissions","props","controllers","map","controller","permissions","permission","rolePermissionIds","roleId","id","Component","Permission","state","checked","includes","loading","handleInputChange","bind","setState","authenticityToken","content","ajax","url","data","authenticity_token","type","success","status","error","err","warning","t","description","document","on","role_permissions","getElementById","dataset","JSON","parse","Object","keys","render"],"mappings":"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","sourcesContent":["import $ from 'jquery';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { toastr } from 'packs/notifications';\nimport I18n from 'i18n-js';\nI18n.locale = window.I18n.locale;\n\nclass RolePermissions extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        return this.props.controllers.map((controller) => {\n            return (\n                <div className=\"row mb-5\" key={controller}>\n                    <h5 className=\"col-12 mb-3\">\n                        {controller}\n                    </h5>\n                    {this.props.permissions[controller].map((permission) => {\n                        return (\n                            <Permission permission={permission} rolePermissionIds={this.props.rolePermissionIds}\n                                        roleId={this.props.roleId} key={permission.id}/>\n                        )\n                    })}\n                </div>\n            )\n        })\n    }\n}\n\nclass Permission extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            checked: this.props.rolePermissionIds.includes(this.props.permission.id),\n            loading: false\n        };\n\n        this.handleInputChange = this.handleInputChange.bind(this);\n    }\n\n    handleInputChange() {\n        this.setState({loading: true});\n        let authenticityToken = $('[name=\"csrf-token\"]')[0] && $('[name=\"csrf-token\"]')[0].content;\n        $.ajax({\n            url: '/roles/' + this.props.roleId + '/permission/' + this.props.permission.id,\n            data: { authenticity_token: authenticityToken},\n            type: 'PUT',\n            success: function(data) {\n                this.setState({checked: (data.status === 'assigned'), loading: false});\n            }.bind(this),\n            error: function(err) {\n                this.setState({loading: false});\n                toastr.warning(I18n.t('messages.try_again'));\n            }.bind(this)\n        });\n    }\n\n    render() {\n        return (\n            <div className=\"col-xs-12 col-sm-6 col-md-4 col-lg-3 role-permission-control\">\n                <div className=\"control\">\n                    <span className=\"m-switch m-switch--outline m-switch--success\">\n                        <label className=\"mb-0\">\n                            <input type=\"checkbox\" checked={this.state.checked} onChange={this.handleInputChange} name=\"\" className='switch-input'/>\n                            <span></span>\n                        </label>\n                    </span>\n                </div>\n                <div className=\"title\">{this.props.permission.description}</div>\n            </div>\n        )\n    }\n}\n\n$(document).on('turbolinks:load', function() {\n    let role_permissions = document.getElementById('role_permissions');\n\n    if (role_permissions !== null) {\n        let roleId = role_permissions.dataset.roleId;\n        let permissions = JSON.parse(role_permissions.dataset.permissions);\n        let controllers = Object.keys(permissions);\n        let rolePermissionIds = JSON.parse(role_permissions.dataset.rolePermissionIds);\n        ReactDOM.render(<RolePermissions roleId={roleId} controllers={controllers} permissions={permissions}\n                                         rolePermissionIds={rolePermissionIds}/>, role_permissions)\n    }\n});\n"]},"metadata":{},"sourceType":"module"}