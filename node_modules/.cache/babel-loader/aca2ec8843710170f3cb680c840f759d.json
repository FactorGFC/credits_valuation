{"ast":null,"code":"import { Calendar } from \"@fullcalendar/core\";\nimport dayGridPlugin from \"@fullcalendar/daygrid\";\nimport esLocale from '@fullcalendar/core/locales/es';\nimport swal from \"sweetalert\";\nimport I18n from \"i18n-js\";\ndocument.addEventListener('turbolinks:load', function () {\n  var calendarEl = document.getElementById('calendar');\n  var calendar = new Calendar(calendarEl, {\n    plugins: [dayGridPlugin],\n    initialView: 'dayGridMonth',\n    initialDate: Date.now(),\n    editable: true,\n    droppable: false,\n    locale: esLocale,\n    eventSources: '/get_events',\n    eventClick: function eventClick(info) {\n      var authenticityToken = $('[name=\"csrf-token\"]')[0] && $('[name=\"csrf-token\"]')[0].content;\n      $.ajax({\n        url: 'get_event_info/' + info.event.id,\n        data: {\n          authenticity_token: authenticityToken\n        },\n        type: 'GET',\n        dataType: 'json',\n        success: function success(data) {\n          var event = data;\n          $(\"#titleModalLabel\").text('EDITAR EVENTO');\n          fillEventForm(event.id, event.title, event.description, event.start, event.event_type, event.location, event.url, event.user_ids);\n        },\n        error: function error(_error) {\n          var message = I18n.t('messages.try_again');\n\n          if (_error.responseJSON && _error.responseJSON.message) {\n            message = _error.responseJSON.message;\n          }\n\n          swal(I18n.t('messages.error'), message, 'error');\n        }\n      });\n      info.el.style.borderColor = 'red';\n      $('#m_modal_event').modal();\n    }\n  });\n  calendar.render();\n  $(document).on(\"click\", \".open-modal-event\", function () {\n    var eventId = $(this).data('id');\n    var eventTitle = $(this).data('title');\n    var eventDesc = $(this).data('desc');\n    var eventDatetime = $(this).data('datetime');\n    var eventType = $(this).data('type');\n    var eventLocation = $(this).data('location');\n    var eventUrl = $(this).data('url');\n    var eventUsers = $(this).data('users');\n\n    if (eventId) {\n      $(\"#titleModalLabel\").text('EDITAR EVENTO');\n      document.getElementById('btn-event-delete').style.display = 'block';\n    } else {\n      $(\"#titleModalLabel\").text('NUEVO EVENTO');\n      document.getElementById('btn-event-delete').style.display = 'none';\n    }\n\n    fillEventForm(eventId, eventTitle, eventDesc, eventDatetime, eventType, eventLocation, eventUrl, eventUsers);\n    console.log(eventId);\n  });\n\n  function fillEventForm(eventId, eventTitle, eventDesc, eventDatetime, eventType, eventLocation, eventUrl, eventUsers) {\n    $(\".modal-body #event_id\").val(eventId);\n    $(\".modal-body #event_title\").val(eventTitle);\n    $(\".modal-body #event_description\").val(eventDesc);\n    $(\".modal-body #event_date_time\").val(eventDatetime);\n    $(\".modal-body #event_type_select\").val(eventType);\n    $(\".modal-body #event_location\").val(eventLocation);\n    $(\".modal-body #event_url\").val(eventUrl);\n    $(\"#eventUsers\").val(eventUsers);\n    $('#event_type_select').trigger('change');\n    $('#eventUsers').trigger('change');\n  }\n\n  window.displayFieldByType = function (id_p, id_v, elementValue) {\n    if (elementValue.value === 'PRESENCIAL') {\n      document.getElementById(id_p).style.display = 'block';\n      document.getElementById(id_v).style.display = 'none';\n    } else if (elementValue.value === 'VIRTUAL') {\n      document.getElementById(id_v).style.display = 'block';\n      document.getElementById(id_p).style.display = 'none';\n    } else {\n      document.getElementById(id_v).style.display = 'none';\n      document.getElementById(id_p).style.display = 'none';\n    }\n  };\n\n  window.deleteEvent = function (event) {\n    var authenticityToken = $('[name=\"csrf-token\"]')[0] && $('[name=\"csrf-token\"]')[0].content;\n    swal({\n      title: '¿Desea eliminar este evento?',\n      buttons: {\n        cancel: I18n.t('messages.cancel'),\n        confirm: I18n.t('messages.delete')\n      }\n    }).then(function (isConfirmed) {\n      if (isConfirmed) {\n        $.ajax({\n          url: 'delete_event/' + event.value,\n          data: {\n            authenticity_token: authenticityToken\n          },\n          type: 'DELETE',\n          dataType: 'json',\n          success: function success(data) {\n            swal({\n              title: I18n.t('messages.done'),\n              text: I18n.t('messages.deleted'),\n              type: 'success'\n            });\n            window.location.href = 'events';\n          },\n          error: function error(_error2) {\n            var message = I18n.t('messages.try_again');\n\n            if (_error2.responseJSON && _error2.responseJSON.message) {\n              message = _error2.responseJSON.message;\n            }\n\n            swal(I18n.t('messages.error'), message, 'error');\n          }\n        });\n      }\n    });\n  };\n});","map":{"version":3,"sources":["/Users/alejandrorodriguez/Documents/Develop/credits_valuation/app/javascript/packs/fullcalendar/fullcalendar.js"],"names":["Calendar","dayGridPlugin","esLocale","swal","I18n","document","addEventListener","calendarEl","getElementById","calendar","plugins","initialView","initialDate","Date","now","editable","droppable","locale","eventSources","eventClick","info","authenticityToken","$","content","ajax","url","event","id","data","authenticity_token","type","dataType","success","text","fillEventForm","title","description","start","event_type","location","user_ids","error","message","t","responseJSON","el","style","borderColor","modal","render","on","eventId","eventTitle","eventDesc","eventDatetime","eventType","eventLocation","eventUrl","eventUsers","display","console","log","val","trigger","window","displayFieldByType","id_p","id_v","elementValue","value","deleteEvent","buttons","cancel","confirm","then","isConfirmed","href"],"mappings":"AAAA,SAASA,QAAT,QAAyB,oBAAzB;AACA,OAAOC,aAAP,MAA0B,uBAA1B;AACA,OAAOC,QAAP,MAA0B,+BAA1B;AACA,OAAOC,IAAP,MAAiB,YAAjB;AACA,OAAOC,IAAP,MAAiB,SAAjB;AAGAC,QAAQ,CAACC,gBAAT,CAA0B,iBAA1B,EAA6C,YAAW;AAEpD,MAAIC,UAAU,GAAIF,QAAQ,CAACG,cAAT,CAAwB,UAAxB,CAAlB;AAEA,MAAIC,QAAQ,GAAG,IAAIT,QAAJ,CAAaO,UAAb,EAAyB;AACpCG,IAAAA,OAAO,EAAE,CAAET,aAAF,CAD2B;AAEpCU,IAAAA,WAAW,EAAE,cAFuB;AAGpCC,IAAAA,WAAW,EAAEC,IAAI,CAACC,GAAL,EAHuB;AAIpCC,IAAAA,QAAQ,EAAE,IAJ0B;AAKpCC,IAAAA,SAAS,EAAE,KALyB;AAMpCC,IAAAA,MAAM,EAAEf,QAN4B;AAOpCgB,IAAAA,YAAY,EAAE,aAPsB;AAQpCC,IAAAA,UAAU,EAAE,oBAASC,IAAT,EAAe;AAEvB,UAAIC,iBAAiB,GAAGC,CAAC,CAAC,qBAAD,CAAD,CAAyB,CAAzB,KAA+BA,CAAC,CAAC,qBAAD,CAAD,CAAyB,CAAzB,EAA4BC,OAAnF;AAEAD,MAAAA,CAAC,CAACE,IAAF,CAAO;AACHC,QAAAA,GAAG,EAAE,oBAAkBL,IAAI,CAACM,KAAL,CAAWC,EAD/B;AAEHC,QAAAA,IAAI,EAAE;AAACC,UAAAA,kBAAkB,EAAER;AAArB,SAFH;AAGHS,QAAAA,IAAI,EAAE,KAHH;AAIHC,QAAAA,QAAQ,EAAE,MAJP;AAKHC,QAAAA,OAAO,EAAE,iBAAUJ,IAAV,EAAgB;AACrB,cAAIF,KAAK,GAAGE,IAAZ;AACAN,UAAAA,CAAC,CAAC,kBAAD,CAAD,CAAsBW,IAAtB,CAA2B,eAA3B;AACAC,UAAAA,aAAa,CAACR,KAAK,CAACC,EAAP,EAAWD,KAAK,CAACS,KAAjB,EAAwBT,KAAK,CAACU,WAA9B,EAA2CV,KAAK,CAACW,KAAjD,EAAwDX,KAAK,CAACY,UAA9D,EAA0EZ,KAAK,CAACa,QAAhF,EAA0Fb,KAAK,CAACD,GAAhG,EAAqGC,KAAK,CAACc,QAA3G,CAAb;AACH,SATE;AAUHC,QAAAA,KAAK,EAAE,eAAUA,MAAV,EAAiB;AACpB,cAAIC,OAAO,GAAGtC,IAAI,CAACuC,CAAL,CAAO,oBAAP,CAAd;;AACA,cAAIF,MAAK,CAACG,YAAN,IAAsBH,MAAK,CAACG,YAAN,CAAmBF,OAA7C,EAAsD;AAClDA,YAAAA,OAAO,GAAGD,MAAK,CAACG,YAAN,CAAmBF,OAA7B;AACH;;AACDvC,UAAAA,IAAI,CAACC,IAAI,CAACuC,CAAL,CAAO,gBAAP,CAAD,EAA2BD,OAA3B,EAAoC,OAApC,CAAJ;AACH;AAhBE,OAAP;AAkBAtB,MAAAA,IAAI,CAACyB,EAAL,CAAQC,KAAR,CAAcC,WAAd,GAA4B,KAA5B;AAEAzB,MAAAA,CAAC,CAAC,gBAAD,CAAD,CAAoB0B,KAApB;AACH;AAjCmC,GAAzB,CAAf;AAoCAvC,EAAAA,QAAQ,CAACwC,MAAT;AAEA3B,EAAAA,CAAC,CAACjB,QAAD,CAAD,CAAY6C,EAAZ,CAAe,OAAf,EAAwB,mBAAxB,EAA6C,YAAY;AACrD,QAAIC,OAAO,GAAc7B,CAAC,CAAC,IAAD,CAAD,CAAQM,IAAR,CAAa,IAAb,CAAzB;AACA,QAAIwB,UAAU,GAAW9B,CAAC,CAAC,IAAD,CAAD,CAAQM,IAAR,CAAa,OAAb,CAAzB;AACA,QAAIyB,SAAS,GAAY/B,CAAC,CAAC,IAAD,CAAD,CAAQM,IAAR,CAAa,MAAb,CAAzB;AACA,QAAI0B,aAAa,GAAQhC,CAAC,CAAC,IAAD,CAAD,CAAQM,IAAR,CAAa,UAAb,CAAzB;AACA,QAAI2B,SAAS,GAAYjC,CAAC,CAAC,IAAD,CAAD,CAAQM,IAAR,CAAa,MAAb,CAAzB;AACA,QAAI4B,aAAa,GAAQlC,CAAC,CAAC,IAAD,CAAD,CAAQM,IAAR,CAAa,UAAb,CAAzB;AACA,QAAI6B,QAAQ,GAAanC,CAAC,CAAC,IAAD,CAAD,CAAQM,IAAR,CAAa,KAAb,CAAzB;AACA,QAAI8B,UAAU,GAAWpC,CAAC,CAAC,IAAD,CAAD,CAAQM,IAAR,CAAa,OAAb,CAAzB;;AACA,QAAGuB,OAAH,EAAW;AACP7B,MAAAA,CAAC,CAAC,kBAAD,CAAD,CAAsBW,IAAtB,CAA2B,eAA3B;AACA5B,MAAAA,QAAQ,CAACG,cAAT,CAAwB,kBAAxB,EAA4CsC,KAA5C,CAAkDa,OAAlD,GAA4D,OAA5D;AACH,KAHD,MAGK;AACDrC,MAAAA,CAAC,CAAC,kBAAD,CAAD,CAAsBW,IAAtB,CAA2B,cAA3B;AACA5B,MAAAA,QAAQ,CAACG,cAAT,CAAwB,kBAAxB,EAA4CsC,KAA5C,CAAkDa,OAAlD,GAA4D,MAA5D;AACH;;AAEDzB,IAAAA,aAAa,CAACiB,OAAD,EAAUC,UAAV,EAAsBC,SAAtB,EAAiCC,aAAjC,EAAgDC,SAAhD,EAA2DC,aAA3D,EAA0EC,QAA1E,EAAoFC,UAApF,CAAb;AACAE,IAAAA,OAAO,CAACC,GAAR,CAAYV,OAAZ;AAEH,GApBD;;AAsBA,WAASjB,aAAT,CAAuBiB,OAAvB,EAAgCC,UAAhC,EAA4CC,SAA5C,EAAuDC,aAAvD,EAAsEC,SAAtE,EAAiFC,aAAjF,EAAgGC,QAAhG,EAA0GC,UAA1G,EAAqH;AACjHpC,IAAAA,CAAC,CAAC,uBAAD,CAAD,CAA2BwC,GAA3B,CAA+BX,OAA/B;AACA7B,IAAAA,CAAC,CAAC,0BAAD,CAAD,CAA8BwC,GAA9B,CAAkCV,UAAlC;AACA9B,IAAAA,CAAC,CAAC,gCAAD,CAAD,CAAoCwC,GAApC,CAAwCT,SAAxC;AACA/B,IAAAA,CAAC,CAAC,8BAAD,CAAD,CAAkCwC,GAAlC,CAAsCR,aAAtC;AACAhC,IAAAA,CAAC,CAAC,gCAAD,CAAD,CAAoCwC,GAApC,CAAwCP,SAAxC;AACAjC,IAAAA,CAAC,CAAC,6BAAD,CAAD,CAAiCwC,GAAjC,CAAqCN,aAArC;AACAlC,IAAAA,CAAC,CAAC,wBAAD,CAAD,CAA4BwC,GAA5B,CAAgCL,QAAhC;AACAnC,IAAAA,CAAC,CAAC,aAAD,CAAD,CAAiBwC,GAAjB,CAAqBJ,UAArB;AAEApC,IAAAA,CAAC,CAAC,oBAAD,CAAD,CAAwByC,OAAxB,CAAgC,QAAhC;AACAzC,IAAAA,CAAC,CAAC,aAAD,CAAD,CAAiByC,OAAjB,CAAyB,QAAzB;AACH;;AAEDC,EAAAA,MAAM,CAACC,kBAAP,GAA4B,UAASC,IAAT,EAAeC,IAAf,EAAqBC,YAArB,EAAmC;AAC3D,QAAGA,YAAY,CAACC,KAAb,KAAuB,YAA1B,EAAuC;AACnChE,MAAAA,QAAQ,CAACG,cAAT,CAAwB0D,IAAxB,EAA8BpB,KAA9B,CAAoCa,OAApC,GAA8C,OAA9C;AACAtD,MAAAA,QAAQ,CAACG,cAAT,CAAwB2D,IAAxB,EAA8BrB,KAA9B,CAAoCa,OAApC,GAA8C,MAA9C;AACH,KAHD,MAGM,IAAGS,YAAY,CAACC,KAAb,KAAuB,SAA1B,EAAoC;AACtChE,MAAAA,QAAQ,CAACG,cAAT,CAAwB2D,IAAxB,EAA8BrB,KAA9B,CAAoCa,OAApC,GAA8C,OAA9C;AACAtD,MAAAA,QAAQ,CAACG,cAAT,CAAwB0D,IAAxB,EAA8BpB,KAA9B,CAAoCa,OAApC,GAA8C,MAA9C;AACH,KAHK,MAGD;AACDtD,MAAAA,QAAQ,CAACG,cAAT,CAAwB2D,IAAxB,EAA8BrB,KAA9B,CAAoCa,OAApC,GAA8C,MAA9C;AACAtD,MAAAA,QAAQ,CAACG,cAAT,CAAwB0D,IAAxB,EAA8BpB,KAA9B,CAAoCa,OAApC,GAA8C,MAA9C;AACH;AACJ,GAXD;;AAaAK,EAAAA,MAAM,CAACM,WAAP,GAAqB,UAAS5C,KAAT,EAAgB;AACjC,QAAIL,iBAAiB,GAAGC,CAAC,CAAC,qBAAD,CAAD,CAAyB,CAAzB,KAA+BA,CAAC,CAAC,qBAAD,CAAD,CAAyB,CAAzB,EAA4BC,OAAnF;AACApB,IAAAA,IAAI,CAAC;AACDgC,MAAAA,KAAK,EAAE,8BADN;AAEDoC,MAAAA,OAAO,EAAE;AACLC,QAAAA,MAAM,EAAEpE,IAAI,CAACuC,CAAL,CAAO,iBAAP,CADH;AAEL8B,QAAAA,OAAO,EAAErE,IAAI,CAACuC,CAAL,CAAO,iBAAP;AAFJ;AAFR,KAAD,CAAJ,CAMG+B,IANH,CAMQ,UAACC,WAAD,EAAiB;AACrB,UAAIA,WAAJ,EAAiB;AACbrD,QAAAA,CAAC,CAACE,IAAF,CAAO;AACHC,UAAAA,GAAG,EAAE,kBAAgBC,KAAK,CAAC2C,KADxB;AAEHzC,UAAAA,IAAI,EAAE;AAACC,YAAAA,kBAAkB,EAAER;AAArB,WAFH;AAGHS,UAAAA,IAAI,EAAE,QAHH;AAIHC,UAAAA,QAAQ,EAAE,MAJP;AAKHC,UAAAA,OAAO,EAAE,iBAAUJ,IAAV,EAAgB;AACrBzB,YAAAA,IAAI,CAAC;AACDgC,cAAAA,KAAK,EAAE/B,IAAI,CAACuC,CAAL,CAAO,eAAP,CADN;AAEDV,cAAAA,IAAI,EAAE7B,IAAI,CAACuC,CAAL,CAAO,kBAAP,CAFL;AAGDb,cAAAA,IAAI,EAAE;AAHL,aAAD,CAAJ;AAKAkC,YAAAA,MAAM,CAACzB,QAAP,CAAgBqC,IAAhB,GAAuB,QAAvB;AAEH,WAbE;AAcHnC,UAAAA,KAAK,EAAE,eAAUA,OAAV,EAAiB;AACpB,gBAAIC,OAAO,GAAGtC,IAAI,CAACuC,CAAL,CAAO,oBAAP,CAAd;;AACA,gBAAIF,OAAK,CAACG,YAAN,IAAsBH,OAAK,CAACG,YAAN,CAAmBF,OAA7C,EAAsD;AAClDA,cAAAA,OAAO,GAAGD,OAAK,CAACG,YAAN,CAAmBF,OAA7B;AACH;;AACDvC,YAAAA,IAAI,CAACC,IAAI,CAACuC,CAAL,CAAO,gBAAP,CAAD,EAA2BD,OAA3B,EAAoC,OAApC,CAAJ;AACH;AApBE,SAAP;AAsBH;AACJ,KA/BD;AAgCH,GAlCD;AAmCH,CA9HD","sourcesContent":["import { Calendar } from \"@fullcalendar/core\";\nimport dayGridPlugin from \"@fullcalendar/daygrid\";\nimport esLocale      from '@fullcalendar/core/locales/es';\nimport swal from \"sweetalert\";\nimport I18n from \"i18n-js\";\n\n\ndocument.addEventListener('turbolinks:load', function() {\n\n    var calendarEl  = document.getElementById('calendar');\n\n    var calendar = new Calendar(calendarEl, {\n        plugins: [ dayGridPlugin ],\n        initialView: 'dayGridMonth',\n        initialDate: Date.now(),\n        editable: true,\n        droppable: false,\n        locale: esLocale,\n        eventSources: '/get_events',\n        eventClick: function(info) {\n\n            let authenticityToken = $('[name=\"csrf-token\"]')[0] && $('[name=\"csrf-token\"]')[0].content;\n\n            $.ajax({\n                url: 'get_event_info/'+info.event.id,\n                data: {authenticity_token: authenticityToken},\n                type: 'GET',\n                dataType: 'json',\n                success: function (data) {\n                    let event = data;\n                    $(\"#titleModalLabel\").text('EDITAR EVENTO');\n                    fillEventForm(event.id, event.title, event.description, event.start, event.event_type, event.location, event.url, event.user_ids)\n                },\n                error: function (error) {\n                    let message = I18n.t('messages.try_again');\n                    if (error.responseJSON && error.responseJSON.message) {\n                        message = error.responseJSON.message;\n                    }\n                    swal(I18n.t('messages.error'), message, 'error');\n                }\n            });\n            info.el.style.borderColor = 'red';\n\n            $('#m_modal_event').modal();\n        }\n    });\n\n    calendar.render();\n\n    $(document).on(\"click\", \".open-modal-event\", function () {\n        var eventId            = $(this).data('id');\n        var eventTitle         = $(this).data('title');\n        var eventDesc          = $(this).data('desc');\n        var eventDatetime      = $(this).data('datetime');\n        var eventType          = $(this).data('type');\n        var eventLocation      = $(this).data('location');\n        var eventUrl           = $(this).data('url');\n        var eventUsers         = $(this).data('users');\n        if(eventId){\n            $(\"#titleModalLabel\").text('EDITAR EVENTO');\n            document.getElementById('btn-event-delete').style.display = 'block';\n        }else{\n            $(\"#titleModalLabel\").text('NUEVO EVENTO');\n            document.getElementById('btn-event-delete').style.display = 'none';\n        }\n\n        fillEventForm(eventId, eventTitle, eventDesc, eventDatetime, eventType, eventLocation, eventUrl, eventUsers);\n        console.log(eventId);\n\n    });\n\n    function fillEventForm(eventId, eventTitle, eventDesc, eventDatetime, eventType, eventLocation, eventUrl, eventUsers){\n        $(\".modal-body #event_id\").val(eventId);\n        $(\".modal-body #event_title\").val(eventTitle);\n        $(\".modal-body #event_description\").val(eventDesc);\n        $(\".modal-body #event_date_time\").val(eventDatetime);\n        $(\".modal-body #event_type_select\").val(eventType);\n        $(\".modal-body #event_location\").val(eventLocation);\n        $(\".modal-body #event_url\").val(eventUrl);\n        $(\"#eventUsers\").val(eventUsers);\n\n        $('#event_type_select').trigger('change');\n        $('#eventUsers').trigger('change');\n    }\n\n    window.displayFieldByType = function(id_p, id_v, elementValue) {\n        if(elementValue.value === 'PRESENCIAL'){\n            document.getElementById(id_p).style.display = 'block';\n            document.getElementById(id_v).style.display = 'none';\n        }else if(elementValue.value === 'VIRTUAL'){\n            document.getElementById(id_v).style.display = 'block';\n            document.getElementById(id_p).style.display = 'none';\n        }else{\n            document.getElementById(id_v).style.display = 'none';\n            document.getElementById(id_p).style.display = 'none';\n        }\n    };\n\n    window.deleteEvent = function(event) {\n        let authenticityToken = $('[name=\"csrf-token\"]')[0] && $('[name=\"csrf-token\"]')[0].content;\n        swal({\n            title: '¿Desea eliminar este evento?',\n            buttons: {\n                cancel: I18n.t('messages.cancel'),\n                confirm: I18n.t('messages.delete')\n            }\n        }).then((isConfirmed) => {\n            if (isConfirmed) {\n                $.ajax({\n                    url: 'delete_event/'+event.value,\n                    data: {authenticity_token: authenticityToken},\n                    type: 'DELETE',\n                    dataType: 'json',\n                    success: function (data) {\n                        swal({\n                            title: I18n.t('messages.done'),\n                            text: I18n.t('messages.deleted'),\n                            type: 'success'\n                        });\n                        window.location.href = 'events';\n\n                    },\n                    error: function (error) {\n                        let message = I18n.t('messages.try_again');\n                        if (error.responseJSON && error.responseJSON.message) {\n                            message = error.responseJSON.message;\n                        }\n                        swal(I18n.t('messages.error'), message, 'error');\n                    }\n                });\n            }\n        });\n    }\n});"]},"metadata":{},"sourceType":"module"}