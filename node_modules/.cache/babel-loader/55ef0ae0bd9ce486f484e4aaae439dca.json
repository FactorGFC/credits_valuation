{"ast":null,"code":"var _jsxFileName = \"/Users/alejandrorodriguez/Documents/Develop/credits_valuation/app/javascript/components/logbook_index.jsx\";\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport $ from 'jquery';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nvar Logbooks = /*#__PURE__*/function (_React$Component) {\n  _inherits(Logbooks, _React$Component);\n\n  var _super = _createSuper(Logbooks);\n\n  function Logbooks(props) {\n    var _this;\n\n    _classCallCheck(this, Logbooks);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      isLoading: false,\n      logbooks: _this.props.logbooks,\n      page: 2\n    }; // Binds our scroll event handler\n\n    window.onscroll = function () {\n      var _assertThisInitialize = _assertThisInitialized(_this),\n          loadLogbooks = _assertThisInitialize.loadLogbooks,\n          _assertThisInitialize2 = _assertThisInitialize.state,\n          isLoading = _assertThisInitialize2.isLoading,\n          logbooks = _assertThisInitialize2.logbooks,\n          page = _assertThisInitialize2.page;\n\n      if (isLoading) return; // Checks that the page has scrolled to the bottom\n\n      if (window.innerHeight + document.documentElement.scrollTop + 600 >= document.documentElement.scrollHeight) {\n        loadLogbooks();\n      }\n    };\n\n    _this.loadLogbooks = _this.loadLogbooks.bind(_assertThisInitialized(_this));\n    _this.renderLogbooks = _this.renderLogbooks.bind(_assertThisInitialized(_this));\n    _this.loading = _this.loading.bind(_assertThisInitialized(_this));\n    _this.logbookWithDate = _this.logbookWithDate.bind(_assertThisInitialized(_this));\n    _this.logbookWithoutDate = _this.logbookWithoutDate.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Logbooks, [{\n    key: \"loading\",\n    value: function loading() {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"d-flex justify-content-around mt-5\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"m-spinner m-spinner--brand m-spinner--sm m-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"m-spinner m-spinner--brand m-spinner--sm m-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"m-spinner m-spinner--brand m-spinner--sm m-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 21\n        }\n      })));\n    }\n  }, {\n    key: \"loadLogbooks\",\n    value: function loadLogbooks() {\n      var _this2 = this;\n\n      if (this.props.lastPage >= this.state.page) {\n        this.setState({\n          isLoading: true\n        }, function () {\n          $.ajax({\n            url: '/logbooks/',\n            data: {\n              page: _this2.state.page\n            },\n            success: function (data) {\n              this.setState({\n                isLoading: false,\n                logbooks: [].concat(_toConsumableArray(this.state.logbooks), _toConsumableArray(JSON.parse(data.logbooks))),\n                page: this.state.page + 1\n              });\n            }.bind(_this2),\n            error: function (err) {\n              this.setState({\n                isLoading: true\n              });\n            }.bind(_this2)\n          });\n        });\n      }\n    }\n  }, {\n    key: \"logbookWithDate\",\n    value: function logbookWithDate(logbook, i) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"m-timeline-2__item\",\n        key: 'logbook_date_' + i,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"custom-date\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 17\n        }\n      }, logbook.logbook_date_created[1])));\n    }\n  }, {\n    key: \"logbookWithoutDate\",\n    value: function logbookWithoutDate(logbook, i) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"m-timeline-2__item m--margin-top-30\",\n        key: 'logbook_' + i,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"m-timeline-2__item-time\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 13\n        }\n      }, logbook.logbook_date_created[0]), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"m-timeline-2__item-cricle\",\n        dangerouslySetInnerHTML: {\n          __html: logbook.logbook_icon\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 15\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"m-timeline-2__item-text  m--padding-top-5\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"m-accordion m-accordion--bordered accordion-width\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"m-accordion__item\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"m-accordion__item-head collapsed\",\n        role: \"tab\",\n        id: \"m_accordion_\".concat(logbook.id, \"_item_1_head\"),\n        \"data-toggle\": \"collapse\",\n        href: \"#m_accordion_\".concat(logbook.id, \"_item_1_body\"),\n        \"aria-expanded\": \"false\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"m-accordion__item-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"h5\", {\n        className: \"mb-0\",\n        dangerouslySetInnerHTML: {\n          __html: logbook.logbook_title\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 27\n        }\n      })), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"m-accordion__item-mode\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 25\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"m-accordion__item-body collapse\",\n        id: \"m_accordion_\".concat(logbook.id, \"_item_1_body\"),\n        role: \"tabpanel\",\n        \"aria-labelledby\": \"m_accordion_\".concat(logbook.id, \"_item_1_head\"),\n        \"data-parent\": \"#m_accordion_2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"m-accordion__item-content\",\n        dangerouslySetInnerHTML: {\n          __html: logbook.logbook_table\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 25\n        }\n      }))))));\n    }\n  }, {\n    key: \"renderLogbooks\",\n    value: function renderLogbooks() {\n      var _this3 = this;\n\n      var dateLogbook = this.state.logbooks[0].logbook_date_created[1];\n      return this.state.logbooks.map(function (logbook, i) {\n        if (dateLogbook == logbook.logbook_date_created[1]) {\n          if (i == 0) {\n            return [_this3.logbookWithDate(logbook, i), _this3.logbookWithoutDate(logbook, i)];\n          } else {\n            return _this3.logbookWithoutDate(logbook, i);\n          }\n        } else {\n          dateLogbook = logbook.logbook_date_created[1];\n          return [_this3.logbookWithDate(logbook, i), _this3.logbookWithoutDate(logbook, i)];\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(\"main\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"m-timeline-2 m-timeline-2-custom\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"m-timeline-2__items\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 21\n        }\n      }, this.renderLogbooks())), this.state.isLoading && this.loading());\n    }\n  }]);\n\n  return Logbooks;\n}(React.Component);\n\n$(document).on('turbolinks:load', function () {\n  var logbooksContainer = document.getElementById('logbooks-container');\n\n  if (logbooksContainer !== null) {\n    var logbooks = JSON.parse(logbooksContainer.dataset.logbooks);\n    var lastPage = logbooksContainer.dataset.last_page;\n    ReactDOM.render( /*#__PURE__*/React.createElement(Logbooks, {\n      logbooks: logbooks,\n      lastPage: lastPage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 25\n      }\n    }), logbooksContainer);\n  }\n});","map":{"version":3,"sources":["/Users/alejandrorodriguez/Documents/Develop/credits_valuation/app/javascript/components/logbook_index.jsx"],"names":["$","React","ReactDOM","Logbooks","props","state","isLoading","logbooks","page","window","onscroll","loadLogbooks","innerHeight","document","documentElement","scrollTop","scrollHeight","bind","renderLogbooks","loading","logbookWithDate","logbookWithoutDate","lastPage","setState","ajax","url","data","success","JSON","parse","error","err","logbook","i","logbook_date_created","__html","logbook_icon","id","logbook_title","logbook_table","dateLogbook","map","Component","on","logbooksContainer","getElementById","dataset","last_page","render"],"mappings":"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","sourcesContent":["import $ from 'jquery';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nclass Logbooks extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            isLoading: false,\n            logbooks: this.props.logbooks,\n            page: 2\n        };\n\n        // Binds our scroll event handler\n        window.onscroll = () => {\n            const {\n                loadLogbooks,\n                state: {\n                    isLoading,\n                    logbooks,\n                    page\n                },\n            } = this;\n\n            if (isLoading) return;\n\n            // Checks that the page has scrolled to the bottom\n            if ((window.innerHeight + document.documentElement.scrollTop + 600) >= document.documentElement.scrollHeight) {\n                loadLogbooks();\n            }\n        };\n\n          this.loadLogbooks = this.loadLogbooks.bind(this);\n          this.renderLogbooks = this.renderLogbooks.bind(this);\n          this.loading = this.loading.bind(this);\n          this.logbookWithDate = this.logbookWithDate.bind(this);\n          this.logbookWithoutDate = this.logbookWithoutDate.bind(this);\n      }\n\n      loading() {\n          return (\n              <div className=\"d-flex justify-content-around mt-5\">\n                  <div>\n                    <div className=\"m-spinner m-spinner--brand m-spinner--sm m-2\"></div>\n                    <div className=\"m-spinner m-spinner--brand m-spinner--sm m-2\"></div>\n                    <div className=\"m-spinner m-spinner--brand m-spinner--sm m-2\"></div>\n                  </div>\n              </div>\n          );\n    }\n\n    loadLogbooks(){\n        if (this.props.lastPage >= this.state.page) {\n            this.setState({ isLoading : true }, () => {\n                $.ajax({\n                    url: '/logbooks/',\n                    data: {\n                        page: this.state.page\n                    },\n                    success: function(data) {\n                        this.setState({\n                          isLoading: false,\n                          logbooks: [...this.state.logbooks, ...JSON.parse(data.logbooks)],\n                          page: this.state.page + 1\n                        });\n                    }.bind(this),\n                    error: function(err) {\n                        this.setState({\n                          isLoading: true,\n                         });\n                    }.bind(this)\n                });\n            });\n        }\n    }\n\n    logbookWithDate(logbook, i) {\n      return (\n          <div className='m-timeline-2__item' key={ 'logbook_date_'+i }>\n              <div className='custom-date'>\n                <span>{ logbook.logbook_date_created[1] }</span>\n              </div>\n          </div>\n      );\n    }\n\n    logbookWithoutDate(logbook, i) {\n      return (\n          <div className='m-timeline-2__item m--margin-top-30' key={ 'logbook_'+i }>\n            <span className='m-timeline-2__item-time'>{ logbook.logbook_date_created[0] }</span>\n              <div className='m-timeline-2__item-cricle' dangerouslySetInnerHTML={{ __html: logbook.logbook_icon }}></div>\n              <div className='m-timeline-2__item-text  m--padding-top-5'>\n                <div className='m-accordion m-accordion--bordered accordion-width'>\n                  <div className=\"m-accordion__item\">\n                    <div className=\"m-accordion__item-head collapsed\" role=\"tab\" id={`m_accordion_${logbook.id}_item_1_head`} data-toggle=\"collapse\" href={`#m_accordion_${logbook.id}_item_1_body`} aria-expanded=\"false\">\n                        <span className=\"m-accordion__item-title\">\n                          <h5 className='mb-0' dangerouslySetInnerHTML={{ __html: logbook.logbook_title }}></h5>\n                        </span>\n\n                        <span className=\"m-accordion__item-mode\"></span>\n                    </div>\n                    <div className=\"m-accordion__item-body collapse\" id={`m_accordion_${logbook.id}_item_1_body`} role=\"tabpanel\" aria-labelledby={`m_accordion_${logbook.id}_item_1_head`} data-parent=\"#m_accordion_2\">\n                        <div className=\"m-accordion__item-content\" dangerouslySetInnerHTML={{ __html: logbook.logbook_table }}></div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n          </div>\n      );\n    }\n\n    renderLogbooks() {\n        var dateLogbook =  this.state.logbooks[0].logbook_date_created[1]\n        return (\n            this.state.logbooks.map((logbook, i) =>{\n                if(dateLogbook == logbook.logbook_date_created[1]){\n                  if(i == 0){\n                    return [this.logbookWithDate(logbook, i), this.logbookWithoutDate(logbook, i)];\n                  }else{\n                    return this.logbookWithoutDate(logbook, i);\n                  }\n                }else{\n                  dateLogbook = logbook.logbook_date_created[1];\n                  return [this.logbookWithDate(logbook, i), this.logbookWithoutDate(logbook, i)];\n                }\n            })\n        );\n    }\n\n    render() {\n        return (\n            <main>\n                <div className='m-timeline-2 m-timeline-2-custom'>\n                    <div className='m-timeline-2__items'>\n                      { this.renderLogbooks() }\n                    </div>\n                </div>\n                { this.state.isLoading &&\n                    this.loading()\n                }\n            </main>\n        );\n    }\n}\n\n$(document).on('turbolinks:load', function() {\n    let logbooksContainer = document.getElementById('logbooks-container');\n    if (logbooksContainer !== null){\n        let logbooks = JSON.parse(logbooksContainer.dataset.logbooks);\n        let lastPage = logbooksContainer.dataset.last_page;\n        ReactDOM.render(<Logbooks logbooks={logbooks} lastPage={lastPage} />,\n          logbooksContainer\n        );\n    }\n});\n"]},"metadata":{},"sourceType":"module"}