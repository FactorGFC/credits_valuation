
javascript:


    function calculate_comparative(table_id) {
        //$("table#comparative_table").hide();
        var colMax = 0;
        var all_col = document.getElementsByClassName('col-comp');
        var titles = [];
        var noCols = $("table#" + table_id + " tr.tr-rdata:first").children('td.sum_input').filter(function () {
            return $(this).css('display') !== 'none';
        }).length;


        if (noCols !== 2) {
            for (var i = 0; i < all_col.length; i++) {
                all_col[i].style.display = "none";
            }
            document.getElementById("col-comp_head_" + table_id).style.display = "none";
        } else {
            $("table#" + table_id + " tr.tr-title").children('th.th-title').filter(function () {
                return $(this).css('display') !== 'none';
            }).each(function () {
                titles.push($(this).text().split(" ")[0]);
            });

            //****Evalua si pertenecen al mismo periodo en base a la primera palabra del th***//
            if (titles.every((val, ind, arr) => val === arr[0]))
            {
                if (titles[0].toLowerCase() === 'anual') {
                    $('div.percentage-badge.blue-badge').show();
                } else {
                    $('div.percentage-badge.blue-badge').hide();
                }
                for (var i = 0; i < all_col.length; i++) {
                    all_col[i].style.display = "table-cell";
                }
                document.getElementById("col-comp_head_" + table_id).style.display = "table-cell";
            }
        }

        $("table#" + table_id + " tr.tr-rdata").each(function (index, tb_row) {
            var percent_values_array = [];
            var max_num = 0;
            var min_num = 0;
            var percent_value = 0;

            var columns = $(tb_row).children('td.sum_input').filter(function () {
                return $(this).css('display') !== 'none';
            });
            var rowTotal = 0;

            colMax = columns.length;

            for (var col = 0; col < colMax; col++) {
                if (columns.eq(col).css('display') !== 'none') {
                    var colData = parseFloat(columns.eq(col).find('span.td-value' + index).text().split(',').join(''));
                    var colPercent = columns.eq(col).find('span.percent-value' + index).text().split(" ")[0];

                    percent_values_array.push(colPercent);
                    colData = Math.abs(colData);
                    //CALCULO DE COMPARATIVA, RESTA DE AÑO 1 - 2
                    if (!isNaN(colData)) {
                        if (col === 0) {
                            rowTotal = colData;
                        } else {
                            rowTotal -= colData;
                        }
                    } else {
                        rowTotal = null;
                        break;
                    }

                }
            }
            ;

            // CALCULO DE VARIACIÓN DE PORCENTAJES
            max_num = Math.max(...percent_values_array
        )
            ;
            min_num = Math.min(...percent_values_array
        )
            ;
            percent_value = ((max_num - min_num) / min_num) * 100;

            if (Number.isFinite(percent_value) || percent_value) {
                if (percent_value > 100 || percent_value < 0) {
                    $('span.percent_t' + index).text('+100 %');
                } else {
                    $('span.percent_t' + index).text(percent_value.toFixed(2) + ' %');
                }
            } else {
                $('span.percent_t' + index).text('+100 %');
            }

            if (rowTotal !== null) {

                $('span.total_p' + index).text(rowTotal.toLocaleString());
                $('span.percent_t' + index).show();
                $('span.scale' + index).show();
                $('span.total_p' + index).closest('td').removeClass("bg-lines");
            } else {
                $('span.total_p' + index).text('');
                if (titles.length > 0) {
                    if (titles[0].toLowerCase() != 'anual') {
                        $('span.total_p' + index).closest('td').addClass("bg-lines");
                    }
                }
                $('span.scale' + index).hide();
                $('span.percent_t' + index).hide();
            }
        });

        //======> CALCULO DE PORCENTAJE HORIZONTAL COLUMNA COMPARATIVA ENTRE PORCENTAJES DE DIFERENCIA ENTRE SAT Y CAPTURA
        var rowMax = ($("table#" + table_id + " tr.tr-rdata").length) / 2;

        for (var row = 0; row < rowMax; row++) {
            var values_array = [];
            var max_num = 0;
            var min_num = 0;
            var percent_value = 0;
            var rowData = '';

            for (var col = 0; col < colMax; col++) {
                if ($('span#' + table_id + '.percent-bdg' + row + '-' + col).closest('td.sum_input').css('display') !== 'none') {
                    rowData = $('span#' + table_id + '.percent-bdg' + row + '-' + col).text();
                    values_array.push(parseFloat(rowData));
                }
            }

            max_num = Math.max(...values_array
        )
            ;
            min_num = Math.min(...values_array
        )
            ;
            percent_value = ((max_num - min_num) / min_num) * 100;
            if (percent_value > 100) {
                $('span.tb-badge' + row).text('+100 %');
            } else {
                $('span.tb-badge' + row).text(percent_value.toFixed(2) + ' %');
            }
        }
        ///=======>

        //$("table#comparative_table").show();
    }


.col-xl-12
  input type="hidden" id="viewName" value="company_details"
  input type="hidden" id="typeRoleUser" value="#{@user.try(:role).try(:key)}"
  .d-flex.align-items-center
    .mr-auto.d-flex.align-items-center
      a.m-nav__link.m-nav__link--icon.mx-2.pb-2 href="/login" style="font-size: 20px;"
        i.fa.fa-chevron-circle-left
      h3.m-subheader__title.m-subheader__title--separator
        | Compañías

.col-xl-12.mt-20
  .portlet-profile.d-flex.justify-content-end
    .info-profile-container
      .icon-circle.d-flex.justify-content-end.align-items-center.px-5
        i.fa.fa-id-card.fa-4x style="position: relative;"
      .d-flex.flex-column.col-md-12.mb-2
        .col-md-12
          span.port-title = @company_name
          span = @company.rfc
      .d-flex.col-md-12
        .col-md-4
          span.port-subtitle = 'Estado / Municipio'
          span = @company_state_municipality
          span.port-subtitle = 'Dirección'
          span = @company_address
          span.port-subtitle = 'Estatus'
          span.status-pill class="#{render_status_by_class(@company.try(:status_company).try(:key))}"
            = @company.try(:status_company).present? ? @company.try(:status_company).try(:name): 'PENDIENTE DE REVISIÓN X FACTOR'
        .vl
        .col-md-4
          span.port-subtitle = 'Nombre de contacto'
          span = @company.try(:user).try(:full_name)
          span.port-subtitle = 'Teléfono de contacto'
          span = @company.try(:user).try(:phone)
          span.port-subtitle = 'Correo de contacto'
          span = @company.try(:user).try(:email)
        .col-md-4
          span.port-subtitle = 'Actividad Principal'
          span = @company.main_activity
          span.port-subtitle = 'Principales Productos/Servicios'
          - @company.main_product_list.each do |e|
            span.tag
              = "#{e}"
  - if @company.status_company.key == 'aprobada'
    .portlet-profile.d-flex
      .col-md-12.d-flex
        .col-md-7
          - unless @company.try(:client_type).eql?('PM')
            span.port-subtitle = 'INSTITUCIONES FINANCIERAS'
            button.btn.btn-primary.btn-block.my-2.open-modal1 data-target="#m_modal_financial_institutions" data-toggle="modal" type="button"
              = "Ver instituciones financieras"

          span.port-subtitle.mt-4 = 'COLABORADORES'
          ul.col-md-12.d-flex.justify-content-between.align-items-center.collab-list
            li.d-flex.flex-column.align-items-center.col-md-2
              span.d-flex.justify-content-center.align-items-center.quantity-circle = render_quantity_h @company.try(:number_collaborator).try(:operative)
              span.quantity-num
                strong = 'OPERATIVOS'
            li.d-flex.flex-column.align-items-center.col-md-2
              span.d-flex.justify-content-center.align-items-center.quantity-circle = render_quantity_h @company.try(:number_collaborator).try(:administrative)
              span.quantity-num
                strong = 'ADMINISTRATIVOS'
            li.d-flex.flex-column.align-items-center.col-md-2
              span.d-flex.justify-content-center.align-items-center.quantity-circle = render_quantity_h @company.try(:number_collaborator).try(:sales)
              span.quantity-num
                strong = 'VENTAS'
            li.d-flex.flex-column.align-items-center.col-md-2
              span.d-flex.justify-content-center.align-items-center.quantity-circle = render_quantity_h @company.try(:number_collaborator).try(:eventual)
              span.quantity-num
                strong = 'EVENTUAL'
            li.d-flex.flex-column.align-items-center.col-md-2
              span.d-flex.justify-content-center.align-items-center.quantity-circle = render_quantity_h @company.try(:number_collaborator).try(:unionized)
              span.quantity-num
                strong = 'SINDICALIZADOS'
          ul.d-flex.justify-content-center.collab-list
            h3
              strong = "TOTAL:  #{ @company.try(:number_collaborator).present? ? @company.try(:number_collaborator).try(:total).to_s(:delimited) : 0 }"

        .col-md-5
          span.port-subtitle = 'ARCHIVOS'
          .d-flex.flex-column
            - if @company.try(:company_file).present?
              - if @company.try(:company_file).try(:invoice_id_file).present?
                a.btn.btn-outline-accent.m-btn.m-btn--icon.m-btn--outline-2x.my-1 href="#{ENV['DOWNLOAD_FILES']}/#{@company.try(:company_file).try(:invoice_id_file)}/#{@company.try(:company_file).try(:name_id_file)}" target="_blank"
                  span.d-flex.justify-content-between.align-items-center
                    span
                      | Identificación oficial
                    i.fa.fa-file
              - else
                a.btn.btn-outline-accent.m-btn.m-btn--icon.m-btn--outline-2x.my-1.disabled href="#" target="_blank"
                  span.d-flex.justify-content-between.align-items-center
                    span
                      | Identificación oficial
                    i.fa.fa-file
              - if @company.try(:company_file).try(:invoice_constancy).present?
                a.btn.btn-outline-accent.m-btn.m-btn--icon.m-btn--outline-2x.my-1 href="#{ENV['DOWNLOAD_FILES']}/#{@company.try(:company_file).try(:invoice_constancy)}/#{@company.try(:company_file).try(:name_constancy)}" target="_blank"
                  span.d-flex.justify-content-between.align-items-center
                    span
                      | Constancia de Situacion fiscal
                    i.fa.fa-file
              - else
                a.btn.btn-outline-accent.m-btn.m-btn--icon.m-btn--outline-2x.my-1.disabled href="#" target="_blank"
                  span.d-flex.justify-content-between.align-items-center
                    span
                      | Constancia de Situacion fiscal
                    i.fa.fa-file
              - if @company.try(:company_file).try(:invoice_financial_statements_one).present?
                a.btn.btn-outline-accent.m-btn.m-btn--icon.m-btn--outline-2x.my-1 href="#{ENV['DOWNLOAD_FILES']}/#{@company.try(:company_file).try(:invoice_financial_statements_one)}/#{@company.try(:company_file).try(:name_financial_statements_one)}" target="_blank"
                  span.d-flex.justify-content-between.align-items-center
                    span
                      | Estados Financieros (Cierre anual 1)
                    i.fa.fa-file
              - else
                a.btn.btn-outline-accent.m-btn.m-btn--icon.m-btn--outline-2x.my-1.disabled href="#" target="_blank"
                  span.d-flex.justify-content-between.align-items-center
                    span
                      | Estados Financieros (Cierre anual 1)
                    i.fa.fa-file
              - if @company.try(:company_file).try(:invoice_financial_statements_two).present?
                a.btn.btn-outline-accent.m-btn.m-btn--icon.m-btn--outline-2x.my-1 href="#{ENV['DOWNLOAD_FILES']}/#{@company.try(:company_file).try(:invoice_financial_statements_two)}/#{@company.try(:company_file).try(:name_financial_statements_two)}" target="_blank"
                  span.d-flex.justify-content-between.align-items-center
                    span
                      | Estados Financieros (Cierre anual 2)
                    i.fa.fa-file
              - else
                a.btn.btn-outline-accent.m-btn.m-btn--icon.m-btn--outline-2x.my-1.disabled href="#" target="_blank"
                  span.d-flex.justify-content-between.align-items-center
                    span
                      | Estados Financieros (Cierre anual 2)
                    i.fa.fa-file
              - if @company.try(:company_file).try(:invoice_financial_statements_parcial).present?
                a.btn.btn-outline-accent.m-btn.m-btn--icon.m-btn--outline-2x.my-1 href="#{ENV['DOWNLOAD_FILES']}/#{@company.try(:company_file).try(:invoice_financial_statements_parcial)}/#{@company.try(:company_file).try(:name_financial_statements_parcial)}" target="_blank"
                  span.d-flex.justify-content-between.align-items-center
                    span
                      | Estados Financieros (Cierre parcial)
                    i.fa.fa-file
              - else
                a.btn.btn-outline-accent.m-btn.m-btn--icon.m-btn--outline-2x.my-1.disabled href="#" target="_blank"
                  span.d-flex.justify-content-between.align-items-center
                    span
                      | Estados Financieros (Cierre parcial)
                    i.fa.fa-file

            - else
              h5 = 'Sin archivos por mostrar'
    .m-portlet
      .m-portlet__head
        .m-portlet__head-caption
          .m-portlet__head-title
            .col-md-8
              h3.m-portlet__head-text
                | Configuraciones

      .m-portlet__body
        .m-section.mb-0
          .d-inline-flex.col-md-12
            .col-md-8
              .btns-card.full-h
                .subtitle-icon.d-flex.justify-content-center.align-items-center
                  i.fa.fa-building.fa-lg.m--font-primary
                h5.h5.subtitle = 'Detalles de solicitud'
                - if (current_user.god? or current_user.credit_area? or current_user.promotion_area?)
                  button.btn.btn-outline-primary.m-btn.m-btn--outline-2x.btn-block.my-2.open-modal-request data-target="#m_modal_request_details" data-toggle="modal" type="button" data-id="#{nil}" data-companyid="#{@company.id}" data-process-status="#{nil}" data-analyst-id="#{nil}" data-factorcredit-id="#{nil}"
                    i.fa.fa-plus.left.mr-10
                    = "Nueva solicitud"
                .m-section__content.table-responsive.max-h-card
                  table.table.m-table.m-table--head-separator-brand.table-custom
                    thead.thead-default.thead-custom
                      tr style="text-align: center;"
                        th
                          | Fecha
                        th
                          | Analista
                        th
                          | Crédito
                        th
                          | Estatus de Proceso
                        th
                          | Archivos
                        th
                          | Acciones
                      tbody
                        - @requests.each do |request|
                          tr valign="middle"
                            td.align-vm
                              = request.try(:created_at).strftime('%d/%m/%Y')
                            td.align-vm
                              = request.analist.try(:full_name)
                            td.align-vm
                              = request.factor_credit.try(:name).present? ? request.factor_credit.try(:name) : 'Sin asignar'
                            td.align-vm
                              = request.process_status.try(:name)
                            td style="vertical-align:middle;"
                              button.btn.btn-primary.m-btn.btn-sm.m-btn.m-btn--icon.btn-block.btn-action.mb-1.open-modal-file-request data-target="#m_modal_file_request" data-toggle="modal" type="button" data-id="#{request.id}"
                                span
                                  i.fa.fa-file-pdf.mx-2
                                  span = "Subir"
                              - if request.try(:file_id).present?
                                a.btn.btn-danger.m-btn.btn-sm.m-btn.m-btn--icon.btn-block.btn-action href="#{ENV['DOWNLOAD_FILES']}/#{request.try(:file_id)}/#{request.try(:file_name)}" target="_blank"
                                  span
                                    i.fa.fa-eye.mx-2
                                    span = "Ver"
                            td
                              .dropdown
                                button#dropdownMenuButton.btn.btn-primary.m-btn.btn-sm.m-btn.m-btn--icon.btn-block.dropdown-toggle aria-expanded="false" aria-haspopup="true" data-toggle="dropdown" type="button"
                                  | Acciones
                                .dropdown-menu aria-labelledby="dropdownMenuButton"
                                  a.dropdown-item.open-modal-request href="#m_modal_request_details" data-target="#m_modal_request_details" data-toggle="modal" type="button" data-id="#{request.id}" data-companyid="#{@company.id}" data-request-file="#{request.file_id}" data-process-status="#{request.process_status.to_json}" data-analyst-id="#{request.analyst_id}" data-factorcredit-id="#{request.factor_credit_id}"
                                    | Detalles
                                  a.dropdown-item target="_blank" href="/request_comments/#{request.id}"
                                    | Comentarios
                                  - if @company.income_calendar_details.present? or @company.balance_calendar_details.present?
                                    a.dropdown-item target="_blank" href="#{dictamen_report_path(@company.id, request.id, format: :pdf)}"
                                      | Dictamen
            .col-md-4
              .btns-card
                .subtitle-icon.d-flex.justify-content-center.align-items-center
                  i.fa.fa-calendar.fa-lg.m--font-primary
                h5.h5.subtitle = "Asignación de periodos"
                - if @company.status_company.key == 'aprobada' and @can_assign_period and @company.try(:complete)
                  button.btn.btn-outline-primary.m-btn.m-btn--outline-2x.btn-block.my-2.open-modal1 data-target="#m_modal_periods" data-toggle="modal" type="button" data-id="#{@company.id}" data-calendars="#{@company.company_calendar_details.where(assign_to: 'balance_sheet').pluck(:calendar_id)}" data-approved="true"
                    = "Asignar periodos"
                - else
                  span.text-center
                    | Es necesario validar la solicitud.

              - unless @company.try(:info_company).present? and @company.try(:income_statment).present? and @company.try(:balance_sheet).present? and @company.try(:credit_bureaus).last.try(:bureau_info).present? and @company.try(:credit_bureaus).last.try(:bureau_report).present? and company_have_credit_bureau(@credit_bureau)
                .btns-card.mt-30
                  .subtitle-icon.d-flex.justify-content-center.align-items-center
                    i.fa.fa-sync.fa-lg.m--font-primary
                  h5.h5.subtitle = 'Información faltante de compañía'
                  - unless @company.try(:info_company).present?
                    = link_to sat_info_company_path(@company.id), method: :put, class: 'btn btn-outline-primary m-btn m-btn--outline-2x btn-block my-2' do
                      = "Información del SAT"
                  - unless @company.try(:income_statment).present?
                    = link_to sat_income_statement_path(@company.id), method: :put, class: 'btn btn-outline-primary m-btn m-btn--outline-2x btn-block my-2' do
                      = "Estado de resultados"

                  - unless @company.try(:balance_sheet).present?
                    = link_to sat_balance_sheet_path(@company.id), method: :put, class: 'btn btn-outline-primary m-btn m-btn--outline-2x btn-block my-2' do
                      = "Hoja de balance"
                  - unless @company.try(:credit_bureaus).last.try(:bureau_info).present?
                    = link_to credit_bureau_info_path(@company.id), method: :put, class: 'btn btn-outline-primary m-btn m-btn--outline-2x btn-block my-2' do
                      = "Info. Buró de crédito"
                    / - unless company_have_credit_bureau @credit_bureau
                    /   = link_to credit_bureau_report_path(@company.id), method: :put, class: 'btn btn-outline-primary m-btn m-btn--outline-2x btn-block my-2' do
                    /     = "Reporte del buró de crédito"

    - if @company.income_calendar_details.present? or @company.balance_calendar_details.present? or current_user.god?
      .m-portlet
        .m-portlet__head
          .m-portlet__head-caption
            .m-portlet__head-title
              h3.m-portlet__head-text
                | Tablas de información
        .m-portlet__body
          .m-section.mb-0
            .col-xl-12.my-4
              ul.nav.select_form_switch role="tablist"
                li.nav-item.active
                  a.nav-link data-toggle="tab" href="#balance_sheet" onclick="calculate_comparative('comparative_table_bs')"
                    | BALANCE FINANCIERO
                li.nav-item
                  a.nav-link data-toggle="tab" href="#income_statement" onclick="calculate_comparative('comparative_table_is')"
                    | ESTADO DE RESULTADOS
                li.nav-item
                  a.nav-link data-toggle="tab" href="#financial_reasons"
                    | RAZONES FINANCIERAS
                li.nav-item
                  a.nav-link data-toggle="tab" href="#credit_bureau"
                    | BURÓ DE CRÉDITO
                li.nav-item
                  a.nav-link data-toggle="tab" href="#info_sat"
                    | INFORMACIÓN DEL SAT
                li.nav-item
                  a.nav-link data-toggle="tab" href="#providers_clients"
                    | PROVEEDORES Y CLIENTES
                li.nav-item
                  a.nav-link data-toggle="tab" href="#cash_flow"
                    | FLUJO DE EFECTIVO
                li.slide
            .tab-content.col-xl-12.mb-30

              .tab-pane.active id="balance_sheet"
                .col-xl-12
                  .m-portlet
                    .m-portlet__body
                      .m-section.mb-0
                        .m-section__content.table-responsive.text-center
                          .tabs-actions
                            - unless @user.committee? || @user.credit_management?
                              button.btn.btn-outline-primary.m-btn.m-btn--outline-2x.mx-2.btn-block.open-modal-cstatus data-toggle="modal" type="button" data-target="#m_modal_capture_status" data-id="#{@company.id}" data-type="balance_sheet"
                                .fa.fa-check-square.mx-2
                                = "Habilitar Captura"
                              a.btn.btn-outline-primary.m-btn.m-btn--outline-2x.mx-2.btn-block href="/balance_sheet_request/#{@company.id}" target="_blank"
                                .fa.fa-pencil-alt.mx-2
                                = "Editar Captura"
                        - if @company.company_calendar_details.where(assign_to: 'balance_sheet').present?
                          = render "balance_sheet_table"
                        - else
                          .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                            .m-alert__icon
                              i.flaticon-exclamation-1
                              span
                            .m-alert__text
                              strong
                                | Aún no se le han asignado fechas para captura.

                        .col-md-12.mt-30
                          .btns-card.full-h
                            .subtitle-icon.d-flex.justify-content-center.align-items-center
                              i.fa.fa-comment.fa-lg.m--font-primary
                            .d-flex.flex-column.justify-content-between
                              h5.h5.subtitle = 'Comentarios'
                              .max-h-card.m-widget3
                                - if @bs_comments.length > 0
                                  - @bs_comments.each do |comment|
                                    .m-widget3__item
                                      .m-widget3__header
                                        .m-widget3__info
                                          span.m-widget3__username
                                            = User.where(id: comment.user_id).try(:first).full_name
                                          /br
                                          /span.m--font-primary
                                              = "#{comment.process_status.name}"
                                          br
                                          span.m-widget3__time
                                            = comment.created_at.strftime('%d/%m/%Y,  %I:%M%p')

                                      .m-widget3__body
                                        p.m-widget3__text
                                          = comment.comment
                                - else
                                  .m-widget3__item
                                    .m-widget3__body
                                      p.m-widget3__text
                                        .text-center
                                          | Aún no hay comentarios.
                              a.btn.btn-block.btn-info href="/comments/#{@company.id}/balance_sheet" target="_blank"
                                | IR A COMENTARIOS


              .tab-pane id="income_statement"
                .col-xl-12
                  .m-portlet
                    .m-portlet__body
                      .m-section.mb-0
                        .m-section__content.table-responsive.text-center
                          .tabs-actions
                            /- if @company.income_statement_finished
                            - unless @user.committee? || @user.credit_management?
                              button.btn.btn-outline-primary.m-btn.m-btn--outline-2x.btn-block.mx-2.open-modal-cstatus data-toggle="modal" type="button" data-target="#m_modal_capture_status" data-id="#{@company.id}" data-type="income_statement_finished"
                                .fa.fa-check-square.mx-2
                                = "Habilitar Captura"
                              a.btn.btn-outline-primary.m-btn.m-btn--outline-2x.mx-2.btn-block.mx-2 href="/income_statement_capture/#{@company.id}" target="_blank"
                                .fa.fa-pencil-alt.mx-2
                                = "Editar Captura"

                        - if @company.company_calendar_details.where(assign_to: 'income_statement').present?
                          = render "income_statement_table"
                        - else
                          .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                            .m-alert__icon
                              i.flaticon-exclamation-1
                              span
                            .m-alert__text
                              strong
                                | Aún no se le han asignado fechas para captura.

                        .col-md-12.mt-30
                          .btns-card.full-h
                            .subtitle-icon.d-flex.justify-content-center.align-items-center
                              i.fa.fa-comment.fa-lg.m--font-primary
                            .d-flex.flex-column.justify-content-between
                              h5.h5.subtitle = 'Comentarios'
                              .max-h-card.m-widget3
                                - if @is_comments.length > 0
                                  - @is_comments.each do |comment|
                                    .m-widget3__item
                                      .m-widget3__header
                                        .m-widget3__info
                                          span.m-widget3__username
                                            = User.where(id: comment.user_id).try(:first).full_name
                                          /br
                                          /span.m--font-primary
                                              = "#{comment.process_status.name}"
                                          br
                                          span.m-widget3__time
                                            = comment.created_at.strftime('%d/%m/%Y,  %I:%M%p')

                                      .m-widget3__body
                                        p.m-widget3__text
                                          = comment.comment
                                - else
                                  .m-widget3__item
                                    .m-widget3__body
                                      p.m-widget3__text
                                        .text-center
                                          | Aún no hay comentarios.
                              a.btn.btn-block.btn-info href="/comments/#{@company.id}/income_statement" target="_blank"
                                | IR A COMENTARIOS

              .tab-pane id="financial_reasons"
                .col-xl-12
                  .m-portlet
                    .m-portlet__body
                      .m-section.mb-0
                        .m-section__content.table-responsive.text-center
                          .tabs-actions
                            - if CompanyFlow.where(company_id: @company.id).present?
                              - if can_generate_data and @requests.where(process_status_id: ProcessStatus.where(key: ['analist','credit_validated']).pluck(:id)).present?
                                a.btn.btn-outline-primary.m-btn.m-btn--outline-2x.btn-block.open-modal-cstatus href="/generate_financial_reasons/#{@company.id}"
                                  .fa.fa-sync.mx-2
                                  = "Generar razones financieras"
                            - else
                              .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show.btn-block role="alert"
                                .m-alert__icon
                                  i.flaticon-exclamation-1
                                  span
                                .m-alert__text
                                  strong
                                    | Es necesario generar FLUJO DE EFECTIVO para poder generar las RAZONES FINANCIERAS.


                        - if @company.company_calendar_details.where(assign_to: 'income_statement').present? and FReasonsCompany.where(company_id: @company.id).length > 0
                          = render 'financial_reasons_table'
                        - else
                          .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                            .m-alert__icon
                              i.flaticon-exclamation-1
                              span
                            .m-alert__text
                              strong
                                | Aún no se han generado las Razones Financieras.

                        .col-md-12.mt-30
                          .btns-card.full-h
                            .subtitle-icon.d-flex.justify-content-center.align-items-center
                              i.fa.fa-comment.fa-lg.m--font-primary
                            .d-flex.flex-column.justify-content-between
                              h5.h5.subtitle = 'Comentarios'
                              .max-h-card.m-widget3
                                - if @fr_comments.length > 0
                                  - @fr_comments.each do |comment|
                                    .m-widget3__item
                                      .m-widget3__header
                                        .m-widget3__info
                                          span.m-widget3__username
                                            = User.where(id: comment.user_id).try(:first).full_name
                                          /br
                                          /span.m--font-primary
                                              = "#{comment.process_status.name}"
                                          br
                                          span.m-widget3__time
                                            = comment.created_at.strftime('%d/%m/%Y,  %I:%M%p')

                                      .m-widget3__body
                                        p.m-widget3__text
                                          = comment.comment
                                - else
                                  .m-widget3__item
                                    .m-widget3__body
                                      p.m-widget3__text
                                        .text-center
                                          | Aún no hay comentarios.
                              a.btn.btn-block.btn-info href="/comments/#{@company.id}/financial_reasons" target="_blank"
                                | IR A COMENTARIOS



              .tab-pane id="credit_bureau"
                .col-xl-12
                  .m-portlet
                    .m-portlet__body
                      .m-section.mb-0
                        .m-section__content.table-responsive.text-center
                          .tabs-actions
                            = link_to bureau_report_path(@company.id, format: :pdf), class: 'btn btn-outline-primary m-btn m-btn--outline-2x btn-block my-2' do
                              .fa.fa-file-pdf.mx-2
                              = "Generar PDF"
                        - if !@credit_bureau.present?
                          .m-section__content
                            .no-results

                        - else
                          .m-section__sub
                            .row.m-section__sub style="display: flex"
                              .col-6.pl-0

                              .col-6.per-page-container
                          .m-section__content
                            - if @credit_bureau.present? and @company.try(:client_type).eql?('PF')
                              .m-demo data-code-html="true" data-code-js="false" data-code-preview="true"
                              .m-demo__preview
                                h3.m-portlet__head-text
                                  | SCORE
                              .m-demo data-code-html="true" data-code-js="false" data-code-preview="true"
                                .m-demo__preview
                                  .d-flex.flex-column.justify-content-center
                                    .gauge-wrapper
                                      .gauge.four.rischio style="--degres: #{calculate_degrees(@score)}deg;"
                                        .slice-colors
                                          .st.slice-item
                                          .st.slice-item
                                          .st.slice-item
                                          .st.slice-item
                                        .needle
                                        .gauge-center
                                          .number
                                            = @score
                                          .status-face
                                    /= image_tag calculate_face(@score)

                                    .d-inline-flex.justify-content-center
                                      .d-flex.flex-column.justify-content-between.align-items-center.status-container
                                        span.text-center
                                          strong = 'BAJA, MENOR A 550 PUNTOS'
                                        = image_tag 'icons/face-bad.png'
                                      .d-flex.flex-column.justify-content-between.align-items-center.status-container
                                        span.text-center
                                          strong = 'REGULAR, 551-650 PUNTOS'
                                        = image_tag 'icons/face-med.png'
                                      .d-flex.flex-column.justify-content-between.align-items-center.status-container
                                        span.text-center
                                          strong = 'BUENA 651- 750 PUNTOS'
                                        = image_tag 'icons/face-nice.png'
                                      .d-flex.flex-column.justify-content-between.align-items-center.status-container
                                        span.text-center
                                          strong = 'EXCELENTE MÁS DE 751 PUNTOS'
                                        = image_tag 'icons/face-good.png'
                              .m-demo data-code-html="true" data-code-js="false" data-code-preview="true"
                                .m-demo__preview
                                  h3.m-portlet__head-text
                                    | Datos Generales
                                  .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                    - if @credit_bureau.present?
                                      - if @report_result['response'].present?
                                        - if @report_result['response']['return']['Personas']['Persona'][0]['Nombre'].present?
                                          .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                            strong
                                              | Nombre
                                          .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                            = @report_result['response']['return']['Personas']['Persona'][0]['Nombre']['PrimerNombre'] + ' ' + @report_result['response']['return']['Personas']['Persona'][0]['Nombre']['ApellidoPaterno'] + ' ' + @report_result['response']['return']['Personas']['Persona'][0]['Nombre']['ApellidoMaterno']
                                          .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                            strong
                                              | R.F.C
                                          .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                            = @report_result['response']['return']['Personas']['Persona'][0]['Nombre']['RFC']
                                          .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                            strong
                                              | Fecha de nacimiento
                                          .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                            = get_pm_birthdate @report_result['response']['return']['Personas']['Persona'][0]['Nombre']['FechaNacimiento']
                                        - else
                                          .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                                            .m-alert__icon
                                              i.flaticon-exclamation-1
                                              span
                                            .m-alert__text
                                              strong
                                                | Aún no se encuentran datos generales.
                                      - else
                                        .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                                          .m-alert__icon
                                            i.flaticon-exclamation-1
                                            span
                                          .m-alert__text
                                            strong
                                              | Aún no se encuentran datos generales.
                                    - else
                                      .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                                        .m-alert__icon
                                          i.flaticon-exclamation-1
                                          span
                                        .m-alert__text
                                          strong
                                            | Aún no se encuentran datos generales.
                              .m-demo data-code-html="true" data-code-js="false" data-code-preview="true"
                                .m-demo__preview
                                  h3.m-portlet__head-text
                                    | Resumen de Créditos (M.N.)
                                  - if @credit_bureau.bureau_report.present?
                                    - if @report_result['response'].present? && @report_result['response']['return']['Personas']['Persona'][0]['Cuentas'].present?
                                      .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                        .m-section
                                          .m-section__content
                                            table.table style="display: block;overflow-x: auto;"
                                              thead.thead-default
                                                tr
                                                  th
                                                    | MOP
                                                  th
                                                    | Cuentas Abiertas
                                                  th
                                                    | Limite Abiertas
                                                  th
                                                    | Maximo Abiertas
                                                  th
                                                    | Saldo Actual Abiertas
                                                  th
                                                    | Saldo Vencido Abiertas
                                                  th
                                                    | Pago a Realizar
                                                  th
                                                    | Cuentas Cerradas
                                                  th
                                                    | Limite Cerradas
                                                  th
                                                    | Maximo Cerradas
                                                  th
                                                    | Saldo Actual Cerradas
                                                  th
                                                    | Monto Cerradas
                                              tbody
                                                - get_ur_credits(@report_result['response']['return']['Personas']['Persona'][0]['Cuentas']['Cuenta']).each do |credit|
                                                  tr
                                                    td
                                                      = credit[:mop]
                                                    td
                                                      = credit[:cuentas_abiertas]
                                                    td
                                                      = number_to_currency credit[:limite_abiertas]
                                                    td
                                                      = number_to_currency credit[:maximo_abiertas]
                                                    td
                                                      = number_to_currency credit[:saldo_actual]
                                                    td
                                                      = number_to_currency credit[:saldo_vencido]
                                                    td
                                                      = number_to_currency credit[:pago_realizar]
                                                    td
                                                      = credit[:cuentas_cerradas]
                                                    td
                                                      = number_to_currency credit[:limite_cerradas]
                                                    td
                                                      = number_to_currency credit[:maximo_cerradas]
                                                    td
                                                      = number_to_currency credit[:saldo_cerradas]
                                                    td
                                                      = number_to_currency credit[:monto_cerradas]

                              .m-demo data-code-html="true" data-code-js="false" data-code-preview="true"
                                .m-demo__preview
                                  h3.m-portlet__head-text
                                    | Domicilios registrados
                                  - if @credit_bureau.present?
                                    - if @report_result['response'].present? && @report_result['response']['return']['Personas']['Persona'][0]['Domicilios'].present?
                                      - @report_result['response']['return']['Personas']['Persona'][0]['Domicilios']['Domicilio'].each do |address|
                                        .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                          .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                            strong
                                              | Calle y número
                                          .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                            = address['Direccion1']
                                          .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                            strong
                                              | Colonia
                                          .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                            = address['ColoniaPoblacion']
                                          .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                            strong
                                              | Del / Mpio
                                          .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                            = address['DelegacionMunicipio']
                                        .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                          .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                            strong
                                              | Estado
                                          .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                            = address['Estado']
                                          .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                            strong
                                              | C.P
                                          .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                            = address['CP']
                                          .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                            strong
                                              | Teléfono
                                          .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                            = address['NumeroTelefono']
                                        br
                                    - else
                                      .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                        .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                                          .m-alert__icon
                                            i.flaticon-exclamation-1
                                            span
                                          .m-alert__text
                                            strong
                                              | Aún no se encuentran domicilios registrados.
                                  - else
                                    .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                      .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                                        .m-alert__icon
                                          i.flaticon-exclamation-1
                                          span
                                        .m-alert__text
                                          strong
                                            | Aún no se encuentran domicilios registrados.

                              .m-demo data-code-html="true" data-code-js="false" data-code-preview="true"
                                .m-demo__preview
                                  h3.m-portlet__head-text
                                    | Domicilio(s) de empleo(s) registrado(s)
                                  - if @credit_bureau.present?
                                    - if @report_result['response'].present? && @report_result['response']['return']['Personas']['Persona'][0]['Empleos'].present?
                                      - @report_result['response']['return']['Personas']['Persona'][0]['Empleos']['Empleo'].each do |job|
                                        .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                          .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                            strong
                                              | Compañía
                                          .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                            = job['NombreEmpresa']
                                          .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                            strong
                                              | Puesto
                                          .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                            = job['Cargo']
                                          .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                            strong
                                              | País
                                          .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                            = job['CodPais']
                                        .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                          .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                            strong
                                              | Calle y número
                                          .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                            = job['Direccion1']
                                          .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                            strong
                                              | Telefono
                                          .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                            = job['NumeroTelefono']
                                          .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                            strong
                                              | Fecha de contratación
                                          .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                            = get_pm_birthdate job['FechaContratacion']

                                        br
                                    - else
                                      .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                        .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                                          .m-alert__icon
                                            i.flaticon-exclamation-1
                                            span
                                          .m-alert__text
                                            strong
                                              | Aún no se encuentran Domicilio(s) de empleo(s) registrado(s).
                                  - else
                                    .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                      .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                                        .m-alert__icon
                                          i.flaticon-exclamation-1
                                          span
                                        .m-alert__text
                                          strong
                                            | Aún no se encuentran Domicilio(s) de empleo(s) registrado(s).


                              .m-demo data-code-html="true" data-code-js="false" data-code-preview="true"
                                .m-demo__preview
                                  h3.m-portlet__head-text
                                    | Cuentas
                                  - if @credit_bureau.present?
                                    - if @report_result['response'].present? && @report_result['response']['return']['Personas']['Persona'][0]['Cuentas'].present?
                                      - @report_result['response']['return']['Personas']['Persona'][0]['Cuentas']['Cuenta'].each do |account|
                                        .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                          .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                            strong
                                              | Nombre del Otorgante
                                          .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                            = account['NombreOtorgante']
                                          .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                            strong
                                              | Monto a pagar
                                          .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                            = number_to_currency account['MontoPagar']
                                          .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                            strong
                                              | Tipo de cuenta
                                          .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                            = I18n.t("account_type.#{account['TipoCuenta']}")
                                        .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                          .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                            strong
                                              | Saldo actual
                                          .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                            = account['SaldoActual']
                                          .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                            strong
                                              | Saldo vencido
                                          .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                            = account['SaldoVencido']
                                          .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                            strong
                                              | Tipo de contrato
                                          .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                            = I18n.t("contract_type.#{account['TipoContrato']}")
                                        .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                          .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                            strong
                                              | Crédito máximo
                                          .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                            = number_to_currency account['CreditoMaximo']
                                          .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                            strong
                                              | Forma de Pago
                                          .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                            = method_payment account['FormaPagoActual']
                                          .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                            strong
                                              | Frecuencia de pagos
                                          .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                            = I18n.t("payments_frecuency.#{account['FrecuenciaPagos']}")
                                        .m-stack.m-stack--ver.m-stack--general.m-stack--demo.mt-2
                                          .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle.d-flex.justify-content-between.align-items-center.history-header
                                            h4.strong
                                              | Historial de pagos
                                            .history-icon
                                              i.fa.fa-calendar-check.fa-2x.lightgray-text
                                        .m-stack.m-stack--ver.m-stack--general.m-stack--demo.history-table
                                          .m-stack__item.body-info-company.m-stack__item--middle
                                            strong
                                              | Mes
                                          .m-stack__item.body-info-company.m-stack__item--middle.text-center
                                            strong
                                              | E
                                          .m-stack__item.body-info-company.m-stack__item--middle.text-center
                                            strong
                                              | F
                                          .m-stack__item.body-info-company.m-stack__item--middle.text-center
                                            strong
                                              | M
                                          .m-stack__item.body-info-company.m-stack__item--middle.text-center
                                            strong
                                              | A
                                          .m-stack__item.body-info-company.m-stack__item--middle.text-center
                                            strong
                                              | M
                                          .m-stack__item.body-info-company.m-stack__item--middle.text-center
                                            strong
                                              | J
                                          .m-stack__item.body-info-company.m-stack__item--middle.text-center
                                            strong
                                              | J
                                          .m-stack__item.body-info-company.m-stack__item--middle.text-center
                                            strong
                                              | A
                                          .m-stack__item.body-info-company.m-stack__item--middle.text-center
                                            strong
                                              | S
                                          .m-stack__item.body-info-company.m-stack__item--middle.text-center
                                            strong
                                              | O
                                          .m-stack__item.body-info-company.m-stack__item--middle.text-center
                                            strong
                                              | N
                                          .m-stack__item.body-info-company.m-stack__item--middle.text-center
                                            strong
                                              | D
                                        - get_history_payments(account).each do |key, value|
                                          .m-stack.m-stack--ver.m-stack--general.m-stack--demo.history-table
                                            .m-stack__item.body-info-company.m-stack__item--middle
                                              = key
                                            - value.each do |v|
                                              - if v[:value] == 0
                                                .m-stack__item.body-info-company.m-stack__item--middle
                                              - elsif v[:value] == '1'
                                                .m-stack__item.body-info-green.m-stack__item--middle
                                                  strong
                                                    = v[:value]
                                              - elsif v[:value] == '2' || v[:value] == '3' || v[:value] == '4'
                                                .m-stack__item.body-info-yellow.m-stack__item--middle
                                                  strong
                                                    = v[:value]
                                              - elsif v[:value] == '5' || v[:value] == '6' || v[:value] == '7'
                                                .m-stack__item.body-info-red.m-stack__item--middle
                                                  strong
                                                    = v[:value]
                                              - else
                                                .m-stack__item.body-info-white.m-stack__item--middle
                                                  strong
                                                    = v[:value]
                                        hr.dotted
                                    - else
                                      .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                        .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                                          .m-alert__icon
                                            i.flaticon-exclamation-1
                                            span
                                          .m-alert__text
                                            strong
                                              | Aún no se encuentran cuentas.
                                  - else
                                    .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                      .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                                        .m-alert__icon
                                          i.flaticon-exclamation-1
                                          span
                                        .m-alert__text
                                          strong
                                            | Aún no se encuentran cuentas.
                              .m-demo data-code-html="true" data-code-js="false" data-code-preview="true"
                                .m-demo__preview
                                  h3.m-portlet__head-text
                                    | Consultas
                                  - if @credit_bureau.bureau_report.present?
                                    - if @credit_bureau['bureau_report']['results'].present?
                                      - @credit_bureau['bureau_report']['results'].each do |bureau_report|
                                        - if bureau_report['status']
                                          .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                            .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                              / =  I18n.t("report_type.#{bureau_report['metadata']['reportType']}")
                                              = bureau_report['metadata']['reportType']
                                            .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                              = bureau_report['status']
                                            .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                              = bureau_report['createdAt'].to_datetime.strftime('%d-%m-%Y')

                                    - else
                                      .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                        .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                                          .m-alert__icon
                                            i.flaticon-exclamation-1
                                            span
                                          .m-alert__text
                                            strong
                                              | Aún no se encuentran consultas.
                                  - else
                                    .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                      .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                                        .m-alert__icon
                                          i.flaticon-exclamation-1
                                          span
                                        .m-alert__text
                                          strong
                                            | Aún no se encuentran consultas.
                              .m-demo data-code-html="true" data-code-js="false" data-code-preview="true"
                                .m-demo__preview
                                  button.btn.btn-outline-primary.m-btn.m-btn--outline-2x.btn-block id="btn-show-info-pf" onclick="showMorePFInfo()"
                                    span.d-flex.flex-column.justify-content-center
                                      strong = "Ver mas"
                                      i.fa.fa-chevron-down.align-self-center
                                  button.btn.btn-outline-primary.m-btn.m-btn--outline-2x.btn-block id="btn-hide-info-pf" onclick="showLessPFInfo()" style="display: none;"
                                    span.d-flex.flex-column.justify-content-center
                                      strong = "Ver menos"
                                      i.fa.fa-chevron-up.align-self-center
                              div id="moreInfoPF"
                                .m-demo data-code-html="true" data-code-js="false" data-code-preview="true"
                                  .m-demo__preview
                                    h3.m-portlet__head-text
                                      | Información de HAWK
                                    - if @credit_bureau.bureau_report.present?
                                      - if @credit_bureau['bureau_report']['results'].present?
                                        - if @credit_bureau['bureau_report']['results'][0]['response']['return']['Personas']['Persona'][0]['HawkAlertBD'].present?

                                          .m-stack.m-stack--ver.m-stack--general.m-stack--demo.mt-2
                                            .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle.d-flex.justify-content-between.align-items-center.history-header
                                              h4.strong
                                                | Mensaje de prevención
                                              .history-icon
                                                i.fa.fa-info-circle.fa-2x.lightgray-text

                                          .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                            .m-section
                                              .m-section__content
                                                table.table style="display: block;overflow-x: auto;"
                                                  thead.thead-default
                                                    tr
                                                      th
                                                        | Fecha de
                                                      th
                                                        | Clave
                                                      th
                                                        | Institución
                                                      th
                                                        | Mensaje

                                                  tbody
                                                    - @credit_bureau['bureau_report']['results'][0]['response']['return']['Personas']['Persona'][0]['HawkAlertBD']['HawkAlertBD'].each_with_index do |hawk|
                                                      - if hawk['CodigoClave'] == '010'
                                                        tr
                                                          td
                                                            = format_date hawk['FechaReporte']
                                                          td
                                                            = hawk['CodigoClave']
                                                          td
                                                            = hawk['TipoInstitucion']
                                                          td
                                                            = hawk['Mensaje']
                                          .m-stack.m-stack--ver.m-stack--general.m-stack--demo.mt-2
                                            .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle.d-flex.justify-content-between.align-items-center.history-header
                                              h4.strong
                                                | Mensaje por inconsistencia de datos
                                              .history-icon
                                                i.fa.fa-info-circle.fa-2x.lightgray-text
                                          .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                            .m-section
                                              .m-section__content
                                                table.table style="display: block;overflow-x: auto;"
                                                  thead.thead-default
                                                    tr
                                                      th
                                                        | Fecha de
                                                      th
                                                        | Clave
                                                      th
                                                        | Institución
                                                      th
                                                        | Mensaje

                                                  tbody
                                                    - @credit_bureau['bureau_report']['results'][0]['response']['return']['Personas']['Persona'][0]['HawkAlertBD']['HawkAlertBD'].each_with_index do |hawk|
                                                      - if hawk['CodigoClave'] == '850' || hawk['CodigoClave'] == '860'
                                                        tr
                                                          td
                                                            = format_date hawk['FechaReporte']
                                                          td
                                                            = hawk['CodigoClave']
                                                          td
                                                            = hawk['TipoInstitucion']
                                                          td
                                                            = hawk['Mensaje']

                                          .m-stack.m-stack--ver.m-stack--general.m-stack--demo.mt-2
                                            .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle.d-flex.justify-content-between.align-items-center.history-header
                                              h4.strong
                                                | Mensaje por información de juicios (Nombre del consultado asociado a un juicio como demandado)
                                              .history-icon
                                                i.fa.fa-info-circle.fa-2x.lightgray-text
                                          .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                            .m-section
                                              .m-section__content
                                                table.table style="display: block;overflow-x: auto;"
                                                  thead.thead-default
                                                    tr
                                                      th
                                                        | Fecha de
                                                      th
                                                        | Clave
                                                      th
                                                        | Institución
                                                      th
                                                        | Mensaje

                                                  tbody
                                                    - if @credit_bureau['bureau_report']['results'][0]['response']['return']['Personas']['Persona'][0]['HawkAlertBD'].present?
                                                      - @credit_bureau['bureau_report']['results'][0]['response']['return']['Personas']['Persona'][0]['HawkAlertBD']['HawkAlertBD'].each_with_index do |hawk|
                                                        - if hawk['CodigoClave'] == '990'
                                                          tr
                                                            td
                                                              = format_date hawk['FechaReporte']
                                                            td
                                                              = hawk['CodigoClave']
                                                            td
                                                              = hawk['TipoInstitucion']
                                                            td
                                                              = hawk['Mensaje']
                                                    - if @credit_bureau['bureau_report']['results'][0]['response']['return']['Personas']['Persona'][0]['HawkAlertConsulta'].present?
                                                      - @credit_bureau['bureau_report']['results'][0]['response']['return']['Personas']['Persona'][0]['HawkAlertConsulta']['HawkAlertC'].each_with_index do |hawk|
                                                        - if hawk['CodigoClave'] == '990'
                                                          tr
                                                            td
                                                              = format_date hawk['FechaReporte']
                                                            td
                                                              = hawk['CodigoClave']
                                                            td
                                                              = hawk['TipoInstitucion']
                                                            td
                                                              = hawk['Mensaje']
                                        - else
                                          .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                            .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                                              .m-alert__icon
                                                i.flaticon-exclamation-1
                                                span
                                              .m-alert__text
                                                strong
                                                  | Aún no se encuentra Información de HAWK.
                                      - else
                                        .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                          .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                                            .m-alert__icon
                                              i.flaticon-exclamation-1
                                              span
                                            .m-alert__text
                                              strong
                                                | Aún no se encuentra Información de HAWK.
                                    - else
                                      .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                        .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                                          .m-alert__icon
                                            i.flaticon-exclamation-1
                                            span
                                          .m-alert__text
                                            strong
                                              | Aún no se encuentra Información de HAWK.


                                .m-demo data-code-html="true" data-code-js="false" data-code-preview="true"
                                  .m-demo__preview
                                    h3.m-portlet__head-text
                                      | Detalle de las consultas
                                    - if @credit_bureau.bureau_report.present?
                                      - if @credit_bureau['bureau_report']['results'].present?
                                        - if @credit_bureau['bureau_report']['results'][0]['response']['return']['Personas']['Persona'][0]['ConsultasEfectuadas'].present?
                                          .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                            .m-section
                                              .m-section__content
                                                table.table style="display: block;overflow-x: auto;"
                                                  thead.thead-default
                                                    tr
                                                      th
                                                        | Otorgante
                                                      th
                                                        | Fecha de la consulta
                                                      th
                                                        | Responsabilidad
                                                      th
                                                        | Tipo de contrato
                                                      th
                                                        | Importe

                                                  tbody
                                                    - @credit_bureau['bureau_report']['results'][0]['response']['return']['Personas']['Persona'][0]['ConsultasEfectuadas']['ConsultaEfectuada'].each_with_index do |consulta|
                                                      tr
                                                        td
                                                          = consulta['NombreOtorgante']
                                                        td
                                                          = format_date consulta['FechaConsulta']
                                                        td
                                                          = consulta['IndicadorTipoResponsabilidad'].present? ? I18n.t("tipo_responsabilidad.#{consulta['IndicadorTipoResponsabilidad']}") : ''
                                                        td
                                                          = I18n.t("tipo_contrato.#{consulta['TipoContrato']}")
                                                        td
                                                          = consulta['ImporteContrato']


                                        - else
                                          .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                            .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                                              .m-alert__icon
                                                i.flaticon-exclamation-1
                                                span
                                              .m-alert__text
                                                strong
                                                  | Aún no se encuentra detalle de las conusltas.
                                      - else
                                        .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                          .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                                            .m-alert__icon
                                              i.flaticon-exclamation-1
                                              span
                                            .m-alert__text
                                              strong
                                                | Aún no se encuentra detalle de las conusltas.
                                    - else
                                      .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                        .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                                          .m-alert__icon
                                            i.flaticon-exclamation-1
                                            span
                                          .m-alert__text
                                            strong
                                              | Aún no se encuentra detalle de las conusltas.
                            - elsif (@credit_bureau.present? and @company.try(:client_type).eql?('PM')) || (@credit_bureau.present? and @company.try(:client_type).eql?('PFAE'))

                              .m-demo data-code-html="true" data-code-js="false" data-code-preview="true"
                                .m-demo__preview
                                  h3.m-portlet__head-text
                                  .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                    - if @credit_bureau.present?
                                      - if @report_result['response'].present?
                                        .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                          .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                            strong
                                              | Calificación cartera
                                          .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                            - if @report_result['response']['respuesta']['datosGenerales'].present?
                                              strong
                                                = @report_result['response']['respuesta']['datosGenerales']['calificacionCartera'].present? ? @report_result['response']['respuesta']['datosGenerales']['calificacionCartera'].tr('0', '') : 'N/D'
                                            - else
                                              strong
                                                | N/D

                                      - else
                                        .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                                          .m-alert__icon
                                            i.flaticon-exclamation-1
                                            span
                                          .m-alert__text
                                            strong
                                              | Aún no se encuentra calificación.
                                    - else
                                      .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                                        .m-alert__icon
                                          i.flaticon-exclamation-1
                                          span
                                        .m-alert__text
                                          strong
                                            | Aún no se encuentra calificación.
                              .m-demo data-code-html="true" data-code-js="false" data-code-preview="true"
                                .m-demo__preview
                                  h3.m-portlet__head-text
                                    | Datos Generales
                                  .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                    - if @credit_bureau.present?
                                      - if @report_result['query'].present?
                                        .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                          strong
                                            | Nombre
                                        .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                          strong
                                            = @report_result['query']['consulta']['persona']['nombre']
                                        .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                          strong
                                            | R.F.C
                                        .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                          strong
                                            = @report_result['query']['consulta']['persona']['rfc']

                                      - else
                                        .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                                          .m-alert__icon
                                            i.flaticon-exclamation-1
                                            span
                                          .m-alert__text
                                            strong
                                              | Aún no se encuentran datos generales.
                                    - else
                                      .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                                        .m-alert__icon
                                          i.flaticon-exclamation-1
                                          span
                                        .m-alert__text
                                          strong
                                            | Aún no se encuentran datos generales.

                              .m-demo data-code-html="true" data-code-js="false" data-code-preview="true"
                                .m-demo__preview
                                  h3.m-portlet__head-text
                                    | Domicilio registrado
                                  - if @credit_bureau.present?
                                    - if @report_result['query'].present?
                                      .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                        .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                          strong
                                            | Calle y número
                                        .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                          = @report_result['response']['respuesta']['datosGenerales'].present? ? @report_result['response']['respuesta']['datosGenerales']['direccion1'] : 'N/D'
                                        .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                          strong
                                            | Colonia
                                        .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                          = @report_result['response']['respuesta']['datosGenerales'].present? ? @report_result['response']['respuesta']['datosGenerales']['coloniaPoblacion'] : 'N/D'
                                        .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                          strong
                                            | Del / Mpio
                                        .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                          = @report_result['response']['respuesta']['datosGenerales'].present? ? @report_result['response']['respuesta']['datosGenerales']['delegacionMunicipio'] : 'N/D'
                                      .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                        .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                          strong
                                            | Estado
                                        .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                          = @report_result['response']['respuesta']['datosGenerales'].present? ? @report_result['response']['respuesta']['datosGenerales']['estado'] : 'N/D'
                                        .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                          strong
                                            | C.P
                                        .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                          = @report_result['response']['respuesta']['datosGenerales'].present? ? @report_result['response']['respuesta']['datosGenerales']['codigoPostal'] : 'N/D'
                                        .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                          strong
                                            | Teléfono
                                        .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                          = @report_result['response']['respuesta']['datosGenerales'].present? ? @report_result['response']['respuesta']['datosGenerales']['telefono'] : 'N/D'
                                      br
                                    - else
                                      .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                        .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                                          .m-alert__icon
                                            i.flaticon-exclamation-1
                                            span
                                          .m-alert__text
                                            strong
                                              | Aún no se encuentran domicilios registrados.
                                  - else
                                    .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                      .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                                        .m-alert__icon
                                          i.flaticon-exclamation-1
                                          span
                                        .m-alert__text
                                          strong
                                            | Aún no se encuentran domicilios registrados.
                              .m-demo data-code-html="true" data-code-js="false" data-code-preview="true"
                                .m-demo__preview
                                  h3.m-portlet__head-text
                                    | Resumen de créditos activos
                                  - if @credit_bureau.bureau_report.present?
                                    - if @report_result['response'].present?
                                      .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                        .m-section
                                          .m-section__content
                                            table.table style="display: block;overflow-x: auto;"
                                              thead.thead-default
                                                tr
                                                  th
                                                    | Tipo de Otorgante
                                                  th
                                                    | Tipo de Crédito
                                                  th
                                                    | Cuentas Abiertas
                                                  th
                                                    | Cuentas en MXP
                                                  th
                                                    | Cuentas en USD
                                                  th
                                                    | Otras Monedas
                                                  th
                                                    | Original
                                                  th
                                                    | Saldo Actual
                                                  th
                                                    | Vigente
                                                  th
                                                    | 1-29 días
                                                  th
                                                    | 30-59 días
                                                  th
                                                    | 60-89 días
                                                  th
                                                    | 90-119 días
                                                  th
                                                    | 120 - 179 días
                                                  th
                                                    | 180+ días
                                              tbody
                                                - get_active_credits(@report_result['response']['respuesta']['creditoFinanciero']).each do |active_credit|
                                                  tr
                                                    th
                                                      = active_credit[:otorgante]
                                                    th
                                                      = active_credit[:tipo_credito]
                                                    th
                                                      = active_credit[:cuentas_abiertas]
                                                    th
                                                      = active_credit[:cuentas_mxp]
                                                    th
                                                      = active_credit[:cuentas_usd]
                                                    th
                                                      = active_credit[:otras_monedas]
                                                    th
                                                      = number_to_currency active_credit[:original]
                                                    th
                                                      = number_to_currency active_credit[:saldo_actual]
                                                    th
                                                      = number_to_currency active_credit[:vigente]
                                                    th
                                                      = active_credit[:one]
                                                    th
                                                      = active_credit[:thirty]
                                                    th
                                                      = active_credit[:sixty]
                                                    th
                                                      = active_credit[:ninety]
                                                    th
                                                      = active_credit[:one_twenty]
                                                    th
                                                      = active_credit[:one_eighty]
                                                - get_total_active_credits(@report_result['response']['respuesta']['creditoFinanciero']).each do |active_credit|
                                                  tr
                                                    th colspan="2"
                                                      | Total
                                                    th
                                                      = active_credit[:cuentas_abiertas]
                                                    th
                                                      = active_credit[:cuentas_mxp]
                                                    th
                                                      = active_credit[:cuentas_usd]
                                                    th
                                                      = active_credit[:otras_monedas]
                                                    th
                                                      = number_to_currency active_credit[:original]
                                                    th
                                                      = number_to_currency active_credit[:saldo_actual]
                                                    th
                                                      = number_to_currency active_credit[:vigente]
                                                    th
                                                      = active_credit[:one]
                                                    th
                                                      = active_credit[:thirty]
                                                    th
                                                      = active_credit[:sixty]
                                                    th
                                                      = active_credit[:ninety]
                                                    th
                                                      = active_credit[:one_twenty]
                                                    th
                                                      = active_credit[:one_eighty]

                                    - else
                                      .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                        .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                                          .m-alert__icon
                                            i.flaticon-exclamation-1
                                            span
                                          .m-alert__text
                                            strong
                                              | Aún no se encuentran creditos activos.
                                  - else
                                    .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                      .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                                        .m-alert__icon
                                          i.flaticon-exclamation-1
                                          span
                                        .m-alert__text
                                          strong
                                            | Aún no se encuentran creditos activos.
                              .m-demo data-code-html="true" data-code-js="false" data-code-preview="true"
                                .m-demo__preview
                                  h3.m-portlet__head-text
                                    | Historia
                                  - if @credit_bureau.present?
                                    - if @report_result['response'].present?
                                      .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                        .m-section
                                          .m-section__content
                                            table.table style="display: block;overflow-x: auto;"
                                              thead.thead-default
                                                tr
                                                  th
                                                  - @report_result['response']['respuesta']['historia'].each do |historia|
                                                    th
                                                      = get_date historia['periodo']
                                              tbody
                                                tr
                                                  th
                                                    | Vigente
                                                  - @report_result['response']['respuesta']['historia'].each do |historia|
                                                    th
                                                      = number_to_currency historia['saldoVigente']
                                                tr
                                                  th
                                                    | Vencido de 1 a 29 días
                                                  - @report_result['response']['respuesta']['historia'].each do |historia|
                                                    th
                                                      = number_to_currency historia['saldoVencidoA90Dias']
                                                tr
                                                  th
                                                    | Vencido de 30 a 59 días
                                                  - @report_result['response']['respuesta']['historia'].each do |historia|
                                                    th
                                                      = number_to_currency historia['saldoVencido1A29Dias']
                                                tr
                                                  th
                                                    | Vencido de 60 a 89 días
                                                  - @report_result['response']['respuesta']['historia'].each do |historia|
                                                    th
                                                      = number_to_currency historia['saldoVencido30A59Dias']
                                                tr
                                                  th
                                                    | Vencido de a mas de 89 días
                                                  - @report_result['response']['respuesta']['historia'].each do |historia|
                                                    th
                                                      = number_to_currency historia['saldoVencido60A89Dias']
                                                tr
                                                  th
                                                    | Calificación de cartera
                                                  - @report_result['response']['respuesta']['historia'].each do |historia|
                                                    th
                                                      = historia['calificacioncartera'].present? ? historia['calificacioncartera'] : 'N/D'

                                    - else
                                      .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                        .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                                          .m-alert__icon
                                            i.flaticon-exclamation-1
                                            span
                                          .m-alert__text
                                            strong
                                              | Aún no se encuentran creditos activos.
                                  - else
                                    .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                      .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                                        .m-alert__icon
                                          i.flaticon-exclamation-1
                                          span
                                        .m-alert__text
                                          strong
                                            | Aún no se encuentran creditos activos.

                              .m-demo data-code-html="true" data-code-js="false" data-code-preview="true"
                                .m-demo__preview
                                  h3.m-portlet__head-text
                                    | Consultas
                                  - if @credit_bureau.bureau_report.present?
                                    - if @credit_bureau['bureau_report']['results'].present?
                                      - @credit_bureau['bureau_report']['results'].each do |bureau_report|
                                        - if bureau_report['status']
                                          .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                            .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                              /= I18n.t("report_type.#{bureau_report['metadata']['reportType']}")
                                              = bureau_report['metadata']['reportType']
                                            .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                              = bureau_report['status']
                                            .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                              = bureau_report['createdAt'].to_datetime.strftime('%d-%m-%Y')


                                  - else
                                    .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                      .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                                        .m-alert__icon
                                          i.flaticon-exclamation-1
                                          span
                                        .m-alert__text
                                          strong
                                            | Aún no se encuentran consultas.
                              .m-demo data-code-html="true" data-code-js="false" data-code-preview="true"
                                .m-demo__preview
                                  button.btn.btn-outline-primary.m-btn.m-btn--outline-2x.btn-block id="btn-show-info" onclick="showMoreInfo()"
                                    span.d-flex.flex-column.justify-content-center
                                      strong = "Ver mas"
                                      i.fa.fa-chevron-down.align-self-center
                                  button.btn.btn-outline-primary.m-btn.m-btn--outline-2x.btn-block id="btn-hide-info" onclick="showLessInfo()" style="display: none;"
                                    span.d-flex.flex-column.justify-content-center
                                      strong = "Ver menos"
                                      i.fa.fa-chevron-up.align-self-center
                              div id="moreInfo"
                                .m-demo data-code-html="true" data-code-js="false" data-code-preview="true"
                                  .m-demo__preview
                                    h3.m-portlet__head-text
                                      | Información de HAWK
                                    - if @credit_bureau.bureau_report.present?
                                      - if @credit_bureau['bureau_report']['results'].present?
                                        .m-stack.m-stack--ver.m-stack--general.m-stack--demo.mt-2
                                          .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle.d-flex.justify-content-between.align-items-center.history-header
                                            h4.strong
                                              | HAWK (Mensajes de prevención)
                                            .history-icon
                                              i.fa.fa-calendar-check.fa-2x.lightgray-text
                                        .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                          .m-section
                                            .m-section__content
                                              table.table style="display: block;overflow-x: auto;"
                                                thead.thead-default
                                                  tr
                                                    th
                                                      | Fecha de
                                                    th
                                                      | Clave
                                                    th
                                                      | Descripción
                                                    th
                                                      | Responsabilidad
                                                    th
                                                      | Reportado por
                                                    th
                                                      | Mensaje
                                                    th
                                                      | Coincidenciapor datos de

                                                tbody
                                                  tr
                                                    th
                                                      = format_date @credit_bureau['bureau_report']['results'][0]['response']['respuesta']['hawkHr']['fechaMensajeHawk']
                                                    th
                                                      = @credit_bureau['bureau_report']['results'][0]['response']['respuesta']['hawkHr']['codigoHawk']
                                                    th
                                                    th
                                                    th
                                                    th
                                                      = @credit_bureau['bureau_report']['results'][0]['response']['respuesta']['hawkHr']['descripcionPrevencionHawk']
                                                    th
                                                      | COINCIDENCIA POR EXPEDIENTE

                                      - else
                                        .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                          .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                                            .m-alert__icon
                                              i.flaticon-exclamation-1
                                              span
                                            .m-alert__text
                                              strong
                                                | Aún no se encuentra Información de HAWK.
                                    - else
                                      .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                        .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                                          .m-alert__icon
                                            i.flaticon-exclamation-1
                                            span
                                          .m-alert__text
                                            strong
                                              | Aún no se encuentra Información de HAWK.

                                .m-demo data-code-html="true" data-code-js="false" data-code-preview="true"
                                  .m-demo__preview
                                    h3.m-portlet__head-text
                                      | Accionistas
                                    - if @credit_bureau.bureau_report.present?
                                      - if @credit_bureau['bureau_report']['results'].present?
                                        .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                          .m-section
                                            .m-section__content
                                              table.table style="display: block;overflow-x: auto;"
                                                thead.thead-default
                                                  tr
                                                    th
                                                      | RFC
                                                    th
                                                      | Nombre Accionista
                                                    th
                                                      | Porcentaje
                                                tbody
                                                  tr
                                                    th
                                                      = @credit_bureau['bureau_report']['results'][0]['response']['respuesta']['accionista']['rfc']
                                                    th
                                                      = @credit_bureau['bureau_report']['results'][0]['response']['respuesta']['accionista']['nombreAccionista'] + ' ' + @credit_bureau['bureau_report']['results'][0]['response']['respuesta']['accionista']['segundoNombre'] + ' ' + @credit_bureau['bureau_report']['results'][0]['response']['respuesta']['accionista']['apellidoPaterno'] + ' ' + @credit_bureau['bureau_report']['results'][0]['response']['respuesta']['accionista']['apellidoMaterno']
                                                    th
                                                      = @credit_bureau['bureau_report']['results'][0]['response']['respuesta']['accionista']['porcentaje'] + '%'


                                      - else
                                        .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                          .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                                            .m-alert__icon
                                              i.flaticon-exclamation-1
                                              span
                                            .m-alert__text
                                              strong
                                                | Aún no se encuentran accionistas.
                                    - else
                                      .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                        .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                                          .m-alert__icon
                                            i.flaticon-exclamation-1
                                            span
                                          .m-alert__text
                                            strong
                                              | Aún no se encuentran accionistas.
                                .m-demo data-code-html="true" data-code-js="false" data-code-preview="true"
                                  .m-demo__preview
                                    h3.m-portlet__head-text
                                      | Créditos activos:
                                    - if @credit_bureau.bureau_report.present?
                                      - if @credit_bureau['bureau_report']['results'].present?
                                        .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                          .m-section
                                            .m-section__content
                                              table.table style="display: block;overflow-x: auto;"
                                                thead.thead-default
                                                  tr
                                                    th
                                                      | Contrtato
                                                    th
                                                      | Tipo de Otorgante
                                                    th
                                                      | Tipo de Crédito
                                                    th
                                                      | Moneda
                                                    th
                                                      | Otorgado en
                                                    th
                                                      | Plazo
                                                    th
                                                      | Original
                                                    th
                                                      | Vigente
                                                    th
                                                      | 1-29 días
                                                    th
                                                      | 30-59 días
                                                    th
                                                      | 60-89 días
                                                    th
                                                      | 90-119 días
                                                    th
                                                      | 120-179 días
                                                    th
                                                      | 180+ días
                                                    th
                                                      | Días de atraso
                                                    th
                                                      | Historico de Pagos Claves de Observación
                                                    th
                                                      | Actualizado en

                                                tbody
                                                  - @credit_bureau['bureau_report']['results'][0]['response']['respuesta']['creditoFinanciero'].each do |creditos|
                                                    - unless creditos['fechaCierre'].present?
                                                      tr
                                                        th
                                                          = creditos['numeroCuenta']
                                                        th
                                                          = creditos['tipoUsuario']
                                                        th
                                                          = I18n.t("credits_type.#{creditos['tipoCredito']}")
                                                        th
                                                          = I18n.t("moneda.#{creditos['moneda']}") + '$' + creditos['tipoCambio']
                                                        th
                                                          = creditos['apertura']
                                                        th
                                                          = creditos['plazo']
                                                        th
                                                          = creditos['saldoInicial']
                                                        th
                                                          = creditos['saldoVigente']
                                                        th
                                                          = creditos['saldoVencidoDe1a29Dias']
                                                        th
                                                          = creditos['saldoVencidoDe30a59Dias']
                                                        th
                                                          = creditos['saldoVencidoDe60a89Dias']
                                                        th
                                                          = creditos['saldoVencidoDe90a119Dias']
                                                        th
                                                          = creditos['saldoVencidoDe120a179Dias']
                                                        th
                                                          = creditos['saldoVencidoDe180DiasOMas']
                                                        th
                                                          = creditos['atrasoMayor']
                                                        th
                                                          = creditos['historicoPagos']
                                                        th
                                                          = format_date_updated_at creditos['ultimoPeriodoActualizado']

                                      - else
                                        .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                          .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                                            .m-alert__icon
                                              i.flaticon-exclamation-1
                                              span
                                            .m-alert__text
                                              strong
                                                | Aún no se encuentran créditos activos.
                                    - else
                                      .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                        .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                                          .m-alert__icon
                                            i.flaticon-exclamation-1
                                            span
                                          .m-alert__text
                                            strong
                                              | Aún no se créditos activos
                                .m-demo data-code-html="true" data-code-js="false" data-code-preview="true"
                                  .m-demo__preview
                                    h3.m-portlet__head-text
                                      | Créditos liquidados:
                                    - if @credit_bureau.bureau_report.present?
                                      - if @credit_bureau['bureau_report']['results'].present?
                                        .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                          .m-section
                                            .m-section__content
                                              table.table style="display: block;overflow-x: auto;"
                                                thead.thead-default
                                                  tr
                                                    th
                                                      | Contrtato
                                                    th
                                                      | Tipo de Otorgante
                                                    th
                                                      | Tipo de Crédito
                                                    th
                                                      | Moneda
                                                    th
                                                      | Otorgado en
                                                    th
                                                      | Plazo
                                                    th
                                                      | Original
                                                    th
                                                      | Días de atraso
                                                    th
                                                      | Historico de Pagos Claves de Observación
                                                    th
                                                      | Liquidado en
                                                    th
                                                      | Quita
                                                    th
                                                      | Dación
                                                    th
                                                      | Pago
                                                    th
                                                      | Quebranto
                                                    th
                                                      | Actualizado en

                                                tbody
                                                  - @credit_bureau['bureau_report']['results'][0]['response']['respuesta']['creditoFinanciero'].each do |creditos|
                                                    - if creditos['fechaCierre'].present?
                                                      tr
                                                        th
                                                          = creditos['numeroCuenta']
                                                        th
                                                          = creditos['tipoUsuario']
                                                        th
                                                          = I18n.t("credits_type.#{creditos['tipoCredito']}")
                                                        th
                                                          = I18n.t("moneda.#{creditos['moneda']}") + '$' + creditos['tipoCambio']
                                                        th
                                                          = creditos['apertura']
                                                        th
                                                          = creditos['plazo']
                                                        th
                                                          = creditos['saldoInicial']
                                                        th
                                                          = creditos['atrasoMayor']
                                                        th
                                                          = creditos['historicoPagos']
                                                        th
                                                          = creditos['fechaCierre']
                                                        th
                                                          = creditos['quita']
                                                        th
                                                          = creditos['dacion']
                                                        th
                                                          = creditos['pagoCierre']
                                                        th
                                                          = creditos['quebranto']
                                                        th
                                                          = format_date_updated_at creditos['ultimoPeriodoActualizado']

                                      - else
                                        .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                          .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                                            .m-alert__icon
                                              i.flaticon-exclamation-1
                                              span
                                            .m-alert__text
                                              strong
                                                | Aún no se encuentran créditos liquidados.
                                    - else
                                      .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                        .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                                          .m-alert__icon
                                            i.flaticon-exclamation-1
                                            span
                                          .m-alert__text
                                            strong
                                              | Aún no se encuentran créditos liquidados.
                                .m-demo data-code-html="true" data-code-js="false" data-code-preview="true"
                                  .m-demo__preview
                                    h3.m-portlet__head-text
                                      | Resumen de créditos liquidados
                                    - if @credit_bureau.bureau_report.present?
                                      - if @report_result['response'].present?
                                        .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                          .m-section
                                            .m-section__content
                                              table.table style="display: block;overflow-x: auto;"
                                                thead.thead-default
                                                  tr
                                                    th
                                                      | Tipo de Otorgante
                                                    th
                                                      | Tipo de Crédito
                                                    th
                                                      | Cuentas Cerradas
                                                    th
                                                      | Cuentas en MXP
                                                    th
                                                      | Cuentas en USD
                                                    th
                                                      | Otras Monedas
                                                    th
                                                      | Original
                                                    th
                                                      | Quita
                                                    th
                                                      | Dación
                                                    th
                                                      | Pago
                                                    th
                                                      | Quebranto
                                                tbody
                                                  - get_closed_credits(@report_result['response']['respuesta']['creditoFinanciero']).each do |active_credit|
                                                    tr
                                                      th
                                                        = active_credit[:otorgante]
                                                      th
                                                        = active_credit[:tipo_credito]
                                                      th
                                                        = active_credit[:cuentas_abiertas]
                                                      th
                                                        = active_credit[:cuentas_mxp]
                                                      th
                                                        = active_credit[:cuentas_usd]
                                                      th
                                                        = active_credit[:otras_monedas]
                                                      th
                                                        = number_to_currency active_credit[:original]
                                                      th
                                                        = number_to_currency active_credit[:quita]
                                                      th
                                                        = number_to_currency active_credit[:dacion]
                                                      th
                                                        = number_to_currency active_credit[:pago]
                                                      th
                                                        = number_to_currency active_credit[:quebranto]


                                                  - get_total_closed_credits(@report_result['response']['respuesta']['creditoFinanciero']).each do |active_credit|
                                                    tr
                                                      th colspan="2"
                                                        | Total
                                                      th
                                                        = active_credit[:cuentas_abiertas]
                                                      th
                                                        = active_credit[:cuentas_mxp]
                                                      th
                                                        = active_credit[:cuentas_usd]
                                                      th
                                                        = active_credit[:otras_monedas]
                                                      th
                                                        = number_to_currency active_credit[:original]
                                                      th
                                                        = number_to_currency active_credit[:quita]
                                                      th
                                                        = number_to_currency active_credit[:dacion]
                                                      th
                                                        = number_to_currency active_credit[:pago]
                                                      th
                                                        = number_to_currency active_credit[:quebranto]

                                      - else
                                        .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                          .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                                            .m-alert__icon
                                              i.flaticon-exclamation-1
                                              span
                                            .m-alert__text
                                              strong
                                                | Aún no se encuentran creditos liquidados.
                                    - else
                                      .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                        .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                                          .m-alert__icon
                                            i.flaticon-exclamation-1
                                            span
                                          .m-alert__text
                                            strong
                                              | Aún no se encuentran creditos liquidados.

                            - else
                              .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                                .m-alert__icon
                                  i.flaticon-exclamation-1
                                  span
                                .m-alert__text
                                  strong
                                    | Aún no se le ha asignado el buró de crédito.



                      .col-md-12.mt-30
                        .btns-card.full-h
                          .subtitle-icon.d-flex.justify-content-center.align-items-center
                            i.fa.fa-comment.fa-lg.m--font-primary
                          .d-flex.flex-column.justify-content-between
                            h5.h5.subtitle = 'Comentarios'
                            .max-h-card.m-widget3
                              - if @cb_comments.length > 0
                                - @cb_comments.each do |comment|
                                  .m-widget3__item
                                    .m-widget3__header
                                      .m-widget3__info
                                        span.m-widget3__username
                                          = User.where(id: comment.user_id).try(:first).full_name
                                        /br
                                        /*span.m--font-primary
                                                    /= "#{comment.process_status.name}"
                                        br
                                        span.m-widget3__time
                                          = comment.created_at.strftime('%d/%m/%Y,  %I:%M%p')

                                    .m-widget3__body
                                      p.m-widget3__text
                                        = comment.comment
                              - else
                                .m-widget3__item
                                  .m-widget3__body
                                    p.m-widget3__text
                                      .text-center
                                        | Aún no hay comentarios.
                            a.btn.btn-block.btn-info href="/comments/#{@company.id}/credit_bureau" target="_blank"
                              | IR A COMENTARIOS

              .tab-pane id="info_sat"
                .col-xl-12
                  .m-portlet
                    .m-portlet__body
                      .m-section.mb-0
                        - if !@company.present?
                          .m-section__content
                            .no-results

                        - else
                        .m-section__sub
                          .row.m-section__sub style="display: flex"
                            .col-6.pl-0

                            .col-6.per-page-container

                        - if @company.info_company.present?
                          - if @company.info_company['hydra:member'].present?
                            .m-section__content
                              .m-demo data-code-html="true" data-code-js="false" data-code-preview="true"

                                - if @company.info_company['hydra:member'].try(:first)['person'].present?
                                  .m-demo__preview
                                    h3.m-portlet__head-text
                                      | Contribuyente
                                    .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                      .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                        strong
                                          | R.F.C
                                      .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                        = @company.info_company['hydra:member'].try(:first)['rfc']
                                      .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                        strong
                                          | CIF
                                      .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                        = @company.info_company['hydra:member'].try(:first)['cif']
                                      .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                        strong
                                          | Estatus
                                      .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                        = @company.info_company['hydra:member'].try(:first)['status']
                                    .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                      .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                        strong
                                          | Inició operaciones en
                                      .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                        = @company.info_company['hydra:member'].try(:first)['startedOperationsAt'].present? ? @company.info_company['hydra:member'].try(:first)['startedOperationsAt'].to_datetime.strftime('%d-%m-%Y') : ''
                                      .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                        strong
                                          | Estado actualizado en
                                      .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                        = @company.info_company['hydra:member'].try(:first)['statusUpdatedAt'].present? ? @company.info_company['hydra:member'].try(:first)['statusUpdatedAt'].to_datetime.strftime('%d-%m-%Y') : ''
                                      .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                        strong
                                          | CURP
                                      .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                        = @company.info_company['hydra:member'].try(:first)['person']['curp']
                                    .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                      .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                        strong
                                          | Nombre
                                      .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                        = @company.info_company['hydra:member'].try(:first)['person']['firstName']
                                      .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                        strong
                                          | Apellido Paterno
                                      .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                        = @company.info_company['hydra:member'].try(:first)['person']['middleName']
                                      .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                        strong
                                          | Apellido Materno
                                      .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                        = @company.info_company['hydra:member'].try(:first)['person']['lastName']
                                - else
                                  .m-demo__preview
                                    h3.m-portlet__head-text
                                      | Contribuyente
                                    .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                      .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                        strong
                                          | R.F.C
                                      .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                        = @company.info_company['hydra:member'].try(:first)['rfc']
                                      .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                        strong
                                          | CIF
                                      .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                        = @company.info_company['hydra:member'].try(:first)['cif']
                                      .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                        strong
                                          | Estatus
                                      .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                        = @company.info_company['hydra:member'].try(:first)['status']
                                    .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                      .m-stack__item.header-info-company.m-stack__item--center.m-stack__item--middle
                                        strong
                                          | Inició operaciones en
                                      .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                        = @company.info_company['hydra:member'].try(:first)['startedOperationsAt'].present? ? @company.info_company['hydra:member'].try(:first)['startedOperationsAt'].to_datetime.strftime('%d-%m-%Y') : ''
                                      .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                        strong
                                          | Estado actualizado en
                                      .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                        = @company.info_company['hydra:member'].try(:first)['statusUpdatedAt'].present? ? @company.info_company['hydra:member'].try(:first)['statusUpdatedAt'].to_datetime.strftime('%d-%m-%Y') : ''
                                      .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                        strong
                                          | Nombre legal
                                      .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                        = @company.info_company['hydra:member'].try(:first)['company']['legalName']
                                    .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                      .m-stack__item.header-info-company.m-stack__item--center.m-stack__item--middle
                                        strong
                                          | Tipo de entidad
                                      .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                        = @company.info_company['hydra:member'].try(:first)['company']['entityType']
                                      .m-stack__item.header-info-company.m-stack__item--center.m-stack__item--middle
                                        strong
                                          | Nombre comercial
                                      .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                        = @company.info_company['hydra:member'].try(:first)['company']['tradeName']

                              .m-demo data-code-html="true" data-code-js="false" data-code-preview="true"
                                .m-demo__preview
                                  h3.m-portlet__head-text
                                    | Dirección
                                  .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                    .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                      strong
                                        | Código postal
                                    .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                      = @company.info_company['hydra:member'].try(:first)['address']['postalCode']
                                    .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                      strong
                                        | Tipo de calle
                                    .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                      = @company.info_company['hydra:member'].try(:first)['address']['streetType']
                                    .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                      strong
                                        | Nombre de la calle
                                    .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                      = @company.info_company['hydra:member'].try(:first)['address']['streetName']
                                  .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                    .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                      strong
                                        | Referencias de calles
                                    .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                      - @company.info_company['hydra:member'].try(:first)['address']['streetReferences'].each do |references|
                                        = references.to_s + ' '
                                    .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                      strong
                                        | Número exterior
                                    .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                      = @company.info_company['hydra:member'].try(:first)['address']['streetNumber']
                                    .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                      strong
                                        | Número interior
                                    .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                      = @company.info_company['hydra:member'].try(:first)['address']['buildingNumber']
                                  .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                    .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                      strong
                                        | Vecindario
                                    .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                      = @company.info_company['hydra:member'].try(:first)['address']['neighborhood']
                                    .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                      strong
                                        | Localidad
                                    .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                      = @company.info_company['hydra:member'].try(:first)['address']['locality']
                                    .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                      strong
                                        | Municipio
                                    .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                      = @company.info_company['hydra:member'].try(:first)['address']['municipality']
                                  .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                    .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                      strong
                                        | Estado
                                    .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                      = @company.info_company['hydra:member'].try(:first)['address']['state']
                                    .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                      strong
                                        | Email
                                    .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                      = @company.info_company['hydra:member'].try(:first)['email']
                                    .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                      strong
                                        | Teléfono
                                    .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                      = @company.info_company['hydra:member'].try(:first)['phone']

                              .m-section
                                .m-demo data-code-html="true" data-code-js="false" data-code-preview="true"
                                  .m-demo__preview
                                    h3.m-portlet__head-text
                                      | Actividades económicas
                                    .m-section__content
                                      table.table
                                        thead.thead-default.thead-custom
                                          tr style="text-align: center;"
                                            th
                                              | Orden
                                            th
                                              | Actividad económica
                                            th
                                              | Porcentaje
                                            th
                                              | Fecha inicial
                                            th
                                              | Fecha final
                                        tbody
                                          - @company.info_company['hydra:member'].try(:first)['economicActivities'].each do |economic_activities|
                                            tr
                                              td
                                                = economic_activities['order']
                                              td
                                                = economic_activities['name']
                                              td
                                                = economic_activities['percentage']
                                              td
                                                = economic_activities['startDate']
                                              td
                                                = economic_activities['endDate']
                              .m-section
                                .m-demo data-code-html="true" data-code-js="false" data-code-preview="true"
                                  .m-demo__preview
                                    h3.m-portlet__head-text
                                      | Regímenes
                                    .m-section__content
                                      table.table
                                        thead.thead-default.thead-custom
                                          tr style="text-align: center;"
                                            th
                                              | Régimen
                                            th
                                              | Fecha inicial
                                            th
                                              | Fecha final
                                        tbody
                                          - @company.info_company['hydra:member'].try(:first)['taxRegimes'].each do |regime|
                                            tr
                                              td
                                                = regime['name']
                                              td
                                                = regime['startDate']
                                              td
                                                = regime['endDate']

                              .m-section
                                .m-demo data-code-html="true" data-code-js="false" data-code-preview="true"
                                  .m-demo__preview
                                    h3.m-portlet__head-text
                                      | Obligaciones
                                    .m-section__content
                                      table.table
                                        thead.thead-default.thead-custom
                                          tr style="text-align: center;"
                                            th
                                              | Descripción de la obligación
                                            th
                                              | Fecha de vencimiento
                                            th
                                              | Fecha inicial
                                            th
                                              | Fecha final
                                        tbody
                                          - @company.info_company['hydra:member'].try(:first)['obligations'].each do |obligation|
                                            tr
                                              td
                                                = obligation['description']
                                              td
                                                = obligation['dueDate']
                                              td
                                                = obligation['startDate']
                                              td
                                                = obligation['endDate']
                          - else
                            .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                              .m-alert__icon
                                i.flaticon-exclamation-1
                                span
                              .m-alert__text
                                strong
                                  | Aún no se le ha asignado información del SAT.
                        - else
                          .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                            .m-alert__icon
                              i.flaticon-exclamation-1
                              span
                            .m-alert__text
                              strong
                                | Aún no se le ha asignado información del SAT.


              .tab-pane id="providers_clients"
                .col-xl-12
                  .m-portlet
                    .m-portlet__body
                      .m-section.mb-0
                        - if !@company.try(:providers).present? && !@company.try(:customers).present?
                          .m-section__content
                            .no-results

                        - else
                        .m-section__sub
                          .row.m-section__sub style="display: flex"
                            .col-xl-12.my-6
                              ul.nav.select_form_switch.select-form-switch-two role="tablist"
                                li.nav-item.active
                                  a.nav-link data-toggle="tab" href="#providers"
                                    | Proveedores
                                li.nav-item
                                  a.nav-link data-toggle="tab" href="#customers"
                                    | Clientes
                                li.slide
                            .tab-content.col-xl-12.mb-30 style="margin-top: 20px!important"
                              .tab-pane.active id="providers"
                                .col-xl-12
                                  .m-portlet
                                    .m-portlet__body
                                      .m-section__content
                                        - if @company.try(:providers).present?
                                          table.table
                                            thead.thead-default.thead-custom
                                              tr style="text-align: center;"
                                                th
                                                  | R.F.C
                                                th
                                                  | Nombre
                                                th
                                                  | Total
                                                th
                                                  | Acciones
                                            tbody
                                              - @company.try(:providers)['data'].each do |provider|
                                                tr style="text-align: center;"
                                                  td
                                                    = provider['rfc']
                                                  td
                                                    = provider['name']
                                                  td
                                                    = number_to_currency provider['total']
                                                  td
                                                    button type="button" class="btn btn-primary" data-toggle="modal" data-transactions="#{provider['transactions'].to_json}" data-target="#modal_providers"
                                                      | Ver transacciones
                                        - else
                                          .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                                            .m-alert__icon
                                              i.flaticon-exclamation-1
                                              span
                                            .m-alert__text
                                              strong
                                                | Aún no se le han asignado proveedores a la compañía.

                              .tab-pane id="customers"
                                .col-xl-12
                                  .m-portlet
                                    .m-portlet__body
                                      .m-section__content
                                        - if @company.try(:customers).present?
                                          table.table
                                            thead.thead-default.thead-custom
                                              tr style="text-align: center;"
                                                th
                                                  | R.F.C
                                                th
                                                  | Nombre
                                                th
                                                  | Total
                                                th
                                                  | Acciones
                                            tbody
                                              - @company.try(:customers)['data'].each do |customer|
                                                tr style="text-align: center;"
                                                  td
                                                    = customer['rfc']
                                                  td
                                                    = customer['name']
                                                  td
                                                    = number_to_currency customer['total']
                                                  td
                                                    button type="button" class="btn btn-primary" data-toggle="modal" data-transactions="#{customer['transactions'].to_json}" data-target="#modal_customers"
                                                      | Ver transacciones
                                        - else
                                          .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                                            .m-alert__icon
                                              i.flaticon-exclamation-1
                                              span
                                            .m-alert__text
                                              strong
                                                | Aún no se le han asignado clientes a la compañía.


              .tab-pane id="cash_flow"
                .col-xl-12
                  .m-portlet
                    .m-portlet__body
                      .m-section.mb-0
                        .m-section__content.table-responsive.text-center
                          - if BalanceCalendarDetail.where(company_id:  @company.id).present? and IncomeCalendarDetail.where(company_id:  @company.id).present?
                            .tabs-actions.mb-3
                              - if can_generate_data and @requests.where(process_status_id: ProcessStatus.where(key: ['analist','credit_validated']).pluck(:id)).present?
                                a.btn.btn-outline-primary.m-btn.m-btn--outline-2x.btn-block.open-modal-cstatus href="/generate_cash_flow/#{@company.id}"
                                  .fa.fa-sync.mx-2
                                  = "Generar flujo de efectivo"
                              - else
                                span style="height: 80px;"

                            - if CompanyFlow.where(company_id: @company.id, flow_concept_id: FlowConcept.find_by(key: 'flujo_neto').try(:id)).present?
                              = render 'cash_flow_table'
                            - else
                              .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                                .m-alert__icon
                                  i.flaticon-exclamation-1
                                  span
                                .m-alert__text
                                  strong
                                    | Aún no se ha generado Flujo de Efectivo.
                          - else
                            .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                              .m-alert__icon
                                i.flaticon-exclamation-1
                                span
                              .m-alert__text
                                strong
                                  | Es necesario contar con la captura de BALANCE FINANCIERO y ESTADO DE RESULTADOS para generar FLUJO DE EFECTIVO.

                        .m-section__sub
                          .row.m-section__sub style="display: flex"
                            .col-xl-12.my-6
                              .tab-content.col-xl-12.mb-30
                                .m-portlet
                                  .m-portlet__body
                                    h3.m-portlet__head-text
                                      | Entradas y Salidas
                                    .m-section__content
                                      - if @cash_flow.present?
                                        table.table
                                          thead.thead-default.thead-custom
                                            tr style="text-align: center;"
                                              th
                                                | Fecha
                                              th
                                                | Entrada
                                              th
                                                | Salida
                                              th
                                                | Moneda
                                          tbody
                                            - @cash_flow.reverse_each do |cash_flow|
                                              tr style="text-align: center;"
                                                td
                                                  = cash_flow[0].first
                                                td
                                                  = number_to_currency(cash_flow[1].try(:first)['amount'].present? ? cash_flow[1].try(:first)['amount'] : 0)
                                                td
                                                  - if cash_flow[1].count > 1
                                                    = number_to_currency(cash_flow[1].try(:last)['amount'].present? ? cash_flow[1].try(:last)['amount'] : 0)
                                                  - else
                                                    = number_to_currency 0
                                                td
                                                  = cash_flow[1].try(:first)['currency']
                                      - else
                                        .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                                          .m-alert__icon
                                            i.flaticon-exclamation-1
                                            span
                                          .m-alert__text
                                            strong
                                              | Aún no se le han asignado flujo de efectivo a la compañía.






                        .col-md-12.mt-30
                          .btns-card.full-h
                            .subtitle-icon.d-flex.justify-content-center.align-items-center
                              i.fa.fa-comment.fa-lg.m--font-primary
                            .d-flex.flex-column.justify-content-between
                              h5.h5.subtitle = 'Comentarios'
                              .max-h-card.m-widget3
                                - if @cf_comments.length > 0
                                  - @cf_comments.each do |comment|
                                    .m-widget3__item
                                      .m-widget3__header
                                        .m-widget3__info
                                          span.m-widget3__username
                                            = User.where(id: comment.user_id).try(:first).full_name
                                          br
                                          span.m-widget3__time
                                            = comment.created_at.strftime('%d/%m/%Y,  %I:%M%p')

                                      .m-widget3__body
                                        p.m-widget3__text
                                          = comment.comment
                                - else
                                  .m-widget3__item
                                    .m-widget3__body
                                      p.m-widget3__text
                                        .text-center
                                          | Aún no hay comentarios.
                              a.btn.btn-block.btn-info href="/comments/#{@company.id}/cash_flow" target="_blank"
                                | IR A COMENTARIOS

#m_modal_1.modal.fade aria-hidden="true" aria-labelledby="exampleModalLabel" role="dialog" tabindex="-1"
  .modal-dialog role="document" style="margin-top: 0%;"
    .modal-content
      .modal-header
        h5#titleModalLabel.modal-title
        button.close aria-label="Close" data-dismiss="modal" type="button"
          span aria-hidden="true"
            | \&times;
      = form_for current_user, url: validate_company_path, method: 'PUT', class: 'class="m-form m-form--fit m-form--label-align-right m-form--group-seperator-dashed' do |f|
        .modal-body
          input type="hidden" name="id" id="companyId" value=""
          input type="hidden" name="approved" id="companyApproved" value=""
          p#textModal
            | Se va a validar la compañía para que pueda acceder al sistema.
        .modal-footer
          button.btn.btn-secondary data-dismiss="modal" type="button"
            | Cerrar
          button#idBtn.btn.btn-success type="submit"
            | Validar

#m_modal_capture_status.modal.fade aria-hidden="true" aria-labelledby="exampleModalLabel" role="dialog" tabindex="-1"
  .modal-dialog role="document" style="margin-top: 0%;"
    .modal-content
      .modal-header
        h5#titleModalLabel.modal-title
        button.close aria-label="Close" data-dismiss="modal" type="button"
          span aria-hidden="true"
            | \&times;
      = form_for current_user, url: change_capture_status_path, method: 'PUT', class: 'class="m-form m-form--fit m-form--label-align-right m-form--group-seperator-dashed' do |f|
        .modal-body
          input type="hidden" name="id" id="companyId" value=""
          input type="hidden" name="capture_type" id="captureType" value=""
          p#textModal
            | Se va a habilitar esta captura para la compañía.
        .modal-footer
          button.btn.btn-secondary data-dismiss="modal" type="button"
            | Cerrar
          button#idBtn.btn.btn-success type="submit"
            | Aceptar

#m_modal_periods.modal.fade aria-hidden="true" aria-labelledby="exampleModalLabel" role="dialog" tabindex="-1"
  .modal-dialog role="document" style="margin-top: 0%;"
    .modal-content
      .modal-header
        h5#titleModalLabel.modal-title
        button.close aria-label="Close" data-dismiss="modal" type="button"
          span aria-hidden="true"
            | \&times;
      = form_for current_user, url: assign_calendar_path, method: 'PUT', class: 'class="m-form m-form--fit m-form--label-align-right m-form--group-seperator-dashed' do |f|
        .modal-body
          p#textModal
            | Asignar
          .col-xl-12 style="display: grid;"
            input type="hidden" name="company_id" id="companyId" value=""
            /input type="hidden" name="assign_to" id="companyAssignTo" value=""
            select.select2.select2-container.select2-multiple#company_balance_calendars multiple="multiple" name="periods[]"
              = @periods.each do |period|
                option value="#{period.id}"= period.period_name
        .modal-footer
          button.btn.btn-secondary data-dismiss="modal" type="button"
            | Cerrar
          button#idBtn.btn.btn-success type="submit"
            | Guardar


#m_modal_request_details.modal.fade aria-hidden="true" aria-labelledby="exampleModalLabel" role="dialog" tabindex="-1"
  .modal-dialog role="document" style="margin-top: 0%;"
    .modal-content
      .modal-header
        h5#titleModalLabel.modal-title
        button.close aria-label="Close" data-dismiss="modal" type="button"
          span aria-hidden="true"
            | \&times;
      = form_for current_user, url: assign_details_to_request_path, method: 'PUT', class: 'class="m-form m-form--fit m-form--label-align-right m-form--group-seperator-dashed' do |f|
        .modal-body
          input type="hidden" name="request_id" id="requestId" value=""
          input type="hidden" name="company_id" id="companyId" value=""
          input type="hidden" id="request_analyst_id" name="request[analyst_id]"  value=""
          input type="hidden" id="request_hidden_file_id"
          .col-xl-12 style="display: grid;"
            - unless @user.role.key == 'credit_management'
              p#textModal
                | Asignar Analista
              = select("request", "analyst_id", User.where(role_id: Role.find_by(key: 'analyst').try(:id)).collect { |p| [p.full_name, p.id] }, {include_blank: 'Selecciona analista'}, {class: "form-control m-input", disabled: (current_user.god? or current_user.credit_management? or current_user.credit_area? or current_user.promotion_area?) ? false : true})

          - if @company.company_calendar_details.present? && @user.role.key != 'credit_management'
            .col-xl-12#input_credit_type style="display: none;"
              p.mt-20#textModal
                | Asignar Tipo de Crédito

              div style="display: grid;"
                = select("request", "factor_credit_id", FactorCredit.all.collect { |p| [p.name, p.id] }, {include_blank: 'Selecciona tipo de crédito'}, {class: "form-control m-input", onchange: 'validate_type_credit()'})
          - else
            input type="hidden" name="request[factor_credit_id]" id="request_hidden_factor_credit_id"
          .col-xl-12 id="#{current_user.super_user? ? '' : 'input_status_process'}"
            p.mt-20#textModal
              | Asignar Status del Proceso #{(!@cash_flow.present? || !@company.f_reasons_company.present?) ? ' / Es necesario calcular el flujo de efectivo y Razones financieras' : '' }
            div style="display: grid;"
              = select("request", "process_status_id", @process_status.collect { |p| [p.name, p.id] }, {include_blank: 'Selecciona una opción'}, {class: "form-control m-input", onchange: 'validate_type_credit()',disabled: (!@cash_flow.present? || !@company.f_reasons_company.present?)})
          .col-xl-12#file_null_id style="display: none"
            p.mt-20#textModal style="text-align: center; color: red"
              | Falta subir archivo a este analista
        .modal-footer
          button.btn.btn-secondary data-dismiss="modal" type="button"
            | Cerrar
          button#idBtnDetail.btn.btn-success type="submit"
            | Guardar

#m_modal_file_request.modal.fade aria-hidden="true" aria-labelledby="exampleModalLabel" role="dialog" tabindex="-1"
  .modal-dialog role="document" style="margin-top: 0%;"
    .modal-content
      .modal-header
        h5.modal-title
          | Adjuntar Estudio de Crédito
        button.close aria-label="Close" data-dismiss="modal" type="button"
          span aria-hidden="true"
            | \&times;
      = form_for current_user, url: assign_pdf_to_request_path, method: 'PUT', class: 'class="m-form m-form--fit m-form--label-align-right m-form--group-seperator-dashed', html: {multipart: true} do |f|
        .modal-body
          input type="hidden" name="request_id" id="requestIdFile" value=""
          .col-xl-12 style="display: grid;"
            = f.file_field :file_name, class: "custom-file-input", required: true, accept: "application/pdf"
            label.custom-file-label Elige un archivo...
            span.custom-file-control
        .modal-footer
          button.btn.btn-secondary data-dismiss="modal" type="button"
            | Cerrar
          button.btn.btn-success type="submit"
            | Guardar

#m_modal_financial_institutions.modal.fade aria-hidden="true" aria-labelledby="exampleModalLabel" role="dialog" tabindex="-1"
  .modal-dialog role="document" style="margin-top: 0%;"
    .modal-content
      .modal-header
        h5.modal-title
          = 'Instituciones financieras'
        button.close aria-label="Close" data-dismiss="modal" type="button"
          span aria-hidden="true"
            | \&times;
      .modal-body
        .col-xl-12 style="display: grid;"
          - @financial_inst.each do |fin_inst|
            .m-portlet.p-4
              .row
                .col-sm-6.d-flex.justify-content-between
                  span
                    strong.mr-2 = 'Institución'
                  span = fin_inst.institution
                .col-sm-6.d-flex.justify-content-between
                  span
                    strong.mr-2 = 'Tipo de Crédito'
                  span = CreditType.where(id: fin_inst.credit_type_id).first.try(:name)
              .row
                .col-sm-6.d-flex.justify-content-between
                  span
                    strong.mr-2 = 'Línea Autorizada'
                  span = fin_inst.authorized_line
                .col-sm-6.d-flex.justify-content-between
                  span
                    strong.mr-2 = 'Saldo'
                  span = fin_inst.balance
              .row
                .col-sm-6.d-flex.justify-content-between
                  span
                    strong.mr-2 = 'Tipo de contrato'
                  span = fin_inst.type_contract
                .col-sm-6.d-flex.justify-content-between
                  span
                    strong.mr-2 = 'Moneda'
                  span = fin_inst.coin
              .row
                .col-sm-6.d-flex.justify-content-between
                  span
                    strong.mr-2 = 'Garantía'
                  span = fin_inst.warranty
                .col-sm-6.d-flex.justify-content-between
                  span
                    strong.mr-2 = 'Tasa'
                  span = fin_inst.rate
              .row
                .col-sm-6.d-flex.justify-content-between
                  span
                    strong.mr-2 = 'Vencimiento'
                  span = fin_inst.expiration
                .col-sm-6.d-flex.justify-content-between
                  span
                    strong.mr-2 = 'Destíno'
                  span = fin_inst.destiny

      .modal-footer
        button.btn.btn-secondary data-dismiss="modal" type="button"
          | Cerrar

#modal_providers.modal.fade aria-hidden="true" aria-labelledby="exampleModalLabel" role="dialog" tabindex="-1"
  .modal-dialog role="document" style="margin-top: 0%;"
    .modal-content
      .modal-header
        h5.modal-title
          | Transacciones
        button.close aria-label="Close" data-dismiss="modal" type="button"
          span aria-hidden="true"
            | \&times;
      .modal-body
        .m-section__content
          select.orm-control.m-input.form-control-lg.upcase-txt prompt="true" id="selectProviders" onchange="getTransactionsForYearProviders(this)"
          .table-scrollable id="divTransactions"

      .modal-footer
        button.btn.btn-secondary data-dismiss="modal" type="button"
          | Cerrar
#modal_customers.modal.fade aria-hidden="true" aria-labelledby="exampleModaabel" role="dialog" tabindex="-1"
  .modal-dialog role="document" style="margin-top: 0%;"
    .modal-content
      .modal-header
        h5.modal-title
          | Transacciones
        button.close aria-label="Close" data-dismiss="modal" type="button"
          span aria-hidden="true"
            | \&times;
      .modal-body
        .m-section__content
          select.orm-control.m-input.form-control-lg.upcase-txt prompt="true" id="selectProvidersCustomers" onchange="getTransactionsForYearCustomers(this)"
          .table-scrollable id="divCustomersTransactions"

      .modal-footer
        button.btn.btn-secondary data-dismiss="modal" type="button"
          | Cerrar