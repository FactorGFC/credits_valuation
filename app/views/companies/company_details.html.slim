
.col-xl-12
  .d-flex.align-items-center
    .mr-auto.d-flex.align-items-center
      a.m-nav__link.m-nav__link--icon.mx-2.pb-2 href="/login" style="font-size: 20px;"
        i.fa.fa-chevron-circle-left
      h3.m-subheader__title.m-subheader__title--separator
        | Compañias

.col-xl-12.mt-20
  .portlet-profile.d-flex.justify-content-end
    .info-profile-container
      .icon-circle.d-flex.justify-content-end.align-items-center.px-5
        i.fa.fa-id-card.fa-4x style="position: relative;"
      .d-flex.flex-column.col-md-12.mb-2
        .col-md-12
          span.port-title = @company.name
          span = @company.rfc
      .d-flex.col-md-12
        .col-md-6
          span.port-subtitle = 'Dirección'
          span = @company.address
          span.port-subtitle = 'Estatus'
          span.status-pill class="#{render_status_by_class(@company.try(:status_company).try(:key))}"
            = @company.try(:status_company).present? ? @company.try(:status_company).try(:name): 'PENDIENTE DE REVISIÓN X FACTOR'
        .vl
        .col-md-6
          span.port-subtitle = 'Actividad Principal'
          span = @company.main_activity
          span.port-subtitle = 'Principales Productos/Servicios'
          - @company.main_product_list.each do |e|
            span.tag
              = "#{e}"
  .portlet-profile.d-flex
    .col-md-12.d-flex
      .col-md-7
        span.port-subtitle = 'INSTITUCIONES FINANCIERAS'
        button.btn.btn-primary.btn-block.my-2.open-modal1 data-target="#m_modal_financial_institutions" data-toggle="modal" type="button"
          = "Ver instituciones financieras"

        span.port-subtitle.mt-4 = 'COLABORADORES'
        ul.col-md-12.d-flex.justify-content-between.align-items-center.collab-list
          li.d-flex.flex-column.align-items-center.col-md-2
            span.d-flex.justify-content-center.align-items-center.quantity-circle = render_quantity_h @company.try(:number_collaborator).try(:operative)
            span.quantity-num
              strong = 'OPERATIVOS'
          li.d-flex.flex-column.align-items-center.col-md-2
            span.d-flex.justify-content-center.align-items-center.quantity-circle = render_quantity_h @company.try(:number_collaborator).try(:administrative)
            span.quantity-num
              strong = 'ADMINISTRATIVOS'
          li.d-flex.flex-column.align-items-center.col-md-2
            span.d-flex.justify-content-center.align-items-center.quantity-circle = render_quantity_h @company.try(:number_collaborator).try(:sales)
            span.quantity-num
              strong = 'VENTAS'
          li.d-flex.flex-column.align-items-center.col-md-2
            span.d-flex.justify-content-center.align-items-center.quantity-circle = render_quantity_h @company.try(:number_collaborator).try(:eventual)
            span.quantity-num
              strong = 'EVENTUAL'
          li.d-flex.flex-column.align-items-center.col-md-2
            span.d-flex.justify-content-center.align-items-center.quantity-circle = render_quantity_h @company.try(:number_collaborator).try(:unionized)
            span.quantity-num
              strong = 'SINDICALIZADOS'
        ul.d-flex.justify-content-center.collab-list
          h3
            strong = "TOTAL:  #{ @company.try(:number_collaborator).try(:number_collaborator).present?  ? @company.try(:number_collaborator).try(:total).to_s(:delimited) : 0 }"

      .col-md-5
        span.port-subtitle = 'ARCHIVOS'
        .d-flex.flex-column
          a.btn.btn-outline-accent.m-btn.m-btn--icon.m-btn--outline-2x.my-1 href="#{ENV['DOWNLOAD_FILES']}/#{@company.try(:company_file).try(:invoice_id_file)}/#{@company.try(:company_file).try(:name_id_file)}" target="_blank"
            span.d-flex.justify-content-between.align-items-center
              span
                | Identificación oficial
              i.fa.fa-file
          a.btn.btn-outline-accent.m-btn.m-btn--icon.m-btn--outline-2x.my-1 href="#{ENV['DOWNLOAD_FILES']}/#{@company.try(:company_file).try(:invoice_constancy)}/#{@company.try(:company_file).try(:name_constancy)}" target="_blank"
            span.d-flex.justify-content-between.align-items-center
              span
                | Constancia de Situacion fiscal
              i.fa.fa-file
          a.btn.btn-outline-accent.m-btn.m-btn--icon.m-btn--outline-2x.my-1 href="#{ENV['DOWNLOAD_FILES']}/#{@company.try(:company_file).try(:invoice_financial_statements_one)}/#{@company.try(:company_file).try(:name_financial_statements_one)}" target="_blank"
            span.d-flex.justify-content-between.align-items-center
              span
                | Estados Financieros (Cierre anual 1)
              i.fa.fa-file
          a.btn.btn-outline-accent.m-btn.m-btn--icon.m-btn--outline-2x.my-1 href="#{ENV['DOWNLOAD_FILES']}/#{@company.try(:company_file).try(:invoice_financial_statements_two)}/#{@company.try(:company_file).try(:name_financial_statements_two)}" target="_blank"
            span.d-flex.justify-content-between.align-items-center
              span
                | Estados Financieros (Cierre anual 2)
              i.fa.fa-file
          a.btn.btn-outline-accent.m-btn.m-btn--icon.m-btn--outline-2x.my-1 href="#{ENV['DOWNLOAD_FILES']}/#{@company.try(:company_file).try(:invoice_financial_statements_parcial)}/#{@company.try(:company_file).try(:name_financial_statements_parcial)}" target="_blank"
            span.d-flex.justify-content-between.align-items-center
              span
                | Estados Financieros (Cierre parcial)
              i.fa.fa-file

  .m-portlet
    .m-portlet__head
      .m-portlet__head-caption
        .m-portlet__head-title
          h3.m-portlet__head-text
            | Configuraciones

    .m-portlet__body
      .m-section.mb-0
        .d-inline-flex.col-md-12
          .col-md-3
            .btns-card
              .subtitle-icon.d-flex.justify-content-center.align-items-center
                i.fa.fa-building.fa-lg.m--font-primary
              h5.h5.subtitle = 'Detalles de solicitud'
              - if @company.status_company_id.eql?(StatusCompany.where(key: 'aprobada').first.id)
                button.btn.btn-outline-primary.m-btn.m-btn--outline-2x.btn-block.my-2.open-modal1 data-target="#m_modal_1" data-toggle="modal" type="button" data-name="#{@company.name}" data-rfc="#{@company.rfc}" data-id="#{@company.id}" data-approved="true"
                  = "Estatus: Aprobada"
              - elsif @company.status_company_id == StatusCompany.where(key: 'pendiente').first.id
                button.btn.btn-outline-primary.m-btn.m-btn--outline-2x.btn-block.my-2.open-modal1 data-target="#m_modal_1" data-toggle="modal" type="button" data-name="#{@company.name}" data-rfc="#{@company.rfc}" data-id="#{@company.id}" data-approved="true"
                  i.fab.fa.fa-check-circle-o
                  = "Estatus:  Aprobar"
                button.btn.btn-outline-primary.m-btn.m-btn--outline-2x.btn-block.my-2.open-modal1 data-target="#m_modal_1" data-toggle="modal" type="button" data-name="#{@company.name}" data-rfc="#{@company.rfc}" data-id="#{@company.id}" data-approved="false"
                  i.fab.fa.fa-times-circle
                  = "Estatus:  Rechazar"

              button.btn.btn-outline-primary.m-btn.m-btn--outline-2x.btn-block.my-2.open-modal1 data-target="#m_modal_analyst" data-toggle="modal" type="button" data-id="#{@company.id}" data-calendars="#{@company.company_calendar_details.where(assign_to: 'income_statement').pluck(:calendar_id)}" data-approved="true"
                = "Más detalles (Analista, tipo, ...)"

          .col-md-3
            .btns-card
              .subtitle-icon.d-flex.justify-content-center.align-items-center
                i.fa.fa-calendar.fa-lg.m--font-primary
              h5.h5.subtitle = 'Asignación de periodos'
              button.btn.btn-outline-primary.m-btn.m-btn--outline-2x.btn-block.my-2.open-modal1 data-target="#m_modal_balance" data-toggle="modal" type="button" data-id="#{@company.id}" data-assignto="balance_sheet" data-calendars="#{@company.company_calendar_details.where(assign_to: 'balance_sheet').pluck(:calendar_id)}" data-approved="true"
                = "Balance Financiero"
              button.btn.btn-outline-primary.m-btn.m-btn--outline-2x.btn-block.my-2.open-modal1 data-target="#m_modal_income" data-toggle="modal" type="button" data-id="#{@company.id}" data-assignto="income_statement" data-calendars="#{@company.company_calendar_details.where(assign_to: 'income_statement').pluck(:calendar_id)}" data-approved="true"
                = "Estado Resultados"

          .col-md-3
            .btns-card
              .subtitle-icon.d-flex.justify-content-center.align-items-center
                i.fa.fa-sync.fa-lg.m--font-primary
              h5.h5.subtitle = 'Información faltante de compañia'
              - if @company.try(:info_company).present? and @company.try(:income_statment).present? and @company.try(:balance_sheet).present? and @company.try(:credit_bureaus).last.try(:bureau_info).present? and @company.try(:credit_bureaus).last.try(:bureau_report).present?
                span.text-center
                  | Todo en orden.
              - else
                - unless @company.try(:info_company).present?
                  = link_to sat_info_company_path(@company.id), method: :put, class: 'btn btn-outline-primary m-btn m-btn--outline-2x btn-block my-2' do
                    = "Información del SAT"
                - unless @company.try(:income_statment).present?
                  = link_to sat_income_statement_path(@company.id), method: :put, class: 'btn btn-outline-primary m-btn m-btn--outline-2x btn-block my-2' do
                    = "Estado de resultados"

                - unless @company.try(:balance_sheet).present?
                  = link_to sat_balance_sheet_path(@company.id), method: :put, class: 'btn btn-outline-primary m-btn m-btn--outline-2x btn-block my-2' do
                    = "Hoja de balance"
                - unless @company.try(:credit_bureaus).last.try(:bureau_info).present?
                  = link_to credit_bureau_info_path(@company.id), method: :put, class: 'btn btn-outline-primary m-btn m-btn--outline-2x btn-block my-2' do
                    = "Info. Buró de crédito"
                - unless @company.try(:credit_bureaus).last.try(:bureau_report).present?
                  = link_to credit_bureau_report_path(@company.id), method: :put, class: 'btn btn-outline-primary m-btn m-btn--outline-2x btn-block my-2' do
                    = "Reporte del buro de crédito"

          .col-md-3
            .btns-card
              .subtitle-icon.d-flex.justify-content-center.align-items-center
                i.fa.fa-comment.fa-lg.m--font-primary
              h5.h5.subtitle = 'Comentarios'
              .comments-card.m-widget3
                - if @request_comments.length > 0
                  - @request_comments.each do |comment|
                    .m-widget3__item
                      .m-widget3__header
                        .m-widget3__info
                          span.m-widget3__username
                            = User.where(id: comment.user_id).try(:first).full_name
                            br
                            span.m--font-primary
                              = "#{comment.process_status.name}"
                          br
                          span.m-widget3__time
                            = comment.created_at.strftime('%d/%m/%Y,  %I:%M%p')

                      .m-widget3__body
                        p.m-widget3__text
                          = comment.comment
                - else
                  .m-widget3__item
                    .m-widget3__body
                      p.m-widget3__text
                        .text-center
                          | Aún no hay comentarios.
              a.btn.btn-block.btn-info href="/request_comments/#{@company.id}"
                | IR A COMENTARIOS

  .m-portlet
    .m-portlet__head
      .m-portlet__head-caption
        .m-portlet__head-title
          h3.m-portlet__head-text
            | Tablas de información
    .m-portlet__body
      .m-section.mb-0
        .col-xl-12.my-5
          ul.nav.select_form_switch role="tablist"
            li.nav-item.active
              a.nav-link data-toggle="tab" href="#balance_sheet"
                | BALANCE FINANCIERO
            li.nav-item
              a.nav-link data-toggle="tab" href="#income_statement"
                | ESTADO DE RESULTADOS
            li.nav-item
              a.nav-link data-toggle="tab" href="#credit_bureau"
                | BURO DE CRÉDITO
            li.nav-item
              a.nav-link data-toggle="tab" href="#info_sat"
                | INFORMACIÓN DEL SAT
            li.slide
        .tab-content.col-xl-12.mb-30
          .tab-pane.active id="balance_sheet"
            .col-xl-12
              .m-portlet
                .m-portlet__body
                  .m-section.mb-0
                    .m-section__content.table-responsive.text-center
                    - if @company.company_calendar_details.where(assign_to: 'balance_sheet').present?
                      #wrapper
                        #checkbox_div
                          p Mostrar/Ocultar años
                          .d-flex style="justify-content: center; margin: 10px;"
                            - @calendar_periods_bs.each do |y|
                              .ck-button
                                label
                                  input onchange="hide_show_table(this.id);" type="checkbox" value="hide" checked="true" id="col-#{y.id}"
                                  span = y.calendar.period_name

                      table.table.table-bordered.input-focusable-table
                        tr
                          th
                          - @calendar_periods_bs.each do |y|
                            th id="col-#{y.id}_head"
                              = y.calendar.period_name
                        tr
                          td style=" font-weight: 800; font-size: 16px;"
                            span.text-left = 'Activo circulante'
                          - @calendar_periods_bs.each do |y|
                            td class="full-input col-#{y.id}"
                        tr
                          td style="font-weight: 600" rowspan="2"
                            span.text-left = 'Caja / Inversiones'
                          - @calendar_periods_bs.each do |y|
                            td class="full-input col-#{y.id}"
                              - if y.calendar.period_type == 'anual'
                                div class=['percentage-badge', calculate_percentage('balance_sheet', @company.id, y.calendar, 1)[1]]
                                  = "#{calculate_percentage('balance_sheet', @company.id, y.calendar, 1)[0]} %"
                                span.text-table-concept = 'SAT'
                                br
                                span = company_balance_sheet_value(@company.id, y.calendar, 1)
                        tr
                          - @calendar_periods_bs.each do |y|
                            td class="full-input col-#{y.id}"
                              span.text-table-concept = 'CAPTURA'
                              br
                              span = balance_calendar_detail_value(@company.id, y.calendar, 1)


                        tr
                          td style="font-weight: 600" rowspan="2"
                            span.text-left = 'Clientes'
                          - @calendar_periods_bs.each do |y|
                            td class="full-input col-#{y.id}"
                              - if y.calendar.period_type == 'anual'
                                div class=['percentage-badge', calculate_percentage('balance_sheet', @company.id, y.calendar, 2)[1]]
                                  = "#{calculate_percentage('balance_sheet', @company.id, y.calendar, 2)[0]} %"
                                span.text-table-concept = 'SAT'
                                br
                                span = company_balance_sheet_value(@company.id, y.calendar, 2)
                        tr
                          - @calendar_periods_bs.each do |y|
                            td class="full-input col-#{y.id}"
                              span.text-table-concept = 'CAPTURA'
                              br
                              span = balance_calendar_detail_value(@company.id, y.calendar, 2)

                        tr
                          td style="font-weight: 600" rowspan="2"
                            span.text-left = 'Inventarios'
                          - @calendar_periods_bs.each do |y|
                            td class="full-input col-#{y.id}"
                              - if y.calendar.period_type == 'anual'
                                div class=['percentage-badge', calculate_percentage('balance_sheet', @company.id, y.calendar, 3)[1]]
                                  = "#{calculate_percentage('balance_sheet', @company.id, y.calendar, 3)[0]} %"
                                span.text-table-concept = 'SAT'
                                br
                                span = company_balance_sheet_value(@company.id, y.calendar, 3)
                        tr
                          - @calendar_periods_bs.each do |y|
                            td class="full-input col-#{y.id}"
                              span.text-table-concept = 'CAPTURA'
                              br
                              span = balance_calendar_detail_value(@company.id, y.calendar, 3)
                        tr
                          td style="font-weight: 600" rowspan="2"
                            span.text-left = 'Otros activos circulantes'
                          - @calendar_periods_bs.each do |y|
                            td class="full-input col-#{y.id}"
                              - if y.calendar.period_type == 'anual'
                                div class=['percentage-badge', calculate_percentage('balance_sheet', @company.id, y.calendar, 4)[1]]
                                  = "#{calculate_percentage('balance_sheet', @company.id, y.calendar, 4)[0]} %"
                                span.text-table-concept = 'SAT'
                                br
                                span = company_balance_sheet_value(@company.id, y.calendar, 4)
                        tr
                          - @calendar_periods_bs.each do |y|
                            td class="full-input col-#{y.id}"
                              span.text-table-concept = 'CAPTURA'
                              br
                              span = balance_calendar_detail_value(@company.id, y.calendar, 4)

                        tr
                          td style=" font-weight: 800; font-size: 18px"
                            span.text-left = 'Activo fijo'
                          - @calendar_periods_bs.each do |y|
                            td class="full-input col-#{y.id}"
                        tr
                          td style="font-weight: 600" rowspan="2"
                            span.text-left = 'Terrenos y Construcciones'
                          - @calendar_periods_bs.each do |y|
                            td class="full-input col-#{y.id}"
                              - if y.calendar.period_type == 'anual'
                                div class=['percentage-badge', calculate_percentage('balance_sheet', @company.id, y.calendar, 5)[1]]
                                  = "#{calculate_percentage('balance_sheet', @company.id, y.calendar, 5)[0]} %"
                                span.text-table-concept = 'SAT'
                                br
                                span = company_balance_sheet_value(@company.id, y.calendar, 5)
                        tr
                          - @calendar_periods_bs.each do |y|
                            td class="full-input col-#{y.id}"
                              span.text-table-concept = 'CAPTURA'
                              br
                              span = balance_calendar_detail_value(@company.id, y.calendar, 5)
                        tr
                          td style="font-weight: 600" rowspan="2"
                            span.text-left = 'Maquinaria y equipo'
                          - @calendar_periods_bs.each do |y|
                            td class="full-input col-#{y.id}"
                              - if y.calendar.period_type == 'anual'
                                div class=['percentage-badge', calculate_percentage('balance_sheet', @company.id, y.calendar, 6)[1]]
                                  = "#{calculate_percentage('balance_sheet', @company.id, y.calendar, 6)[0]} %"
                                span.text-table-concept = 'SAT'
                                br
                                span = company_balance_sheet_value(@company.id, y.calendar, 6)
                        tr
                          - @calendar_periods_bs.each do |y|
                            td class="full-input col-#{y.id}"
                              span.text-table-concept = 'CAPTURA'
                              br
                              span = balance_calendar_detail_value(@company.id, y.calendar, 6)
                        tr
                          td style="font-weight: 600" rowspan="2"
                            span.text-left = 'Depreciación acumulada'
                          - @calendar_periods_bs.each do |y|
                            td class="full-input col-#{y.id}"
                              - if y.calendar.period_type == 'anual'
                                div class=['percentage-badge', calculate_percentage('balance_sheet', @company.id, y.calendar, 7)[1]]
                                  = "#{calculate_percentage('balance_sheet', @company.id, y.calendar, 7)[0]} %"
                                span.text-table-concept = 'SAT'
                                br
                                span = company_balance_sheet_value(@company.id, y.calendar, 7)
                        tr
                          - @calendar_periods_bs.each do |y|
                            td class="full-input col-#{y.id}"
                              span.text-table-concept = 'CAPTURA'
                              br
                              span = balance_calendar_detail_value(@company.id, y.calendar, 7)
                        tr
                          td style="font-weight: 600" rowspan="2"
                            span.text-left = 'Otros activos fijos'
                          - @calendar_periods_bs.each do |y|
                            td class="full-input col-#{y.id}"
                              - if y.calendar.period_type == 'anual'
                                div class=['percentage-badge', calculate_percentage('balance_sheet', @company.id, y.calendar, 8)[1]]
                                  = "#{calculate_percentage('balance_sheet', @company.id, y.calendar, 8)[0]} %"
                                span.text-table-concept = 'SAT'
                                br
                                span = company_balance_sheet_value(@company.id, y.calendar, 8)
                        tr
                          - @calendar_periods_bs.each do |y|
                            td class="full-input col-#{y.id}"
                              span.text-table-concept = 'CAPTURA'
                              br
                              span = balance_calendar_detail_value(@company.id, y.calendar, 8)
                        tr
                          td style="font-weight: 600" rowspan="2"
                            span.text-left = 'Cargos y gastos diferidos'
                          - @calendar_periods_bs.each do |y|
                            td class="full-input col-#{y.id}"
                              - if y.calendar.period_type == 'anual'
                                div class=['percentage-badge', calculate_percentage('balance_sheet', @company.id, y.calendar, 9)[1]]
                                  = "#{calculate_percentage('balance_sheet', @company.id, y.calendar, 9)[0]} %"
                                span.text-table-concept = 'SAT'
                                br
                                span = company_balance_sheet_value(@company.id, y.calendar, 9)
                        tr
                          - @calendar_periods_bs.each do |y|
                            td class="full-input col-#{y.id}"
                              span.text-table-concept = 'CAPTURA'
                              br
                              span = balance_calendar_detail_value(@company.id, y.calendar, 9)

                        tr
                          td style=" font-weight: 800; font-size: 18px"
                            span.text-left = 'Pasivo total'
                          - @calendar_periods_bs.each do |y|
                            td class="full-input col-#{y.id}"
                        tr
                          td style="font-weight: 600" rowspan="2"
                            span.text-left = 'Proveedores'
                          - @calendar_periods_bs.each do |y|
                            td class="full-input col-#{y.id}"
                              - if y.calendar.period_type == 'anual'
                                div class=['percentage-badge', calculate_percentage('balance_sheet', @company.id, y.calendar, 10)[1]]
                                  = "#{calculate_percentage('balance_sheet', @company.id, y.calendar, 10)[0]} %"
                                span.text-table-concept = 'SAT'
                                br
                                span = company_balance_sheet_value(@company.id, y.calendar, 10)
                        tr
                          - @calendar_periods_bs.each do |y|
                            td class="full-input col-#{y.id}"
                              span.text-table-concept = 'CAPTURA'
                              br
                              span = balance_calendar_detail_value(@company.id, y.calendar, 10)
                        tr
                          td style="font-weight: 600" rowspan="2"
                            span.text-left = 'Contribuciones por pagar'
                          - @calendar_periods_bs.each do |y|
                            td class="full-input col-#{y.id}"
                              - if y.calendar.period_type == 'anual'
                                div class=['percentage-badge', calculate_percentage('balance_sheet', @company.id, y.calendar, 11)[1]]
                                  = "#{calculate_percentage('balance_sheet', @company.id, y.calendar, 11)[0]} %"
                                span.text-table-concept = 'SAT'
                                br
                                span = company_balance_sheet_value(@company.id, y.calendar, 11)
                        tr
                          - @calendar_periods_bs.each do |y|
                            td class="full-input col-#{y.id}"
                              span.text-table-concept = 'CAPTURA'
                              br
                              span = balance_calendar_detail_value(@company.id, y.calendar, 11)
                        tr
                          td style="font-weight: 600" rowspan="2"
                            span.text-left = 'Anticipo de clientes'
                          - @calendar_periods_bs.each do |y|
                            td class="full-input col-#{y.id}"
                              - if y.calendar.period_type == 'anual'
                                div class=['percentage-badge', calculate_percentage('balance_sheet', @company.id, y.calendar, 12)[1]]
                                  = "#{calculate_percentage('balance_sheet', @company.id, y.calendar, 12)[0]} %"
                                span.text-table-concept = 'SAT'
                                br
                                span = company_balance_sheet_value(@company.id, y.calendar, 12)
                        tr
                          - @calendar_periods_bs.each do |y|
                            td class="full-input col-#{y.id}"
                              span.text-table-concept = 'CAPTURA'
                              br
                              span = balance_calendar_detail_value(@company.id, y.calendar, 12)
                        tr
                          td style="font-weight: 600" rowspan="2"
                            span.text-left = 'Otros pasivos'
                          - @calendar_periods_bs.each do |y|
                            td class="full-input col-#{y.id}"
                              - if y.calendar.period_type == 'anual'
                                div class=['percentage-badge', calculate_percentage('balance_sheet', @company.id, y.calendar, 13)[1]]
                                  = "#{calculate_percentage('balance_sheet', @company.id, y.calendar, 13)[0]} %"
                                span.text-table-concept = 'SAT'
                                br
                                span = company_balance_sheet_value(@company.id, y.calendar, 13)
                        tr
                          - @calendar_periods_bs.each do |y|
                            td class="full-input col-#{y.id}"
                              span.text-table-concept = 'CAPTURA'
                              br
                              span = balance_calendar_detail_value(@company.id, y.calendar, 13)

                        tr
                          td style=" font-weight: 800; font-size: 18px"
                            span.text-left = 'Capital Total'
                          - @calendar_periods_bs.each do |y|
                            td class="full-input col-#{y.id}"
                        tr
                          td style="font-weight: 600" rowspan="2"
                            span.text-left = 'Capital social'
                          - @calendar_periods_bs.each do |y|
                            td class="full-input col-#{y.id}"
                              - if y.calendar.period_type == 'anual'
                                div class=['percentage-badge', calculate_percentage('balance_sheet', @company.id, y.calendar, 14)[1]]
                                  = "#{calculate_percentage('balance_sheet', @company.id, y.calendar, 14)[0]} %"
                                span.text-table-concept = 'SAT'
                                br
                                span = company_balance_sheet_value(@company.id, y.calendar, 14)
                        tr
                          - @calendar_periods_bs.each do |y|
                            td class="full-input col-#{y.id}"
                              span.text-table-concept = 'CAPTURA'
                              br
                              span = balance_calendar_detail_value(@company.id, y.calendar, 14)
                        tr
                          td style="font-weight: 600" rowspan="2"
                            span.text-left = 'Utilidad/Perdida acumulada'
                          - @calendar_periods_bs.each do |y|
                            td class="full-input col-#{y.id}"
                              - if y.calendar.period_type == 'anual'
                                div class=['percentage-badge', calculate_percentage('balance_sheet', @company.id, y.calendar, 15)[1]]
                                  = "#{calculate_percentage('balance_sheet', @company.id, y.calendar, 15)[0]} %"
                                span.text-table-concept = 'SAT'
                                br
                                span = company_balance_sheet_value(@company.id, y.calendar, 15)
                        tr
                          - @calendar_periods_bs.each do |y|
                            td class="full-input col-#{y.id}"
                              span.text-table-concept = 'CAPTURA'
                              br
                              span = balance_calendar_detail_value(@company.id, y.calendar, 15)
                        tr
                          td style="font-weight: 600" rowspan="2"
                            span.text-left = 'Utilidad/Perdida ejercicio'
                          - @calendar_periods_bs.each do |y|
                            td class="full-input col-#{y.id}"
                              - if y.calendar.period_type == 'anual'
                                div class=['percentage-badge', calculate_percentage('balance_sheet', @company.id, y.calendar, 16)[1]]
                                  = "#{calculate_percentage('balance_sheet', @company.id, y.calendar, 16)[0]} %"
                                span.text-table-concept = 'SAT'
                                br
                                span = company_balance_sheet_value(@company.id, y.calendar, 16)
                        tr
                          - @calendar_periods_bs.each do |y|
                            td class="full-input col-#{y.id}"
                              span.text-table-concept = 'CAPTURA'
                              br
                              span = balance_calendar_detail_value(@company.id, y.calendar, 16)
                        tr
                          td style="font-weight: 600" rowspan="2"
                            span.text-left = 'Otras cuentas de capital'
                          - @calendar_periods_bs.each do |y|
                            td class="full-input col-#{y.id}"
                              - if y.calendar.period_type == 'anual'
                                div class=['percentage-badge', calculate_percentage('balance_sheet', @company.id, y.calendar, 17)[1]]
                                  = "#{calculate_percentage('balance_sheet', @company.id, y.calendar, 17)[0]} %"
                                span.text-table-concept = 'SAT'
                                br
                                span = company_balance_sheet_value(@company.id, y.calendar, 17)
                        tr
                          - @calendar_periods_bs.each do |y|
                            td class="full-input col-#{y.id}"
                              span.text-table-concept = 'CAPTURA'
                              br
                              span = balance_calendar_detail_value(@company.id, y.calendar, 17)
                    - else
                      .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                        .m-alert__icon
                          i.flaticon-exclamation-1
                          span
                        .m-alert__text
                          strong
                            | Aún no se le han asignado fechas para captura.


          .tab-pane id="income_statement"
            .col-xl-12
              .m-portlet
                .m-portlet__body
                  .m-section.mb-0
                    .m-section__content.table-responsive.text-center
                    - if @company.company_calendar_details.where(assign_to: 'income_statement').present?
                      #wrapper
                        #checkbox_div
                          p Mostrar/Ocultar años
                          .d-flex style="justify-content: center; margin: 10px;"
                            - @calendar_periods_is.each do |y|
                              .ck-button
                                label
                                  input onchange="hide_show_table(this.id);" type="checkbox" value="hide" checked="true" id="col-#{y.id}"
                                  span = y.calendar.period_name

                      table.table.table-bordered.input-focusable-table
                        tr
                          th
                          - @calendar_periods_is.each do |y|
                            th id="col-#{y.id}_head"
                              = y.calendar.period_name
                        tr
                          td style=" font-weight: 800; font-size: 18px" rowspan="2"
                            span.text-left = 'Ingresos'
                          - @calendar_periods_is.each do |y|
                            td class="full-input col-#{y.id}"
                              - if y.calendar.period_type == 'anual'
                                div class=['percentage-badge', calculate_percentage('income_statement', @company.id, y.calendar, 1)[1]]
                                  = "#{calculate_percentage('income_statement', @company.id, y.calendar, 1)[0]} %"
                                span.text-table-concept  = 'SAT'
                                br
                                span  = company_income_stat_value(@company.id, y.calendar, 1)
                        tr
                          - @calendar_periods_is.each do |y|
                            td class="full-input col-#{y.id}"
                              span.text-table-concept = 'CAPTURA'
                              br
                              span = income_calendar_detail_value(@company.id, y.calendar, 1)
                        tr
                          td style=" font-weight: 800; font-size: 18px" rowspan="2"
                            span.text-left = 'Costo de ventas'
                          - @calendar_periods_is.each do |y|
                            td class="full-input col-#{y.id}"
                              - if y.calendar.period_type == 'anual'
                                div class=['percentage-badge', calculate_percentage('income_statement', @company.id, y.calendar, 2)[1]]
                                  = "#{calculate_percentage('income_statement', @company.id, y.calendar, 2)[0]} %"
                                span.text-table-concept  = 'SAT'
                                br
                                span  = company_income_stat_value(@company.id, y.calendar, 2)
                        tr
                          - @calendar_periods_is.each do |y|
                            td class="full-input col-#{y.id}"
                              span.text-table-concept = 'CAPTURA'
                              br
                              span = income_calendar_detail_value(@company.id, y.calendar, 2)

                        tr
                          td style=" font-weight: 800; font-size: 18px" rowspan="2"
                            span.text-left = 'Utilidad Bruta'
                          - @calendar_periods_is.each do |y|
                            td class="full-input col-#{y.id}"
                              - if y.calendar.period_type == 'anual'
                                div class=['percentage-badge', calculate_percentage('income_statement', @company.id, y.calendar, 3)[1]]
                                  = "#{calculate_percentage('income_statement', @company.id, y.calendar, 2)[0]} %"
                                span.text-table-concept  = 'SAT'
                                br
                                span  = company_income_stat_value(@company.id, y.calendar, 3)
                        tr
                          - @calendar_periods_is.each do |y|
                            td class="full-input col-#{y.id}"
                              span.text-table-concept = 'CAPTURA'
                              br
                              span = income_calendar_detail_value(@company.id, y.calendar, 3)
                        tr
                          td style=" font-weight: 800; font-size: 18px" rowspan="2"
                            span.text-left = 'Gastos de operación'
                          - @calendar_periods_is.each do |y|
                            td class="full-input col-#{y.id}"
                              - if y.calendar.period_type == 'anual'
                                div class=['percentage-badge', calculate_percentage('income_statement', @company.id, y.calendar, 4)[1]]
                                  = "#{calculate_percentage('income_statement', @company.id, y.calendar, 4)[0]} %"
                                span.text-table-concept  = 'SAT'
                                br
                                span  = company_income_stat_value(@company.id, y.calendar, 4)
                              br
                              span  = company_income_stat_value(@company.id, y.calendar, 4)
                        tr
                          - @calendar_periods_is.each do |y|
                            td class="full-input col-#{y.id}"
                              span.text-table-concept = 'CAPTURA'
                              br
                              span = income_calendar_detail_value(@company.id, y.calendar, 4)
                        tr
                          td style=" font-weight: 800; font-size: 18px" rowspan="2"
                            span.text-left = 'Utilidad de operación'
                          - @calendar_periods_is.each do |y|
                            td class="full-input col-#{y.id}"
                              - if y.calendar.period_type == 'anual'
                                div class=['percentage-badge', calculate_percentage('income_statement', @company.id, y.calendar, 5)[1]]
                                  = "#{calculate_percentage('income_statement', @company.id, y.calendar, 5)[0]} %"
                                span.text-table-concept  = 'SAT'
                                br
                                span  = company_income_stat_value(@company.id, y.calendar, 5)
                        tr
                          - @calendar_periods_is.each do |y|
                            td class="full-input col-#{y.id}"
                              span.text-table-concept = 'CAPTURA'
                              br
                              span = income_calendar_detail_value(@company.id, y.calendar, 5)
                        tr
                          td style=" font-weight: 800; font-size: 18px" rowspan="2"
                            span.text-left = 'Resultado integral de financiamiento'
                          - @calendar_periods_is.each do |y|
                            td class="full-input col-#{y.id}"
                              - if y.calendar.period_type == 'anual'
                                div class=['percentage-badge', calculate_percentage('income_statement', @company.id, y.calendar, 6)[1]]
                                  = "#{calculate_percentage('income_statement', @company.id, y.calendar, 6)[0]} %"
                                span.text-table-concept  = 'SAT'
                                br
                                span  = company_income_stat_value(@company.id, y.calendar, 6)
                        tr
                          - @calendar_periods_is.each do |y|
                            td class="full-input col-#{y.id}"
                              span.text-table-concept = 'CAPTURA'
                              br
                              span = income_calendar_detail_value(@company.id, y.calendar, 6)
                        tr
                          td style=" font-weight: 800; font-size: 18px" rowspan="2"
                            span.text-left = 'Gasto financiero'
                          - @calendar_periods_is.each do |y|
                            td class="full-input col-#{y.id}"
                              - if y.calendar.period_type == 'anual'
                                div class=['percentage-badge', calculate_percentage('income_statement', @company.id, y.calendar, 7)[1]]
                                  = "#{calculate_percentage('income_statement', @company.id, y.calendar, 7)[0]} %"
                                span.text-table-concept  = 'SAT'
                                br
                                span  = company_income_stat_value(@company.id, y.calendar, 7)
                        tr
                          - @calendar_periods_is.each do |y|
                            td class="full-input col-#{y.id}"
                              span.text-table-concept = 'CAPTURA'
                              br
                              span = income_calendar_detail_value(@company.id, y.calendar, 7)
                        tr
                          td style=" font-weight: 800; font-size: 18px" rowspan="2"
                            span.text-left = 'Utilidad o perdida cambiaria'
                          - @calendar_periods_is.each do |y|
                            td class="full-input col-#{y.id}"
                              - if y.calendar.period_type == 'anual'
                                div class=['percentage-badge', calculate_percentage('income_statement', @company.id, y.calendar, 8)[1]]
                                  = "#{calculate_percentage('income_statement', @company.id, y.calendar, 8)[0]} %"
                                span.text-table-concept  = 'SAT'
                                br
                                span  = company_income_stat_value(@company.id, y.calendar, 8)
                        tr
                          - @calendar_periods_is.each do |y|
                            td class="full-input col-#{y.id}"
                              span.text-table-concept = 'CAPTURA'
                              br
                              span = income_calendar_detail_value(@company.id, y.calendar, 8)
                        tr
                          td style=" font-weight: 800; font-size: 18px" rowspan="2"
                            span.text-left = 'Otros gastos/ingresos'
                          - @calendar_periods_is.each do |y|
                            td class="full-input col-#{y.id}"
                              - if y.calendar.period_type == 'anual'
                                div class=['percentage-badge', calculate_percentage('income_statement', @company.id, y.calendar, 9)[1]]
                                  = "#{calculate_percentage('income_statement', @company.id, y.calendar, 9)[0]} %"
                                span.text-table-concept  = 'SAT'
                                br
                                span  = company_income_stat_value(@company.id, y.calendar, 9)
                        tr
                          - @calendar_periods_is.each do |y|
                            td class="full-input col-#{y.id}"
                              span.text-table-concept = 'CAPTURA'
                              br
                              span = income_calendar_detail_value(@company.id, y.calendar, 9)
                        tr
                          td style=" font-weight: 800; font-size: 18px" rowspan="2"
                            span.text-left = 'Utilidad antes de impuestos'
                          - @calendar_periods_is.each do |y|
                            td class="full-input col-#{y.id}"
                              - if y.calendar.period_type == 'anual'
                                div class=['percentage-badge', calculate_percentage('income_statement', @company.id, y.calendar, 10)[1]]
                                  = "#{calculate_percentage('income_statement', @company.id, y.calendar, 10)[0]} %"
                                span.text-table-concept  = 'SAT'
                                br
                                span  = company_income_stat_value(@company.id, y.calendar, 10)
                        tr
                          - @calendar_periods_is.each do |y|
                            td class="full-input col-#{y.id}"
                              span.text-table-concept = 'CAPTURA'
                              br
                              span = income_calendar_detail_value(@company.id, y.calendar, 10)
                        tr
                          td style=" font-weight: 800; font-size: 18px" rowspan="2"
                            span.text-left = 'ISR'
                          - @calendar_periods_is.each do |y|
                            td class="full-input col-#{y.id}"
                              - if y.calendar.period_type == 'anual'
                                div class=['percentage-badge', calculate_percentage('income_statement', @company.id, y.calendar, 11)[1]]
                                  = "#{calculate_percentage('income_statement', @company.id, y.calendar, 11)[0]} %"
                                span.text-table-concept  = 'SAT'
                                br
                                span  = company_income_stat_value(@company.id, y.calendar, 11)
                        tr
                          - @calendar_periods_is.each do |y|
                            td class="full-input col-#{y.id}"
                              span.text-table-concept = 'CAPTURA'
                              br
                              span = income_calendar_detail_value(@company.id, y.calendar, 11)
                        tr
                          td style=" font-weight: 800; font-size: 18px" rowspan="2"
                            span.text-left = 'PTU'
                          - @calendar_periods_is.each do |y|
                            td class="full-input col-#{y.id}"
                              - if y.calendar.period_type == 'anual'
                                div class=['percentage-badge', calculate_percentage('income_statement', @company.id, y.calendar, 12)[1]]
                                  = "#{calculate_percentage('income_statement', @company.id, y.calendar, 12)[0]} %"
                                span.text-table-concept  = 'SAT'
                                br
                                span  = company_income_stat_value(@company.id, y.calendar, 12)
                        tr
                          - @calendar_periods_is.each do |y|
                            td class="full-input col-#{y.id}"
                              span.text-table-concept = 'CAPTURA'
                              br
                              span = income_calendar_detail_value(@company.id, y.calendar, 12)
                        tr
                          td style=" font-weight: 800; font-size: 18px" rowspan="2"
                            span.text-left = 'Participacion subsidiarios'
                          - @calendar_periods_is.each do |y|
                            td class="full-input col-#{y.id}"
                              - if y.calendar.period_type == 'anual'
                                div class=['percentage-badge', calculate_percentage('income_statement', @company.id, y.calendar, 13)[1]]
                                  = "#{calculate_percentage('income_statement', @company.id, y.calendar, 13)[0]} %"
                                span.text-table-concept  = 'SAT'
                                br
                                span  = company_income_stat_value(@company.id, y.calendar, 13)
                        tr
                          - @calendar_periods_is.each do |y|
                            td class="full-input col-#{y.id}"
                              span.text-table-concept = 'CAPTURA'
                              br
                              span = income_calendar_detail_value(@company.id, y.calendar, 13)
                        tr
                          td style=" font-weight: 800; font-size: 18px" rowspan="2"
                            span.text-left = 'Utilidad neta'
                          - @calendar_periods_is.each do |y|
                            td class="full-input col-#{y.id}"
                              - if y.calendar.period_type == 'anual'
                                div class=['percentage-badge', calculate_percentage('income_statement', @company.id, y.calendar, 14)[1]]
                                  = "#{calculate_percentage('income_statement', @company.id, y.calendar, 14)[0]} %"
                                span.text-table-concept  = 'SAT'
                                br
                                span  = company_income_stat_value(@company.id, y.calendar, 14)
                        tr
                          - @calendar_periods_is.each do |y|
                            td class="full-input col-#{y.id}"
                              span.text-table-concept = 'CAPTURA'
                              br
                              span = income_calendar_detail_value(@company.id, y.calendar, 14)

                    - else
                      .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                          .m-alert__icon
                            i.flaticon-exclamation-1
                            span
                          .m-alert__text
                            strong
                              | Aún no se le han asignado fechas para captura.

          .tab-pane id="credit_bureau"
            .col-xl-12
              .m-portlet
                .m-portlet__body
                  .m-section.mb-0
                    - if !@credit_bureau.present?
                      .m-section__content
                        .no-results

                    - else
                    .m-section__sub
                      .row.m-section__sub style="display: flex"
                        .col-6.pl-0

                        .col-6.per-page-container
                    .m-section__content
                      - if @credit_bureau.present?
                        .m-demo data-code-html="true" data-code-js="false" data-code-preview="true"
                        .m-demo__preview
                          h3.m-portlet__head-text
                            | SCORE
                        .m-demo data-code-html="true" data-code-js="false" data-code-preview="true"
                          .m-demo__preview
                            .d-flex.flex-column.justify-content-center
                              .gauge-wrapper
                                .gauge.four.rischio style="--degres: #{calculate_degrees(@percentage)}deg;"
                                  .slice-colors
                                    .st.slice-item
                                    .st.slice-item
                                    .st.slice-item
                                    .st.slice-item
                                  .needle
                                  .gauge-center
                                    .number
                                      | 771
                                    .status-face
                                      = image_tag calculate_face(@percentage)

                              .d-inline-flex.justify-content-center
                                .d-flex.flex-column.justify-content-between.align-items-center.status-container
                                  span.text-center
                                    strong  = 'BAJA, MENOR A 550 PUNTOS'
                                  = image_tag 'face-bad.png'
                                .d-flex.flex-column.justify-content-between.align-items-center.status-container
                                  span.text-center
                                    strong = 'REGULAR, 551-650 PUNTOS'
                                  = image_tag 'face-med.png'
                                .d-flex.flex-column.justify-content-between.align-items-center.status-container
                                  span.text-center
                                    strong = 'BUENA 651- 750 PUNTOS'
                                  = image_tag 'face-nice.png'
                                .d-flex.flex-column.justify-content-between.align-items-center.status-container
                                  span.text-center
                                    strong = 'EXCELENTE MÁS DE 751 PUNTOS'
                                  = image_tag 'face-good.png'

                          .m-demo__preview
                            h3.m-portlet__head-text
                              | Datos Generales
                            .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                              - if @credit_bureau.bureau_report.present?
                                - if @credit_bureau.bureau_report['results'][1]['response'].present?
                                  .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                    strong
                                      | Nombre
                                  .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                    = @credit_bureau.bureau_report['results'][1]['response']['return']['Personas']['Persona'][0]['Nombre']['PrimerNombre'] + ' ' + @credit_bureau.bureau_report['results'][1]['response']['return']['Personas']['Persona'][0]['Nombre']['ApellidoPaterno'] + ' ' + @credit_bureau.bureau_report['results'][1]['response']['return']['Personas']['Persona'][0]['Nombre']['ApellidoMaterno']
                                  .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                    strong
                                      | R.F.C
                                  .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                    = @credit_bureau.bureau_report['results'][1]['response']['return']['Personas']['Persona'][0]['Nombre']['RFC']
                                  .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                    strong
                                      | Fecha de nacimiento
                                  .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                    = @credit_bureau.bureau_report['results'][1]['response']['return']['Personas']['Persona'][0]['Nombre']['FechaNacimiento']
                                - else
                                  .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                                    .m-alert__icon
                                      i.flaticon-exclamation-1
                                      span
                                    .m-alert__text
                                      strong
                                        | Aún no se encuentran datos generales.
                              - else
                                .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                                  .m-alert__icon
                                    i.flaticon-exclamation-1
                                    span
                                  .m-alert__text
                                    strong
                                      | Aún no se encuentran datos generales.
                        .m-demo data-code-html="true" data-code-js="false" data-code-preview="true"
                          .m-demo__preview
                            h3.m-portlet__head-text
                              | Domicilios registrados
                            - if @credit_bureau.bureau_report.present?
                              - if @credit_bureau['bureau_report']['results'][1]['response'].present?
                                - @credit_bureau['bureau_report']['results'][1]['response']['return']['Personas']['Persona'][0]['Domicilios']['Domicilio'].each do |address|
                                  .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                    .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                      strong
                                        | Calle y número
                                    .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                      = address['Direccion1']
                                    .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                      strong
                                        | Colonia
                                    .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                      = address['Direccion2']
                                    .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                      strong
                                        | Del / Mpio
                                    .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                      = address['DelegacionMunicipio']
                                  .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                    .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                      strong
                                        | Estado
                                    .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                      = address['Estado']
                                    .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                      strong
                                        | C.P
                                    .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                      = address['CP']
                                    .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                      strong
                                        | Teléfono
                                    .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                      = address['NumeroTelefono']
                                  br
                              - else
                                .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                  .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                                    .m-alert__icon
                                      i.flaticon-exclamation-1
                                      span
                                    .m-alert__text
                                      strong
                                        | Aún no se encuentran domicilios registrados.
                            - else
                              .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                                  .m-alert__icon
                                    i.flaticon-exclamation-1
                                    span
                                  .m-alert__text
                                    strong
                                      | Aún no se encuentran domicilios registrados.
                        .m-demo data-code-html="true" data-code-js="false" data-code-preview="true"
                          .m-demo__preview
                            h3.m-portlet__head-text
                              | Domicilio(s) de empleo(s) registrado(s)
                            - if @credit_bureau.bureau_report.present?
                              - if @credit_bureau['bureau_report']['results'][1]['response'].present?
                                - @credit_bureau['bureau_report']['results'][1]['response']['return']['Personas']['Persona'][0]['Empleos']['Empleo'].each do |job|
                                  .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                    .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                      strong
                                        | Compañia
                                    .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                      = job['NombreEmpresa']
                                    .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                      strong
                                        | Puesto
                                    .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                      = job['Cargo']
                                    .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                      strong
                                        | Salario
                                    .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                      = job['Salario']
                                  .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                    .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                      strong
                                        | Calle y número
                                    .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                      = job['Direccion1']
                                    .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                      strong
                                        | Colonia
                                    .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                      = job['Direccion2']
                                    .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                      strong
                                        | Del / Mpio
                                    .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                      = job['Direccion2']
                                  .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                    .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                      strong
                                        | Estado
                                    .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                      = job['Estado']
                                    .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                      strong
                                        | C.P
                                    .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                      = job['CP']
                                    .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                      strong
                                        | Teléfono
                                    .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                      = job['NumeroTelefono']
                                  br
                              - else
                                .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                  .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                                    .m-alert__icon
                                      i.flaticon-exclamation-1
                                      span
                                    .m-alert__text
                                      strong
                                        | Aún no se encuentran Domicilio(s) de empleo(s) registrado(s).
                            - else
                              .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                                  .m-alert__icon
                                    i.flaticon-exclamation-1
                                    span
                                  .m-alert__text
                                    strong
                                      | Aún no se encuentran Domicilio(s) de empleo(s) registrado(s).


                        .m-demo data-code-html="true" data-code-js="false" data-code-preview="true"
                          .m-demo__preview
                            h3.m-portlet__head-text
                              | Cuentas
                            - if @credit_bureau.bureau_report.present?
                              - if @credit_bureau['bureau_report']['results'][1]['response'].present?
                                - @credit_bureau['bureau_report']['results'][1]['response']['return']['Personas']['Persona'][0]['Cuentas']['Cuenta'].each do |account|
                                  .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                    .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                      strong
                                        | Nombre del Otorgante
                                    .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                      = account['NombreOtorgante']
                                    .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                      strong
                                        | Monto a pagar
                                    .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                      = number_to_currency account['MontoPagar']
                                    .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                      strong
                                        | Tipo de cuenta
                                    .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                      / =  account_type account['TipoCuenta']
                                      =  I18n.t("account_type.#{account['TipoCuenta']}")
                                  .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                    .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                      strong
                                        | Saldo actual
                                    .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                      = account['SaldoActual']
                                    .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                      strong
                                        | Saldo vencido
                                    .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                      = account['SaldoVencido']
                                    .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                      strong
                                        | Tipo de contrato
                                    .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                      / = contract_type account['TipoContrato']
                                      =  I18n.t("contract_type.#{account['TipoContrato']}")
                                    .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                      .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                        strong
                                          | Crédito maximo
                                      .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                        = number_to_currency account['CreditoMaximo']
                                      .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                        strong
                                          | Forma de Pago
                                      .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                        = method_payment account['FormaPagoActual']
                                      .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                        strong
                                          | Frecuencia de pagos
                                      .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                        =  I18n.t("payments_frecuency.#{account['FrecuenciaPagos']}")
                                      / = get_payments_frecuency account['FrecuenciaPagos']
                                    /.m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                      strong
                                        | Nombre de otorgante
                                    /.m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                      = account['NombreOtorgante']
                                .m-stack.m-stack--ver.m-stack--general.m-stack--demo.mt-2
                                  .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle.d-flex.justify-content-between.align-items-center.history-header
                                    h4.strong
                                      | Historial de pagos
                                    .history-icon
                                      i.fa.fa-calendar-check.fa-2x.lightgray-text
                                .m-stack.m-stack--ver.m-stack--general.m-stack--demo.history-table
                                  .m-stack__item.body-info-company.m-stack__item--middle
                                    strong
                                      | Mes
                                  .m-stack__item.body-info-company.m-stack__item--middle.text-center
                                    strong
                                      | E
                                  .m-stack__item.body-info-company.m-stack__item--middle.text-center
                                    strong
                                      | F
                                  .m-stack__item.body-info-company.m-stack__item--middle.text-center
                                    strong
                                      | M
                                  .m-stack__item.body-info-company.m-stack__item--middle.text-center
                                    strong
                                      | A
                                  .m-stack__item.body-info-company.m-stack__item--middle.text-center
                                    strong
                                      | M
                                  .m-stack__item.body-info-company.m-stack__item--middle.text-center
                                    strong
                                      | J
                                  .m-stack__item.body-info-company.m-stack__item--middle.text-center
                                    strong
                                      | J
                                  .m-stack__item.body-info-company.m-stack__item--middle.text-center
                                    strong
                                      | A
                                  .m-stack__item.body-info-company.m-stack__item--middle.text-center
                                    strong
                                      | S
                                  .m-stack__item.body-info-company.m-stack__item--middle.text-center
                                    strong
                                      | O
                                  .m-stack__item.body-info-company.m-stack__item--middle.text-center
                                    strong
                                      | N
                                  .m-stack__item.body-info-company.m-stack__item--middle.text-center
                                    strong
                                      | D
                                - get_history_payments(account).each do |key, value|
                                  .m-stack.m-stack--ver.m-stack--general.m-stack--demo.history-table
                                    .m-stack__item.body-info-company.m-stack__item--middle
                                      = key
                                    - value.each do |v|
                                      - if v[:value] == 0
                                        .m-stack__item.body-info-company.m-stack__item--middle
                                      - elsif v[:value] == '1'
                                        .m-stack__item.body-info-one.m-stack__item--middle
                                          strong
                                            = v[:value]
                                      - elsif v[:value] == '2'
                                        .m-stack__item.body-info-two.m-stack__item--middle
                                          strong
                                            = v[:value]
                                      - else
                                        .m-stack__item.body-info-x.m-stack__item--middle
                                          strong
                                            = v[:value]
                                hr.dotted
                              - else
                                .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                  .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                                    .m-alert__icon
                                      i.flaticon-exclamation-1
                                      span
                                    .m-alert__text
                                      strong
                                        | Aún no se encuentran cuentas.
                            - else
                              .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                                  .m-alert__icon
                                    i.flaticon-exclamation-1
                                    span
                                  .m-alert__text
                                    strong
                                      | Aún no se encuentran cuentas.
                        .m-demo data-code-html="true" data-code-js="false" data-code-preview="true"
                          .m-demo__preview
                            h3.m-portlet__head-text
                              | Consultas
                            - if @credit_bureau.bureau_report.present?
                              - @credit_bureau['bureau_report']['results'].each do |bureau_report|
                                - if bureau_report['status']
                                  .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                    .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                      =  I18n.t("report_type.#{bureau_report['metadata']['reportType']}")
                                    .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                      = bureau_report['status']
                                    .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                      = bureau_report['createdAt'].to_datetime.strftime('%d-%m-%Y')
                                    .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                      a href="/credit_bureaus/#{bureau_report['id']}"
                                        |Ver reporte
                            - else
                              .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                                  .m-alert__icon
                                    i.flaticon-exclamation-1
                                    span
                                  .m-alert__text
                                    strong
                                      | Aún no se encuentran consultas.


                      - else
                        .m-alert.m-alert--icon.m-alert--icon-solid.m-alert--outline.alert.alert-brand.alert-dismissible.fade.show role="alert"
                          .m-alert__icon
                            i.flaticon-exclamation-1
                            span
                          .m-alert__text
                            strong
                              | Aún no se le ha asignado el buro de crédito.







          .tab-pane id="info_sat"
            .col-xl-12
              .m-portlet
                .m-portlet__body
                  .m-section.mb-0
                    - if !@company.present?
                      .m-section__content
                        .no-results

                    - else
                    .m-section__sub
                      .row.m-section__sub style="display: flex"
                        .col-6.pl-0

                        .col-6.per-page-container

                    - if @company.info_company.present?
                      .m-section__content
                        .m-demo data-code-html="true" data-code-js="false" data-code-preview="true"

                          - if @company.info_company['hydra:member'].try(:first)['person'].present?
                            .m-demo__preview
                              h3.m-portlet__head-text
                                | Contribuyente
                              .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                  strong
                                    | R.F.C
                                .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                  = @company.info_company['hydra:member'].try(:first)['rfc']
                                .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                  strong
                                    | CIF
                                .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                  = @company.info_company['hydra:member'].try(:first)['cif']
                                .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                  strong
                                    | Estatus
                                .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                  = @company.info_company['hydra:member'].try(:first)['status']
                              .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                  strong
                                    | Inició operaciones en
                                .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                  = @company.info_company['hydra:member'].try(:first)['startedOperationsAt']
                                .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                  strong
                                    | Estado actualizado en
                                .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                  = @company.info_company['hydra:member'].try(:first)['statusUpdatedAt']
                                .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                  strong
                                    | CURP
                                .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                  = @company.info_company['hydra:member'].try(:first)['person']['curp']
                              .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                  strong
                                    | Nombre
                                .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                  = @company.info_company['hydra:member'].try(:first)['person']['firstName']
                                .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                  strong
                                    | Apellido Paterno
                                .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                  = @company.info_company['hydra:member'].try(:first)['person']['middleName']
                                .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                  strong
                                    | Apellido Materno
                                .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                  = @company.info_company['hydra:member'].try(:first)['person']['lastName']
                          - else
                            .m-demo__preview
                              h3.m-portlet__head-text
                                | Contribuyente
                              .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                  strong
                                    | R.F.C
                                .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                  = @company.info_company['hydra:member'].try(:first)['rfc']
                                .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                  strong
                                    | CIF
                                .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                  = @company.info_company['hydra:member'].try(:first)['cif']
                                .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                  strong
                                    | Estatus
                                .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                  = @company.info_company['hydra:member'].try(:first)['status']
                              .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                .m-stack__item.header-info-company.m-stack__item--center.m-stack__item--middle
                                  strong
                                    | Inició operaciones en
                                .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                  = @company.info_company['hydra:member'].try(:first)['startedOperationsAt']
                                .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                  strong
                                    | Estado actualizado en
                                .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                  = @company.info_company['hydra:member'].try(:first)['statusUpdatedAt']
                                .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                  strong
                                    | Nombre legal
                                .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                  = @company.info_company['hydra:member'].try(:first)['company']['legalName']
                              .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                                .m-stack__item.header-info-company.m-stack__item--center.m-stack__item--middle
                                  strong
                                    | Tipo de entidad
                                .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                  = @company.info_company['hydra:member'].try(:first)['company']['entityType']
                                .m-stack__item.header-info-company.m-stack__item--center.m-stack__item--middle
                                  strong
                                    | Nombre comercial
                                .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                  = @company.info_company['hydra:member'].try(:first)['company']['tradeName']

                        .m-demo data-code-html="true" data-code-js="false" data-code-preview="true"
                          .m-demo__preview
                            h3.m-portlet__head-text
                              | Dirección
                            .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                              .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                strong
                                  | Código postal
                              .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                = @company.info_company['hydra:member'].try(:first)['address']['postalCode']
                              .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                strong
                                  | Tipo de calle
                              .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                = @company.info_company['hydra:member'].try(:first)['address']['streetType']
                              .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                strong
                                  | Nombre de la calle
                              .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                = @company.info_company['hydra:member'].try(:first)['address']['streetName']
                            .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                              .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                strong
                                  | Referencias de calles
                              .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                - @company.info_company['hydra:member'].try(:first)['address']['streetReferences'].each do |references|
                                  = references + ' '
                              .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                strong
                                  | Número exterior
                              .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                = @company.info_company['hydra:member'].try(:first)['address']['streetNumber']
                              .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                strong
                                  | Número interior
                              .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                = @company.info_company['hydra:member'].try(:first)['address']['buildingNumber']
                            .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                              .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                strong
                                  | Vecindario
                              .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                = @company.info_company['hydra:member'].try(:first)['address']['neighborhood']
                              .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                strong
                                  | Localidad
                              .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                = @company.info_company['hydra:member'].try(:first)['address']['locality']
                              .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                strong
                                  | Municipio
                              .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                = @company.info_company['hydra:member'].try(:first)['address']['municipality']
                            .m-stack.m-stack--ver.m-stack--general.m-stack--demo
                              .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                strong
                                  | Estado
                              .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                = @company.info_company['hydra:member'].try(:first)['address']['state']
                              .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                strong
                                  | Email
                              .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                = @company.info_company['hydra:member'].try(:first)['email']
                              .m-stack__item.header-info-company.m-stack__item--left.m-stack__item--middle
                                strong
                                  | Teléfono
                              .m-stack__item.m-stack__item--left.body-info-company.m-stack__item--middle
                                = @company.info_company['hydra:member'].try(:first)['phone']

                        .m-section
                          .m-demo data-code-html="true" data-code-js="false" data-code-preview="true"
                            .m-demo__preview
                              h3.m-portlet__head-text
                                | Actividades económicas
                              .m-section__content
                                table.table
                                  thead.thead-default.thead-custom
                                    tr style="text-align: center;"
                                      th
                                        | Orden
                                      th
                                        | Actividad económica
                                      th
                                        | Porcentaje
                                      th
                                        | Fecha inicial
                                      th
                                        | Fecha final
                                  tbody
                                    - @company.info_company['hydra:member'].try(:first)['economicActivities'].each do |economic_activities|
                                      tr
                                        td
                                          = economic_activities['order']
                                        td
                                          = economic_activities['name']
                                        td
                                          = economic_activities['percentage']
                                        td
                                          = economic_activities['startDate']
                                        td
                                          = economic_activities['endDate']
                        .m-section
                          .m-demo data-code-html="true" data-code-js="false" data-code-preview="true"
                            .m-demo__preview
                              h3.m-portlet__head-text
                                | Regímenes
                              .m-section__content
                                table.table
                                  thead.thead-default.thead-custom
                                    tr style="text-align: center;"
                                      th
                                        | Régimen
                                      th
                                        | Fecha inicial
                                      th
                                        | Fecha final
                                  tbody
                                    - @company.info_company['hydra:member'].try(:first)['taxRegimes'].each do |regime|
                                      tr
                                        td
                                          = regime['name']
                                        td
                                          = regime['startDate']
                                        td
                                          = regime['endDate']

                        .m-section
                          .m-demo data-code-html="true" data-code-js="false" data-code-preview="true"
                            .m-demo__preview
                              h3.m-portlet__head-text
                                | Obligaciones
                              .m-section__content
                                table.table
                                  thead.thead-default.thead-custom
                                    tr style="text-align: center;"
                                      th
                                        | Descripción de la obligación
                                      th
                                        | Fecha de vencimiento
                                      th
                                        | Fecha inicial
                                      th
                                        | Fecha final
                                  tbody
                                    - @company.info_company['hydra:member'].try(:first)['obligations'].each do |obligation|
                                      tr
                                        td
                                          = obligation['description']
                                        td
                                          = obligation['dueDate']
                                        td
                                          = obligation['startDate']
                                        td
                                          = obligation['endDate']

#m_modal_1.modal.fade aria-hidden="true" aria-labelledby="exampleModalLabel" role="dialog" tabindex="-1"
  .modal-dialog role="document" style="margin-top: 0%;"
    .modal-content
      .modal-header
        h5#titleModalLabel.modal-title
        button.close aria-label="Close" data-dismiss="modal" type="button"
          span aria-hidden="true"
            | \&times;
      = form_for current_user, url: validate_company_path, method: 'PUT',class: 'class="m-form m-form--fit m-form--label-align-right m-form--group-seperator-dashed' do |f|
        .modal-body
          input type="hidden" name="id" id="companyId" value=""
          input type="hidden" name="approved" id="companyApproved" value=""
          p#textModal
            | Se va a validar la compañia para que pueda acceder al sistema.
        .modal-footer
          button.btn.btn-secondary data-dismiss="modal" type="button"
            | Cerrar
          button#idBtn.btn.btn-success type="submit"
            | Validar

#m_modal_balance.modal.fade aria-hidden="true" aria-labelledby="exampleModalLabel" role="dialog" tabindex="-1"
  .modal-dialog role="document" style="margin-top: 0%;"
    .modal-content
      .modal-header
        h5#titleModalLabel.modal-title
        button.close aria-label="Close" data-dismiss="modal" type="button"
          span aria-hidden="true"
            | \&times;
      = form_for current_user, url: asign_calendar_path, method: 'PUT', class: 'class="m-form m-form--fit m-form--label-align-right m-form--group-seperator-dashed' do |f|
        .modal-body
          p#textModal
            | Asignar
          .col-xl-12 style="display: grid;"
            input type="hidden" name="company_id" id="companyId" value=""
            input type="hidden" name="assign_to" id="companyAssignTo" value=""
            select.select2.select2-container.select2-multiple#company_balance_calendars multiple="multiple" name="periods[]"
              = @periods.each do |period|
                option value="#{period.id}"= period.period_name
        .modal-footer
          button.btn.btn-secondary data-dismiss="modal" type="button"
            | Cerrar
          button#idBtn.btn.btn-success type="submit"
            | Guardar

#m_modal_income.modal.fade aria-hidden="true" aria-labelledby="exampleModalLabel" role="dialog" tabindex="-1"
  .modal-dialog role="document" style="margin-top: 0%;"
    .modal-content
      .modal-header
        h5#titleModalLabel.modal-title
        button.close aria-label="Close" data-dismiss="modal" type="button"
          span aria-hidden="true"
            | \&times;
      = form_for current_user, url: asign_calendar_path, method: 'PUT', class: 'class="m-form m-form--fit m-form--label-align-right m-form--group-seperator-dashed' do |f|
        .modal-body
          p#textModal
            | Asignar
          .col-xl-12 style="display: grid;"
            input type="hidden" name="company_id" id="companyId" value=""
            input type="hidden" name="assign_to" id="companyAssignTo" value=""
            select.select2.select2-container.select2-multiple#company_income_calendars multiple="multiple" name="periods[]"
              = @periods.each do |period|
                option value="#{period.id}"= period.period_name
        .modal-footer
          button.btn.btn-secondary data-dismiss="modal" type="button"
            | Cerrar
          button#idBtn.btn.btn-success type="submit"
            | Guardar

#m_modal_analyst.modal.fade aria-hidden="true" aria-labelledby="exampleModalLabel" role="dialog" tabindex="-1"
  .modal-dialog role="document" style="margin-top: 0%;"
    .modal-content
      .modal-header
        h5#titleModalLabel.modal-title
        button.close aria-label="Close" data-dismiss="modal" type="button"
          span aria-hidden="true"
            | \&times;
      = form_for current_user, url: asign_details_to_request_path, method: 'PUT', class: 'class="m-form m-form--fit m-form--label-align-right m-form--group-seperator-dashed' do |f|
        .modal-body
          input type="hidden" name="company_id" id="companyId" value=""
          p#textModal
            | Asignar Analista
          .col-xl-12 style="display: grid;"
            = select("request", "analyst_id", User.all.where(role_id: Role.find_by(key:'analyst').try(:id)).collect {|p| [ p.full_name, p.id ] }, { include_blank: 'Selecciona analista', selected: @request.try(:analyst_id) }, {class: "form-control m-input"})
          p#textModal
            | Asignar Tipo de Crédito
          .col-xl-12 style="display: grid;"
            = select("request", "factor_credit_id",FactorCredit.all.collect { |p| [p.name, p.id] }, {include_blank: 'Selecciona tipo de crédito', selected: @request.try(:factor_credit_id)}, {class: "form-control m-input"})
          - if @request.try(:order).present?
            - if @request.try(:order) >= 2
              p#textModal
                | Asignar Status del Proceso
              .col-xl-12 style="display: grid;"
                = select("request", "process_status_id", ProcessStatus.all.collect {|p| [ p.name, p.id ] }, { include_blank: false, selected: @request.try(:process_status_id) }, {class: "form-control m-input"})
        .modal-footer
          button.btn.btn-secondary data-dismiss="modal" type="button"
            | Cerrar
          button#idBtn.btn.btn-success type="submit"
            | Guardar


#m_modal_financial_institutions.modal.fade aria-hidden="true" aria-labelledby="exampleModalLabel" role="dialog" tabindex="-1"
  .modal-dialog role="document" style="margin-top: 0%;"
    .modal-content
      .modal-header
        h5.modal-title
          = 'Instituciones financieras'
        button.close aria-label="Close" data-dismiss="modal" type="button"
          span aria-hidden="true"
            | \&times;
      .modal-body
        .col-xl-12 style="display: grid;"
          - @financial_inst.each do |fin_inst|
            .m-portlet.p-4
              .row
                .col-sm-6.d-flex.justify-content-between
                  span
                    strong.mr-2 = 'Institución'
                  span = fin_inst.institution
                .col-sm-6.d-flex.justify-content-between
                  span
                    strong.mr-2 = 'Tipo de Crédito'
                  span = CreditType.where(id: fin_inst.credit_type_id).first.try(:name)
              .row
                .col-sm-6.d-flex.justify-content-between
                  span
                    strong.mr-2 = 'Línea Autorizada'
                  span = fin_inst.authorized_line
                .col-sm-6.d-flex.justify-content-between
                  span
                    strong.mr-2 =  'Saldo'
                  span =  fin_inst.balance
              .row
                .col-sm-6.d-flex.justify-content-between
                  span
                    strong.mr-2 = 'Tipo de contrato'
                  span = fin_inst.type_contract
                .col-sm-6.d-flex.justify-content-between
                  span
                    strong.mr-2 = 'Moneda'
                  span = fin_inst.coin
              .row
                .col-sm-6.d-flex.justify-content-between
                  span
                    strong.mr-2 = 'Garantía'
                  span = fin_inst.warranty
                .col-sm-6.d-flex.justify-content-between
                  span
                    strong.mr-2 = 'Tasa'
                  span = fin_inst.rate
              .row
                .col-sm-6.d-flex.justify-content-between
                  span
                    strong.mr-2 = 'Vencimiento'
                  span = fin_inst.expiration
                .col-sm-6.d-flex.justify-content-between
                  span
                    strong.mr-2 = 'Destíno'
                  span = fin_inst.destiny

      .modal-footer
        button.btn.btn-secondary data-dismiss="modal" type="button"
          | Cerrar